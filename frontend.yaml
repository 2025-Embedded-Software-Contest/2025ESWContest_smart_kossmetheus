kiosk_mode:
  kiosk: True
views:
  - icon: mdi:home
    path: home
    type: sections
    max_columns: 2
    sections:
      - type: grid
        cards:
          - type: horizontal-stack
            cards:
              - type: custom:button-card
                entity: sensor.paul_nest_alarms
                show_icon: true
                show_name: true
                show_label: true
                show_state: false
                size: 24px
                icon: mdi:alarm
                label: 알람
                name: |
                  [[[
                    const v = states[entity.entity_id].state;
                    if (!v) return "—";
                    const d = new Date(v);
                    if (isNaN(d)) {
                      const m = (v || '').toString().match(/^(\d{2}):(\d{2})/);
                      return m ? `${m[1]}:${m[2]}` : v;
                    }
                    const hh = d.getHours().toString().padStart(2,'0');
                    const mm = d.getMinutes().toString().padStart(2,'0');
                    return `${hh}:${mm}`;
                  ]]]
                tap_action:
                  action: more-info
                styles:
                  card:
                    - padding: 0 36px 0 0
                    - background: none
                    - box-shadow: none
                    - border-radius: 0
                    - min-width: 120px
                  grid:
                    - grid-template-areas: '"i label" "i name"'
                    - grid-template-columns: min-content 1fr
                    - grid-template-rows: min-content min-content
                    - column-gap: 8px
                    - row-gap: 0px
                  icon:
                    - color: '#f5c977'
                    - width: 22px
                    - height: 22px
                    - align-self: center
                  label:
                    - grid-area: label
                    - font-size: 10px
                    - font-weight: 400
                    - letter-spacing: 0px
                    - color: var(--secondary-text-color,
                    - opacity: 0.7
                    - justify-self: start
                    - align-self: end
                    - text-align: left
                    - margin: 0
                    - padding: 0
                    - line-height: 1
                  name:
                    - grid-area: name
                    - font-size: 18px
                    - font-weight: 600
                    - color: var(--primary-text-color)
                    - justify-self: start
                    - align-self: start
                    - text-align: left
                    - margin: 0
                    - padding: 0
                    - line-height: 1.2
            grid_options:
              rows: auto
              columns: 5
          - type: horizontal-stack
            cards:
              - type: custom:button-card
                entity: weather.wn_jib
                show_icon: true
                show_name: true
                show_label: true
                show_state: false
                size: 24px
                icon: |
                  [[[
                    const m = {
                      sunny: 'mdi:weather-sunny',
                      'clear-night': 'mdi:weather-night',
                      cloudy: 'mdi:weather-cloudy',
                      partlycloudy: 'mdi:weather-partly-cloudy',
                      rainy: 'mdi:weather-pouring',
                      pouring: 'mdi:weather-pouring',
                      windy: 'mdi:weather-windy',
                      snowy: 'mdi:weather-snowy',
                      fog: 'mdi:weather-fog'
                    };
                    return m[states[entity.entity_id].state] || 'mdi:weather-partly-cloudy';
                  ]]]
                label: 날씨
                name: |
                  [[[
                    const t = states[entity.entity_id].attributes.temperature;
                    return (t !== undefined) ? (Number(t).toFixed(1) + "°C") : "—";
                  ]]]
                tap_action:
                  action: more-info
                styles:
                  card:
                    - padding: 0 16px 0 0
                    - background: none
                    - box-shadow: none
                    - border-radius: 0
                    - min-width: 120px
                  grid:
                    - grid-template-areas: '"i label" "i name"'
                    - grid-template-columns: min-content 1fr
                    - grid-template-rows: min-content min-content
                    - column-gap: 8px
                    - row-gap: 0px
                  icon:
                    - color: '#f5c842'
                    - width: 22px
                    - height: 22px
                    - align-self: center
                  label:
                    - grid-area: label
                    - font-size: 10px
                    - font-weight: 400
                    - letter-spacing: 0px
                    - color: var(--secondary-text-color,
                    - opacity: 0.7
                    - justify-self: start
                    - align-self: end
                    - text-align: left
                    - margin: 0
                    - padding: 0
                    - line-height: 1
                  name:
                    - grid-area: name
                    - font-size: 18px
                    - font-weight: 600
                    - color: var(--primary-text-color)
                    - justify-self: start
                    - align-self: start
                    - text-align: left
                    - margin: 0
                    - padding: 0
                    - line-height: 1.2
            grid_options:
              columns: 5
              rows: auto
          - type: horizontal-stack
            cards:
              - type: custom:button-card
                entity: sensor.average_indoor_temperature
                show_icon: true
                show_name: true
                show_label: true
                show_state: false
                size: 24px
                icon: mdi:thermometer
                label: 온도
                name: |
                  [[[
                    const v = Number(states[entity.entity_id].state);
                    return isNaN(v) ? states[entity.entity_id].state : v.toFixed(1) + "°C";
                  ]]]
                tap_action:
                  action: more-info
                styles:
                  card:
                    - padding: 0 16px 0 0
                    - background: none
                    - box-shadow: none
                    - border-radius: 0
                    - min-width: 120px
                  grid:
                    - grid-template-areas: '"i label" "i name"'
                    - grid-template-columns: min-content 1fr
                    - grid-template-rows: min-content min-content
                    - column-gap: 8px
                    - row-gap: 0px
                  icon:
                    - color: '#a7e97b'
                    - width: 22px
                    - height: 22px
                    - align-self: center
                  label:
                    - grid-area: label
                    - font-size: 10px
                    - font-weight: 400
                    - letter-spacing: 0px
                    - color: var(--secondary-text-color,
                    - opacity: 0.7
                    - justify-self: start
                    - align-self: end
                    - text-align: left
                    - margin: 0
                    - padding: 0
                    - line-height: 1
                  name:
                    - grid-area: name
                    - font-size: 18px
                    - font-weight: 600
                    - color: var(--primary-text-color)
                    - justify-self: start
                    - align-self: start
                    - text-align: left
                    - margin: 0
                    - padding: 0
                    - line-height: 1.2
            grid_options:
              rows: auto
              columns: 5
          - type: horizontal-stack
            cards:
              - type: custom:button-card
                entity: sensor.average_indoor_humidity
                show_icon: true
                show_name: true
                show_label: true
                show_state: false
                size: 24px
                icon: mdi:water-percent
                label: 습도
                name: |
                  [[[
                    const v = Number(states[entity.entity_id].state);
                    return isNaN(v) ? states[entity.entity_id].state : v.toFixed(1) + "%";
                  ]]]
                tap_action:
                  action: more-info
                styles:
                  card:
                    - padding: 0 16px 0 0
                    - background: none
                    - box-shadow: none
                    - border-radius: 0
                    - min-width: 120px
                  grid:
                    - grid-template-areas: '"i label" "i name"'
                    - grid-template-columns: min-content 1fr
                    - grid-template-rows: min-content min-content
                    - column-gap: 8px
                    - row-gap: 0px
                  icon:
                    - color: '#68b7ff'
                    - width: 22px
                    - height: 22px
                    - align-self: center
                  label:
                    - grid-area: label
                    - font-size: 10px
                    - font-weight: 400
                    - letter-spacing: 0px
                    - color: var(--secondary-text-color,
                    - opacity: 0.7
                    - justify-self: start
                    - align-self: end
                    - text-align: left
                    - margin: 0
                    - padding: 0
                    - line-height: 1
                  name:
                    - grid-area: name
                    - font-size: 18px
                    - font-weight: 600
                    - color: var(--primary-text-color)
                    - justify-self: start
                    - align-self: start
                    - text-align: left
                    - margin: 0
                    - padding: 0
                    - line-height: 1.2
            grid_options:
              columns: 5
              rows: auto
          - type: horizontal-stack
            cards:
              - type: custom:button-card
                entity: sensor.sihas_energy_monitor_energy
                show_icon: true
                show_name: true
                show_label: true
                show_state: false
                size: 24px
                icon: mdi:lightning-bolt
                label: 에너지
                name: |
                  [[[
                    const v = Number(states[entity.entity_id].state);
                    return isNaN(v) ? states[entity.entity_id].state : Math.round(v) + "kWh";
                  ]]]
                tap_action:
                  action: more-info
                styles:
                  card:
                    - padding: 0 16px 0 0
                    - background: none
                    - box-shadow: none
                    - border-radius: 0
                    - min-width: 120px
                  grid:
                    - grid-template-areas: '"i label" "i name"'
                    - grid-template-columns: min-content 1fr
                    - grid-template-rows: min-content min-content
                    - column-gap: 8px
                    - row-gap: 0px
                  icon:
                    - color: '#ffde82'
                    - width: 22px
                    - height: 22px
                    - align-self: center
                  label:
                    - grid-area: label
                    - font-size: 10px
                    - font-weight: 400
                    - letter-spacing: 0px
                    - color: var(--secondary-text-color,
                    - opacity: 0.7
                    - justify-self: start
                    - align-self: end
                    - text-align: left
                    - margin: 0
                    - padding: 0
                    - line-height: 1
                  name:
                    - grid-area: name
                    - font-size: 18px
                    - font-weight: 600
                    - color: var(--primary-text-color)
                    - justify-self: start
                    - align-self: start
                    - text-align: left
                    - margin: 0
                    - padding: 0
                    - line-height: 1.2
            grid_options:
              columns: 4
              rows: auto
          - square: false
            type: grid
            cards:
              - type: custom:button-card
                entity: person.gimseonghyeog
                variables:
                  sensor: sensor.gimuhyeonyi_apple_watch_battery
                show_state: true
                show_entity_picture: true
                tap_action:
                  action: more-info
                state:
                  - value: not_home
                    styles:
                      entity_picture:
                        - filter: grayscale(100%)
                styles:
                  grid:
                    - grid-template-areas: '"i n btn" "i s btn"'
                    - grid-template-columns: 60px 1fr min-content
                    - grid-template-rows: min-content min-content
                  card:
                    - background-color: var(--contrast2)
                    - padding: 10px 10px 10px 0px
                  img_cell:
                    - justify-content: start
                    - position: absolute
                    - width: 40px
                    - height: 40px
                    - left: 0
                    - bottom: 0
                    - margin: 0 0 8px 10px
                    - border-radius: 50%
                    - border: |
                        [[[
                          if (entity.state === 'home') {
                            return '2px solid var(--green)';
                          } else {
                            return 'none';
                          }
                        ]]]
                  entity_picture:
                    - width: 40px
                    - height: 40px
                  name:
                    - align-self: start
                    - justify-self: start
                    - color: var(--contrast20)
                    - font-size: 14px
                    - font-weight: 600
                  state:
                    - align-self: start
                    - justify-self: start
                    - color: var(--contrast20)
                    - font-size: 12px
                    - opacity: 0.7
                    - margin-top: '-5px'
                  custom_fields:
                    btn:
                      - align-self: end
                      - justify-self: end
                    badge:
                      - position: absolute
                      - left: 38px
                      - top: 5px
                custom_fields:
                  badge:
                    card:
                      type: custom:button-card
                      entity: '[[[ return entity.entity_id ]]]'
                      show_icon: true
                      show_name: false
                      state:
                        - value: home
                          icon: mdi:home
                          styles:
                            card:
                              - background: var(--green)
                        - value: not_home
                          icon: mdi:home-export-outline
                          styles:
                            card:
                              - background: var(--red)
                      styles:
                        card:
                          - border-radius: 50%
                          - width: 16px
                          - height: 16px
                          - background: none
                        icon:
                          - color: black
                          - width: 12px
                  btn:
                    card:
                      type: custom:mushroom-chips-card
                      chips:
                        - type: entity
                          entity: '[[[ return variables.sensor ]]]'
                          tap_action:
                            action: more-info
                          content_info: none
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: var(--contrast1);
                                --color: var(--contrast20);
                                padding: 0px !important;
                                box-shadow: none !important;
                              }
            columns: 1
            grid_options:
              columns: 5
              rows: auto
          - square: false
            type: grid
            cards:
              - type: custom:button-card
                entity: person.gimyeji
                variables:
                  sensor: sensor.gimyeji_iphone_battery_level
                show_state: true
                show_entity_picture: true
                tap_action:
                  action: more-info
                state:
                  - value: not_home
                    styles:
                      entity_picture:
                        - filter: grayscale(100%)
                styles:
                  grid:
                    - grid-template-areas: '"i n btn" "i s btn"'
                    - grid-template-columns: 60px 1fr min-content
                    - grid-template-rows: min-content min-content
                  card:
                    - background-color: var(--contrast2)
                    - padding: 10px 10px 10px 0px
                  img_cell:
                    - justify-content: start
                    - position: absolute
                    - width: 40px
                    - height: 40px
                    - left: 0
                    - bottom: 0
                    - margin: 0 0 8px 10px
                    - border-radius: 50%
                    - border: |
                        [[[
                          if (entity.state === 'home') {
                            return '2px solid var(--green)';
                          } else {
                            return 'none';
                          }
                        ]]]
                  entity_picture:
                    - width: 40px
                    - height: 40px
                  name:
                    - align-self: start
                    - justify-self: start
                    - color: var(--contrast20)
                    - font-size: 14px
                    - font-weight: 600
                  state:
                    - align-self: start
                    - justify-self: start
                    - color: var(--contrast20)
                    - font-size: 12px
                    - opacity: 0.7
                    - margin-top: '-5px'
                  custom_fields:
                    btn:
                      - align-self: end
                      - justify-self: end
                    badge:
                      - position: absolute
                      - left: 38px
                      - top: 5px
                custom_fields:
                  badge:
                    card:
                      type: custom:button-card
                      entity: '[[[ return entity.entity_id ]]]'
                      show_icon: true
                      show_name: false
                      state:
                        - value: home
                          icon: mdi:home
                          styles:
                            card:
                              - background: var(--green)
                        - value: not_home
                          icon: mdi:home-export-outline
                          styles:
                            card:
                              - background: var(--red)
                      styles:
                        card:
                          - border-radius: 50%
                          - width: 16px
                          - height: 16px
                          - background: none
                        icon:
                          - color: black
                          - width: 12px
                  btn:
                    card:
                      type: custom:mushroom-chips-card
                      chips:
                        - type: entity
                          entity: '[[[ return variables.sensor ]]]'
                          tap_action:
                            action: more-info
                          content_info: none
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: var(--contrast1);
                                --color: var(--contrast20);
                                padding: 0px !important;
                                box-shadow: none !important;
                              }
            grid_options:
              rows: auto
              columns: 5
            columns: 1
          - square: false
            type: grid
            cards:
              - type: custom:button-card
                entity: person.mrpc2003
                variables:
                  sensor: sensor.gimuhyeonyi_apple_watch_battery
                show_state: true
                show_entity_picture: true
                tap_action:
                  action: more-info
                state:
                  - value: not_home
                    styles:
                      entity_picture:
                        - filter: grayscale(100%)
                styles:
                  grid:
                    - grid-template-areas: '"i n btn" "i s btn"'
                    - grid-template-columns: 60px 1fr min-content
                    - grid-template-rows: min-content min-content
                  card:
                    - background-color: var(--contrast2)
                    - padding: 10px 10px 10px 0px
                  img_cell:
                    - justify-content: start
                    - position: absolute
                    - width: 40px
                    - height: 40px
                    - left: 0
                    - bottom: 0
                    - margin: 0 0 8px 10px
                    - border-radius: 50%
                    - border: |
                        [[[
                          if (entity.state === 'home') {
                            return '2px solid var(--green)';
                          } else {
                            return 'none';
                          }
                        ]]]
                  entity_picture:
                    - width: 40px
                    - height: 40px
                  name:
                    - align-self: start
                    - justify-self: start
                    - color: var(--contrast20)
                    - font-size: 14px
                    - font-weight: 600
                  state:
                    - align-self: start
                    - justify-self: start
                    - color: var(--contrast20)
                    - font-size: 12px
                    - opacity: 0.7
                    - margin-top: '-5px'
                  custom_fields:
                    btn:
                      - align-self: end
                      - justify-self: end
                    badge:
                      - position: absolute
                      - left: 38px
                      - top: 5px
                custom_fields:
                  badge:
                    card:
                      type: custom:button-card
                      entity: '[[[ return entity.entity_id ]]]'
                      show_icon: true
                      show_name: false
                      state:
                        - value: home
                          icon: mdi:home
                          styles:
                            card:
                              - background: var(--green)
                        - value: not_home
                          icon: mdi:home-export-outline
                          styles:
                            card:
                              - background: var(--red)
                      styles:
                        card:
                          - border-radius: 50%
                          - width: 16px
                          - height: 16px
                          - background: none
                        icon:
                          - color: black
                          - width: 12px
                  btn:
                    card:
                      type: custom:mushroom-chips-card
                      chips:
                        - type: entity
                          entity: '[[[ return variables.sensor ]]]'
                          tap_action:
                            action: more-info
                          content_info: none
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: var(--contrast1);
                                --color: var(--contrast20);
                                padding: 0px !important;
                                box-shadow: none !important;
                              }
            grid_options:
              columns: 5
              rows: auto
            columns: 1
          - square: false
            type: grid
            cards:
              - type: custom:button-card
                entity: person.iilhwan
                variables:
                  sensor: sensor.iilhwanyi_iphone_battery_level
                show_state: true
                show_entity_picture: true
                tap_action:
                  action: more-info
                state:
                  - value: not_home
                    styles:
                      entity_picture:
                        - filter: grayscale(100%)
                styles:
                  grid:
                    - grid-template-areas: '"i n btn" "i s btn"'
                    - grid-template-columns: 60px 1fr min-content
                    - grid-template-rows: min-content min-content
                  card:
                    - background-color: var(--contrast2)
                    - padding: 10px 10px 10px 0px
                  img_cell:
                    - justify-content: start
                    - position: absolute
                    - width: 40px
                    - height: 40px
                    - left: 0
                    - bottom: 0
                    - margin: 0 0 8px 10px
                    - border-radius: 50%
                    - border: |
                        [[[
                          if (entity.state === 'home') {
                            return '2px solid var(--green)';
                          } else {
                            return 'none';
                          }
                        ]]]
                  entity_picture:
                    - width: 40px
                    - height: 40px
                  name:
                    - align-self: start
                    - justify-self: start
                    - color: var(--contrast20)
                    - font-size: 14px
                    - font-weight: 600
                  state:
                    - align-self: start
                    - justify-self: start
                    - color: var(--contrast20)
                    - font-size: 12px
                    - opacity: 0.7
                    - margin-top: '-5px'
                  custom_fields:
                    btn:
                      - align-self: end
                      - justify-self: end
                    badge:
                      - position: absolute
                      - left: 38px
                      - top: 5px
                custom_fields:
                  badge:
                    card:
                      type: custom:button-card
                      entity: '[[[ return entity.entity_id ]]]'
                      show_icon: true
                      show_name: false
                      state:
                        - value: home
                          icon: mdi:home
                          styles:
                            card:
                              - background: var(--green)
                        - value: not_home
                          icon: mdi:home-export-outline
                          styles:
                            card:
                              - background: var(--red)
                      styles:
                        card:
                          - border-radius: 50%
                          - width: 16px
                          - height: 16px
                          - background: none
                        icon:
                          - color: black
                          - width: 12px
                  btn:
                    card:
                      type: custom:mushroom-chips-card
                      chips:
                        - type: entity
                          entity: '[[[ return variables.sensor ]]]'
                          tap_action:
                            action: more-info
                          content_info: none
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: var(--contrast1);
                                --color: var(--contrast20);
                                padding: 0px !important;
                                box-shadow: none !important;
                              }
            grid_options:
              columns: 5
              rows: auto
            columns: 1
          - square: false
            type: grid
            cards:
              - type: custom:button-card
                entity: person.jeonyecan
                variables:
                  sensor: sensor.gimuhyeonyi_apple_watch_battery
                show_state: true
                show_entity_picture: true
                tap_action:
                  action: more-info
                state:
                  - value: not_home
                    styles:
                      entity_picture:
                        - filter: grayscale(100%)
                styles:
                  grid:
                    - grid-template-areas: '"i n btn" "i s btn"'
                    - grid-template-columns: 60px 1fr min-content
                    - grid-template-rows: min-content min-content
                  card:
                    - background-color: var(--contrast2)
                    - padding: 10px 10px 10px 0px
                  img_cell:
                    - justify-content: start
                    - position: absolute
                    - width: 40px
                    - height: 40px
                    - left: 0
                    - bottom: 0
                    - margin: 0 0 8px 10px
                    - border-radius: 50%
                    - border: |
                        [[[
                          if (entity.state === 'home') {
                            return '2px solid var(--green)';
                          } else {
                            return 'none';
                          }
                        ]]]
                  entity_picture:
                    - width: 40px
                    - height: 40px
                  name:
                    - align-self: start
                    - justify-self: start
                    - color: var(--contrast20)
                    - font-size: 14px
                    - font-weight: 600
                  state:
                    - align-self: start
                    - justify-self: start
                    - color: var(--contrast20)
                    - font-size: 12px
                    - opacity: 0.7
                    - margin-top: '-5px'
                  custom_fields:
                    btn:
                      - align-self: end
                      - justify-self: end
                    badge:
                      - position: absolute
                      - left: 38px
                      - top: 5px
                custom_fields:
                  badge:
                    card:
                      type: custom:button-card
                      entity: '[[[ return entity.entity_id ]]]'
                      show_icon: true
                      show_name: false
                      state:
                        - value: home
                          icon: mdi:home
                          styles:
                            card:
                              - background: var(--green)
                        - value: not_home
                          icon: mdi:home-export-outline
                          styles:
                            card:
                              - background: var(--red)
                      styles:
                        card:
                          - border-radius: 50%
                          - width: 16px
                          - height: 16px
                          - background: none
                        icon:
                          - color: black
                          - width: 12px
                  btn:
                    card:
                      type: custom:mushroom-chips-card
                      chips:
                        - type: entity
                          entity: '[[[ return variables.sensor ]]]'
                          tap_action:
                            action: more-info
                          content_info: none
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: var(--contrast1);
                                --color: var(--contrast20);
                                padding: 0px !important;
                                box-shadow: none !important;
                              }
            columns: 1
            grid_options:
              columns: 4
              rows: auto
        column_span: 2
      - type: grid
        cards:
          - type: heading
            heading_style: title
            badges:
              - type: entity
                entity: sensor.time_date
            grid_options:
              columns: full
              rows: 1
          - type: picture-elements
            image: /local/floor/main.png
            elements:
              - type: image
                entity: switch.sihas_switch_4
                image: /local/floor/ahyeon-room-on.png
                state_filter:
                  'on': opacity(1)
                  'off': opacity(0)
                  unknown: opacity(0)
                  unavailable: opacity(0)
                style:
                  top: 50%
                  left: 50%
                  width: 100%
                  transform: translate(-50%, -50%)
                  pointer-events: none
                  mix-blend-mode: lighten
              - type: image
                entity: switch.sihas_switch_5
                image: /local/floor/woohyeon-room-on.png
                state_filter:
                  'on': opacity(1)
                  'off': opacity(0)
                  unknown: opacity(0)
                  unavailable: opacity(0)
                style:
                  top: 50%
                  left: 50%
                  width: 100%
                  transform: translate(-50%, -50%)
                  pointer-events: none
                  mix-blend-mode: lighten
              - type: image
                entity: light.smart_bulb_3
                image: /local/floor/master-bedroom-lamp-on.png
                state_filter:
                  'on': opacity(1)
                  'off': opacity(0)
                  unknown: opacity(0)
                  unavailable: opacity(0)
                style:
                  top: 50%
                  left: 50%
                  width: 100%
                  transform: translate(-50%, -50%)
                  pointer-events: none
                  mix-blend-mode: lighten
              - type: image
                entity: switch.anbang_hwajangsil_deung
                image: /local/floor/master-bedroom-bathroom-left-on.png
                state_filter:
                  'on': opacity(1)
                  'off': opacity(0)
                  unknown: opacity(0)
                  unavailable: opacity(0)
                style:
                  top: 50%
                  left: 50%
                  width: 100%
                  transform: translate(-50%, -50%)
                  pointer-events: none
                  mix-blend-mode: lighten
              - type: image
                entity: switch.anbang_syaweosil_deung
                image: /local/floor/master-bedroom-bathroom-upper-on.png
                state_filter:
                  'on': opacity(1)
                  'off': opacity(0)
                  unknown: opacity(0)
                  unavailable: opacity(0)
                style:
                  top: 50%
                  left: 50%
                  width: 100%
                  transform: translate(-50%, -50%)
                  pointer-events: none
                  mix-blend-mode: lighten
              - type: image
                entity: switch.deureseurum_deung
                image: /local/floor/dressing-room-on.png
                state_filter:
                  'on': opacity(1)
                  'off': opacity(0)
                  unknown: opacity(0)
                  unavailable: opacity(0)
                style:
                  top: 50%
                  left: 50%
                  width: 100%
                  transform: translate(-50%, -50%)
                  pointer-events: none
                  mix-blend-mode: lighten
              - type: image
                entity: switch.geosil_jomyeong_1beon
                image: /local/floor/living-room-light-left-on.png
                state_filter:
                  'on': opacity(1)
                  'off': opacity(0)
                  unknown: opacity(0)
                  unavailable: opacity(0)
                style:
                  top: 50%
                  left: 50%
                  width: 100%
                  transform: translate(-50%, -50%)
                  pointer-events: none
                  mix-blend-mode: lighten
              - type: image
                entity: switch.geosil_jomyeong_2beon
                image: /local/floor/living-room-light-right-on.png
                state_filter:
                  'on': opacity(1)
                  'off': opacity(0)
                  unknown: opacity(0)
                  unavailable: opacity(0)
                style:
                  top: 50%
                  left: 50%
                  width: 100%
                  transform: translate(-50%, -50%)
                  pointer-events: none
                  mix-blend-mode: lighten
              - type: image
                entity: switch.geosil_jomyeong_3beon
                image: /local/floor/3-socket-on.png
                state_filter:
                  'on': opacity(1)
                  'off': opacity(0)
                  unknown: opacity(0)
                  unavailable: opacity(0)
                style:
                  top: 50%
                  left: 50%
                  width: 100%
                  transform: translate(-50%, -50%)
                  pointer-events: none
                  mix-blend-mode: lighten
              - type: image
                entity: switch.sihas_switch_2
                image: /local/floor/kitchen-light-upper-on.png
                state_filter:
                  'on': opacity(1)
                  'off': opacity(0)
                  unknown: opacity(0)
                  unavailable: opacity(0)
                style:
                  top: 50%
                  left: 50%
                  width: 100%
                  transform: translate(-50%, -50%)
                  pointer-events: none
                  mix-blend-mode: lighten
              - type: image
                entity: switch.sihas_switch_1
                image: /local/floor/kitchen-light-left-on.png
                state_filter:
                  'on': opacity(1)
                  'off': opacity(0)
                  unknown: opacity(0)
                  unavailable: opacity(0)
                style:
                  top: 50%
                  left: 50%
                  width: 100%
                  transform: translate(-50%, -50%)
                  pointer-events: none
                  mix-blend-mode: lighten
              - type: image
                entity: switch.sihas_switch_3
                image: /local/floor/dining-table-light-on.png
                state_filter:
                  'on': opacity(1)
                  'off': opacity(0)
                  unknown: opacity(0)
                  unavailable: opacity(0)
                style:
                  top: 50%
                  left: 50%
                  width: 100%
                  transform: translate(-50%, -50%)
                  pointer-events: none
                  mix-blend-mode: lighten
              - type: image
                entity: switch.sihas_switch_4
                image: >-
                  data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==
                tap_action:
                  action: navigate
                  navigation_path: '#ahyun-room'
                style:
                  top: 62%
                  left: 8%
                  width: 22%
                  height: 22%
                  transform: translate(65%, -58%) scale(77%, 90%)
                  pointer-events: auto
                  z-index: 3
                  box-sizing: border-box
                  border: 5px solid red
                  opacity: 0
                hold_action:
                  action: toggle
                title: 아현이방
              - type: image
                entity: switch.sihas_switch_5
                image: >-
                  data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==
                tap_action:
                  action: navigate
                  navigation_path: '#woohyun-room'
                hold_action:
                  action: toggle
                style:
                  top: 62%
                  left: 30%
                  width: 22%
                  height: 22%
                  transform: translate(-120%, -58%) scale(80%, 94%)
                  pointer-events: auto
                  z-index: 3
                  box-sizing: border-box
                  border: 5px solid red
                  opacity: 0
                title: 우현이방
              - type: image
                entity: light.smart_bulb_3
                image: >-
                  data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==
                tap_action:
                  action: navigate
                  navigation_path: '#inner-room'
                hold_action:
                  action: toggle
                style:
                  top: 56%
                  left: 70%
                  width: 27%
                  height: 28%
                  transform: translate(-2%, -60%) scale(80%, 70%)
                  pointer-events: auto
                  z-index: 3
                  box-sizing: border-box
                  border: 5px solid red
                  opacity: 0
                title: 안방
              - type: image
                entity: switch.anbang_hwajangsil_deung
                image: >-
                  data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==
                tap_action:
                  action: navigate
                  navigation_path: '#master-bathroom-wc'
                hold_action:
                  action: toggle
                style:
                  top: 33%
                  left: 80%
                  width: 15%
                  height: 16%
                  transform: translate(-75%,-50%) scale(70%, 90%)
                  pointer-events: auto
                  z-index: 3
                  box-sizing: border-box
                  border: 5px solid red
                  opacity: 0
                title: 안방 화장실
              - type: image
                entity: switch.geosil_jomyeong_1beon
                image: >-
                  data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==
                tap_action:
                  action: navigate
                  navigation_path: '#living-room'
                hold_action:
                  action: toggle
                style:
                  top: 18%
                  left: 76%
                  width: 22%
                  height: 17%
                  transform: translate(-140%, 180%) scale(110%, 170%)
                  pointer-events: auto
                  z-index: 3
                  box-sizing: border-box
                  border: 5px solid red
                  opacity: 0
                title: 거실
              - type: image
                image: >-
                  data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==
                tap_action:
                  action: navigate
                  navigation_path: '#beranda'
                hold_action:
                  action: none
                style:
                  top: 18%
                  left: 76%
                  width: 22%
                  height: 17%
                  transform: translate(-37%, 247%) scale(64%, 50%)
                  pointer-events: auto
                  z-index: 3
                  box-sizing: border-box
                  border: 5px solid red
                  opacity: 0
                title: 안방 베란다
              - type: image
                entity: switch.deureseurum_deung
                image: >-
                  data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==
                tap_action:
                  action: navigate
                  navigation_path: '#dress-room'
                hold_action:
                  action: toggle
                style:
                  top: 18%
                  left: 76%
                  width: 22%
                  height: 17%
                  transform: translate(8%, -10%) scale(54%, 90%)
                  pointer-events: auto
                  z-index: 3
                  box-sizing: border-box
                  border: 5px solid red
                  opacity: 0
                title: 드레스룸
              - type: image
                image: >-
                  data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==
                tap_action:
                  action: more-info
                hold_action:
                  action: none
                style:
                  top: 18%
                  left: 76%
                  width: 22%
                  height: 17%
                  transform: translate(-350%, 90%) scale(44%, 79%)
                  pointer-events: auto
                  z-index: 3
                  box-sizing: border-box
                  border: 5px solid red
                  opacity: 0
                title: 복도 화장실
              - type: image
                image: >-
                  data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==
                hold_action:
                  action: none
                style:
                  top: 18%
                  left: 76%
                  width: 22%
                  height: 17%
                  transform: translate(-300%, 50%) scale(42%, 60%)
                  pointer-events: auto
                  z-index: 3
                  box-sizing: border-box
                  border: 5px solid red
                  opacity: 0
                camera_image: camera.camera_hub_g5pro_9489
                camera_view: live
                title: 현관
              - type: image
                entity: switch.sihas_switch_2
                image: >-
                  data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==
                tap_action:
                  action: navigate
                  navigation_path: '#kitchen'
                hold_action:
                  action: toggle
                style:
                  top: 18%
                  left: 76%
                  width: 22%
                  height: 17%
                  transform: translate(-138%, -30%) scale(70%, 100%)
                  pointer-events: auto
                  z-index: 3
                  box-sizing: border-box
                  border: 5px solid red
                  opacity: 0
                title: 주방
              - type: image
                image: >-
                  data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==
                tap_action:
                  action: navigate
                  navigation_path: '#laundry-room'
                hold_action:
                  action: none
                style:
                  top: 18%
                  left: 76%
                  width: 22%
                  height: 17%
                  transform: translate(-60%, -43%) scale(73%, 72%)
                  pointer-events: auto
                  z-index: 3
                  box-sizing: border-box
                  border: 5px solid red
                  opacity: 0
                title: 세탁실
          - type: custom:bubble-card
            card_type: separator
            name: 즐겨찾기
            icon: mdi:star-box-multiple
            card_layout: large
            sub_button:
              - tap_action:
                  action: call-service
                  service: browser_mod.popup
                  data:
                    deviceID:
                      - this
                    title: 모바일 알림 보내기
                    size: normal
                    content:
                      type: custom:notify-card
                      card_title: 알림 전송
                      label: 알림 내용
                      action: notify.mobile_app_sm_s936n
                      data:
                        message: '{{ msg }}'
                icon: mdi:cellphone-message
              - tap_action:
                  action: call-service
                  service: browser_mod.popup
                  data:
                    title: 음성 안내 보내기
                    size: wide
                    content:
                      type: horizontal-stack
                      cards:
                        - type: entities
                          entities:
                            - entity: input_text.message_to_bedroom
                              name: 안내 메시지
                              icon: mdi:chat
                            - entity: input_select.tts_target_speaker
                              name: 스피커 선택
                              icon: mdi:speaker
                        - type: custom:button-card
                          icon: hass:send
                          show_icon: true
                          show_name: false
                          styles:
                            card:
                              - height: 90px
                              - width: 90px
                          tap_action:
                            action: call-service
                            service: script.turn_on
                            service_data:
                              entity_id: script.announce_tts_message
                icon: mdi:volume-high
            grid_options:
              columns: full
          - type: grid
            square: false
            columns: 2
            cards:
              - type: custom:button-card
                entity: lock.aqara_smart_lock_l100
                name: 🏠 현관문 도어락
                icon: mdi:door-closed-lock
                tap_action:
                  action: more-info
                  entity: camera.camera_hub_g5pro_9489
                hold_action:
                  action: more-info
                  entity: lock.aqara_smart_lock_l100
                styles:
                  card:
                    - border-radius: 24px
                    - padding: 20px
                    - background: |
                        [[[
                          if (states['lock.aqara_smart_lock_l100'].state === 'locked')
                            return 'linear-gradient(135deg, #0f172a 0%, #1f2937 100%)';
                          else
                            return 'linear-gradient(135deg, #1f2937 0%, #334155 100%)';
                        ]]]
                    - box-shadow: |
                        [[[
                          if (states['lock.aqara_smart_lock_l100'].state === 'locked')
                            return '0 8px 24px rgba(2, 6, 23, 0.45)';
                          else
                            return '0 8px 24px rgba(15, 23, 42, 0.5)';
                        ]]]
                    - transition: all 0.3s ease
                  name:
                    - font-size: 16px
                    - font-weight: 600
                    - color: white
                    - text-shadow: 0 2px 4px rgba(0,0,0,0.3)
                  icon:
                    - width: 32px
                    - height: 32px
                    - color: white
                    - filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3))
                state:
                  - value: locked
                    icon: mdi:door-closed-lock
                    styles:
                      card:
                        - background: 'linear-gradient(135deg, #0f172a 0%, #1f2937 100%)'
                        - box-shadow: 0 8px 24px rgba(2, 6, 23, 0.45)
                  - value: unlocked
                    icon: mdi:door-open
                    styles:
                      card:
                        - background: 'linear-gradient(135deg, #1f2937 0%, #334155 100%)'
                        - box-shadow: 0 8px 24px rgba(15, 23, 42, 0.5)
              - type: custom:button-card
                entity: switch.robot_vacuum_switch
                name: 🤖 로봇 청소기
                icon: mdi:robot-vacuum
                tap_action:
                  action: toggle
                styles:
                  card:
                    - border-radius: 24px
                    - padding: 20px
                    - background: |
                        [[[
                          if (states['switch.robot_vacuum_switch'].state === 'on')
                            return 'linear-gradient(135deg, #0e7490 0%, #0891b2 100%)';
                          else
                            return 'linear-gradient(135deg, #0b1220 0%, #131c2b 100%)';
                        ]]]
                    - box-shadow: |
                        [[[
                          if (states['switch.robot_vacuum_switch'].state === 'on')
                            return '0 8px 24px rgba(14, 116, 144, 0.45)';
                          else
                            return '0 8px 24px rgba(2, 6, 23, 0.45)';
                        ]]]
                    - transition: all 0.3s ease
                  name:
                    - font-size: 16px
                    - font-weight: 600
                    - color: white
                    - text-shadow: 0 2px 4px rgba(0,0,0,0.3)
                  icon:
                    - width: 32px
                    - height: 32px
                    - color: white
                    - filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3))
                state:
                  - value: 'on'
                    styles:
                      card:
                        - background: 'linear-gradient(135deg, #0e7490 0%, #0891b2 100%)'
                        - box-shadow: 0 8px 24px rgba(14, 116, 144, 0.45)
              - type: custom:button-card
                entity: switch.ventilator_power
                name: 💨 전열교환기
                icon: mdi:fan
                tap_action:
                  action: toggle
                styles:
                  card:
                    - border-radius: 24px
                    - padding: 20px
                    - background: |
                        [[[
                          if (states['switch.ventilator_power'].state === 'on')
                            return 'linear-gradient(135deg, #a21caf 0%, #7e22ce 100%)';
                          else
                            return 'linear-gradient(135deg, #0b1220 0%, #131c2b 100%)';
                        ]]]
                    - box-shadow: |
                        [[[
                          if (states['switch.ventilator_power'].state === 'on')
                            return '0 8px 24px rgba(126, 34, 206, 0.45)';
                          else
                            return '0 8px 24px rgba(2, 6, 23, 0.45)';
                        ]]]
                    - transition: all 0.3s ease
                  name:
                    - font-size: 16px
                    - font-weight: 600
                    - color: white
                    - text-shadow: 0 2px 4px rgba(0,0,0,0.3)
                  icon:
                    - width: 32px
                    - height: 32px
                    - color: white
                    - filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3))
                state:
                  - value: 'on'
                    styles:
                      card:
                        - background: 'linear-gradient(135deg, #a21caf 0%, #7e22ce 100%)'
                        - box-shadow: 0 8px 24px rgba(126, 34, 206, 0.45)
              - type: custom:button-card
                entity: switch.esp32_cam_esp32_cam_restart
                name: 📷 가스 카메라
                icon: mdi:camera
                tap_action:
                  action: more-info
                  entity: camera.esp32_cam_esp32_cam_gas_cam
                hold_action:
                  action: toggle
                styles:
                  card:
                    - border-radius: 24px
                    - padding: 20px
                    - background: |
                        [[[
                          if (states['switch.esp32_cam_esp32_cam_restart'].state === 'on')
                            return 'linear-gradient(135deg, #0ea5e9 0%, #1d4ed8 100%)';
                          else
                            return 'linear-gradient(135deg, #0b1220 0%, #131c2b 100%)';
                        ]]]
                    - box-shadow: |
                        [[[
                          if (states['switch.esp32_cam_esp32_cam_restart'].state === 'on')
                            return '0 8px 24px rgba(29, 78, 216, 0.45)';
                          else
                            return '0 8px 24px rgba(2, 6, 23, 0.45)';
                        ]]]
                    - transition: all 0.3s ease
                  name:
                    - font-size: 16px
                    - font-weight: 600
                    - color: white
                    - text-shadow: 0 2px 4px rgba(0,0,0,0.3)
                  icon:
                    - width: 32px
                    - height: 32px
                    - color: white
                    - filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3))
                state:
                  - value: 'on'
                    styles:
                      card:
                        - background: 'linear-gradient(135deg, #0ea5e9 0%, #1d4ed8 100%)'
                        - box-shadow: 0 8px 24px rgba(29, 78, 216, 0.45)
            grid_options:
              columns: full
              rows: auto
          - type: horizontal-stack
            cards:
              - type: custom:button-card
                entity: switch.vacation_mode
                name: 휴가 모드
                icon: mdi:airplane
                tap_action:
                  action: toggle
                styles:
                  card:
                    - border-radius: 16px
                    - padding: 12px
                    - background: var(--contrast3)
                    - color: var(--contrast20)
                  name:
                    - font-size: 12px
                    - margin-top: 6px
                  icon:
                    - width: 24px
                layout: vertical
                state:
                  - value: 'on'
                    styles:
                      card:
                        - background: var(--yellow)
                      icon:
                        - color: var(--black)
                      name:
                        - color: var(--black)
              - type: custom:button-card
                entity: sensor.count_lights_on
                name: 조명
                icon: mdi:lightbulb-group
                show_label: true
                label: |-
                  [[[ 
                    const count = Number(entity.state ?? 0);
                    const safe = Number.isNaN(count) ? 0 : count;
                    return `${safe}개 켜짐`;
                  ]]]
                tap_action:
                  action: navigate
                  navigation_path: '#lights'
                styles:
                  card:
                    - border-radius: 16px
                    - padding: 12px
                    - background: var(--contrast3)
                  name:
                    - font-size: 12px
                    - color: var(--contrast18)
                  label:
                    - font-size: 11px
                    - color: var(--contrast14)
                  icon:
                    - width: 24px
              - type: custom:button-card
                entity: sensor.dishwasher_status
                name: 식기세척기
                icon: mdi:dishwasher
                show_label: true
                label: |-
                  [[[ 
                    const raw = entity.state || '';
                    const state = raw.toLowerCase();
                    if (['running', '동작', '세척중'].includes(state)) return '동작 중';
                    if (['clean', 'cleaning', 'complete', 'completed', '완료'].includes(state)) return '완료';
                    if (['idle', 'standby', 'ready', '대기'].includes(state)) return '대기';
                    if (['off', 'power_off', '꺼짐'].includes(state)) return '꺼짐';
                    return raw || '꺼짐';
                  ]]]
                tap_action:
                  action: more-info
                styles:
                  card:
                    - border-radius: 16px
                    - padding: 12px
                    - background: var(--contrast3)
                  name:
                    - font-size: 12px
                    - color: var(--contrast18)
                  label:
                    - font-size: 11px
                    - color: var(--contrast14)
                  icon:
                    - width: 24px
              - type: custom:button-card
                entity: sensor.washing_machine_status
                name: 세탁기
                icon: mdi:washing-machine
                show_label: true
                label: |-
                  [[[ 
                    const raw = entity.state || '';
                    const state = raw.toLowerCase();
                    if (['running', '동작', '세탁중'].includes(state)) return '동작 중';
                    if (['clean', 'cleaning', 'complete', 'completed', '완료'].includes(state)) return '완료';
                    if (['idle', 'standby', 'ready', '대기'].includes(state)) return '대기';
                    if (['off', 'power_off', '꺼짐'].includes(state)) return '꺼짐';
                    return raw || '꺼짐';
                  ]]]
                tap_action:
                  action: more-info
                styles:
                  card:
                    - border-radius: 16px
                    - padding: 12px
                    - background: var(--contrast3)
                  name:
                    - font-size: 12px
                    - color: var(--contrast18)
                  label:
                    - font-size: 11px
                    - color: var(--contrast14)
                  icon:
                    - width: 24px
      - max_columns: 3
        type: grid
        cards:
          - type: custom:bubble-card
            card_type: separator
            name: 보안 현황
            icon: mdi:security
            card_layout: large
            sub_button:
              - visibility:
                  - condition: numeric_state
                    entity: sensor.count_alerts_true
                    above: 0
                tap_action:
                  action: navigate
                  navigation_path: '#alert'
                icon: mdi:alarm-light
                entity: binary_sensor.any_alert
              - visibility:
                  - condition: numeric_state
                    entity: sensor.count_updates_available
                    above: 0
                tap_action:
                  action: navigate
                  navigation_path: '#update'
                entity: group.device_updates
                icon: mdi:cellphone-arrow-down
              - visibility:
                  - condition: numeric_state
                    entity: binary_sensor.low_battery_devices
                    above: 0
                tap_action:
                  action: navigate
                  navigation_path: '#battery'
                entity: binary_sensor.low_battery_devices
                icon: mdi:battery-low
              - visibility:
                  - condition: numeric_state
                    entity: sensor.persistent_notifications
                    above: 0
                tap_action:
                  action: navigate
                  navigation_path: '#persistent-notification'
                entity: sensor.persistent_notifications
              - entity: binary_sensor.iphone_focus
                visibility:
                  - condition: state
                    entity: binary_sensor.iphone_focus
                    state: 'on'
            grid_options:
              columns: full
          - type: vertical-stack
            cards:
              - type: custom:button-card
                entity: alarm_control_panel.security_system
                name: 보안 시스템
                icon: mdi:security
                show_state: true
                tap_action:
                  action: more-info
                state:
                  - value: arming
                    name: 보안 시스템
                    styles:
                      icon:
                        - animation: blink 2s ease infinite
                        - color: var(--orange)
                  - value: triggered
                    name: 보안 시스템
                    icon: mdi:shield-alert-outline
                    styles:
                      card:
                        - background: var(--red)
                        - animation: blink 2s ease infinite
                      icon:
                        - color: var(--black)
                      name:
                        - color: var(--black)
                      state:
                        - color: var(--black)
                  - value: armed_home
                    name: 보안 시스템
                    styles:
                      icon:
                        - color: var(--green)
                      card:
                        - background: rgba(76, 175, 80, 0.1)
                  - value: armed_away
                    name: 보안 시스템
                    styles:
                      icon:
                        - color: var(--orange)
                      card:
                        - background: rgba(255, 152, 0, 0.1)
                  - value: armed_night
                    name: 보안 시스템
                    styles:
                      icon:
                        - color: var(--blue)
                      card:
                        - background: rgba(33, 150, 243, 0.1)
                  - value: disarmed
                    name: 보안 시스템
                    styles:
                      icon:
                        - color: var(--contrast10)
                        - opacity: 0.5
                styles:
                  grid:
                    - grid-template-areas: '"i s" "i n" "tile tile"'
                    - grid-template-columns: min-content 1fr
                    - grid-template-rows: min-content min-content auto
                    - column-gap: 12px
                    - row-gap: 1px
                  card:
                    - padding: 16px
                    - background: var(--contrast2)
                    - height: 120px
                    - border-radius: 12px
                  icon:
                    - color: var(--contrast10)
                    - width: 28px
                    - height: 28px
                  state:
                    - justify-self: start
                    - font-size: 14px
                    - font-weight: 500
                    - color: var(--contrast10)
                  name:
                    - color: var(--contrast10)
                    - justify-self: start
                    - font-size: 12px
                    - opacity: 0.7
                  img_cell:
                    - justify-self: start
                    - width: 28px
                    - height: 28px
                  custom_fields:
                    tile:
                      - margin-top: 12px
                custom_fields:
                  tile:
                    card:
                      type: tile
                      entity: '[[[ return entity.entity_id ]]]'
                      features:
                        - type: alarm-modes
                          modes:
                            - armed_home
                            - armed_night
                            - armed_away
                            - disarmed
                      card_mod:
                        style: |
                          ha-card .content {
                            display: none;
                          }
                          ha-card {
                            width: 100% !important;
                            background: transparent !important;
                            border-radius: 0px !important;
                            box-shadow: none !important;
                          }
                          ha-card .active {
                            height: 40px !important;
                          }
              - type: custom:button-card
                entity: alarm_control_panel.camera_hub_g5pro_9489_security_system
                icon: mdi:cctv
                name: 카메라 보안
                show_state: true
                show_label: true
                label: |-
                  [[[ 
                    const motion = states['sensor.overview_security']?.state || '알 수 없음';
                    return `감지 상태: ${motion}`;
                  ]]]
                tap_action:
                  action: more-info
                hold_action:
                  action: call-service
                  service: alarm_control_panel.alarm_arm_home
                  service_data:
                    entity_id: alarm_control_panel.camera_hub_g5pro_9489_security_system
                double_tap_action:
                  action: call-service
                  service: alarm_control_panel.alarm_disarm
                  service_data:
                    entity_id: alarm_control_panel.camera_hub_g5pro_9489_security_system
                styles:
                  card:
                    - border-radius: 24px
                    - padding: 18px
                    - background: var(--contrast3)
                    - height: 120px
                  name:
                    - font-size: 16px
                    - font-weight: 600
                    - color: var(--contrast18)
                  state:
                    - font-size: 13px
                    - color: var(--contrast12)
                  label:
                    - font-size: 12px
                    - color: var(--contrast14)
                    - margin-top: 4px
                  icon:
                    - width: 32px
                    - color: var(--contrast20)
                state:
                  - value: armed_home
                    name: 카메라 보안
                    label: 재실 모드 활성
                    styles:
                      card:
                        - background: var(--green)
                      icon:
                        - color: var(--black)
                      name:
                        - color: var(--black)
                      state:
                        - color: var(--black)
                      label:
                        - color: var(--black)
                  - value: armed_away
                    name: 카메라 보안
                    label: 외출 모드 활성
                    styles:
                      card:
                        - background: var(--blue)
                      icon:
                        - color: var(--black)
                      name:
                        - color: var(--black)
                      state:
                        - color: var(--black)
                      label:
                        - color: var(--black)
                  - value: triggered
                    name: 카메라 보안
                    label: 침입 감지!
                    styles:
                      card:
                        - background: var(--red)
                        - animation: blink 2s ease infinite
                      icon:
                        - color: var(--black)
                      name:
                        - color: var(--black)
                      state:
                        - color: var(--black)
                      label:
                        - color: var(--black)
                  - value: disarmed
                    name: 카메라 보안
                    label: 해제됨
                    styles:
                      card:
                        - background: var(--contrast3)
          - type: custom:auto-entities
            card:
              type: grid
              square: false
              columns: 3
            card_param: cards
            sort:
              method: entity_id
            filter:
              template: |-
                type: custom:auto-entities
                show_empty: false
                card:
                  type: grid
                  columns: 3
                  square: false
                card_param: cards
                filter:
                  include:
                    - label: favorite
                      options:
                        type: tile
                  exclude:
                    - domain: scene
                    - attributes:
                        hidden_by: '*'
                sort:
                  method: name
            visibility:
              - condition: numeric_state
                entity: sensor.count_favorite_entities
                above: 0
            grid_options:
              columns: full
          - type: custom:auto-entities
            show_empty: false
            card:
              type: custom:mushroom-chips-card
              card_param: chips
            sort:
              method: entity_id
            filter:
              template: |-
                {% for ENTITY in states.scene
                  | selectattr('entity_id', 'in', label_entities('favorite')) %}
                  {
                    "type": "entity",
                    "entity_id": "{{ ENTITY.entity_id }}",
                    "name": "{{ state_attr(ENTITY.entity_id, 'friendly_name') }}",
                    "tap_action": {
                      "action": "perform-action",
                      "perform_action": "scene.turn_on",
                      "data": {},
                      "target": {
                        "entity_id": "{{ ENTITY.entity_id }}"
                      }
                    }
                  },
                {% endfor %}
            grid_options:
              columns: full
          - type: custom:auto-entities
            show_empty: false
            card:
              type: grid
              columns: 3
              square: false
            card_param: cards
            filter:
              include:
                - label: Favorite
                  options:
                    type: tile
              exclude:
                - domain: scene
            sort:
              method: name
          - type: vertical-stack
            cards: []
            grid_options:
              columns: full
          - type: heading
            heading_style: title
            heading: Areas
            icon: mdi:home
            badges: []
          - type: vertical-stack
            cards:
              - type: custom:button-card
                entity: light.geosil_jomyeong_1beon
                variables:
                  icon: mdi:sofa-outline
                  sensor: binary_sensor.multipurpose_sensor_1_door
                  state: |
                    [[[
                      const tEnt = states['sensor.multipurpose_sensor_1_temperature'];
                      const hEnt = states['sensor.gonggijil_ceugjeonggi_1528_humidity'];
                      const t = tEnt ? parseFloat(tEnt.state) : NaN;
                      const h = hEnt ? parseFloat(hEnt.state) : NaN;
                      const tStr = Number.isFinite(t) ? t.toFixed(0) : '-';
                      const hStr = Number.isFinite(h) ? h.toFixed(0) : '-';
                      return `<span style="font-size: 24px;">${tStr}<span style="font-size: 14px; opacity: 0.6;">&deg;C</span></span><span style="font-size: 14px; opacity: 0.6;"> | ${hStr}%</span>`;
                    ]]]
                name: 거실
                icon: >-
                  [[[ const s = variables.sensor && states[variables.sensor];
                  return (s && s.state === "on") ? "mdi:window-open-variant" :
                  (variables.icon || "mdi:checkbox-blank-circle-outline"); ]]]
                hold_action:
                  action: toggle
                custom_fields:
                  temp: '[[[ return variables.state ]]]'
                state:
                  - value: 'on'
                    styles:
                      card:
                        - background: var(--yellow)
                      grid:
                        - grid-template-areas: '"n i" "temp temp" "slider slider"'
                        - grid-template-rows: 1fr min-content min-content 2fr
                        - grid-template-columns: 1fr min-content
                      icon:
                        - color: var(--black)
                      name:
                        - color: var(--black)
                    custom_fields:
                      slider:
                        card:
                          type: custom:my-slider-v2
                          entity: '[[[ return entity.entity_id ]]]'
                          colorMode: brightness
                          styles:
                            container:
                              - background: none
                              - border-radius: 0px
                              - overflow: visible
                              - height: 25px
                            card:
                              - padding: 0px
                              - background: rgba(var(--contrast4), 0.05)
                              - border-radius: 4px
                              - height: 10px
                              - position: absolute
                              - margin-top: '-1px'
                              - margin-left: 4px
                            track:
                              - overflow: visible
                              - background: none
                            progress:
                              - background: >-
                                  linear-gradient(90deg, rgba(255,255,255,1)
                                  30%, rgba(255,255,255,1) 100%)
                            thumb:
                              - background: var(--black)
                              - top: 0px
                              - right: '-1px'
                              - height: 10px
                styles:
                  grid:
                    - grid-template-areas: '"n i" "temp temp"'
                    - grid-template-rows: 1fr min-content
                    - grid-template-columns: 1fr min-content
                  card:
                    - padding: 8px
                    - height: 120px
                    - background: >-
                        [[[ if (entity.state == "on") return "var(--yellow)";
                        else return "var(--contrast2)"; ]]]
                  icon:
                    - width: 30px
                    - color: >-
                        [[[ const s = variables.sensor &&
                        states[variables.sensor]; if (s && s.state === "on")
                        return "var(--red)"; if (entity.state === "on") return
                        "var(--black)"; return "var(--contrast10)"; ]]]
                  img_cell:
                    - justify-self: end
                    - align-self: start
                    - background: >-
                        [[[ const s = variables.sensor &&
                        states[variables.sensor]; if (s && s.state === "on")
                        return "var(--contrast1)"; if (entity.state === "on")
                        return "var(--contrast1)"; return "none"; ]]]
                    - border-radius: 100%
                    - width: 50px
                    - height: 50px
                    - margin: '-5px 0px 0px 0'
                  name:
                    - justify-self: start
                    - align-self: left
                    - text-align: left
                    - font-size: 18px
                    - font-weight: 500
                    - padding: 0px 10px
                    - margin-bottom: 30px
                    - color: >-
                        [[[ if (entity.state == "on") return "var(--black)";
                        else return "var(--contrast20)"; ]]]
                  custom_fields:
                    temp:
                      - justify-self: start
                      - font-size: 40px
                      - font-weight: 500
                      - padding: 0px 10px
                      - color: >-
                          [[[ if (entity.state == "on") return "var(--black)";
                          else return "var(--contrast20)"; ]]]
            grid_options:
              columns: 6
              rows: auto
          - type: vertical-stack
            cards:
              - type: custom:button-card
                entity: switch.sihas_switch_3
                variables:
                  icon: mdi:silverware-variant
                  sensor: binary_sensor.multipurpose_sensor_1_door
                  state: |
                    [[[
                      const tEnt = states['sensor.sihas_energy_monitor_temperature'];
                      const hEnt = states['sensor.eeomoniteo_peulreoseu_humidity'];
                      const t = tEnt ? parseFloat(tEnt.state) : NaN;
                      const h = hEnt ? parseFloat(hEnt.state) : NaN;
                      const tStr = Number.isFinite(t) ? t.toFixed(0) : '-';
                      const hStr = Number.isFinite(h) ? h.toFixed(0) : '-';
                      return `<span style="font-size: 24px;">${tStr}<span style="font-size: 14px; opacity: 0.6;">&deg;C</span></span><span style="font-size: 14px; opacity: 0.6;"> | ${hStr}%</span>`;
                    ]]]
                name: 주방
                icon: '[[[ return variables.icon; ]]]'
                hold_action:
                  action: toggle
                custom_fields:
                  temp: '[[[ return variables.state ]]]'
                state:
                  - value: 'on'
                    styles:
                      card:
                        - background: var(--yellow)
                        - height: 120px
                      grid:
                        - grid-template-areas: '"n i" "temp temp" "slider slider"'
                        - grid-template-rows: min-content min-content min-content
                        - grid-template-columns: 1fr min-content
                      icon:
                        - color: var(--black)
                      name:
                        - color: var(--black)
                    custom_fields:
                      slider:
                        card:
                          type: custom:my-slider-v2
                          entity: '[[[ return entity.entity_id ]]]'
                          colorMode: brightness
                          styles:
                            container:
                              - background: none
                              - border-radius: 0px
                              - overflow: hidden
                              - height: 25px
                              - margin-top: 4px
                            card:
                              - padding: 0px
                              - background: rgba(var(--contrast4), 0.05)
                              - border-radius: 4px
                              - height: 10px
                              - position: absolute
                              - margin-top: '-1px'
                              - margin-left: 4px
                            track:
                              - overflow: visible
                              - background: none
                            progress:
                              - background: >-
                                  linear-gradient(90deg, rgba(255,255,255,1)
                                  30%, rgba(255,255,255,1) 100%)
                            thumb:
                              - display: none
                styles:
                  grid:
                    - grid-template-areas: '"n i" "temp temp"'
                    - grid-template-rows: 1fr min-content
                    - grid-template-columns: 1fr min-content
                  card:
                    - padding: 8px
                    - height: 120px
                    - background: >-
                        [[[ if (entity.state == "on") return "var(--yellow)";
                        else return "var(--contrast2)"; ]]]
                  icon:
                    - width: 30px
                    - color: >-
                        [[[ if (entity.state == "on") return "var(--black)";
                        else return "var(--contrast10)"; ]]]
                  img_cell:
                    - justify-self: end
                    - align-self: start
                    - background: >-
                        [[[ if (entity.state == "on") return "var(--contrast1)";
                        else return "none"; ]]]
                    - border-radius: 100%
                    - width: 50px
                    - height: 50px
                    - margin: '-5px 0px 0px 0'
                  name:
                    - justify-self: start
                    - align-self: left
                    - text-align: left
                    - font-size: 18px
                    - font-weight: 500
                    - padding: 0px 10px
                    - margin-bottom: 10px
                    - color: >-
                        [[[ if (entity.state == "on") return "var(--black)";
                        else return "var(--contrast20)"; ]]]
                  custom_fields:
                    temp:
                      - justify-self: start
                      - font-size: 40px
                      - font-weight: 500
                      - padding: 0px 10px
                      - margin-bottom: 5px
                      - color: >-
                          [[[ if (entity.state == "on") return "var(--black)";
                          else return "var(--contrast20)"; ]]]
            grid_options:
              columns: 6
              rows: auto
          - type: vertical-stack
            cards:
              - type: custom:button-card
                entity: switch.sihas_switch_5
                variables:
                  icon: mdi:desk
                  sensor: binary_sensor.multipurpose_sensor_1_door
                  state: |
                    [[[
                      const tEnt = states['sensor.gonggijil_ceugjeonggi_1528_temperature'];
                      const hEnt = states['sensor.gonggijil_ceugjeonggi_1528_humidity'];
                      const t = tEnt ? parseFloat(tEnt.state) : NaN;
                      const h = hEnt ? parseFloat(hEnt.state) : NaN;
                      const tStr = Number.isFinite(t) ? t.toFixed(0) : '-';
                      const hStr = Number.isFinite(h) ? h.toFixed(0) : '-';
                      return `<span style="font-size: 24px;">${tStr}<span style="font-size: 14px; opacity: 0.6;">&deg;C</span></span><span style="font-size: 14px; opacity: 0.6;"> | ${hStr}%</span>`;
                    ]]]
                name: 우현이방
                icon: '[[[ return variables.icon; ]]]'
                hold_action:
                  action: toggle
                custom_fields:
                  temp: '[[[ return variables.state ]]]'
                state:
                  - value: 'on'
                    styles:
                      card:
                        - background: var(--yellow)
                      grid:
                        - grid-template-areas: '"n i" "temp temp"'
                        - grid-template-rows: 1fr min-content
                        - grid-template-columns: 1fr min-content
                      icon:
                        - color: var(--black)
                      name:
                        - color: var(--black)
                styles:
                  grid:
                    - grid-template-areas: '"n i" "temp temp"'
                    - grid-template-rows: 1fr min-content
                    - grid-template-columns: 1fr min-content
                  card:
                    - padding: 8px
                    - height: 120px
                    - background: >-
                        [[[ if (entity.state == "on") return "var(--yellow)";
                        else return "var(--contrast2)"; ]]]
                  icon:
                    - width: 30px
                    - color: >-
                        [[[ if (entity.state == "on") return "var(--black)";
                        else return "var(--contrast10)"; ]]]
                  img_cell:
                    - justify-self: end
                    - align-self: start
                    - background: >-
                        [[[ if (entity.state == "on") return "var(--contrast1)";
                        else return "none"; ]]]
                    - border-radius: 100%
                    - width: 50px
                    - height: 50px
                    - margin: '-5px 0px 0px 0'
                  name:
                    - justify-self: start
                    - align-self: left
                    - text-align: left
                    - font-size: 18px
                    - font-weight: 500
                    - padding: 0px 10px
                    - margin-bottom: 30px
                    - color: >-
                        [[[ if (entity.state == "on") return "var(--black)";
                        else return "var(--contrast20)"; ]]]
                  custom_fields:
                    temp:
                      - justify-self: start
                      - font-size: 40px
                      - font-weight: 500
                      - padding: 0px 10px
                      - color: >-
                          [[[ if (entity.state == "on") return "var(--black)";
                          else return "var(--contrast20)"; ]]]
            grid_options:
              columns: 6
              rows: auto
          - type: vertical-stack
            cards:
              - type: custom:button-card
                entity: switch.sihas_switch_4
                variables:
                  icon: mdi:bed-outline
                  sensor: binary_sensor.multipurpose_sensor_door
                  state: |
                    [[[
                      const tEnt = states['sensor.multipurpose_sensor_temperature'];
                      const hEnt = states['sensor.aqara_temperature_and_humidity_sensor_t1_humidity'];
                      const t = tEnt ? parseFloat(tEnt.state) : NaN;
                      const h = hEnt ? parseFloat(hEnt.state) : NaN;
                      const tStr = Number.isFinite(t) ? t.toFixed(0) : '-';
                      const hStr = Number.isFinite(h) ? h.toFixed(0) : '-';
                      return `<span style="font-size: 24px;">${tStr}<span style="font-size: 14px; opacity: 0.6;">&deg;C</span></span><span style="font-size: 14px; opacity: 0.6;"> | ${hStr}%</span>`;
                    ]]]
                name: 아현이방
                icon: >-
                  [[[ const s = variables.sensor && states[variables.sensor];
                  return (s && s.state === "on") ? "mdi:window-open-variant" :
                  (variables.icon || "mdi:checkbox-blank-circle-outline"); ]]]
                hold_action:
                  action: toggle
                custom_fields:
                  temp: '[[[ return variables.state ]]]'
                state:
                  - value: 'on'
                    styles:
                      card:
                        - background: var(--yellow)
                      grid:
                        - grid-template-areas: '"n i" "temp temp"'
                        - grid-template-rows: 1fr min-content
                        - grid-template-columns: 1fr min-content
                      icon:
                        - color: var(--black)
                      name:
                        - color: var(--black)
                styles:
                  grid:
                    - grid-template-areas: '"n i" "temp temp"'
                    - grid-template-rows: 1fr min-content
                    - grid-template-columns: 1fr min-content
                  card:
                    - padding: 8px
                    - height: 120px
                    - background: >-
                        [[[ if (entity.state == "on") return "var(--yellow)";
                        else return "var(--contrast2)"; ]]]
                  icon:
                    - width: 30px
                    - color: >-
                        [[[ const s = variables.sensor &&
                        states[variables.sensor]; if (s && s.state === "on")
                        return "var(--red)"; if (entity.state === "on") return
                        "var(--black)"; return "var(--contrast10)"; ]]]
                  img_cell:
                    - justify-self: end
                    - align-self: start
                    - background: >-
                        [[[ const s = variables.sensor &&
                        states[variables.sensor]; if (s && s.state === "on")
                        return "var(--contrast1)"; if (entity.state === "on")
                        return "var(--contrast1)"; return "none"; ]]]
                    - border-radius: 100%
                    - width: 50px
                    - height: 50px
                    - margin: '-5px 0px 0px 0'
                  name:
                    - justify-self: start
                    - align-self: left
                    - text-align: left
                    - font-size: 18px
                    - font-weight: 500
                    - padding: 0px 10px
                    - margin-bottom: 30px
                    - color: >-
                        [[[ if (entity.state == "on") return "var(--black)";
                        else return "var(--contrast20)"; ]]]
                  custom_fields:
                    temp:
                      - justify-self: start
                      - font-size: 40px
                      - font-weight: 500
                      - padding: 0px 10px
                      - color: >-
                          [[[ if (entity.state == "on") return "var(--black)";
                          else return "var(--contrast20)"; ]]]
            grid_options:
              columns: 6
              rows: auto
          - type: vertical-stack
            cards:
              - type: custom:button-card
                entity: light.anbang_hwajangsil_deung
                variables:
                  icon: mdi:bed-king-outline
                  sensor: binary_sensor.multipurpose_sensor_2_door
                  state: |
                    [[[
                      const tEnt = states['sensor.multipurpose_sensor_2_temperature'];
                      const hEnt = states['sensor.aqara_temperature_and_humidity_sensor_t1_1_humidity'];
                      const t = tEnt ? parseFloat(tEnt.state) : NaN;
                      const h = hEnt ? parseFloat(hEnt.state) : NaN;
                      const tStr = Number.isFinite(t) ? t.toFixed(0) : '-';
                      const hStr = Number.isFinite(h) ? h.toFixed(0) : '-';
                      return `<span style="font-size: 24px;">${tStr}<span style="font-size: 14px; opacity: 0.6;">&deg;C</span></span><span style="font-size: 14px; opacity: 0.6;"> | ${hStr}%</span>`;
                    ]]]
                name: 안방
                icon: >-
                  [[[ const s = variables.sensor && states[variables.sensor];
                  return (s && s.state === "on") ? "mdi:window-open-variant" :
                  (variables.icon || "mdi:checkbox-blank-circle-outline"); ]]]
                hold_action:
                  action: toggle
                custom_fields:
                  temp: '[[[ return variables.state ]]]'
                state:
                  - value: 'on'
                    styles:
                      card:
                        - background: var(--yellow)
                      grid:
                        - grid-template-areas: '"n i" "temp temp" "slider slider"'
                        - grid-template-rows: 1fr min-content min-content 2fr
                        - grid-template-columns: 1fr min-content
                      icon:
                        - color: var(--black)
                      name:
                        - color: var(--black)
                    custom_fields:
                      slider:
                        card:
                          type: custom:my-slider-v2
                          entity: '[[[ return entity.entity_id ]]]'
                          colorMode: brightness
                          styles:
                            container:
                              - background: none
                              - border-radius: 0px
                              - overflow: visible
                              - height: 25px
                            card:
                              - padding: 0px
                              - background: rgba(var(--contrast4), 0.05)
                              - border-radius: 4px
                              - height: 10px
                              - position: absolute
                              - margin-top: '-1px'
                              - margin-left: 4px
                            track:
                              - overflow: visible
                              - background: none
                            progress:
                              - background: >-
                                  linear-gradient(90deg, rgba(255,255,255,1)
                                  30%, rgba(255,255,255,1) 100%)
                            thumb:
                              - background: var(--black)
                              - top: 0px
                              - right: '-1px'
                              - height: 10px
                styles:
                  grid:
                    - grid-template-areas: '"n i" "temp temp"'
                    - grid-template-rows: 1fr min-content
                    - grid-template-columns: 1fr min-content
                  card:
                    - padding: 8px
                    - height: 120px
                    - background: >-
                        [[[ if (entity.state == "on") return "var(--yellow)";
                        else return "var(--contrast2)"; ]]]
                  icon:
                    - width: 30px
                    - color: >-
                        [[[ const s = variables.sensor &&
                        states[variables.sensor]; if (s && s.state === "on")
                        return "var(--red)"; if (entity.state === "on") return
                        "var(--black)"; return "var(--contrast10)"; ]]]
                  img_cell:
                    - justify-self: end
                    - align-self: start
                    - background: >-
                        [[[ const s = variables.sensor &&
                        states[variables.sensor]; if (s && s.state === "on")
                        return "var(--contrast1)"; if (entity.state === "on")
                        return "var(--contrast1)"; return "none"; ]]]
                    - border-radius: 100%
                    - width: 50px
                    - height: 50px
                    - margin: '-5px 0px 0px 0'
                  name:
                    - justify-self: start
                    - align-self: left
                    - text-align: left
                    - font-size: 18px
                    - font-weight: 500
                    - padding: 0px 10px
                    - margin-bottom: 30px
                    - color: >-
                        [[[ if (entity.state == "on") return "var(--black)";
                        else return "var(--contrast20)"; ]]]
                  custom_fields:
                    temp:
                      - justify-self: start
                      - font-size: 40px
                      - font-weight: 500
                      - padding: 0px 10px
                      - color: >-
                          [[[ if (entity.state == "on") return "var(--black)";
                          else return "var(--contrast20)"; ]]]
            grid_options:
              columns: 6
              rows: auto
          - type: conditional
            conditions:
              - entity: input_boolean.scn_sos
                state: 'on'
            card:
              type: custom:button-card
              entity: input_boolean.scn_sos
              name: 비상 호출 해제
              icon: mdi:alert
              tap_action:
                action: toggle
              styles:
                card:
                  - background-color: rgb(220, 38, 38)
                  - color: white
                  - border-radius: 12px
                  - padding: 14px
                  - box-shadow: 0 4px 14px rgba(220, 38, 38, 0.45)
                  - animation: border-pulse 2s ease-in-out infinite
                name:
                  - color: white
                  - font-size: 18px
                  - font-weight: 700
                icon:
                  - color: white
                  - width: 42px
                  - height: 42px
              custom_fields:
                animation: |
                  [[[ return `
                  <style>
                    @keyframes border-pulse {
                      0% {
                        box-shadow: 0 4px 14px rgba(220, 38, 38, 0.45), 0 0 0 0 rgba(220, 38, 38, 0.4);
                      }
                      50% {
                        box-shadow: 0 4px 14px rgba(220, 38, 38, 0.45), 0 0 0 8px rgba(220, 38, 38, 0.1);
                      }
                      100% {
                        box-shadow: 0 4px 14px rgba(220, 38, 38, 0.45), 0 0 0 0 rgba(220, 38, 38, 0.4);
                      }
                    }
                  </style>
                  `; ]]]
            grid_options:
              columns: 6
              rows: auto
        column_span: 1
      - type: grid
        cards:
          - type: vertical-stack
            cards:
              - type: custom:stack-in-card
                mode: vertical
                card_mod:
                  style: >
                    ha-card { height: flex; display:flex; flex-direction:column;
                    }
                cards:
                  - type: markdown
                    content: |
                      <summary><b>녹음 대본</b></summary>
                      <br/>
                      미지근한 물 한 컵을 마신다.
                      커피를 내리고 한 모금으로 정신을 깨운다.
                      가방에 노트북과 충전기를 챙긴다.
                      문을 잠그고 엘리베이터를 탄다.
                      길게 숨을 들이마시고 오늘을 떠올린다.
                      가벼운 걸음으로 하루를 시작한다.
                      고요한 마음으로 하루를 마무리한다.
                      테이블을 정리하고 따뜻한 차를 우린다.
                      행복한 하루를 보낼까?
              - type: custom:stack-in-card
                mode: vertical
                card_mod:
                  style: >
                    ha-card { height: flex; display:flex; flex-direction:column;
                    }
                cards:
                  - type: custom:voice-recorder-card
                    token: >
                      eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiIyNzYxZmNhYTcxYTg0ZTI5YTRjOTUxNzRjMDhjNGJhMSIsImlhdCI6MTc1OTI5NjU4MSwiZXhwIjoyMDc0NjU2NTgxfQ.T_goDPAyFWbnwxG-weH25KMMvJIujHFJE6DgUzfqMUM
                    event_options:
                      - default
                    notify: false
                    button_mode: click
                    volume_gain: 2
                    audio_quality: good
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#voice'
                button_type: name
                name: 음성 복제 스튜디오
                icon: mdi:account-tie-voice
                show_header: true
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#lights'
                button_type: name
                name: 조명 컨트롤
                icon: mdi:ceiling-light-multiple
                show_header: true
              - type: custom:expander-card
                title: 조명 컨트롤
                expanded: true
                cards:
                  - type: grid
                    columns: 2
                    square: false
                    cards:
                      - type: custom:slider-button-card
                        entity: light.geosil_jomyeong_1beon
                        name: 거실 조명 1
                        slider:
                          direction: left-right
                          background: gradient
                          use_state_color: false
                          use_percentage_bg_opacity: true
                          show_track: true
                        show_name: true
                        show_state: true
                        compact: false
                        icon:
                          icon: mdi:ceiling-light
                          show: true
                          use_state_color: false
                        action_button:
                          show: false
                        card_mod:
                          style: |
                            :host {
                              --slider-color: rgba(255, 232, 198, 0.95);
                              --slider-bg: linear-gradient(90deg, rgba(86, 75, 63, 0.92) 0%, rgba(255, 226, 187, 0.95) 48%, rgba(255, 240, 210, 0.97) 52%, rgba(86, 75, 63, 0.92) 100%);
                              --slider-bg-filter: brightness(105%);
                              --icon-color: #fff5e6;
                              --state-color-on: #fff9ed;
                              --state-color-off: rgba(255, 249, 237, 0.7);
                              --label-color-on: #fff5e6;
                              --label-color-off: rgba(255, 249, 237, 0.6);
                              --action-icon-color-on: #fff5e6;
                              --action-icon-color-off: rgba(255, 249, 237, 0.6);
                            }
                            ha-card {
                              background: linear-gradient(90deg, rgba(56, 51, 47, 0.75) 0%, rgba(238, 207, 162, 0.88) 45%, rgba(254, 235, 205, 0.94) 55%, rgba(56, 51, 47, 0.75) 100%);
                              color: #fff5e6;
                              border-radius: 22px;
                              border: 1px solid rgba(255, 240, 220, 0.24);
                              box-shadow: inset 0 0 0 1px rgba(255, 240, 220, 0.08), 0 8px 20px rgba(0, 0, 0, 0.35);
                              position: relative;
                              overflow: hidden;
                            }
                            ha-card::before {
                              content: "";
                              position: absolute;
                              inset: 0;
                              border-radius: 22px;
                              background: linear-gradient(140deg, rgba(255, 250, 236, 0.15), rgba(86, 75, 63, 0.06));
                              mix-blend-mode: screen;
                              pointer-events: none;
                            }
                            ha-card ha-icon {
                              color: #fff5e6;
                            }
                            ha-card .name,
                            ha-card .state,
                            ha-card .label,
                            ha-card .value {
                              color: #fff5e6 !important;
                            }
                      - type: custom:slider-button-card
                        entity: light.geosil_jomyeong_2beon
                        name: 거실 조명 2
                        slider:
                          direction: left-right
                          background: gradient
                          use_state_color: false
                          use_percentage_bg_opacity: true
                          show_track: true
                        show_name: true
                        show_state: true
                        compact: false
                        icon:
                          icon: mdi:ceiling-light
                          show: true
                          use_state_color: false
                        action_button:
                          show: false
                        card_mod:
                          style: |
                            :host {
                              --slider-color: rgba(255, 232, 198, 0.95);
                              --slider-bg: linear-gradient(90deg, rgba(86, 75, 63, 0.92) 0%, rgba(255, 226, 187, 0.95) 48%, rgba(255, 240, 210, 0.97) 52%, rgba(86, 75, 63, 0.92) 100%);
                              --slider-bg-filter: brightness(105%);
                              --icon-color: #fff5e6;
                              --state-color-on: #fff9ed;
                              --state-color-off: rgba(255, 249, 237, 0.7);
                              --label-color-on: #fff5e6;
                              --label-color-off: rgba(255, 249, 237, 0.6);
                              --action-icon-color-on: #fff5e6;
                              --action-icon-color-off: rgba(255, 249, 237, 0.6);
                            }
                            ha-card {
                              background: linear-gradient(90deg, rgba(56, 51, 47, 0.75) 0%, rgba(238, 207, 162, 0.88) 45%, rgba(254, 235, 205, 0.94) 55%, rgba(56, 51, 47, 0.75) 100%);
                              color: #fff5e6;
                              border-radius: 22px;
                              border: 1px solid rgba(255, 240, 220, 0.24);
                              box-shadow: inset 0 0 0 1px rgba(255, 240, 220, 0.08), 0 8px 20px rgba(0, 0, 0, 0.35);
                              position: relative;
                              overflow: hidden;
                            }
                            ha-card::before {
                              content: "";
                              position: absolute;
                              inset: 0;
                              border-radius: 22px;
                              background: linear-gradient(140deg, rgba(255, 250, 236, 0.15), rgba(86, 75, 63, 0.06));
                              mix-blend-mode: screen;
                              pointer-events: none;
                            }
                            ha-card ha-icon {
                              color: #fff5e6;
                            }
                            ha-card .name,
                            ha-card .state,
                            ha-card .label,
                            ha-card .value {
                              color: #fff5e6 !important;
                            }
                      - type: custom:slider-button-card
                        entity: light.geosil_jomyeong_3beon
                        name: 거실 조명 3
                        slider:
                          direction: left-right
                          background: gradient
                          use_state_color: false
                          use_percentage_bg_opacity: true
                          show_track: true
                        show_name: true
                        show_state: true
                        compact: false
                        icon:
                          icon: mdi:ceiling-light
                          show: true
                          use_state_color: false
                        action_button:
                          show: false
                        card_mod:
                          style: |
                            :host {
                              --slider-color: rgba(255, 232, 198, 0.95);
                              --slider-bg: linear-gradient(90deg, rgba(86, 75, 63, 0.92) 0%, rgba(255, 226, 187, 0.95) 48%, rgba(255, 240, 210, 0.97) 52%, rgba(86, 75, 63, 0.92) 100%);
                              --slider-bg-filter: brightness(105%);
                              --icon-color: #fff5e6;
                              --state-color-on: #fff9ed;
                              --state-color-off: rgba(255, 249, 237, 0.7);
                              --label-color-on: #fff5e6;
                              --label-color-off: rgba(255, 249, 237, 0.6);
                              --action-icon-color-on: #fff5e6;
                              --action-icon-color-off: rgba(255, 249, 237, 0.6);
                            }
                            ha-card {
                              background: linear-gradient(90deg, rgba(56, 51, 47, 0.75) 0%, rgba(238, 207, 162, 0.88) 45%, rgba(254, 235, 205, 0.94) 55%, rgba(56, 51, 47, 0.75) 100%);
                              color: #fff5e6;
                              border-radius: 22px;
                              border: 1px solid rgba(255, 240, 220, 0.24);
                              box-shadow: inset 0 0 0 1px rgba(255, 240, 220, 0.08), 0 8px 20px rgba(0, 0, 0, 0.35);
                              position: relative;
                              overflow: hidden;
                            }
                            ha-card::before {
                              content: "";
                              position: absolute;
                              inset: 0;
                              border-radius: 22px;
                              background: linear-gradient(140deg, rgba(255, 250, 236, 0.15), rgba(86, 75, 63, 0.06));
                              mix-blend-mode: screen;
                              pointer-events: none;
                            }
                            ha-card ha-icon {
                              color: #fff5e6;
                            }
                            ha-card .name,
                            ha-card .state,
                            ha-card .label,
                            ha-card .value {
                              color: #fff5e6 !important;
                            }
                      - type: custom:slider-button-card
                        entity: light.deureseurum_deung
                        name: 드레스룸 등
                        slider:
                          direction: left-right
                          background: gradient
                          use_state_color: false
                          use_percentage_bg_opacity: true
                          show_track: true
                        show_name: true
                        show_state: true
                        compact: false
                        icon:
                          icon: mdi:hanger
                          show: true
                          use_state_color: false
                        action_button:
                          show: false
                        card_mod:
                          style: |
                            :host {
                              --slider-color: rgba(255, 232, 198, 0.95);
                              --slider-bg: linear-gradient(90deg, rgba(86, 75, 63, 0.92) 0%, rgba(255, 226, 187, 0.95) 48%, rgba(255, 240, 210, 0.97) 52%, rgba(86, 75, 63, 0.92) 100%);
                              --slider-bg-filter: brightness(105%);
                              --icon-color: #fff5e6;
                              --state-color-on: #fff9ed;
                              --state-color-off: rgba(255, 249, 237, 0.7);
                              --label-color-on: #fff5e6;
                              --label-color-off: rgba(255, 249, 237, 0.6);
                              --action-icon-color-on: #fff5e6;
                              --action-icon-color-off: rgba(255, 249, 237, 0.6);
                            }
                            ha-card {
                              background: linear-gradient(90deg, rgba(56, 51, 47, 0.75) 0%, rgba(238, 207, 162, 0.88) 45%, rgba(254, 235, 205, 0.94) 55%, rgba(56, 51, 47, 0.75) 100%);
                              color: #fff5e6;
                              border-radius: 22px;
                              border: 1px solid rgba(255, 240, 220, 0.24);
                              box-shadow: inset 0 0 0 1px rgba(255, 240, 220, 0.08), 0 8px 20px rgba(0, 0, 0, 0.35);
                              position: relative;
                              overflow: hidden;
                            }
                            ha-card::before {
                              content: "";
                              position: absolute;
                              inset: 0;
                              border-radius: 22px;
                              background: linear-gradient(140deg, rgba(255, 250, 236, 0.15), rgba(86, 75, 63, 0.06));
                              mix-blend-mode: screen;
                              pointer-events: none;
                            }
                            ha-card ha-icon {
                              color: #fff5e6;
                            }
                            ha-card .name,
                            ha-card .state,
                            ha-card .label,
                            ha-card .value {
                              color: #fff5e6 !important;
                            }
                      - type: custom:slider-button-card
                        entity: light.hwajangdae_deung
                        name: 화장대 등
                        slider:
                          direction: left-right
                          background: gradient
                          use_state_color: false
                          use_percentage_bg_opacity: true
                          show_track: true
                        show_name: true
                        show_state: true
                        compact: false
                        icon:
                          icon: mdi:face-woman
                          show: true
                          use_state_color: false
                        action_button:
                          show: false
                        card_mod:
                          style: |
                            :host {
                              --slider-color: rgba(255, 232, 198, 0.95);
                              --slider-bg: linear-gradient(90deg, rgba(86, 75, 63, 0.92) 0%, rgba(255, 226, 187, 0.95) 48%, rgba(255, 240, 210, 0.97) 52%, rgba(86, 75, 63, 0.92) 100%);
                              --slider-bg-filter: brightness(105%);
                              --icon-color: #fff5e6;
                              --state-color-on: #fff9ed;
                              --state-color-off: rgba(255, 249, 237, 0.7);
                              --label-color-on: #fff5e6;
                              --label-color-off: rgba(255, 249, 237, 0.6);
                              --action-icon-color-on: #fff5e6;
                              --action-icon-color-off: rgba(255, 249, 237, 0.6);
                            }
                            ha-card {
                              background: linear-gradient(90deg, rgba(56, 51, 47, 0.75) 0%, rgba(238, 207, 162, 0.88) 45%, rgba(254, 235, 205, 0.94) 55%, rgba(56, 51, 47, 0.75) 100%);
                              color: #fff5e6;
                              border-radius: 22px;
                              border: 1px solid rgba(255, 240, 220, 0.24);
                              box-shadow: inset 0 0 0 1px rgba(255, 240, 220, 0.08), 0 8px 20px rgba(0, 0, 0, 0.35);
                              position: relative;
                              overflow: hidden;
                            }
                            ha-card::before {
                              content: "";
                              position: absolute;
                              inset: 0;
                              border-radius: 22px;
                              background: linear-gradient(140deg, rgba(255, 250, 236, 0.15), rgba(86, 75, 63, 0.06));
                              mix-blend-mode: screen;
                              pointer-events: none;
                            }
                            ha-card ha-icon {
                              color: #fff5e6;
                            }
                            ha-card .name,
                            ha-card .state,
                            ha-card .label,
                            ha-card .value {
                              color: #fff5e6 !important;
                            }
                      - type: custom:slider-button-card
                        entity: light.anbang_hwajangsil_deung
                        name: 안방 화장실 등
                        slider:
                          direction: left-right
                          background: gradient
                          use_state_color: false
                          use_percentage_bg_opacity: true
                          show_track: true
                        show_name: true
                        show_state: true
                        compact: false
                        icon:
                          icon: mdi:toilet
                          show: true
                          use_state_color: false
                        action_button:
                          show: false
                        card_mod:
                          style: |
                            :host {
                              --slider-color: rgba(255, 232, 198, 0.95);
                              --slider-bg: linear-gradient(90deg, rgba(86, 75, 63, 0.92) 0%, rgba(255, 226, 187, 0.95) 48%, rgba(255, 240, 210, 0.97) 52%, rgba(86, 75, 63, 0.92) 100%);
                              --slider-bg-filter: brightness(105%);
                              --icon-color: #fff5e6;
                              --state-color-on: #fff9ed;
                              --state-color-off: rgba(255, 249, 237, 0.7);
                              --label-color-on: #fff5e6;
                              --label-color-off: rgba(255, 249, 237, 0.6);
                              --action-icon-color-on: #fff5e6;
                              --action-icon-color-off: rgba(255, 249, 237, 0.6);
                            }
                            ha-card {
                              background: linear-gradient(90deg, rgba(56, 51, 47, 0.75) 0%, rgba(238, 207, 162, 0.88) 45%, rgba(254, 235, 205, 0.94) 55%, rgba(56, 51, 47, 0.75) 100%);
                              color: #fff5e6;
                              border-radius: 22px;
                              border: 1px solid rgba(255, 240, 220, 0.24);
                              box-shadow: inset 0 0 0 1px rgba(255, 240, 220, 0.08), 0 8px 20px rgba(0, 0, 0, 0.35);
                              position: relative;
                              overflow: hidden;
                            }
                            ha-card::before {
                              content: "";
                              position: absolute;
                              inset: 0;
                              border-radius: 22px;
                              background: linear-gradient(140deg, rgba(255, 250, 236, 0.15), rgba(86, 75, 63, 0.06));
                              mix-blend-mode: screen;
                              pointer-events: none;
                            }
                            ha-card ha-icon {
                              color: #fff5e6;
                            }
                            ha-card .name,
                            ha-card .state,
                            ha-card .label,
                            ha-card .value {
                              color: #fff5e6 !important;
                            }
                      - type: custom:slider-button-card
                        entity: light.anbang_syaweosil_deung
                        name: 안방 샤워실 등
                        slider:
                          direction: left-right
                          background: gradient
                          use_state_color: false
                          use_percentage_bg_opacity: true
                          show_track: true
                        show_name: true
                        show_state: true
                        compact: false
                        icon:
                          icon: mdi:shower-head
                          show: true
                          use_state_color: false
                        action_button:
                          show: false
                        card_mod:
                          style: |
                            :host {
                              --slider-color: rgba(255, 232, 198, 0.95);
                              --slider-bg: linear-gradient(90deg, rgba(86, 75, 63, 0.92) 0%, rgba(255, 226, 187, 0.95) 48%, rgba(255, 240, 210, 0.97) 52%, rgba(86, 75, 63, 0.92) 100%);
                              --slider-bg-filter: brightness(105%);
                              --icon-color: #fff5e6;
                              --state-color-on: #fff9ed;
                              --state-color-off: rgba(255, 249, 237, 0.7);
                              --label-color-on: #fff5e6;
                              --label-color-off: rgba(255, 249, 237, 0.6);
                              --action-icon-color-on: #fff5e6;
                              --action-icon-color-off: rgba(255, 249, 237, 0.6);
                            }
                            ha-card {
                              background: linear-gradient(90deg, rgba(56, 51, 47, 0.75) 0%, rgba(238, 207, 162, 0.88) 45%, rgba(254, 235, 205, 0.94) 55%, rgba(56, 51, 47, 0.75) 100%);
                              color: #fff5e6;
                              border-radius: 22px;
                              border: 1px solid rgba(255, 240, 220, 0.24);
                              box-shadow: inset 0 0 0 1px rgba(255, 240, 220, 0.08), 0 8px 20px rgba(0, 0, 0, 0.35);
                              position: relative;
                              overflow: hidden;
                            }
                            ha-card::before {
                              content: "";
                              position: absolute;
                              inset: 0;
                              border-radius: 22px;
                              background: linear-gradient(140deg, rgba(255, 250, 236, 0.15), rgba(86, 75, 63, 0.06));
                              mix-blend-mode: screen;
                              pointer-events: none;
                            }
                            ha-card ha-icon {
                              color: #fff5e6;
                            }
                            ha-card .name,
                            ha-card .state,
                            ha-card .label,
                            ha-card .value {
                              color: #fff5e6 !important;
                            }
                      - type: custom:slider-button-card
                        entity: light.smart_bulb
                        name: 우현이방 책상 조명
                        slider:
                          direction: left-right
                          background: gradient
                          use_state_color: false
                          use_percentage_bg_opacity: true
                          show_track: true
                        show_name: true
                        show_state: true
                        compact: false
                        icon:
                          icon: mdi:desk-lamp
                          show: true
                          use_state_color: false
                        action_button:
                          show: false
                        card_mod:
                          style: |
                            :host {
                              --slider-color: rgba(255, 232, 198, 0.95);
                              --slider-bg: linear-gradient(90deg, rgba(86, 75, 63, 0.92) 0%, rgba(255, 226, 187, 0.95) 48%, rgba(255, 240, 210, 0.97) 52%, rgba(86, 75, 63, 0.92) 100%);
                              --slider-bg-filter: brightness(105%);
                              --icon-color: #fff5e6;
                              --state-color-on: #fff9ed;
                              --state-color-off: rgba(255, 249, 237, 0.7);
                              --label-color-on: #fff5e6;
                              --label-color-off: rgba(255, 249, 237, 0.6);
                              --action-icon-color-on: #fff5e6;
                              --action-icon-color-off: rgba(255, 249, 237, 0.6);
                            }
                            ha-card {
                              background: linear-gradient(90deg, rgba(56, 51, 47, 0.75) 0%, rgba(238, 207, 162, 0.88) 45%, rgba(254, 235, 205, 0.94) 55%, rgba(56, 51, 47, 0.75) 100%);
                              color: #fff5e6;
                              border-radius: 22px;
                              border: 1px solid rgba(255, 240, 220, 0.24);
                              box-shadow: inset 0 0 0 1px rgba(255, 240, 220, 0.08), 0 8px 20px rgba(0, 0, 0, 0.35);
                              position: relative;
                              overflow: hidden;
                            }
                            ha-card::before {
                              content: "";
                              position: absolute;
                              inset: 0;
                              border-radius: 22px;
                              background: linear-gradient(140deg, rgba(255, 250, 236, 0.15), rgba(86, 75, 63, 0.06));
                              mix-blend-mode: screen;
                              pointer-events: none;
                            }
                            ha-card ha-icon {
                              color: #fff5e6;
                            }
                            ha-card .name,
                            ha-card .state,
                            ha-card .label,
                            ha-card .value {
                              color: #fff5e6 !important;
                            }
                      - type: custom:slider-button-card
                        entity: light.smart_bulb_3
                        name: 안방 조명
                        slider:
                          direction: left-right
                          background: gradient
                          use_state_color: false
                          use_percentage_bg_opacity: true
                          show_track: true
                        show_name: true
                        show_state: true
                        compact: false
                        icon:
                          icon: mdi:bed-king
                          show: true
                          use_state_color: false
                        action_button:
                          show: false
                        card_mod:
                          style: |
                            :host {
                              --slider-color: rgba(255, 232, 198, 0.95);
                              --slider-bg: linear-gradient(90deg, rgba(86, 75, 63, 0.92) 0%, rgba(255, 226, 187, 0.95) 48%, rgba(255, 240, 210, 0.97) 52%, rgba(86, 75, 63, 0.92) 100%);
                              --slider-bg-filter: brightness(105%);
                              --icon-color: #fff5e6;
                              --state-color-on: #fff9ed;
                              --state-color-off: rgba(255, 249, 237, 0.7);
                              --label-color-on: #fff5e6;
                              --label-color-off: rgba(255, 249, 237, 0.6);
                              --action-icon-color-on: #fff5e6;
                              --action-icon-color-off: rgba(255, 249, 237, 0.6);
                            }
                            ha-card {
                              background: linear-gradient(90deg, rgba(56, 51, 47, 0.75) 0%, rgba(238, 207, 162, 0.88) 45%, rgba(254, 235, 205, 0.94) 55%, rgba(56, 51, 47, 0.75) 100%);
                              color: #fff5e6;
                              border-radius: 22px;
                              border: 1px solid rgba(255, 240, 220, 0.24);
                              box-shadow: inset 0 0 0 1px rgba(255, 240, 220, 0.08), 0 8px 20px rgba(0, 0, 0, 0.35);
                              position: relative;
                              overflow: hidden;
                            }
                            ha-card::before {
                              content: "";
                              position: absolute;
                              inset: 0;
                              border-radius: 22px;
                              background: linear-gradient(140deg, rgba(255, 250, 236, 0.15), rgba(86, 75, 63, 0.06));
                              mix-blend-mode: screen;
                              pointer-events: none;
                            }
                            ha-card ha-icon {
                              color: #fff5e6;
                            }
                            ha-card .name,
                            ha-card .state,
                            ha-card .label,
                            ha-card .value {
                              color: #fff5e6 !important;
                            }
                      - type: custom:slider-button-card
                        entity: light.sihas_switch_1
                        name: 가스레인지 등
                        slider:
                          direction: left-right
                          background: gradient
                          use_state_color: false
                          use_percentage_bg_opacity: true
                          show_track: true
                        show_name: true
                        show_state: true
                        compact: false
                        icon:
                          icon: mdi:stove
                          show: true
                          use_state_color: false
                        action_button:
                          show: false
                        card_mod:
                          style: |
                            :host {
                              --slider-color: rgba(255, 232, 198, 0.95);
                              --slider-bg: linear-gradient(90deg, rgba(86, 75, 63, 0.92) 0%, rgba(255, 226, 187, 0.95) 48%, rgba(255, 240, 210, 0.97) 52%, rgba(86, 75, 63, 0.92) 100%);
                              --slider-bg-filter: brightness(105%);
                              --icon-color: #fff5e6;
                              --state-color-on: #fff9ed;
                              --state-color-off: rgba(255, 249, 237, 0.7);
                              --label-color-on: #fff5e6;
                              --label-color-off: rgba(255, 249, 237, 0.6);
                              --action-icon-color-on: #fff5e6;
                              --action-icon-color-off: rgba(255, 249, 237, 0.6);
                            }
                            ha-card {
                              background: linear-gradient(90deg, rgba(56, 51, 47, 0.75) 0%, rgba(238, 207, 162, 0.88) 45%, rgba(254, 235, 205, 0.94) 55%, rgba(56, 51, 47, 0.75) 100%);
                              color: #fff5e6;
                              border-radius: 22px;
                              border: 1px solid rgba(255, 240, 220, 0.24);
                              box-shadow: inset 0 0 0 1px rgba(255, 240, 220, 0.08), 0 8px 20px rgba(0, 0, 0, 0.35);
                              position: relative;
                              overflow: hidden;
                            }
                            ha-card::before {
                              content: "";
                              position: absolute;
                              inset: 0;
                              border-radius: 22px;
                              background: linear-gradient(140deg, rgba(255, 250, 236, 0.15), rgba(86, 75, 63, 0.06));
                              mix-blend-mode: screen;
                              pointer-events: none;
                            }
                            ha-card ha-icon {
                              color: #fff5e6;
                            }
                            ha-card .name,
                            ha-card .state,
                            ha-card .label,
                            ha-card .value {
                              color: #fff5e6 !important;
                            }
                      - type: custom:slider-button-card
                        entity: light.sihas_switch_2
                        name: 싱크대 등
                        slider:
                          direction: left-right
                          background: gradient
                          use_state_color: false
                          use_percentage_bg_opacity: true
                          show_track: true
                        show_name: true
                        show_state: true
                        compact: false
                        icon:
                          icon: mdi:water
                          show: true
                          use_state_color: false
                        action_button:
                          show: false
                        card_mod:
                          style: |
                            :host {
                              --slider-color: rgba(255, 232, 198, 0.95);
                              --slider-bg: linear-gradient(90deg, rgba(86, 75, 63, 0.92) 0%, rgba(255, 226, 187, 0.95) 48%, rgba(255, 240, 210, 0.97) 52%, rgba(86, 75, 63, 0.92) 100%);
                              --slider-bg-filter: brightness(105%);
                              --icon-color: #fff5e6;
                              --state-color-on: #fff9ed;
                              --state-color-off: rgba(255, 249, 237, 0.7);
                              --label-color-on: #fff5e6;
                              --label-color-off: rgba(255, 249, 237, 0.6);
                              --action-icon-color-on: #fff5e6;
                              --action-icon-color-off: rgba(255, 249, 237, 0.6);
                            }
                            ha-card {
                              background: linear-gradient(90deg, rgba(56, 51, 47, 0.75) 0%, rgba(238, 207, 162, 0.88) 45%, rgba(254, 235, 205, 0.94) 55%, rgba(56, 51, 47, 0.75) 100%);
                              color: #fff5e6;
                              border-radius: 22px;
                              border: 1px solid rgba(255, 240, 220, 0.24);
                              box-shadow: inset 0 0 0 1px rgba(255, 240, 220, 0.08), 0 8px 20px rgba(0, 0, 0, 0.35);
                              position: relative;
                              overflow: hidden;
                            }
                            ha-card::before {
                              content: "";
                              position: absolute;
                              inset: 0;
                              border-radius: 22px;
                              background: linear-gradient(140deg, rgba(255, 250, 236, 0.15), rgba(86, 75, 63, 0.06));
                              mix-blend-mode: screen;
                              pointer-events: none;
                            }
                            ha-card ha-icon {
                              color: #fff5e6;
                            }
                            ha-card .name,
                            ha-card .state,
                            ha-card .label,
                            ha-card .value {
                              color: #fff5e6 !important;
                            }
                      - type: custom:slider-button-card
                        entity: light.sihas_switch_3
                        name: 식탁 등
                        slider:
                          direction: left-right
                          background: gradient
                          use_state_color: false
                          use_percentage_bg_opacity: true
                          show_track: true
                        show_name: true
                        show_state: true
                        compact: false
                        icon:
                          icon: mdi:silverware-fork-knife
                          show: true
                          use_state_color: false
                        action_button:
                          show: false
                        card_mod:
                          style: |
                            :host {
                              --slider-color: rgba(255, 232, 198, 0.95);
                              --slider-bg: linear-gradient(90deg, rgba(86, 75, 63, 0.92) 0%, rgba(255, 226, 187, 0.95) 48%, rgba(255, 240, 210, 0.97) 52%, rgba(86, 75, 63, 0.92) 100%);
                              --slider-bg-filter: brightness(105%);
                              --icon-color: #fff5e6;
                              --state-color-on: #fff9ed;
                              --state-color-off: rgba(255, 249, 237, 0.7);
                              --label-color-on: #fff5e6;
                              --label-color-off: rgba(255, 249, 237, 0.6);
                              --action-icon-color-on: #fff5e6;
                              --action-icon-color-off: rgba(255, 249, 237, 0.6);
                            }
                            ha-card {
                              background: linear-gradient(90deg, rgba(56, 51, 47, 0.75) 0%, rgba(238, 207, 162, 0.88) 45%, rgba(254, 235, 205, 0.94) 55%, rgba(56, 51, 47, 0.75) 100%);
                              color: #fff5e6;
                              border-radius: 22px;
                              border: 1px solid rgba(255, 240, 220, 0.24);
                              box-shadow: inset 0 0 0 1px rgba(255, 240, 220, 0.08), 0 8px 20px rgba(0, 0, 0, 0.35);
                              position: relative;
                              overflow: hidden;
                            }
                            ha-card::before {
                              content: "";
                              position: absolute;
                              inset: 0;
                              border-radius: 22px;
                              background: linear-gradient(140deg, rgba(255, 250, 236, 0.15), rgba(86, 75, 63, 0.06));
                              mix-blend-mode: screen;
                              pointer-events: none;
                            }
                            ha-card ha-icon {
                              color: #fff5e6;
                            }
                            ha-card .name,
                            ha-card .state,
                            ha-card .label,
                            ha-card .value {
                              color: #fff5e6 !important;
                            }
                      - type: custom:slider-button-card
                        entity: light.sihas_switch_4
                        name: 아현이방 등
                        slider:
                          direction: left-right
                          background: gradient
                          use_state_color: false
                          use_percentage_bg_opacity: true
                          show_track: true
                        show_name: true
                        show_state: true
                        compact: false
                        icon:
                          icon: mdi:bed
                          show: true
                          use_state_color: false
                        action_button:
                          show: false
                        card_mod:
                          style: |
                            :host {
                              --slider-color: rgba(255, 232, 198, 0.95);
                              --slider-bg: linear-gradient(90deg, rgba(86, 75, 63, 0.92) 0%, rgba(255, 226, 187, 0.95) 48%, rgba(255, 240, 210, 0.97) 52%, rgba(86, 75, 63, 0.92) 100%);
                              --slider-bg-filter: brightness(105%);
                              --icon-color: #fff5e6;
                              --state-color-on: #fff9ed;
                              --state-color-off: rgba(255, 249, 237, 0.7);
                              --label-color-on: #fff5e6;
                              --label-color-off: rgba(255, 249, 237, 0.6);
                              --action-icon-color-on: #fff5e6;
                              --action-icon-color-off: rgba(255, 249, 237, 0.6);
                            }
                            ha-card {
                              background: linear-gradient(90deg, rgba(56, 51, 47, 0.75) 0%, rgba(238, 207, 162, 0.88) 45%, rgba(254, 235, 205, 0.94) 55%, rgba(56, 51, 47, 0.75) 100%);
                              color: #fff5e6;
                              border-radius: 22px;
                              border: 1px solid rgba(255, 240, 220, 0.24);
                              box-shadow: inset 0 0 0 1px rgba(255, 240, 220, 0.08), 0 8px 20px rgba(0, 0, 0, 0.35);
                              position: relative;
                              overflow: hidden;
                            }
                            ha-card::before {
                              content: "";
                              position: absolute;
                              inset: 0;
                              border-radius: 22px;
                              background: linear-gradient(140deg, rgba(255, 250, 236, 0.15), rgba(86, 75, 63, 0.06));
                              mix-blend-mode: screen;
                              pointer-events: none;
                            }
                            ha-card ha-icon {
                              color: #fff5e6;
                            }
                            ha-card .name,
                            ha-card .state,
                            ha-card .label,
                            ha-card .value {
                              color: #fff5e6 !important;
                            }
                      - type: custom:slider-button-card
                        entity: light.sihas_switch_5
                        name: 우현이방 등
                        slider:
                          direction: left-right
                          background: gradient
                          use_state_color: false
                          use_percentage_bg_opacity: true
                          show_track: true
                        show_name: true
                        show_state: true
                        compact: false
                        icon:
                          icon: mdi:light-switch
                          show: true
                          use_state_color: false
                        action_button:
                          show: false
                        card_mod:
                          style: |
                            :host {
                              --slider-color: rgba(255, 232, 198, 0.95);
                              --slider-bg: linear-gradient(90deg, rgba(86, 75, 63, 0.92) 0%, rgba(255, 226, 187, 0.95) 48%, rgba(255, 240, 210, 0.97) 52%, rgba(86, 75, 63, 0.92) 100%);
                              --slider-bg-filter: brightness(105%);
                              --icon-color: #fff5e6;
                              --state-color-on: #fff9ed;
                              --state-color-off: rgba(255, 249, 237, 0.7);
                              --label-color-on: #fff5e6;
                              --label-color-off: rgba(255, 249, 237, 0.6);
                              --action-icon-color-on: #fff5e6;
                              --action-icon-color-off: rgba(255, 249, 237, 0.6);
                            }
                            ha-card {
                              background: linear-gradient(90deg, rgba(56, 51, 47, 0.75) 0%, rgba(238, 207, 162, 0.88) 45%, rgba(254, 235, 205, 0.94) 55%, rgba(56, 51, 47, 0.75) 100%);
                              color: #fff5e6;
                              border-radius: 22px;
                              border: 1px solid rgba(255, 240, 220, 0.24);
                              box-shadow: inset 0 0 0 1px rgba(255, 240, 220, 0.08), 0 8px 20px rgba(0, 0, 0, 0.35);
                              position: relative;
                              overflow: hidden;
                            }
                            ha-card::before {
                              content: "";
                              position: absolute;
                              inset: 0;
                              border-radius: 22px;
                              background: linear-gradient(140deg, rgba(255, 250, 236, 0.15), rgba(86, 75, 63, 0.06));
                              mix-blend-mode: screen;
                              pointer-events: none;
                            }
                            ha-card ha-icon {
                              color: #fff5e6;
                            }
                            ha-card .name,
                            ha-card .state,
                            ha-card .label,
                            ha-card .value {
                              color: #fff5e6 !important;
                            }
          - type: custom:navbar-card
            layout:
              auto_padding:
                enabled: true
            desktop:
              position: left
              show_labels: true
            mobile:
              show_labels: true
            routes:
              - icon: mdi:sofa-outline
                icon_selected: mdi:sofa
                label: Rooms
                selected: >
                  [[[ const hash = location.hash || ''; return ['#living-room',
                  '#dressing-room', '#hallway-bathroom', '#laundry-room',
                  '#ahyun-room', '#master-bedroom', '#master-balcony',
                  '#master-bathroom', '#uhyeon-room', '#kitchen',
                  '#entrance'].includes(hash); ]]]
                badge:
                  show: |
                    [[[ return is_state('group.all_lights', 'on'); ]]]
                  color: var(--yellow-color, var(--warning-color))
                  count: >
                    [[[ const sensor = states['sensor.lights_on']; return sensor
                    ? sensor.state : '0'; ]]]
                tap_action:
                  action: open-popup
                popup:
                  - icon: mdi:sofa-outline
                    url: '#living-room'
                    label: 거실
                  - icon: mdi:wardrobe-outline
                    url: '#dress-room'
                    label: 드레스룸
                  - icon: mdi:toilet
                    url: /lovelace/air-quality-dashboard#hallway-bathroom
                    label: 복도 화장실
                  - icon: mdi:washing-machine
                    url: '#laundry-room'
                    label: 세탁실
                  - icon: mdi:bed-outline
                    url: '#ahyun-room'
                    label: 아현이방
                  - icon: mdi:bed-king-outline
                    url: '#inner-room'
                    label: 안방
                  - icon: mdi:balcony
                    url: '#beranda'
                    label: 안방 베란다
                  - icon: mdi:shower
                    url: '#master-bathroom-wc'
                    label: 안방 화장실
                  - icon: mdi:bed
                    url: '#woohyun-room'
                    label: 우현이방
                  - icon: mdi:silverware-fork-knife
                    url: '#kitchen'
                    label: 주방
                  - icon: mdi:door
                    url: /lovelace/air-quality-dashboard#entrance
                    label: 현관
              - icon: mdi:music
                url: '#media'
                label: Music
                badge:
                  show: >
                    [[[ return is_state('media_player.spotify_gimuhyeon',
                    'playing'); ]]]
                  color: var(--green-color, var(--success-color))
                hidden: >
                  [[[ return is_state('remote.ir_jeeogi', 'on') &&
                  !is_state('media_player.spotify_gimuhyeon', 'playing'); ]]]
                hold_action:
                  action: open-popup
                popup:
                  - icon: mdi:music
                    url: /lovelace/air-quality-dashboard#media
                    label: 미디어
                  - icon: mdi:speaker
                    url: /lovelace/air-quality-dashboard#media
                    label: 스피커
              - icon: mdi:server
                url: '#server'
                label: 서버
                badge:
                  show: |
                    [[[
                      return is_state('binary_sensor.any_device_update_available', 'on') ||
                              is_state('binary_sensor.home_assistant_versions_update_available', 'on');
                    ]]]
                  color: var(--red-color, var(--error-color))
              - icon: mdi:lightning-bolt
                url: '#strom'
                label: 에너지
              - icon: mdi:microphone
                url: '#voice'
                label: Voice
              - icon: mdi:car
                url: '#car'
                label: 자동차
                badge:
                  show: >
                    [[[ const todo = states['todo.shopping_list']; return todo ?
                    Number(todo.state) > 0 : false; ]]]
                  color: var(--red-color, var(--error-color))
                  count: >
                    [[[ const todo = states['todo.shopping_list']; return todo ?
                    todo.state : 0; ]]]
              - icon: mdi:lightning-bolt
                url: '#energy'
                label: Energy
                badge:
                  show: '[[[return states[''sensor.total_power'']?.state > 1000;]]]'
                  color: var(--red-color, var(--error-color))
                selected: '[[[return location.hash === ''#energy'';]]]'
                hidden: '[[[]]]'
            styles: |
              .navbar-card {
                --navbar-primary-color: #ffffff;
                background: #1a1a1a;
                border-right: 1px solid #333333;
              }
              .navbar-card .item {
                color: #ffffff;
              }
              .navbar-card .item.selected {
                background: #2a2a2a;
                color: #ffffff;
              }
              .navbar-card .item:hover {
                background: #252525;
              }
              .image {
                border-radius: 16px !important;
              }
            media_player:
              entity: media_player.spotify_gimuhyeon
              album_cover_background: true
              show: true
      - type: grid
        cards:
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#server'
                name: 시스템 정보
                icon: mdi:server
                state: null
                is_sidebar_hidden: true
                styles: >-
                  .bubble-pop-up-container { --vertical-stack-card-gap:
                  0px!important; } #header-container > div > div { background:
                  var(--popupBG)!important; } #header-container > button {
                  background: none; } .icon-container { background-color:
                  var(--gray800)!important; } .icon-container > ha-icon {
                  color:var(--gray000)!important; opacity:1!important; }
                  .bubble-icon { --mdc-icon-size: 22px !important; }
                bg_blur: '5'
                shadow_opacity: '20'
                bg_opacity: '98'
                margin_top_mobile: 50px
                margin_top_desktop: 50px
                card_layout: large
                button_type: name
              - type: custom:gap-card
                height: 0
              - type: vertical-stack
                cards:
                  - type: custom:local-conditional-card
                    id: homeass
                    default: show
                    card:
                      type: vertical-stack
                      cards:
                        - type: custom:paper-buttons-row
                          styles:
                            justify-content: center
                            margin: 0 auto 6px auto
                            width: max-content
                            background-color: var(--popupBG)
                            border: 4px solid var(--popupBG)
                            border-radius: 28px
                          buttons:
                            - layout: name
                              name: Home Assistant
                              ripple: none
                              tap_action:
                                action: fire-dom-event
                                local_conditional_card:
                                  action: set
                                  ids:
                                    - homeass: show
                                    - unifi: hide
                                    - influxdb: hide
                              styles:
                                name:
                                  padding: 0 22px
                                  color: var(--black)
                                button:
                                  display: flex
                                  height: 24px
                                  background: var(--active-small)
                                  border-radius: 24px
                                  color: var(--white)
                            - layout: name
                              name: Unifi
                              ripple: none
                              tap_action:
                                action: fire-dom-event
                                local_conditional_card:
                                  action: set
                                  ids:
                                    - homeass: hide
                                    - unifi: show
                                    - influxdb: hide
                              styles:
                                name:
                                  padding: 0 22px
                                  color: var(--gray800)
                                button:
                                  display: flex
                                  height: 24px
                                  background: transparent
                                  border-radius: 24px
                                  color: var(--white)
                            - layout: name
                              name: InfluxDB
                              ripple: none
                              tap_action:
                                action: fire-dom-event
                                local_conditional_card:
                                  action: set
                                  ids:
                                    - homeass: hide
                                    - unifi: hide
                                    - influxdb: show
                              styles:
                                name:
                                  padding: 0 22px
                                  color: var(--gray800)
                                button:
                                  display: flex
                                  height: 24px
                                  background: transparent
                                  border-radius: 24px
                                  color: var(--white)
                        - type: custom:gap-card
                          height: 12
                        - type: grid
                          square: false
                          columns: 2
                          cards:
                            - type: custom:button-card
                              name: CPU 온도
                              icon: mdi:thermometer
                              show_label: true
                              label: |
                                [[[
                                  const s = states['sensor.pi5_cpu_temperature'];
                                  if (!s || ['unknown','unavailable'].includes(s.state)) return 'N/A';
                                  const v = Number(s.state);
                                  return Number.isNaN(v) ? 'N/A' : `${Math.round(v*10)/10}°C`;
                                ]]]
                              styles:
                                card:
                                  - height: 144px
                                  - margin-bottom: 12px
                                  - background: var(--card-background-color)
                                  - padding: 20px
                                  - border-radius: 24px
                                  - box-shadow: 0 2px 8px rgba(0,0,0,0.1)
                                grid:
                                  - grid-template-areas: '"i" "l" "n"'
                                img_cell:
                                  - justify-self: end
                                  - align-self: start
                                  - background: rgba(var(--highlight))
                                  - padding: 14px
                                  - border-radius: 50%
                                  - margin: '-16px -16px 0 0'
                                  - width: 30px
                                  - height: 30px
                                icon:
                                  - width: 30px
                                  - height: 30px
                                  - color: var(--gray800)
                                label:
                                  - justify-self: start
                                  - font-size: 2em
                                  - font-weight: 300
                                  - color: var(--gray800)
                                name:
                                  - justify-self: start
                                  - font-size: 14px
                                  - color: var(--gray800)
                                  - opacity: 0.7
                            - type: grid
                              square: false
                              columns: 1
                              cards:
                                - type: custom:button-card
                                  name: 가동 시간
                                  icon: mdi:clock-outline
                                  show_label: true
                                  label: |
                                    [[[
                                      const s = states['sensor.uptime'];
                                      if (!s || ['unknown','unavailable'].includes(s.state)) return 'N/A';
                                      const t = new Date(s.state); if (Number.isNaN(t.getTime())) return 'N/A';
                                      const now = new Date(); const d = now - t;
                                      const days = Math.floor(d/86400000);
                                      const hours = Math.floor((d%86400000)/3600000);
                                      return `${days}일 ${hours}시간`;
                                    ]]]
                                  styles:
                                    grid:
                                      - grid-template-columns: 76px 1fr
                                      - grid-template-areas: '"i l" "i n"'
                                    icon:
                                      - width: 30px
                                      - color: var(--gray800)
                                    img_cell:
                                      - justify-self: start
                                      - width: 30px
                                      - height: 30px
                                      - background: rgba(var(--highlight))
                                      - padding: 14px
                                      - border-radius: 50%
                                    label:
                                      - justify-self: start
                                      - font-size: 16px
                                      - padding-top: 4px
                                      - font-weight: 500
                                      - color: var(--gray800)
                                    card:
                                      - height: 66px
                                      - border-radius: 75px
                                      - padding: 4px 20px 4px 4px
                                      - background: var(--card-background-color)
                                      - box-shadow: 0 2px 8px rgba(0,0,0,0.1)
                                    name:
                                      - justify-self: start
                                      - font-size: 14px
                                      - color: var(--gray800)
                                      - opacity: 0.7
                                      - padding-bottom: 7px
                                - type: custom:button-card
                                  name: 팬 속도
                                  icon: mdi:fan
                                  show_label: true
                                  label: |
                                    [[[
                                      const s = states['sensor.pi5_fan_speed'];
                                      if (!s || ['unknown','unavailable'].includes(s.state)) return 'N/A';
                                      return `${s.state} RPM`;
                                    ]]]
                                  styles:
                                    grid:
                                      - grid-template-columns: 76px 1fr
                                      - grid-template-areas: '"i l" "i n"'
                                    icon:
                                      - width: 30px
                                      - color: var(--gray800)
                                    img_cell:
                                      - justify-self: start
                                      - width: 30px
                                      - height: 30px
                                      - background: rgba(var(--highlight))
                                      - padding: 14px
                                      - border-radius: 50%
                                    label:
                                      - justify-self: start
                                      - font-size: 16px
                                      - padding-top: 4px
                                      - font-weight: 500
                                      - color: var(--gray800)
                                    card:
                                      - height: 66px
                                      - border-radius: 24px
                                      - padding: 4px 20px 4px 4px
                                      - background: var(--card-background-color)
                                      - box-shadow: 0 2px 8px rgba(0,0,0,0.1)
                                    name:
                                      - justify-self: start
                                      - font-size: 14px
                                      - color: var(--gray800)
                                      - opacity: 0.7
                                      - padding-bottom: 7px
                        - type: grid
                          square: false
                          columns: 3
                          cards:
                            - type: custom:button-card
                              entity: sensor.pi5_cpu_usage
                              name: CPU
                              icon: mdi:cpu-64-bit
                              show_label: true
                              label: |
                                [[[
                                  if (!entity || ['unknown','unavailable'].includes(entity.state)) return 'N/A';
                                  const v = Number(entity.state); return Number.isNaN(v) ? 'N/A' : `${v}%`;
                                ]]]
                              styles:
                                grid:
                                  - grid-template-columns: 60px 1fr
                                  - grid-template-areas: '"i l" "i n"'
                                icon:
                                  - width: 24px
                                  - color: var(--gray800)
                                img_cell:
                                  - justify-self: start
                                  - width: 24px
                                  - height: 24px
                                  - background: rgba(var(--highlight))
                                  - padding: 10px
                                  - border-radius: 50%
                                label:
                                  - justify-self: start
                                  - font-size: 14px
                                  - padding-top: 2px
                                  - font-weight: 500
                                  - color: var(--gray800)
                                card:
                                  - height: 60px
                                  - border-radius: 24px
                                  - padding: 4px 12px 4px 4px
                                  - background: var(--card-background-color)
                                  - box-shadow: 0 2px 8px rgba(0,0,0,0.1)
                                name:
                                  - justify-self: start
                                  - font-size: 12px
                                  - color: var(--gray800)
                                  - opacity: 0.7
                                  - padding-bottom: 4px
                            - type: custom:button-card
                              entity: sensor.pi5_memory_usage
                              name: 메모리
                              icon: mdi:memory
                              show_label: true
                              label: |
                                [[[
                                  if (!entity || ['unknown','unavailable'].includes(entity.state)) return 'N/A';
                                  const v = Number(entity.state); return Number.isNaN(v) ? 'N/A' : `${v}%`;
                                ]]]
                              styles:
                                grid:
                                  - grid-template-columns: 60px 1fr
                                  - grid-template-areas: '"i l" "i n"'
                                icon:
                                  - width: 24px
                                  - color: var(--gray800)
                                img_cell:
                                  - justify-self: start
                                  - width: 24px
                                  - height: 24px
                                  - background: rgba(var(--highlight))
                                  - padding: 10px
                                  - border-radius: 50%
                                label:
                                  - justify-self: start
                                  - font-size: 14px
                                  - padding-top: 2px
                                  - font-weight: 500
                                  - color: var(--gray800)
                                card:
                                  - height: 60px
                                  - border-radius: 24px
                                  - padding: 4px 12px 4px 4px
                                  - background: var(--card-background-color)
                                  - box-shadow: 0 2px 8px rgba(0,0,0,0.1)
                                name:
                                  - justify-self: start
                                  - font-size: 12px
                                  - color: var(--gray800)
                                  - opacity: 0.7
                                  - padding-bottom: 4px
                            - type: custom:button-card
                              name: HA 버전
                              icon: mdi:home-assistant
                              show_label: true
                              label: |
                                [[[
                                  const s = states['sensor.home_assistant_versions'];
                                  if (!s || ['unknown','unavailable'].includes(s.state)) return 'N/A';
                                  return s.state;
                                ]]]
                              styles:
                                grid:
                                  - grid-template-columns: 60px 1fr
                                  - grid-template-areas: '"i l" "i n"'
                                icon:
                                  - width: 24px
                                  - color: var(--gray800)
                                img_cell:
                                  - justify-self: start
                                  - width: 24px
                                  - height: 24px
                                  - background: rgba(var(--highlight))
                                  - padding: 10px
                                  - border-radius: 50%
                                label:
                                  - justify-self: start
                                  - font-size: 13px
                                  - padding-top: 2px
                                  - font-weight: 500
                                  - color: var(--gray800)
                                card:
                                  - height: 60px
                                  - border-radius: 24px
                                  - padding: 4px 12px 4px 4px
                                  - background: var(--card-background-color)
                                  - box-shadow: 0 2px 8px rgba(0,0,0,0.1)
                                name:
                                  - justify-self: start
                                  - font-size: 11px
                                  - color: var(--gray800)
                                  - opacity: 0.7
                                  - padding-bottom: 4px
                        - type: grid
                          square: false
                          columns: 2
                          cards:
                            - type: custom:button-card
                              entity: >-
                                binary_sensor.home_assistant_versions_update_available
                              name: 업데이트
                              icon: mdi:package-up
                              show_label: true
                              label: |
                                [[[
                                  if (!entity || ['unknown','unavailable'].includes(entity.state)) return 'N/A';
                                  return entity.state === 'on' ? '가능' : '없음';
                                ]]]
                              styles:
                                grid:
                                  - grid-template-columns: 76px 1fr
                                  - grid-template-areas: '"i l" "i n"'
                                icon:
                                  - width: 30px
                                  - color: var(--gray800)
                                img_cell:
                                  - justify-self: start
                                  - width: 30px
                                  - height: 30px
                                  - background: rgba(var(--highlight))
                                  - padding: 14px
                                  - border-radius: 50%
                                label:
                                  - justify-self: start
                                  - font-size: 16px
                                  - padding-top: 4px
                                  - font-weight: 500
                                  - color: var(--gray800)
                                card:
                                  - height: 66px
                                  - border-radius: 75px
                                  - padding: 4px 20px 4px 4px
                                  - background: var(--popupBG)
                                name:
                                  - justify-self: start
                                  - font-size: 14px
                                  - color: var(--gray800)
                                  - opacity: 0.7
                                  - padding-bottom: 7px
                            - type: custom:button-card
                              entity: sensor.system_monitor_processor_use
                              name: Processor
                              icon: mdi:chip
                              show_label: true
                              label: |
                                [[[
                                  if (!entity || ['unknown','unavailable'].includes(entity.state)) return 'N/A';
                                  const v = Number(entity.state);
                                  return Number.isNaN(v) ? 'N/A' : `${v}%`;
                                ]]]
                              styles:
                                grid:
                                  - grid-template-columns: 76px 1fr
                                  - grid-template-areas: '"i l" "i n"'
                                icon:
                                  - width: 30px
                                  - color: var(--gray800)
                                img_cell:
                                  - justify-self: start
                                  - width: 30px
                                  - height: 30px
                                  - background: rgba(var(--highlight))
                                  - padding: 14px
                                  - border-radius: 50%
                                label:
                                  - justify-self: start
                                  - font-size: 16px
                                  - padding-top: 4px
                                  - font-weight: 500
                                  - color: var(--gray800)
                                card:
                                  - height: 66px
                                  - border-radius: 75px
                                  - padding: 4px 20px 4px 4px
                                  - background: var(--popupBG)
                                name:
                                  - justify-self: start
                                  - font-size: 14px
                                  - color: var(--gray800)
                                  - opacity: 0.7
                                  - padding-bottom: 7px
                        - type: grid
                          square: false
                          columns: 1
                          cards:
                            - type: custom:button-card
                              entity: sensor.system_monitor_disk_usage
                              name: 디스크 사용량
                              icon: mdi:harddisk
                              show_label: true
                              label: |
                                [[[
                                  if (!entity || ['unknown','unavailable'].includes(entity.state)) return 'N/A';
                                  const v = Number(entity.state); return Number.isNaN(v) ? 'N/A' : `${Math.round(v)} <span style="font-size:14px">%</span>`;
                                ]]]
                              styles:
                                card:
                                  - padding: 0
                                  - height: 180px
                                  - background: var(--card-background-color)
                                  - border-radius: 24px
                                  - box-shadow: 0 2px 8px rgba(0,0,0,0.1)
                                grid:
                                  - grid-template-areas: '"i" "l" "n" "bar"'
                                label:
                                  - justify-self: start
                                  - font-size: 40px
                                  - font-weight: 300
                                  - padding-left: 20px
                                  - color: var(--gray800)
                                name:
                                  - justify-self: start
                                  - align-self: start
                                  - font-size: 14px
                                  - color: var(--gray800)
                                  - padding-left: 20px
                                  - opacity: '0.7'
                                img_cell:
                                  - justify-self: end
                                  - align-self: start
                                  - background: rgba(var(--highlight))
                                  - padding: 14px
                                  - border-radius: 50%
                                  - margin: 4px 4px 0 0
                                  - width: 30px
                                  - height: 30px
                                icon:
                                  - width: 30px
                                  - height: 30px
                                  - color: var(--gray800)
                                custom_fields:
                                  bar:
                                    - justify-self: start
                                    - width: 100%
                                    - height: 30px
                                    - margin-top: 6px
                              custom_fields:
                                bar: |
                                  [[[
                                    if (!entity || ['unknown','unavailable'].includes(entity.state)) {
                                      return '<div style="height:30px;"></div>';
                                    }
                                    const raw = Number(entity.state);
                                    if (Number.isNaN(raw)) return '<div style="height:30px;"></div>';
                                    const val = Math.max(0, Math.min(100, raw));
                                    let color = 'var(--green)';
                                    if (val >= 70) color = 'var(--red)';
                                    else if (val >= 50) color = 'var(--orange)';
                                    else if (val >= 30) color = 'var(--yellow)';
                                    else if (val >= 20) color = 'var(--blue)';
                                    const pattern = `repeating-linear-gradient(45deg,transparent,transparent 2px,${color} 3px,transparent 4px)`;
                                    return `<div style="background-image:${pattern}; height:30px; width:100%">
                                              <div style="background:${color}; height:30px; width:${val}%"></div>
                                            </div>`;
                                  ]]]
                    persist_state: false
                  - type: custom:local-conditional-card
                    id: unifi
                    default: hide
                    card:
                      type: vertical-stack
                      cards:
                        - type: custom:paper-buttons-row
                          styles:
                            justify-content: center
                            margin: 0 auto 6px auto
                            width: max-content
                            background-color: var(--popupBG)
                            border: 4px solid var(--popupBG)
                            border-radius: 28px
                          buttons:
                            - layout: name
                              name: Home Assistant
                              ripple: none
                              tap_action:
                                action: fire-dom-event
                                local_conditional_card:
                                  action: set
                                  ids:
                                    - homeass: show
                                    - unifi: hide
                                    - influxdb: hide
                              styles:
                                name:
                                  padding: 0 22px
                                  color: var(--gray800)
                                button:
                                  display: flex
                                  height: 24px
                                  background: transparent
                                  border-radius: 24px
                                  color: var(--white)
                            - layout: name
                              name: Unifi
                              ripple: none
                              tap_action:
                                action: fire-dom-event
                                local_conditional_card:
                                  action: set
                                  ids:
                                    - homeass: hide
                                    - unifi: show
                                    - influxdb: hide
                              styles:
                                name:
                                  padding: 0 22px
                                  color: var(--black)
                                button:
                                  display: flex
                                  height: 24px
                                  background: var(--active-small)
                                  border-radius: 24px
                                  color: var(--white)
                            - layout: name
                              name: InfluxDB
                              ripple: none
                              tap_action:
                                action: fire-dom-event
                                local_conditional_card:
                                  action: set
                                  ids:
                                    - homeass: hide
                                    - unifi: hide
                                    - influxdb: show
                              styles:
                                name:
                                  padding: 0 22px
                                  color: var(--gray800)
                                button:
                                  display: flex
                                  height: 24px
                                  background: transparent
                                  border-radius: 24px
                                  color: var(--white)
                        - type: custom:gap-card
                          height: 6
                        - type: markdown
                          content: '### UCG Fiber'
                          card_mod:
                            style: |
                              ha-card {
                                background: none;
                                box-shadow: none;
                                padding: 12px 8px 0px 8px;
                              }
                              ha-markdown {
                                color: var(--gray800);
                              }
                        - type: grid
                          square: false
                          columns: 2
                          cards:
                            - type: custom:button-card
                              name: CPU 온도
                              icon: mdi:thermometer
                              show_label: true
                              label: |
                                [[[
                                  const s = states['sensor.ucg_fiber_ucg_fiber_cpu_temperature'];
                                  if (!s || ['unknown','unavailable'].includes(s.state)) return 'N/A';
                                  const v = Number(s.state);
                                  return Number.isNaN(v) ? 'N/A' : `${Math.round(v*10)/10}°C`;
                                ]]]
                              styles:
                                card:
                                  - height: 144px
                                  - margin-bottom: 12px
                                  - background: var(--card-background-color)
                                  - padding: 20px
                                  - border-radius: 24px
                                  - box-shadow: 0 2px 8px rgba(0,0,0,0.1)
                                grid:
                                  - grid-template-areas: '"i" "l" "n"'
                                img_cell:
                                  - justify-self: end
                                  - align-self: start
                                  - background: rgba(var(--highlight))
                                  - padding: 14px
                                  - border-radius: 50%
                                  - margin: '-16px -16px 0 0'
                                  - width: 30px
                                  - height: 30px
                                icon:
                                  - width: 30px
                                  - height: 30px
                                  - color: var(--gray800)
                                label:
                                  - justify-self: start
                                  - font-size: 2em
                                  - font-weight: 300
                                  - color: var(--gray800)
                                name:
                                  - justify-self: start
                                  - font-size: 14px
                                  - color: var(--gray800)
                                  - opacity: 0.7
                            - type: grid
                              square: false
                              columns: 1
                              cards:
                                - type: custom:button-card
                                  name: 상태
                                  icon: mdi:lan-check
                                  show_label: true
                                  label: |
                                    [[[
                                      const s = states['sensor.ucg_fiber_state'];
                                      if (!s || ['unknown','unavailable'].includes(s.state)) return 'N/A';
                                      return s.state;
                                    ]]]
                                  styles:
                                    grid:
                                      - grid-template-columns: 76px 1fr
                                      - grid-template-areas: '"i l" "i n"'
                                    icon:
                                      - width: 30px
                                      - color: var(--gray800)
                                    img_cell:
                                      - justify-self: start
                                      - width: 30px
                                      - height: 30px
                                      - background: rgba(var(--highlight))
                                      - padding: 14px
                                      - border-radius: 50%
                                    label:
                                      - justify-self: start
                                      - font-size: 16px
                                      - padding-top: 4px
                                      - font-weight: 500
                                      - color: var(--gray800)
                                    card:
                                      - height: 66px
                                      - border-radius: 24px
                                      - padding: 4px 20px 4px 4px
                                      - background: var(--card-background-color)
                                      - box-shadow: 0 2px 8px rgba(0,0,0,0.1)
                                    name:
                                      - justify-self: start
                                      - font-size: 14px
                                      - color: var(--gray800)
                                      - opacity: 0.7
                                      - padding-bottom: 7px
                                - type: custom:button-card
                                  name: 연결 기기
                                  icon: mdi:devices
                                  show_label: true
                                  label: |
                                    [[[
                                      const s = states['sensor.ucg_fiber_clients'];
                                      if (!s || ['unknown','unavailable'].includes(s.state)) return 'N/A';
                                      return `${s.state} 개`;
                                    ]]]
                                  styles:
                                    grid:
                                      - grid-template-columns: 76px 1fr
                                      - grid-template-areas: '"i l" "i n"'
                                    icon:
                                      - width: 30px
                                      - color: var(--gray800)
                                    img_cell:
                                      - justify-self: start
                                      - width: 30px
                                      - height: 30px
                                      - background: rgba(var(--highlight))
                                      - padding: 14px
                                      - border-radius: 50%
                                    label:
                                      - justify-self: start
                                      - font-size: 16px
                                      - padding-top: 4px
                                      - font-weight: 500
                                      - color: var(--gray800)
                                    card:
                                      - height: 66px
                                      - border-radius: 24px
                                      - padding: 4px 20px 4px 4px
                                      - background: var(--card-background-color)
                                      - box-shadow: 0 2px 8px rgba(0,0,0,0.1)
                                    name:
                                      - justify-self: start
                                      - font-size: 14px
                                      - color: var(--gray800)
                                      - opacity: 0.7
                                      - padding-bottom: 7px
                        - type: grid
                          square: false
                          columns: 2
                          cards:
                            - type: custom:button-card
                              entity: sensor.ucg_fiber_cpu_utilization
                              name: CPU 사용량
                              icon: mdi:cpu-64-bit
                              show_label: true
                              label: |
                                [[[
                                  if (!entity || ['unknown','unavailable'].includes(entity.state)) return 'N/A';
                                  const v = Number(entity.state);
                                  return Number.isNaN(v) ? 'N/A' : `${v}%`;
                                ]]]
                              styles:
                                grid:
                                  - grid-template-columns: 76px 1fr
                                  - grid-template-areas: '"i l" "i n"'
                                icon:
                                  - width: 30px
                                  - color: var(--gray800)
                                img_cell:
                                  - justify-self: start
                                  - width: 30px
                                  - height: 30px
                                  - background: rgba(var(--highlight))
                                  - padding: 14px
                                  - border-radius: 50%
                                label:
                                  - justify-self: start
                                  - font-size: 16px
                                  - padding-top: 4px
                                  - font-weight: 500
                                  - color: var(--gray800)
                                card:
                                  - height: 66px
                                  - border-radius: 75px
                                  - padding: 4px 20px 4px 4px
                                  - background: var(--popupBG)
                                name:
                                  - justify-self: start
                                  - font-size: 14px
                                  - color: var(--gray800)
                                  - opacity: 0.7
                                  - padding-bottom: 7px
                            - type: custom:button-card
                              entity: sensor.ucg_fiber_memory_utilization
                              name: 메모리 사용량
                              icon: mdi:memory
                              show_label: true
                              label: |
                                [[[
                                  if (!entity || ['unknown','unavailable'].includes(entity.state)) return 'N/A';
                                  const v = Number(entity.state);
                                  return Number.isNaN(v) ? 'N/A' : `${v}%`;
                                ]]]
                              styles:
                                grid:
                                  - grid-template-columns: 76px 1fr
                                  - grid-template-areas: '"i l" "i n"'
                                icon:
                                  - width: 30px
                                  - color: var(--gray800)
                                img_cell:
                                  - justify-self: start
                                  - width: 30px
                                  - height: 30px
                                  - background: rgba(var(--highlight))
                                  - padding: 14px
                                  - border-radius: 50%
                                label:
                                  - justify-self: start
                                  - font-size: 16px
                                  - padding-top: 4px
                                  - font-weight: 500
                                  - color: var(--gray800)
                                card:
                                  - height: 66px
                                  - border-radius: 75px
                                  - padding: 4px 20px 4px 4px
                                  - background: var(--popupBG)
                                name:
                                  - justify-self: start
                                  - font-size: 14px
                                  - color: var(--gray800)
                                  - opacity: 0.7
                                  - padding-bottom: 7px
                        - type: grid
                          square: false
                          columns: 3
                          cards:
                            - type: custom:button-card
                              name: PoE 전력
                              icon: mdi:power-plug
                              show_label: true
                              label: |
                                [[[
                                  const s = states['sensor.ucg_fiber_port_4_poe_power'];
                                  if (!s || ['unknown','unavailable'].includes(s.state)) return 'N/A';
                                  const v = Number(s.state);
                                  return Number.isNaN(v) ? 'N/A' : `${v} W`;
                                ]]]
                              styles:
                                grid:
                                  - grid-template-columns: 60px 1fr
                                  - grid-template-areas: '"i l" "i n"'
                                icon:
                                  - width: 24px
                                  - color: var(--gray800)
                                img_cell:
                                  - justify-self: start
                                  - width: 24px
                                  - height: 24px
                                  - background: rgba(var(--highlight))
                                  - padding: 10px
                                  - border-radius: 50%
                                label:
                                  - justify-self: start
                                  - font-size: 14px
                                  - padding-top: 2px
                                  - font-weight: 500
                                  - color: var(--gray800)
                                card:
                                  - height: 60px
                                  - border-radius: 24px
                                  - padding: 4px 12px 4px 4px
                                  - background: var(--card-background-color)
                                  - box-shadow: 0 2px 8px rgba(0,0,0,0.1)
                                name:
                                  - justify-self: start
                                  - font-size: 12px
                                  - color: var(--gray800)
                                  - opacity: 0.7
                                  - padding-bottom: 4px
                            - type: custom:button-card
                              name: 로컬 온도
                              icon: mdi:thermometer-lines
                              show_label: true
                              label: |
                                [[[
                                  const s = states['sensor.ucg_fiber_ucg_fiber_local_temperature'];
                                  if (!s || ['unknown','unavailable'].includes(s.state)) return 'N/A';
                                  const v = Number(s.state);
                                  return Number.isNaN(v) ? 'N/A' : `${Math.round(v*10)/10}°C`;
                                ]]]
                              styles:
                                grid:
                                  - grid-template-columns: 60px 1fr
                                  - grid-template-areas: '"i l" "i n"'
                                icon:
                                  - width: 24px
                                  - color: var(--gray800)
                                img_cell:
                                  - justify-self: start
                                  - width: 24px
                                  - height: 24px
                                  - background: rgba(var(--highlight))
                                  - padding: 10px
                                  - border-radius: 50%
                                label:
                                  - justify-self: start
                                  - font-size: 14px
                                  - padding-top: 2px
                                  - font-weight: 500
                                  - color: var(--gray800)
                                card:
                                  - height: 60px
                                  - border-radius: 24px
                                  - padding: 4px 12px 4px 4px
                                  - background: var(--card-background-color)
                                  - box-shadow: 0 2px 8px rgba(0,0,0,0.1)
                                name:
                                  - justify-self: start
                                  - font-size: 11px
                                  - color: var(--gray800)
                                  - opacity: 0.7
                                  - padding-bottom: 4px
                            - type: custom:button-card
                              entity: update.ucg_fiber
                              name: 업데이트
                              icon: mdi:package-up
                              show_label: true
                              label: |
                                [[[
                                  if (!entity || ['unknown','unavailable'].includes(entity.state)) return 'N/A';
                                  return entity.state === 'on' ? '가능' : '없음';
                                ]]]
                              styles:
                                grid:
                                  - grid-template-columns: 60px 1fr
                                  - grid-template-areas: '"i l" "i n"'
                                icon:
                                  - width: 24px
                                  - color: var(--gray800)
                                img_cell:
                                  - justify-self: start
                                  - width: 24px
                                  - height: 24px
                                  - background: rgba(var(--highlight))
                                  - padding: 10px
                                  - border-radius: 50%
                                label:
                                  - justify-self: start
                                  - font-size: 14px
                                  - padding-top: 2px
                                  - font-weight: 500
                                  - color: var(--gray800)
                                card:
                                  - height: 60px
                                  - border-radius: 24px
                                  - padding: 4px 12px 4px 4px
                                  - background: var(--card-background-color)
                                  - box-shadow: 0 2px 8px rgba(0,0,0,0.1)
                                name:
                                  - justify-self: start
                                  - font-size: 11px
                                  - color: var(--gray800)
                                  - opacity: 0.7
                                  - padding-bottom: 4px
                        - type: markdown
                          content: '### U7 Pro XG'
                          card_mod:
                            style: |
                              ha-card {
                                background: none;
                                box-shadow: none;
                                padding: 12px 8px 0px 8px;
                              }
                              ha-markdown {
                                color: var(--gray800);
                              }
                        - type: grid
                          square: false
                          columns: 2
                          cards:
                            - type: custom:button-card
                              name: 상태
                              icon: mdi:access-point-check
                              show_label: true
                              label: |
                                [[[
                                  const s = states['sensor.u7_pro_xg_state'];
                                  if (!s || ['unknown','unavailable'].includes(s.state)) return 'N/A';
                                  return s.state;
                                ]]]
                              styles:
                                grid:
                                  - grid-template-columns: 76px 1fr
                                  - grid-template-areas: '"i l" "i n"'
                                icon:
                                  - width: 30px
                                  - color: var(--gray800)
                                img_cell:
                                  - justify-self: start
                                  - width: 30px
                                  - height: 30px
                                  - background: rgba(var(--highlight))
                                  - padding: 14px
                                  - border-radius: 50%
                                label:
                                  - justify-self: start
                                  - font-size: 16px
                                  - padding-top: 4px
                                  - font-weight: 500
                                  - color: var(--gray800)
                                card:
                                  - height: 66px
                                  - border-radius: 75px
                                  - padding: 4px 20px 4px 4px
                                  - background: var(--popupBG)
                                name:
                                  - justify-self: start
                                  - font-size: 14px
                                  - color: var(--gray800)
                                  - opacity: 0.7
                                  - padding-bottom: 7px
                            - type: custom:button-card
                              name: 가동 시간
                              icon: mdi:clock-outline
                              show_label: true
                              label: |
                                [[[
                                  const s = states['sensor.u7_pro_xg_uptime'];
                                  if (!s || ['unknown','unavailable'].includes(s.state)) return 'N/A';
                                  const t = new Date(s.state);
                                  if (Number.isNaN(t.getTime())) return 'N/A';
                                  const now = new Date();
                                  const d = now - t;
                                  const days = Math.floor(d/86400000);
                                  return `${days}일`;
                                ]]]
                              styles:
                                grid:
                                  - grid-template-columns: 76px 1fr
                                  - grid-template-areas: '"i l" "i n"'
                                icon:
                                  - width: 30px
                                  - color: var(--gray800)
                                img_cell:
                                  - justify-self: start
                                  - width: 30px
                                  - height: 30px
                                  - background: rgba(var(--highlight))
                                  - padding: 14px
                                  - border-radius: 50%
                                label:
                                  - justify-self: start
                                  - font-size: 16px
                                  - padding-top: 4px
                                  - font-weight: 500
                                  - color: var(--gray800)
                                card:
                                  - height: 66px
                                  - border-radius: 75px
                                  - padding: 4px 20px 4px 4px
                                  - background: var(--popupBG)
                                name:
                                  - justify-self: start
                                  - font-size: 14px
                                  - color: var(--gray800)
                                  - opacity: 0.7
                                  - padding-bottom: 7px
                        - type: grid
                          square: false
                          columns: 3
                          cards:
                            - type: custom:button-card
                              entity: sensor.u7_pro_xg_cpu_utilization
                              name: CPU
                              icon: mdi:cpu-64-bit
                              show_label: true
                              label: |
                                [[[
                                  if (!entity || ['unknown','unavailable'].includes(entity.state)) return 'N/A';
                                  const v = Number(entity.state);
                                  return Number.isNaN(v) ? 'N/A' : `${v}%`;
                                ]]]
                              styles:
                                grid:
                                  - grid-template-columns: 60px 1fr
                                  - grid-template-areas: '"i l" "i n"'
                                icon:
                                  - width: 24px
                                  - color: var(--gray800)
                                img_cell:
                                  - justify-self: start
                                  - width: 24px
                                  - height: 24px
                                  - background: rgba(var(--highlight))
                                  - padding: 10px
                                  - border-radius: 50%
                                label:
                                  - justify-self: start
                                  - font-size: 14px
                                  - padding-top: 2px
                                  - font-weight: 500
                                  - color: var(--gray800)
                                card:
                                  - height: 60px
                                  - border-radius: 24px
                                  - padding: 4px 12px 4px 4px
                                  - background: var(--card-background-color)
                                  - box-shadow: 0 2px 8px rgba(0,0,0,0.1)
                                name:
                                  - justify-self: start
                                  - font-size: 12px
                                  - color: var(--gray800)
                                  - opacity: 0.7
                                  - padding-bottom: 4px
                            - type: custom:button-card
                              entity: sensor.u7_pro_xg_memory_utilization
                              name: 메모리
                              icon: mdi:memory
                              show_label: true
                              label: |
                                [[[
                                  if (!entity || ['unknown','unavailable'].includes(entity.state)) return 'N/A';
                                  const v = Number(entity.state);
                                  return Number.isNaN(v) ? 'N/A' : `${v}%`;
                                ]]]
                              styles:
                                grid:
                                  - grid-template-columns: 60px 1fr
                                  - grid-template-areas: '"i l" "i n"'
                                icon:
                                  - width: 24px
                                  - color: var(--gray800)
                                img_cell:
                                  - justify-self: start
                                  - width: 24px
                                  - height: 24px
                                  - background: rgba(var(--highlight))
                                  - padding: 10px
                                  - border-radius: 50%
                                label:
                                  - justify-self: start
                                  - font-size: 14px
                                  - padding-top: 2px
                                  - font-weight: 500
                                  - color: var(--gray800)
                                card:
                                  - height: 60px
                                  - border-radius: 24px
                                  - padding: 4px 12px 4px 4px
                                  - background: var(--card-background-color)
                                  - box-shadow: 0 2px 8px rgba(0,0,0,0.1)
                                name:
                                  - justify-self: start
                                  - font-size: 12px
                                  - color: var(--gray800)
                                  - opacity: 0.7
                                  - padding-bottom: 4px
                            - type: custom:button-card
                              entity: update.u7_pro_xg
                              name: 업데이트
                              icon: mdi:package-up
                              show_label: true
                              label: |
                                [[[
                                  if (!entity || ['unknown','unavailable'].includes(entity.state)) return 'N/A';
                                  return entity.state === 'on' ? '가능' : '없음';
                                ]]]
                              styles:
                                grid:
                                  - grid-template-columns: 60px 1fr
                                  - grid-template-areas: '"i l" "i n"'
                                icon:
                                  - width: 24px
                                  - color: var(--gray800)
                                img_cell:
                                  - justify-self: start
                                  - width: 24px
                                  - height: 24px
                                  - background: rgba(var(--highlight))
                                  - padding: 10px
                                  - border-radius: 50%
                                label:
                                  - justify-self: start
                                  - font-size: 14px
                                  - padding-top: 2px
                                  - font-weight: 500
                                  - color: var(--gray800)
                                card:
                                  - height: 60px
                                  - border-radius: 24px
                                  - padding: 4px 12px 4px 4px
                                  - background: var(--card-background-color)
                                  - box-shadow: 0 2px 8px rgba(0,0,0,0.1)
                                name:
                                  - justify-self: start
                                  - font-size: 11px
                                  - color: var(--gray800)
                                  - opacity: 0.7
                                  - padding-bottom: 4px
                    persist_state: false
                  - type: custom:local-conditional-card
                    id: influxdb
                    default: hide
                    card:
                      type: vertical-stack
                      cards:
                        - type: custom:paper-buttons-row
                          styles:
                            justify-content: center
                            margin: 0 auto 6px auto
                            width: max-content
                            background-color: var(--popupBG)
                            border: 4px solid var(--popupBG)
                            border-radius: 28px
                          buttons:
                            - layout: name
                              name: Home Assistant
                              ripple: none
                              tap_action:
                                action: fire-dom-event
                                local_conditional_card:
                                  action: set
                                  ids:
                                    - homeass: show
                                    - unifi: hide
                                    - influxdb: hide
                              styles:
                                name:
                                  padding: 0 22px
                                  color: var(--gray800)
                                button:
                                  display: flex
                                  height: 24px
                                  background: transparent
                                  border-radius: 24px
                                  color: var(--white)
                            - layout: name
                              name: Unifi
                              ripple: none
                              tap_action:
                                action: fire-dom-event
                                local_conditional_card:
                                  action: set
                                  ids:
                                    - homeass: hide
                                    - unifi: show
                                    - influxdb: hide
                              styles:
                                name:
                                  padding: 0 22px
                                  color: var(--gray800)
                                button:
                                  display: flex
                                  height: 24px
                                  background: transparent
                                  border-radius: 24px
                                  color: var(--white)
                            - layout: name
                              name: InfluxDB
                              ripple: none
                              tap_action:
                                action: fire-dom-event
                                local_conditional_card:
                                  action: set
                                  ids:
                                    - homeass: hide
                                    - unifi: hide
                                    - influxdb: show
                              styles:
                                name:
                                  padding: 0 22px
                                  color: var(--black)
                                button:
                                  display: flex
                                  height: 24px
                                  background: var(--active-small)
                                  border-radius: 24px
                                  color: var(--white)
                        - type: custom:gap-card
                          height: 12
                        - type: grid
                          square: false
                          columns: 2
                          cards:
                            - type: custom:button-card
                              name: DB 크기
                              icon: mdi:database
                              show_label: true
                              label: |
                                [[[
                                  const s = states['sensor.influxdb_db_size'];
                                  if (!s || ['unknown','unavailable'].includes(s.state)) return 'N/A';
                                  const v = Number(s.state);
                                  return Number.isNaN(v) ? 'N/A' : `${v} MB`;
                                ]]]
                              styles:
                                card:
                                  - height: 144px
                                  - margin-bottom: 12px
                                  - background: var(--card-background-color)
                                  - padding: 20px
                                  - border-radius: 24px
                                  - box-shadow: 0 2px 8px rgba(0,0,0,0.1)
                                grid:
                                  - grid-template-areas: '"i" "l" "n"'
                                img_cell:
                                  - justify-self: end
                                  - align-self: start
                                  - background: rgba(var(--highlight))
                                  - padding: 14px
                                  - border-radius: 50%
                                  - margin: '-16px -16px 0 0'
                                  - width: 30px
                                  - height: 30px
                                icon:
                                  - width: 30px
                                  - height: 30px
                                  - color: var(--gray800)
                                label:
                                  - justify-self: start
                                  - font-size: 2em
                                  - font-weight: 300
                                  - color: var(--gray800)
                                name:
                                  - justify-self: start
                                  - font-size: 14px
                                  - color: var(--gray800)
                                  - opacity: 0.7
                            - type: grid
                              square: false
                              columns: 1
                              cards:
                                - type: custom:button-card
                                  name: 백업 상태
                                  icon: mdi:backup-restore
                                  show_label: true
                                  label: |
                                    [[[
                                      const s = states['sensor.influxdb_backup_status'];
                                      if (!s || ['unknown','unavailable'].includes(s.state)) return 'N/A';
                                      const status = s.state;
                                      return status === 'failed' ? '실패' : status === 'success' ? '성공' : status;
                                    ]]]
                                  styles:
                                    grid:
                                      - grid-template-columns: 76px 1fr
                                      - grid-template-areas: '"i l" "i n"'
                                    icon:
                                      - width: 30px
                                      - color: var(--gray800)
                                    img_cell:
                                      - justify-self: start
                                      - width: 30px
                                      - height: 30px
                                      - background: rgba(var(--highlight))
                                      - padding: 14px
                                      - border-radius: 50%
                                    label:
                                      - justify-self: start
                                      - font-size: 16px
                                      - padding-top: 4px
                                      - font-weight: 500
                                      - color: var(--gray800)
                                    card:
                                      - height: 66px
                                      - border-radius: 24px
                                      - padding: 4px 20px 4px 4px
                                      - background: var(--card-background-color)
                                      - box-shadow: 0 2px 8px rgba(0,0,0,0.1)
                                    name:
                                      - justify-self: start
                                      - font-size: 14px
                                      - color: var(--gray800)
                                      - opacity: 0.7
                                      - padding-bottom: 7px
                                - type: custom:button-card
                                  name: 백업 개수
                                  icon: mdi:counter
                                  show_label: true
                                  label: |
                                    [[[
                                      const s = states['sensor.influxdb_backup_count'];
                                      if (!s || ['unknown','unavailable'].includes(s.state)) return 'N/A';
                                      return `${s.state} 개`;
                                    ]]]
                                  styles:
                                    grid:
                                      - grid-template-columns: 76px 1fr
                                      - grid-template-areas: '"i l" "i n"'
                                    icon:
                                      - width: 30px
                                      - color: var(--gray800)
                                    img_cell:
                                      - justify-self: start
                                      - width: 30px
                                      - height: 30px
                                      - background: rgba(var(--highlight))
                                      - padding: 14px
                                      - border-radius: 50%
                                    label:
                                      - justify-self: start
                                      - font-size: 16px
                                      - padding-top: 4px
                                      - font-weight: 500
                                      - color: var(--gray800)
                                    card:
                                      - height: 66px
                                      - border-radius: 24px
                                      - padding: 4px 20px 4px 4px
                                      - background: var(--card-background-color)
                                      - box-shadow: 0 2px 8px rgba(0,0,0,0.1)
                                    name:
                                      - justify-self: start
                                      - font-size: 14px
                                      - color: var(--gray800)
                                      - opacity: 0.7
                                      - padding-bottom: 7px
                        - type: grid
                          square: false
                          columns: 2
                          cards:
                            - type: custom:button-card
                              entity: sensor.influxdb_backup_size
                              name: 백업 크기
                              icon: mdi:folder-zip
                              show_label: true
                              label: |
                                [[[
                                  if (!entity || ['unknown','unavailable'].includes(entity.state)) return 'N/A';
                                  return entity.state;
                                ]]]
                              styles:
                                grid:
                                  - grid-template-columns: 76px 1fr
                                  - grid-template-areas: '"i l" "i n"'
                                icon:
                                  - width: 30px
                                  - color: var(--gray800)
                                img_cell:
                                  - justify-self: start
                                  - width: 30px
                                  - height: 30px
                                  - background: rgba(var(--highlight))
                                  - padding: 14px
                                  - border-radius: 50%
                                label:
                                  - justify-self: start
                                  - font-size: 16px
                                  - padding-top: 4px
                                  - font-weight: 500
                                  - color: var(--gray800)
                                card:
                                  - height: 66px
                                  - border-radius: 75px
                                  - padding: 4px 20px 4px 4px
                                  - background: var(--popupBG)
                                name:
                                  - justify-self: start
                                  - font-size: 14px
                                  - color: var(--gray800)
                                  - opacity: 0.7
                                  - padding-bottom: 7px
                            - type: custom:button-card
                              entity: sensor.influxdb_latest_backup
                              name: 최신 백업
                              icon: mdi:calendar-clock
                              show_label: true
                              label: |
                                [[[
                                  if (!entity || ['unknown','unavailable'].includes(entity.state)) return 'N/A';
                                  const backup = entity.state;
                                  const match = backup.match(/(\d{4})-(\d{2})-(\d{2})/);
                                  if (match) {
                                    return match[2] + '/' + match[3];
                                  }
                                  return backup;
                                ]]]
                              styles:
                                grid:
                                  - grid-template-columns: 76px 1fr
                                  - grid-template-areas: '"i l" "i n"'
                                icon:
                                  - width: 30px
                                  - color: var(--gray800)
                                img_cell:
                                  - justify-self: start
                                  - width: 30px
                                  - height: 30px
                                  - background: rgba(var(--highlight))
                                  - padding: 14px
                                  - border-radius: 50%
                                label:
                                  - justify-self: start
                                  - font-size: 16px
                                  - padding-top: 4px
                                  - font-weight: 500
                                  - color: var(--gray800)
                                card:
                                  - height: 66px
                                  - border-radius: 75px
                                  - padding: 4px 20px 4px 4px
                                  - background: var(--popupBG)
                                name:
                                  - justify-self: start
                                  - font-size: 14px
                                  - color: var(--gray800)
                                  - opacity: 0.7
                                  - padding-bottom: 7px
                    persist_state: false
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                name: 에너지
                icon: mdi:power-plug
                state: null
                hash: '#strom'
                is_sidebar_hidden: true
                styles: >-
                  .bubble-pop-up-container {
                    --vertical-stack-card-gap: 0px!important;
                  } #header-container > div > div { background:
                  var(--popupBG)!important; } #header-container > button {
                  background: none; } .icon-container { background-color:
                  var(--gray800)!important; } .icon-container > ha-icon { color:
                  var(--gray000)!important; opacity: 1!important } .bubble-icon
                  { --mdc-icon-size: 24px !important; }
                bg_blur: '5'
                shadow_opacity: '20'
                bg_opacity: '98'
                margin_top_mobile: 50px
                margin_top_desktop: 50px
                card_layout: large
              - type: custom:gap-card
                height: 0
              - type: vertical-stack
                cards:
                  - type: custom:local-conditional-card
                    id: forbruk
                    default: show
                    card:
                      type: vertical-stack
                      cards:
                        - type: custom:paper-buttons-row
                          styles:
                            justify-content: center
                            margin: 0 auto 6px auto
                            width: max-content
                            background-color: var(--popupBG)
                            border: 4px solid var(--popupBG)
                            border-radius: 28px
                          buttons:
                            - layout: name
                              name: 사용량
                              ripple: none
                              tap_action:
                                action: fire-dom-event
                                local_conditional_card:
                                  action: set
                                  ids:
                                    - priser: hide
                                    - forbruk: show
                              styles:
                                name:
                                  padding: 0 22px
                                  color: var(--black)
                                button:
                                  display: flex
                                  height: 24px
                                  background: var(--active-small)
                                  border-radius: 24px
                                  color: var(--white)
                            - layout: name
                              name: 요금
                              ripple: none
                              tap_action:
                                action: fire-dom-event
                                local_conditional_card:
                                  action: set
                                  ids:
                                    - priser: show
                                    - forbruk: hide
                              styles:
                                name:
                                  padding: 0 22px
                                  color: var(--gray800)
                                button:
                                  display: flex
                                  height: 24px
                                  background-color: none
                                  border-radius: 24px
                                  color: var(--white)
                        - type: custom:gap-card
                          height: 6
                        - type: grid
                          square: false
                          columns: 2
                          cards:
                            - type: custom:button-card
                              name: 현재 전력
                              show_label: true
                              icon: mdi:home-lightning-bolt
                              label: |
                                [[[ 
                                  const s = states['sensor.sihas_energy_monitor_power'] || states['sensor.total_power_consumption'];
                                  let raw = s?.state;
                                  if (!raw || raw === 'unknown' || raw === 'unavailable') raw = '0';
                                  const value = Number(raw) || 0;
                                  const formatted = value.toLocaleString('ko-KR');
                                  return `${formatted} <span style="font-size:14px">W</span>`;
                                ]]]
                              styles:
                                card:
                                  - padding: 20px
                                  - height: 180px
                                  - background: var(--popupBG)
                                grid:
                                  - grid-template-areas: '"i" "l" "n"'
                                img_cell:
                                  - justify-self: end
                                  - align-self: start
                                  - background: rgba(var(--highlight))
                                  - padding: 14px
                                  - border-radius: 50%
                                  - margin: '-16px -16px 0 0'
                                  - width: 30px
                                  - height: 30px
                                icon:
                                  - width: 30px
                                  - height: 30px
                                  - color: var(--gray800)
                                label:
                                  - justify-self: start
                                  - font-size: 2em
                                  - font-weight: 300
                                  - color: var(--gray800)
                                name:
                                  - justify-self: start
                                  - font-size: 14px
                                  - color: var(--gray800)
                                  - opacity: '0.7'
                            - type: custom:button-card
                              name: 이번 달 사용량
                              show_label: true
                              icon: mdi:lightning-bolt
                              custom_fields:
                                state: >
                                  [[[  return
                                  (states['sensor.electricity_energy_monthly']?.state
                                  || '0') + ' kWh' ]]]
                              label: >
                                [[[  return '누적 계량: ' +
                                (states['sensor.sihas_energy_monitor_energy']?.state
                                || '0') + ' kWh' ]]]
                              styles:
                                card:
                                  - padding: 20px
                                  - height: 180px
                                  - background: var(--popupBG)
                                grid:
                                  - grid-template-areas: '"i i" "l state" "n n"'
                                img_cell:
                                  - justify-self: end
                                  - align-self: start
                                  - background: rgba(var(--highlight))
                                  - padding: 14px
                                  - border-radius: 50%
                                  - margin: '-16px -16px 0 0'
                                  - width: 30px
                                  - height: 30px
                                icon:
                                  - width: 30px
                                  - height: 30px
                                  - color: var(--gray800)
                                label:
                                  - justify-self: start
                                  - font-size: 2em
                                  - font-weight: 300
                                  - color: var(--gray800)
                                name:
                                  - justify-self: start
                                  - font-size: 14px
                                  - color: var(--gray800)
                                  - opacity: '0.7'
                                custom_fields:
                                  state:
                                    - align-self: end
                                    - font-size: 14px
                                    - color: var(--gray800)
                                    - opacity: '0.7'
                                    - margin-bottom: 5px
                        - type: custom:button-card
                          entity: sensor.sihas_energy_monitor_energy
                          name: 누적 사용량 (계량)
                          show_label: true
                          icon: mdi:gauge
                          label: |
                            [[[ return (entity?.state || '0') + ' kWh'; ]]]
                          styles:
                            grid:
                              - grid-template-columns: 76px 1fr
                              - grid-template-areas: '"i l" "i n"'
                            icon:
                              - width: 30px
                              - color: var(--gray800)
                            img_cell:
                              - justify-self: start
                              - width: 30px
                              - height: 30px
                              - background: rgba(var(--highlight))
                              - padding: 14px
                              - border-radius: 50%
                            label:
                              - justify-self: start
                              - font-size: 16px
                              - padding-top: 4px
                              - font-weight: 500
                              - color: var(--gray800)
                            card:
                              - height: 66px
                              - border-radius: 75px
                              - padding: 4px 20px 4px 4px
                              - background: var(--popupBG)
                              - margin: 12px 0 0 0
                            name:
                              - justify-self: start
                              - font-size: 14px
                              - color: var(--gray800)
                              - opacity: 0.7
                              - padding-bottom: 7px
                        - type: energy-date-selection
                          card_mod:
                            style: >
                              ha-card {background: none;} ha-card > div >
                              hui-energy-period-selector $ div > .label
                              {font-size:10px!important }
                        - type: energy-usage-graph
                          card_mod:
                            style: |
                              ha-card {background: var(--popupBG);}
                        - type: custom:gap-card
                          height: 12
                        - type: energy-sources-table
                          card_mod:
                            style: >
                              ha-card { background: var(--popupBG)!important; }
                              .mdc-data-table { background:
                              var(--popupBG)!important; } .mdc-data-table__row
                              {height: 32px!important;}
                              .mdc-data-table__table-container {padding-bottom:
                              12px!important;} .mdc-data-table__table {
                              white-space: unset!important; }
                              .mdc-data-table__cell,
                              .mdc-data-table__header-cell {border:
                              none!important;} .mdc-data-table
                              .mdc-data-table__header-cell
                              {background:var(--popupBG)!important;border-bottom:1px
                              solid var(--popupBG)!important} .bullet {width:
                              16px!important;border-radius:
                              24px!important;border-width: 0!important;}
                        - type: custom:gap-card
                          height: 30
                  - type: custom:local-conditional-card
                    id: priser
                    default: hide
                    card:
                      type: vertical-stack
                      cards:
                        - type: custom:paper-buttons-row
                          styles:
                            justify-content: center
                            margin: 0 auto 6px auto
                            width: max-content
                            background-color: var(--popupBG)
                            border: 4px solid var(--popupBG)
                            border-radius: 28px
                          buttons:
                            - layout: name
                              name: 사용량
                              ripple: none
                              tap_action:
                                action: fire-dom-event
                                local_conditional_card:
                                  action: set
                                  ids:
                                    - priser: hide
                                    - forbruk: show
                              styles:
                                name:
                                  padding: 0 22px
                                  color: var(--gray800)
                                button:
                                  display: flex
                                  height: 24px
                                  background-color: none
                                  border-radius: 24px
                                  color: var(--white)
                            - layout: name
                              name: 요금
                              ripple: none
                              tap_action:
                                action: fire-dom-event
                                local_conditional_card:
                                  action: set
                                  ids:
                                    - priser: show
                                    - forbruk: hide
                              styles:
                                name:
                                  padding: 0 22px
                                  color: var(--black)
                                button:
                                  display: flex
                                  height: 24px
                                  background: var(--active-small)
                                  border-radius: 24px
                                  color: var(--white)
                        - type: custom:gap-card
                          height: 6
                        - type: grid
                          square: false
                          columns: 2
                          cards:
                            - type: custom:button-card
                              name: 현재 사용요금
                              show_label: true
                              icon: mdi:receipt-text
                              label: |
                                [[[ 
                                  let raw = states['sensor.jeongiyogeum_gyesan_kwhto_won']?.state;
                                  if (!raw || raw === 'unknown' || raw === 'unavailable') raw = '0';
                                  const value = Number(raw) || 0;
                                  const formatted = value.toLocaleString('ko-KR');
                                  return `${formatted} <span style="font-size:14px">원</span>`;
                                ]]]
                              styles:
                                card:
                                  - padding: 20px
                                  - height: 180px
                                  - background: var(--popupBG)
                                grid:
                                  - grid-template-areas: '"i" "l" "n"'
                                img_cell:
                                  - justify-self: end
                                  - align-self: start
                                  - background: rgba(var(--highlight))
                                  - padding: 14px
                                  - border-radius: 50%
                                  - margin: '-16px -16px 0 0'
                                  - width: 30px
                                  - height: 30px
                                icon:
                                  - width: 30px
                                  - height: 30px
                                  - color: var(--gray800)
                                label:
                                  - justify-self: start
                                  - font-size: 2em
                                  - font-weight: 300
                                  - color: var(--gray800)
                                name:
                                  - justify-self: start
                                  - font-size: 14px
                                  - color: var(--gray800)
                                  - opacity: '0.7'
                            - type: custom:button-card
                              name: 예상 요금
                              show_label: true
                              icon: mdi:calculator
                              label: |
                                [[[ 
                                  let raw = states['sensor.jeongiyogeum_gyesan_kwhto_forecast_won']?.state;
                                  if (!raw || raw === 'unknown' || raw === 'unavailable') raw = '0';
                                  const value = Number(raw) || 0;
                                  const formatted = value.toLocaleString('ko-KR');
                                  return `${formatted} <span style="font-size:14px">원</span>`;
                                ]]]
                              styles:
                                card:
                                  - padding: 20px
                                  - height: 180px
                                  - background: var(--popupBG)
                                grid:
                                  - grid-template-areas: '"i" "l" "n"'
                                img_cell:
                                  - justify-self: end
                                  - align-self: start
                                  - background: rgba(var(--highlight))
                                  - padding: 14px
                                  - border-radius: 50%
                                  - margin: '-16px -16px 0 0'
                                  - width: 30px
                                  - height: 30px
                                icon:
                                  - width: 30px
                                  - height: 30px
                                  - color: var(--gray800)
                                label:
                                  - justify-self: start
                                  - font-size: 2em
                                  - font-weight: 300
                                  - color: var(--gray800)
                                name:
                                  - justify-self: start
                                  - font-size: 14px
                                  - color: var(--gray800)
                                  - opacity: '0.7'
                        - type: custom:button-card
                          name: 현재 사용량 (월)
                          show_label: true
                          icon: mdi:counter
                          label: >
                            [[[ let raw =
                            states['sensor.jeongiyogeum_gyesan_kwhto_kwh']?.state
                            || '0'; return `${raw} kWh`; ]]]
                          styles:
                            grid:
                              - grid-template-columns: 76px 1fr
                              - grid-template-areas: '"i l" "i n"'
                            icon:
                              - width: 30px
                              - color: var(--gray800)
                            img_cell:
                              - justify-self: start
                              - width: 30px
                              - height: 30px
                              - background: rgba(var(--highlight))
                              - padding: 14px
                              - border-radius: 50%
                            label:
                              - justify-self: start
                              - font-size: 16px
                              - padding-top: 4px
                              - font-weight: 500
                              - color: var(--gray800)
                            card:
                              - height: 66px
                              - border-radius: 75px
                              - padding: 4px 20px 4px 4px
                              - background: var(--popupBG)
                              - margin: 12px 0 0 0
                            name:
                              - justify-self: start
                              - font-size: 14px
                              - color: var(--gray800)
                              - opacity: 0.7
                              - padding-bottom: 7px
                        - type: custom:button-card
                          name: 예상 사용량 (월)
                          show_label: true
                          icon: mdi:counter
                          label: >
                            [[[ let raw =
                            states['sensor.jeongiyogeum_gyesan_kwhto_forecast']?.state
                            || '0'; return `${raw} kWh`; ]]]
                          styles:
                            grid:
                              - grid-template-columns: 76px 1fr
                              - grid-template-areas: '"i l" "i n"'
                            icon:
                              - width: 30px
                              - color: var(--gray800)
                            img_cell:
                              - justify-self: start
                              - width: 30px
                              - height: 30px
                              - background: rgba(var(--highlight))
                              - padding: 14px
                              - border-radius: 50%
                            label:
                              - justify-self: start
                              - font-size: 16px
                              - padding-top: 4px
                              - font-weight: 500
                              - color: var(--gray800)
                            card:
                              - height: 66px
                              - border-radius: 75px
                              - padding: 4px 20px 4px 4px
                              - background: var(--popupBG)
                            name:
                              - justify-self: start
                              - font-size: 14px
                              - color: var(--gray800)
                              - opacity: 0.7
                              - padding-bottom: 7px
                        - type: custom:gap-card
                          height: 30
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                name: Paul IONIQ9
                icon: mdi:car
                state: null
                hash: '#car'
                is_sidebar_hidden: true
                styles: |-
                  .bubble-pop-up-container {
                    --vertical-stack-card-gap: 0px!important;
                  } #header-container > div > div {
                    background: var(--popupBG)!important;
                  } #header-container > button {
                    background: none;
                  } .icon-container {
                    background-color: var(--gray800)!important;
                  } .icon-container > ha-icon {
                    color: var(--gray000)!important;
                    opacity: 1!important;
                  } .bubble-icon {
                    --mdc-icon-size: 24px !important;
                  }
                bg_blur: '5'
                shadow_opacity: '20'
                bg_opacity: '98'
                margin_top_mobile: 50px
                margin_top_desktop: 50px
                card_layout: large
                sub_button:
                  - show_background: false
                    entity: sensor.paul_ioniq9_charging_state
                    name: 업데이트
                    show_name: true
                    show_state: false
                    show_last_changed: true
                    icon: mdi:update
              - type: custom:gap-card
                height: 0
              - type: grid
                square: false
                columns: 2
                cards:
                  - type: custom:button-card
                    entity: sensor.paul_ioniq9_battery
                    name: EV 배터리
                    icon: mdi:ev-station
                    show_icon: true
                    show_label: true
                    show_state: false
                    styles:
                      card:
                        - padding: 0
                        - height: 184px
                        - background: var(--popupBG)
                        - border-radius: 28px
                        - box-shadow: 0 12px 24px rgba(0, 0, 0, 0.18)
                      grid:
                        - grid-template-areas: '"i" "l" "n" "bar"'
                        - grid-template-rows: min-content min-content min-content min-content
                        - grid-template-columns: 1fr
                        - row-gap: 2px
                      label:
                        - justify-self: start
                        - font-size: 44px
                        - font-weight: 300
                        - padding: 16px 0 0 24px
                        - color: var(--gray000)
                      name:
                        - justify-self: start
                        - align-self: start
                        - font-size: 15px
                        - letter-spacing: 0.5px
                        - color: rgba(255,255,255,0.68)
                        - padding: 0 0 0 24px
                      img_cell:
                        - justify-self: end
                        - align-self: start
                        - background: rgba(var(--highlight))
                        - padding: 12px
                        - border-radius: 50%
                        - margin: 12px 12px 0 0
                        - width: 28px
                        - height: 28px
                      icon:
                        - width: 26px
                        - height: 26px
                        - color: rgba(255, 255, 255, 0.78)
                      custom_fields:
                        bar:
                          - justify-self: stretch
                          - padding: 0 24px 26px 24px
                          - width: 100%
                          - box-sizing: border-box
                    label: |
                      [[[
                        const value = Number(entity.state);
                        if (!isNaN(value)) {
                          return `${value.toFixed(0)}%`;
                        }
                        const text = {
                          normal: '정상',
                          unknown: '알 수 없음'
                        }[entity.state];
                        return text || (entity.state || '알 수 없음');
                      ]]]
                    custom_fields:
                      bar: |
                        [[[
                          const raw = Number(entity.state);
                          let state = isNaN(raw) ? (entity.state === 'normal' ? 100 : 0) : raw;
                          state = Math.max(0, Math.min(100, state));
                          const baseColor = state > 50 ? 'var(--blue)' : state > 30 ? 'var(--orange)' : 'var(--red)';
                          return `
                            <style>
                              .ev-bar {
                                width: calc(100% - 48px);
                                margin: 0 24px 18px 24px;
                                height: 28px;
                                border-radius: 16px;
                                background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(0,0,0,0.18));
                                border: 1px solid rgba(255,255,255,0.06);
                                overflow: hidden;
                                position: relative;
                                box-shadow: inset 0 2px 6px rgba(0,0,0,0.35);
                              }
                              .ev-bar__fill {
                                height: 100%;
                                border-radius: 16px;
                                background: linear-gradient(90deg, ${baseColor}, ${baseColor});
                                position: relative;
                              }
                              .ev-bar__fill::after {
                                content: '';
                                position: absolute;
                                inset: 0;
                                background: repeating-linear-gradient(45deg, rgba(255,255,255,0.25), rgba(255,255,255,0.25) 8px, transparent 8px, transparent 16px);
                                opacity: 0.55;
                              }
                            </style>
                            <div class="ev-bar">
                              <div class="ev-bar__fill" style="width:${state}%;"></div>
                            </div>`;
                        ]]]
                  - type: custom:button-card
                    entity: sensor.paul_ioniq9_auxiliary_battery
                    name: 보조 배터리
                    icon: mdi:car-battery
                    show_icon: true
                    show_label: true
                    show_state: false
                    styles:
                      card:
                        - padding: 0
                        - height: 184px
                        - background: var(--popupBG)
                        - border-radius: 28px
                        - box-shadow: 0 12px 24px rgba(0, 0, 0, 0.18)
                      grid:
                        - grid-template-areas: '"i" "l" "n" "bar"'
                        - grid-template-rows: min-content min-content min-content min-content
                        - grid-template-columns: 1fr
                        - row-gap: 2px
                      label:
                        - justify-self: start
                        - font-size: 44px
                        - font-weight: 300
                        - padding: 16px 0 0 24px
                        - color: var(--gray000)
                      name:
                        - justify-self: start
                        - align-self: start
                        - font-size: 15px
                        - letter-spacing: 0.5px
                        - color: rgba(255,255,255,0.68)
                        - padding: 0 0 0 24px
                      img_cell:
                        - justify-self: end
                        - align-self: start
                        - background: rgba(var(--highlight))
                        - padding: 12px
                        - border-radius: 50%
                        - margin: 12px 12px 0 0
                        - width: 28px
                        - height: 28px
                      icon:
                        - width: 26px
                        - height: 26px
                        - color: rgba(255, 255, 255, 0.78)
                      custom_fields:
                        bar:
                          - justify-self: stretch
                          - padding: 0 24px 26px 24px
                          - width: 100%
                          - box-sizing: border-box
                    label: |
                      [[[
                        const value = Number(entity.state);
                        if (!isNaN(value)) {
                          return `${value.toFixed(0)}%`;
                        }
                        const mapping = {
                          normal: '정상',
                          low: '낮음',
                          high: '높음',
                          unknown: '알 수 없음'
                        };
                        return mapping[entity.state] || (entity.state || '알 수 없음');
                      ]]]
                    custom_fields:
                      bar: |
                        [[[
                          const raw = Number(entity.state);
                          let state = isNaN(raw) ? (entity.state === 'normal' ? 100 : 0) : raw;
                          state = Math.max(0, Math.min(100, state));
                          const baseColor = state > 50 ? 'var(--blue)' : state > 30 ? 'var(--orange)' : 'var(--red)';
                          return `
                            <style>
                              .aux-bar {
                                width: calc(100% - 48px);
                                margin: 0 24px 18px 24px;
                                height: 28px;
                                border-radius: 16px;
                                background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(0,0,0,0.18));
                                border: 1px solid rgba(255,255,255,0.06);
                                overflow: hidden;
                                position: relative;
                                box-shadow: inset 0 2px 6px rgba(0,0,0,0.35);
                              }
                              .aux-bar__fill {
                                height: 100%;
                                border-radius: 18px;
                                background: linear-gradient(90deg, ${baseColor}, ${baseColor});
                                position: relative;
                              }
                              .aux-bar__fill::after {
                                content: '';
                                position: absolute;
                                inset: 0;
                                background: repeating-linear-gradient(45deg, rgba(255,255,255,0.25), rgba(255,255,255,0.25) 8px, transparent 8px, transparent 16px);
                                opacity: 0.55;
                              }
                            </style>
                            <div class="aux-bar">
                              <div class="aux-bar__fill" style="width:${state}%;"></div>
                            </div>`;
                        ]]]
              - type: custom:gap-card
                height: 0
              - type: vertical-stack
                cards:
                  - type: custom:local-conditional-card
                    id: info2
                    default: show
                    card:
                      type: vertical-stack
                      cards:
                        - type: custom:paper-buttons-row
                          styles:
                            background-color: var(--var-grey800)
                            border: 4px solid var(--var-grey800)
                            border-radius: 28px
                            justify-content: center
                            width: max-content
                            margin: 0 auto 12px auto
                          buttons:
                            - layout: name
                              name: 정보
                              ripple: none
                              tap_action:
                                action: fire-dom-event
                                local_conditional_card:
                                  action: set
                                  ids:
                                    - info2: show
                                    - lading: hide
                                    - kontrolll: hide
                              styles:
                                name:
                                  color: var(--black)
                                  padding: 0 22px
                                button:
                                  display: flex
                                  height: 24px
                                  background: var(--active-small)
                                  border-radius: 24px
                            - layout: name
                              name: 제어
                              ripple: none
                              tap_action:
                                action: fire-dom-event
                                local_conditional_card:
                                  action: set
                                  ids:
                                    - info2: hide
                                    - lading: hide
                                    - kontrolll: show
                              styles:
                                name:
                                  color: var(--var-grey400)
                                  padding: 0 22px
                                button:
                                  display: flex
                                  height: 24px
                                  background: none
                                  border-radius: 24px
                            - layout: name
                              name: 충전
                              ripple: none
                              tap_action:
                                action: fire-dom-event
                                local_conditional_card:
                                  action: set
                                  ids:
                                    - info2: hide
                                    - lading: show
                                    - kontrolll: hide
                              styles:
                                name:
                                  color: var(--var-grey400)
                                  padding: 0 22px
                                button:
                                  display: flex
                                  height: 24px
                                  background: none
                                  border-radius: 24px
                        - type: custom:gap-card
                          height: 6
                        - type: grid
                          square: false
                          columns: 2
                          cards:
                            - type: custom:button-card
                              entity: sensor.paul_ioniq9_range
                              name: 주행가능거리
                              icon: mdi:road-variant
                              show_icon: true
                              show_label: true
                              styles:
                                card:
                                  - padding: 20px
                                  - height: 180px
                                  - background: var(--popupBG)
                                  - border-radius: 28px
                                grid:
                                  - grid-template-areas: '"i" "l" "n"'
                                label:
                                  - justify-self: start
                                  - font-size: 2em
                                  - font-weight: 300
                                  - color: rgba(255, 255, 255, 0.72)
                                name:
                                  - justify-self: start
                                  - font-size: 14px
                                  - color: rgba(255, 255, 255, 0.72)
                                  - opacity: '0.7'
                                img_cell:
                                  - justify-self: end
                                  - align-self: start
                                  - background: rgba(var(--highlight))
                                  - padding: 14px
                                  - border-radius: 50%
                                  - margin: '-16px -16px 0 0'
                                  - width: 30px
                                  - height: 30px
                                icon:
                                  - width: 30px
                                  - height: 30px
                                  - color: rgba(255, 255, 255, 0.72)
                              label: |
                                [[[
                                  const value = Number(entity.state);
                                  if (!isNaN(value)) {
                                    return `${value.toLocaleString('ko-KR')}<span style="font-size:14px"> km</span>`;
                                  }
                                  return entity.state || '-';
                                ]]]
                            - type: custom:button-card
                              entity: sensor.paul_ioniq9_odometer
                              name: 오도미터
                              icon: mdi:speedometer
                              show_icon: true
                              show_label: true
                              styles:
                                card:
                                  - padding: 20px
                                  - height: 180px
                                  - background: var(--popupBG)
                                  - border-radius: 28px
                                grid:
                                  - grid-template-areas: '"i" "l" "n"'
                                label:
                                  - justify-self: start
                                  - font-size: 2em
                                  - font-weight: 300
                                  - color: rgba(255, 255, 255, 0.72)
                                name:
                                  - justify-self: start
                                  - font-size: 14px
                                  - color: rgba(255, 255, 255, 0.72)
                                  - opacity: '0.7'
                                img_cell:
                                  - justify-self: end
                                  - align-self: start
                                  - background: rgba(var(--highlight))
                                  - padding: 14px
                                  - border-radius: 50%
                                  - margin: '-16px -16px 0 0'
                                  - width: 30px
                                  - height: 30px
                                icon:
                                  - width: 30px
                                  - height: 30px
                                  - color: rgba(255, 255, 255, 0.72)
                              label: |
                                [[[
                                  const value = Number(entity.state);
                                  if (!isNaN(value)) {
                                    return `${value.toLocaleString('ko-KR')}<span style="font-size:14px"> km</span>`;
                                  }
                                  return entity.state || '-';
                                ]]]
                        - type: custom:gap-card
                          height: 12
                        - type: custom:mini-graph-card
                          entities:
                            - entity: sensor.paul_ioniq9_battery
                              name: EV 배터리
                          name: 배터리 추이
                          hours_to_show: 168
                          points_per_hour: 1
                          aggregate_func: max
                          group_by: hour
                          line_width: 0
                          bar_spacing: 6
                          font_size: 48
                          font_size_header: 12
                          hour24: true
                          lower_bound: 0
                          upper_bound: 100
                          show:
                            graph: bar
                            name: true
                            state: false
                            legend: false
                            icon: false
                            labels: false
                            labels_secondary: false
                          color_thresholds:
                            - value: 20
                              color: var(--red)
                            - value: 40
                              color: var(--orange)
                            - value: 60
                              color: var(--yellow)
                            - value: 80
                              color: var(--blue)
                          card_mod:
                            style: |
                              ha-card {
                                background: var(--popupBG);
                                border-radius: 28px;
                                padding: 8px 8px 4px 8px;
                              }
                              .header {
                                padding: 6px 16px 0 16px;
                              }
                              .graph {
                                margin: 0 8px 8px 8px;
                              }
                        - type: custom:gap-card
                          height: 12
                        - type: grid
                          square: false
                          columns: 2
                          cards:
                            - type: custom:button-card
                              entity: sensor.paul_ioniq9_smart_key_battery
                              name: 스마트키 배터리
                              icon: mdi:key-variant
                              show_icon: true
                              show_label: true
                              styles:
                                card:
                                  - padding: 20px
                                  - height: 150px
                                  - background: var(--popupBG)
                                  - border-radius: 24px
                                  - box-shadow: 0 10px 20px rgba(0,0,0,0.18)
                                grid:
                                  - grid-template-areas: '"i" "l" "n"'
                                label:
                                  - justify-self: start
                                  - font-size: 1.8em
                                  - font-weight: 300
                                  - color: rgba(255, 255, 255, 0.85)
                                name:
                                  - justify-self: start
                                  - font-size: 14px
                                  - color: rgba(255, 255, 255, 0.72)
                                  - opacity: 0.8
                                img_cell:
                                  - justify-self: end
                                  - align-self: start
                                  - background: rgba(var(--highlight))
                                  - padding: 12px
                                  - border-radius: 50%
                                  - margin: '-14px -14px 0 0'
                                  - width: 28px
                                  - height: 28px
                                icon:
                                  - width: 26px
                                  - height: 26px
                                  - color: rgba(255, 255, 255, 0.75)
                              label: |
                                [[[
                                  const mapping = { normal: '정상', low: '낮음', high: '높음' };
                                  return mapping[entity.state] || (entity.state || '-');
                                ]]]
                            - type: custom:button-card
                              entity: sensor.paul_ioniq9_washer_fluid
                              name: 워셔액 상태
                              icon: mdi:wiper-wash
                              show_icon: true
                              show_label: true
                              styles:
                                card:
                                  - padding: 20px
                                  - height: 150px
                                  - background: var(--popupBG)
                                  - border-radius: 24px
                                  - box-shadow: 0 10px 20px rgba(0,0,0,0.18)
                                grid:
                                  - grid-template-areas: '"i" "l" "n"'
                                label:
                                  - justify-self: start
                                  - font-size: 1.8em
                                  - font-weight: 300
                                  - color: rgba(255, 255, 255, 0.85)
                                name:
                                  - justify-self: start
                                  - font-size: 14px
                                  - color: rgba(255, 255, 255, 0.72)
                                  - opacity: 0.8
                                img_cell:
                                  - justify-self: end
                                  - align-self: start
                                  - background: rgba(var(--highlight))
                                  - padding: 12px
                                  - border-radius: 50%
                                  - margin: '-14px -14px 0 0'
                                  - width: 28px
                                  - height: 28px
                                icon:
                                  - width: 26px
                                  - height: 26px
                                  - color: rgba(255, 255, 255, 0.75)
                              label: |
                                [[[
                                  const mapping = { normal: '정상', low: '보충 필요', high: '상태 주의' };
                                  return mapping[entity.state] || (entity.state || '-');
                                ]]]
                        - type: custom:gap-card
                          height: 12
                        - type: grid
                          square: false
                          columns: 2
                          cards:
                            - type: custom:button-card
                              name: 타이어 압력
                              icon: mdi:car-tire-alert
                              show_icon: true
                              show_label: true
                              styles:
                                card:
                                  - padding: 20px
                                  - height: 150px
                                  - background: var(--popupBG)
                                  - border-radius: 24px
                                  - box-shadow: 0 10px 20px rgba(0,0,0,0.18)
                                grid:
                                  - grid-template-areas: '"i" "l" "n"'
                                label:
                                  - justify-self: start
                                  - font-size: 1.8em
                                  - font-weight: 300
                                  - color: rgba(255, 255, 255, 0.85)
                                name:
                                  - justify-self: start
                                  - font-size: 14px
                                  - color: rgba(255, 255, 255, 0.72)
                                  - opacity: 0.8
                                img_cell:
                                  - justify-self: end
                                  - align-self: start
                                  - background: rgba(var(--highlight))
                                  - padding: 12px
                                  - border-radius: 50%
                                  - margin: '-14px -14px 0 0'
                                  - width: 28px
                                  - height: 28px
                                icon:
                                  - width: 26px
                                  - height: 26px
                                  - color: rgba(255, 255, 255, 0.75)
                              label: |
                                [[[
                                  const ids = [
                                    'sensor.paul_ioniq9_tire_pressure_front_left',
                                    'sensor.paul_ioniq9_tire_pressure_front_right',
                                    'sensor.paul_ioniq9_tire_pressure_rear_left',
                                    'sensor.paul_ioniq9_tire_pressure_rear_right'
                                  ];
                                  const vals = ids.map(id => (states[id] ? String(states[id].state).toLowerCase() : ''));
                                  const ok = vals.length === 4 && vals.every(v => v === 'normal');
                                  return ok ? '정상' : '점검 필요';
                                ]]]
                            - type: custom:button-card
                              name: 창문 상태
                              icon: mdi:window-closed-variant
                              show_icon: true
                              show_label: true
                              styles:
                                card:
                                  - padding: 20px
                                  - height: 150px
                                  - background: var(--popupBG)
                                  - border-radius: 24px
                                  - box-shadow: 0 10px 20px rgba(0,0,0,0.18)
                                grid:
                                  - grid-template-areas: '"i" "l" "n"'
                                label:
                                  - justify-self: start
                                  - font-size: 1.8em
                                  - font-weight: 300
                                  - color: rgba(255, 255, 255, 0.85)
                                name:
                                  - justify-self: start
                                  - font-size: 14px
                                  - color: rgba(255, 255, 255, 0.72)
                                  - opacity: 0.8
                                img_cell:
                                  - justify-self: end
                                  - align-self: start
                                  - background: rgba(var(--highlight))
                                  - padding: 12px
                                  - border-radius: 50%
                                  - margin: '-14px -14px 0 0'
                                  - width: 28px
                                  - height: 28px
                                icon:
                                  - width: 26px
                                  - height: 26px
                                  - color: rgba(255, 255, 255, 0.75)
                              label: |
                                [[[
                                  const ids = [
                                    'binary_sensor.paul_ioniq9_front_left_window_open',
                                    'binary_sensor.paul_ioniq9_front_right_window_open',
                                    'binary_sensor.paul_ioniq9_rear_left_window_open',
                                    'binary_sensor.paul_ioniq9_rear_right_window_open'
                                  ];
                                  const opened = ids.filter(id => states[id] && states[id].state === 'on').length;
                                  return opened === 0 ? '모두 닫힘' : `${opened}개 열림`;
                                ]]]
                        - type: grid
                          square: false
                          columns: 2
                          cards:
                            - type: custom:button-card
                              name: 문 상태
                              icon: mdi:car-door
                              show_icon: true
                              show_label: true
                              styles:
                                card:
                                  - padding: 20px
                                  - height: 150px
                                  - background: var(--popupBG)
                                  - border-radius: 24px
                                  - box-shadow: 0 10px 20px rgba(0,0,0,0.18)
                                grid:
                                  - grid-template-areas: '"i" "l" "n"'
                                label:
                                  - justify-self: start
                                  - font-size: 1.8em
                                  - font-weight: 300
                                  - color: rgba(255, 255, 255, 0.85)
                                name:
                                  - justify-self: start
                                  - font-size: 14px
                                  - color: rgba(255, 255, 255, 0.72)
                                  - opacity: 0.8
                                img_cell:
                                  - justify-self: end
                                  - align-self: start
                                  - background: rgba(var(--highlight))
                                  - padding: 12px
                                  - border-radius: 50%
                                  - margin: '-14px -14px 0 0'
                                  - width: 28px
                                  - height: 28px
                                icon:
                                  - width: 26px
                                  - height: 26px
                                  - color: rgba(255, 255, 255, 0.75)
                              label: |
                                [[[
                                  const ids = [
                                    'binary_sensor.paul_ioniq9_front_left_door',
                                    'binary_sensor.paul_ioniq9_front_right_door',
                                    'binary_sensor.paul_ioniq9_rear_left_door',
                                    'binary_sensor.paul_ioniq9_rear_right_door'
                                  ];
                                  const opened = ids.filter(id => states[id] && states[id].state === 'on').length;
                                  return opened === 0 ? '모두 닫힘' : `${opened}개 열림`;
                                ]]]
                            - type: custom:button-card
                              name: 제방(성에 제거)
                              icon: mdi:car-defrost-front
                              show_icon: true
                              show_label: true
                              styles:
                                card:
                                  - padding: 20px
                                  - height: 150px
                                  - background: var(--popupBG)
                                  - border-radius: 24px
                                  - box-shadow: 0 10px 20px rgba(0,0,0,0.18)
                                grid:
                                  - grid-template-areas: '"i" "l" "n"'
                                label:
                                  - justify-self: start
                                  - font-size: 1.8em
                                  - font-weight: 300
                                  - color: rgba(255, 255, 255, 0.85)
                                name:
                                  - justify-self: start
                                  - font-size: 14px
                                  - color: rgba(255, 255, 255, 0.72)
                                  - opacity: 0.8
                                img_cell:
                                  - justify-self: end
                                  - align-self: start
                                  - background: rgba(var(--highlight))
                                  - padding: 12px
                                  - border-radius: 50%
                                  - margin: '-14px -14px 0 0'
                                  - width: 28px
                                  - height: 28px
                                icon:
                                  - width: 26px
                                  - height: 26px
                                  - color: rgba(255, 255, 255, 0.75)
                              label: |
                                [[[
                                  const v = states['sensor.paul_ioniq9_defog_state'] ? states['sensor.paul_ioniq9_defog_state'].state : undefined;
                                  const map = { on: '켜짐', off: '꺼짐' };
                                  return map[v] || (v || '-');
                                ]]]
                  - type: custom:local-conditional-card
                    id: kontrolll
                    default: hide
                    card:
                      type: vertical-stack
                      cards:
                        - type: custom:paper-buttons-row
                          styles:
                            background-color: var(--var-grey800)
                            border: 4px solid var(--var-grey800)
                            border-radius: 28px
                            justify-content: center
                            width: max-content
                            margin: 0 auto 12px auto
                          buttons:
                            - layout: name
                              name: 정보
                              ripple: none
                              tap_action:
                                action: fire-dom-event
                                local_conditional_card:
                                  action: set
                                  ids:
                                    - info2: show
                                    - lading: hide
                                    - kontrolll: hide
                              styles:
                                name:
                                  color: var(--var-grey400)
                                  padding: 0 22px
                                button:
                                  display: flex
                                  height: 24px
                                  background: none
                                  border-radius: 24px
                            - layout: name
                              name: 제어
                              ripple: none
                              tap_action:
                                action: fire-dom-event
                                local_conditional_card:
                                  action: set
                                  ids:
                                    - info2: hide
                                    - lading: hide
                                    - kontrolll: show
                              styles:
                                name:
                                  color: var(--black)
                                  padding: 0 22px
                                button:
                                  display: flex
                                  height: 24px
                                  background: var(--active-small)
                                  border-radius: 24px
                            - layout: name
                              name: 충전
                              ripple: none
                              tap_action:
                                action: fire-dom-event
                                local_conditional_card:
                                  action: set
                                  ids:
                                    - info2: hide
                                    - lading: show
                                    - kontrolll: hide
                              styles:
                                name:
                                  color: var(--var-grey400)
                                  padding: 0 22px
                                button:
                                  display: flex
                                  height: 24px
                                  background: none
                                  border-radius: 24px
                        - type: custom:gap-card
                          height: 6
                        - type: grid
                          square: false
                          columns: 2
                          cards:
                            - type: custom:button-card
                              entity: sensor.paul_ioniq9_hvac_state
                              name: HVAC 상태
                              icon: mdi:fan-auto
                              show_icon: true
                              show_state: true
                              show_label: false
                              tap_action:
                                action: call-service
                                service: switch.toggle
                                service_data:
                                  entity_id: switch.paul_ioniq9_hvac
                              state:
                                - value: 'off'
                                  state_display: 대기
                                - value: 'on'
                                  state_display: 가동중
                                  styles:
                                    card:
                                      - background: var(--active-big)
                                    name:
                                      - color: var(--black)
                                    state:
                                      - color: var(--black)
                                    icon:
                                      - color: var(--black)
                                    img_cell:
                                      - background: rgba(40, 40, 42, 0.1)
                              styles:
                                grid:
                                  - grid-template-areas: '"i" "s" "n"'
                                state:
                                  - justify-self: start
                                  - font-size: 2em
                                  - font-weight: 300
                                  - color: rgba(255, 255, 255, 0.72)
                                card:
                                  - padding: 20px
                                  - height: 180px
                                  - background: var(--popupBG)
                                  - border-radius: 28px
                                name:
                                  - justify-self: start
                                  - font-size: 14px
                                  - color: rgba(255, 255, 255, 0.72)
                                  - opacity: '0.7'
                                img_cell:
                                  - justify-self: end
                                  - align-self: start
                                  - background: rgba(var(--highlight))
                                  - padding: 14px
                                  - border-radius: 50%
                                  - margin: '-16px -16px 0 0'
                                  - width: 30px
                                  - height: 30px
                                icon:
                                  - width: 30px
                                  - height: 30px
                                  - color: rgba(255, 255, 255, 0.72)
                            - type: custom:button-card
                              entity: sensor.paul_ioniq9_hvac_temperature
                              name: 내부 설정온도
                              icon: mdi:thermometer
                              show_icon: true
                              show_label: true
                              styles:
                                card:
                                  - padding: 20px
                                  - height: 180px
                                  - background: var(--popupBG)
                                  - border-radius: 28px
                                grid:
                                  - grid-template-areas: '"i" "l" "n"'
                                label:
                                  - justify-self: start
                                  - font-size: 2em
                                  - font-weight: 300
                                  - color: rgba(255, 255, 255, 0.72)
                                name:
                                  - justify-self: start
                                  - font-size: 14px
                                  - color: rgba(255, 255, 255, 0.72)
                                  - opacity: '0.7'
                                img_cell:
                                  - justify-self: end
                                  - align-self: start
                                  - background: rgba(var(--highlight))
                                  - padding: 14px
                                  - border-radius: 50%
                                  - margin: '-16px -16px 0 0'
                                  - width: 30px
                                  - height: 30px
                                icon:
                                  - width: 30px
                                  - height: 30px
                                  - color: rgba(255, 255, 255, 0.72)
                              label: |
                                [[[
                                  const value = Number(entity.state);
                                  if (!isNaN(value)) {
                                    return `${value.toFixed(0)}<span style="font-size:14px"> °C</span>`;
                                  }
                                  return entity.state || '-';
                                ]]]
                        - type: custom:gap-card
                          height: 12
                        - type: custom:button-card
                          entity: sensor.paul_ioniq9_hvac_speed
                          name: 송풍 속도
                          icon: mdi:fan
                          show_state: true
                          show_label: false
                          tap_action:
                            action: more-info
                          state:
                            - value: '0'
                              state_display: 정지
                            - value: '1'
                              state_display: 저속
                            - value: '2'
                              state_display: 중속
                            - value: '3'
                              state_display: 고속
                          styles:
                            grid:
                              - grid-template-areas: '"i" "s" "n"'
                            state:
                              - justify-self: start
                              - font-size: 2em
                              - font-weight: 300
                              - color: rgba(255, 255, 255, 0.85)
                            card:
                              - padding: 20px
                              - height: 180px
                              - background: var(--popupBG)
                              - border-radius: 28px
                            name:
                              - justify-self: start
                              - font-size: 14px
                              - color: rgba(255, 255, 255, 0.72)
                              - opacity: '0.7'
                            img_cell:
                              - justify-self: end
                              - align-self: start
                              - background: rgba(var(--highlight))
                              - padding: 14px
                              - border-radius: 50%
                              - margin: '-16px -16px 0 0'
                              - width: 30px
                              - height: 30px
                            icon:
                              - width: 30px
                              - height: 30px
                              - color: rgba(255, 255, 255, 0.72)
                  - type: custom:local-conditional-card
                    id: lading
                    default: hide
                    card:
                      type: vertical-stack
                      cards:
                        - type: custom:paper-buttons-row
                          styles:
                            background-color: var(--var-grey800)
                            border: 4px solid var(--var-grey800)
                            border-radius: 28px
                            justify-content: center
                            width: max-content
                            margin: 0 auto 12px auto
                          buttons:
                            - layout: name
                              name: 정보
                              ripple: none
                              tap_action:
                                action: fire-dom-event
                                local_conditional_card:
                                  action: set
                                  ids:
                                    - info2: show
                                    - lading: hide
                                    - kontrolll: hide
                              styles:
                                name:
                                  color: var(--var-grey400)
                                  padding: 0 22px
                                button:
                                  display: flex
                                  height: 24px
                                  background: none
                                  border-radius: 24px
                            - layout: name
                              name: 제어
                              ripple: none
                              tap_action:
                                action: fire-dom-event
                                local_conditional_card:
                                  action: set
                                  ids:
                                    - info2: hide
                                    - lading: hide
                                    - kontrolll: show
                              styles:
                                name:
                                  color: var(--var-grey400)
                                  padding: 0 22px
                                button:
                                  display: flex
                                  height: 24px
                                  background: none
                                  border-radius: 24px
                            - layout: name
                              name: 충전
                              ripple: none
                              tap_action:
                                action: fire-dom-event
                                local_conditional_card:
                                  action: set
                                  ids:
                                    - info2: hide
                                    - lading: show
                                    - kontrolll: hide
                              styles:
                                name:
                                  color: var(--black)
                                  padding: 0 22px
                                button:
                                  display: flex
                                  height: 24px
                                  background: var(--active-small)
                                  border-radius: 24px
                        - type: custom:gap-card
                          height: 6
                        - type: grid
                          square: false
                          columns: 2
                          cards:
                            - type: custom:button-card
                              entity: sensor.paul_ioniq9_charging_state
                              name: 충전 상태
                              icon: mdi:ev-station
                              show_icon: true
                              show_label: true
                              styles:
                                card:
                                  - padding: 20px
                                  - height: 180px
                                  - background: var(--popupBG)
                                  - border-radius: 28px
                                grid:
                                  - grid-template-areas: '"i" "l" "n"'
                                label:
                                  - justify-self: start
                                  - font-size: 2em
                                  - font-weight: 300
                                  - color: rgba(255, 255, 255, 0.72)
                                name:
                                  - justify-self: start
                                  - font-size: 14px
                                  - color: rgba(255, 255, 255, 0.72)
                                  - opacity: '0.7'
                                img_cell:
                                  - justify-self: end
                                  - align-self: start
                                  - background: rgba(var(--highlight))
                                  - padding: 14px
                                  - border-radius: 50%
                                  - margin: '-16px -16px 0 0'
                                  - width: 30px
                                  - height: 30px
                                icon:
                                  - width: 30px
                                  - height: 30px
                                  - color: rgba(255, 255, 255, 0.72)
                              label: |
                                [[[
                                  const mapping = {
                                    charging: '충전 중',
                                    stopped: '중지됨',
                                    ready: '준비됨',
                                    standby: '대기',
                                    error: '오류'
                                  };
                                  return mapping[entity.state] || (entity.state || '-');
                                ]]]
                            - type: custom:button-card
                              entity: >-
                                binary_sensor.paul_ioniq9_charging_plug_connected
                              name: 플러그 연결
                              icon: mdi:power-plug
                              show_icon: true
                              show_label: true
                              styles:
                                card:
                                  - padding: 20px
                                  - height: 180px
                                  - background: var(--popupBG)
                                  - border-radius: 28px
                                grid:
                                  - grid-template-areas: '"i" "l" "n"'
                                label:
                                  - justify-self: start
                                  - font-size: 2em
                                  - font-weight: 300
                                  - color: rgba(255, 255, 255, 0.72)
                                name:
                                  - justify-self: start
                                  - font-size: 14px
                                  - color: rgba(255, 255, 255, 0.72)
                                  - opacity: '0.7'
                                img_cell:
                                  - justify-self: end
                                  - align-self: start
                                  - background: rgba(var(--highlight))
                                  - padding: 14px
                                  - border-radius: 50%
                                  - margin: '-16px -16px 0 0'
                                  - width: 30px
                                  - height: 30px
                                icon:
                                  - width: 30px
                                  - height: 30px
                                  - color: rgba(255, 255, 255, 0.72)
                              label: >
                                [[[ return entity.state === 'on' ? '연결됨' : '미연결'
                                ]]]
                        - type: custom:gap-card
                          height: 12
                        - type: grid
                          square: false
                          columns: 2
                          cards:
                            - type: custom:button-card
                              entity: sensor.paul_ioniq9_charging_detail
                              name: 상세 상태
                              icon: mdi:car-info
                              show_icon: true
                              show_label: true
                              styles:
                                card:
                                  - padding: 20px
                                  - height: 180px
                                  - background: var(--popupBG)
                                  - border-radius: 28px
                                grid:
                                  - grid-template-areas: '"i" "l" "n"'
                                label:
                                  - justify-self: start
                                  - font-size: 2em
                                  - font-weight: 300
                                  - color: rgba(255, 255, 255, 0.72)
                                name:
                                  - justify-self: start
                                  - font-size: 14px
                                  - color: rgba(255, 255, 255, 0.72)
                                  - opacity: '0.7'
                                img_cell:
                                  - justify-self: end
                                  - align-self: start
                                  - background: rgba(var(--highlight))
                                  - padding: 14px
                                  - border-radius: 50%
                                  - margin: '-16px -16px 0 0'
                                  - width: 30px
                                  - height: 30px
                                icon:
                                  - width: 30px
                                  - height: 30px
                                  - color: rgba(255, 255, 255, 0.72)
                              label: |
                                [[[
                                  const mapping = {
                                    noCharging: '충전 중 아님',
                                    fast: '급속 충전',
                                    normal: '일반 충전',
                                    trickle: '저속 충전'
                                  };
                                  return mapping[entity.state] || (entity.state || '-');
                                ]]]
                            - type: custom:button-card
                              entity: sensor.paul_ioniq9_charging_remain_time
                              name: 남은 시간
                              icon: mdi:timer-outline
                              show_icon: true
                              show_label: true
                              styles:
                                card:
                                  - padding: 20px
                                  - height: 180px
                                  - background: var(--popupBG)
                                  - border-radius: 28px
                                grid:
                                  - grid-template-areas: '"i" "l" "n"'
                                label:
                                  - justify-self: start
                                  - font-size: 2em
                                  - font-weight: 300
                                  - color: rgba(255, 255, 255, 0.72)
                                name:
                                  - justify-self: start
                                  - font-size: 14px
                                  - color: rgba(255, 255, 255, 0.72)
                                  - opacity: '0.7'
                                img_cell:
                                  - justify-self: end
                                  - align-self: start
                                  - background: rgba(var(--highlight))
                                  - padding: 14px
                                  - border-radius: 50%
                                  - margin: '-16px -16px 0 0'
                                  - width: 30px
                                  - height: 30px
                                icon:
                                  - width: 30px
                                  - height: 30px
                                  - color: rgba(255, 255, 255, 0.72)
                              label: |
                                [[[
                                  const state = entity.state;
                                  if (!state || state === 'unknown') {
                                    return '알 수 없음';
                                  }
                                  if (state.includes(':')) {
                                    const parts = state.split(':').map(Number);
                                    if (parts.length === 3) {
                                      const [hours, minutes, seconds] = parts;
                                      const segments = [];
                                      if (hours) segments.push(`${hours}시간`);
                                      if (minutes) segments.push(`${minutes}분`);
                                      if (!hours && !minutes) segments.push(`${seconds}초`);
                                      return segments.join(' ');
                                    }
                                  }
                                  return state;
                                ]]]
              - type: custom:gap-card
                height: 12
              - type: custom:paper-buttons-row
                styles:
                  justify-content: center
                  margin: 0 auto 6px auto
                  width: max-content
                  background-color: var(--popupBG)
                  border: 4px solid var(--popupBG)
                  border-radius: 28px
                buttons:
                  - layout: name
                    name: HVAC 토글
                    icon: mdi:fan
                    tap_action:
                      action: call-service
                      service: switch.toggle
                      service_data:
                        entity_id: switch.paul_ioniq9_hvac
                    styles:
                      name:
                        padding: 0 22px
                        color: var(--black)
                      button:
                        display: flex
                        height: 24px
                        background: var(--active-small)
                  - layout: name
                    name: 차량 새로고침
                    icon: mdi:refresh
                    tap_action:
                      action: call-service
                      service: button.press
                      service_data:
                        entity_id: button.paul_ioniq9_refresh
                    styles:
                      name:
                        padding: 0 22px
                        color: var(--black)
                      button:
                        display: flex
                        height: 24px
                        background: var(--active-small)
          - type: custom:bubble-card
            card_type: pop-up
            hash: '#fall-alert'
            content:
              type: conditional
              conditions:
                - entity: input_boolean.fall_alert_active
                  state: 'on'
              card:
                type: vertical-stack
                cards:
                  - type: markdown
                    content: |
                      ## 🚨 낙상 감지됨
                      **시간**: {{ states('input_datetime.fall_last_time') }}
                      해제 버튼을 누르기 전까지 이 카드는 유지됩니다.
                  - type: button
                    name: 낙상 감지 해제
                    icon: mdi:check-circle
                    tap_action:
                      action: call-service
                      service: script.clear_fall_alert
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#kitchen'
                name: 주방 제어
                icon: mdi:stove
                is_sidebar_hidden: true
                styles: >-
                  .bubble-pop-up-container { --vertical-stack-card-gap:
                  0px!important; } #header-container > div > div { background:
                  var(--popupBG)!important; } #header-container > button {
                  background: none; } .icon-container { background-color:
                  var(--gray800)!important; } .icon-container > ha-icon {
                  color:var(--gray000)!important; opacity:1!important; }
                  .bubble-icon { --mdc-icon-size: 22px !important; }
                bg_blur: '5'
                shadow_opacity: '20'
                bg_opacity: '98'
                margin_top_mobile: 50px
                margin_top_desktop: 50px
                card_layout: large
                button_type: name
              - type: custom:gap-card
                height: 8
              - type: grid
                square: false
                columns: 3
                cards:
                  - type: custom:button-card
                    entity: switch.sihas_switch_1
                    name: 가스레인지등
                    icon: mdi:lightbulb
                    tap_action:
                      action: toggle
                    show_state: true
                    state:
                      - value: 'on'
                        styles:
                          card:
                            - background: var(--active-small)
                          name:
                            - color: var(--black)
                          state:
                            - color: var(--black)
                      - value: 'off'
                        styles:
                          card:
                            - background: var(--card-background-color)
                    styles:
                      grid:
                        - grid-template-areas: '"i" "n" "s"'
                      card:
                        - height: 90px
                        - border-radius: 20px
                        - padding: 8px
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.08)
                      icon:
                        - width: 26px
                        - color: var(--gray800)
                      name:
                        - font-size: 12px
                        - color: var(--gray800)
                      state:
                        - font-size: 11px
                        - opacity: 0.7
                        - color: var(--gray800)
                  - type: custom:button-card
                    entity: switch.sihas_switch_3
                    name: 식탁 등
                    icon: mdi:ceiling-light
                    tap_action:
                      action: toggle
                    show_state: true
                    state:
                      - value: 'on'
                        styles:
                          card:
                            - background: var(--active-small)
                          name:
                            - color: var(--black)
                          state:
                            - color: var(--black)
                      - value: 'off'
                        styles:
                          card:
                            - background: var(--card-background-color)
                    styles:
                      grid:
                        - grid-template-areas: '"i" "n" "s"'
                      card:
                        - height: 90px
                        - border-radius: 20px
                        - padding: 8px
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.08)
                      icon:
                        - width: 26px
                        - color: var(--gray800)
                      name:
                        - font-size: 12px
                        - color: var(--gray800)
                      state:
                        - font-size: 11px
                        - opacity: 0.7
                        - color: var(--gray800)
                  - type: custom:button-card
                    entity: switch.sihas_switch_2
                    name: 싱크대 등
                    icon: mdi:wall-sconce-flat
                    tap_action:
                      action: toggle
                    show_state: true
                    state:
                      - value: 'on'
                        styles:
                          card:
                            - background: var(--active-small)
                          name:
                            - color: var(--black)
                          state:
                            - color: var(--black)
                      - value: 'off'
                        styles:
                          card:
                            - background: var(--card-background-color)
                    styles:
                      grid:
                        - grid-template-areas: '"i" "n" "s"'
                      card:
                        - height: 90px
                        - border-radius: 20px
                        - padding: 8px
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.08)
                      icon:
                        - width: 26px
                        - color: var(--gray800)
                      name:
                        - font-size: 12px
                        - color: var(--gray800)
                      state:
                        - font-size: 11px
                        - opacity: 0.7
                        - color: var(--gray800)
              - type: custom:gap-card
                height: 8
              - type: custom:button-card
                entity: valve.sihas_gas_valve
                name: 가스 밸브
                icon: mdi:valve
                show_label: true
                label: |
                  [[[
                    if (!entity) return 'N/A';
                    return entity.state === 'open' ? '열림' :
                           entity.state === 'closed' ? '닫힘' : entity.state;
                  ]]]
                tap_action:
                  action: call-service
                  service: |
                    [[[
                      const st = entity?.state;
                      return st === 'open' ? 'valve.close' : 'valve.open';
                    ]]]
                  service_data:
                    entity_id: valve.sihas_gas_valve
                confirmation:
                  text: |
                    [[[
                      const st = entity?.state;
                      return st === 'open' ? '가스 밸브를 닫을까요?' : '가스 밸브를 열까요?';
                    ]]]
                styles:
                  grid:
                    - grid-template-columns: 76px 1fr
                    - grid-template-areas: '"i l" "i n"'
                  icon:
                    - width: 30px
                    - color: var(--gray800)
                  img_cell:
                    - justify-self: start
                    - width: 30px
                    - height: 30px
                    - background: rgba(var(--highlight))
                    - padding: 14px
                    - border-radius: 50%
                  label:
                    - justify-self: start
                    - font-size: 16px
                    - padding-top: 4px
                    - font-weight: 500
                    - color: var(--gray800)
                  card:
                    - height: 66px
                    - border-radius: 24px
                    - padding: 4px 20px 4px 4px
                    - background: var(--card-background-color)
                    - box-shadow: 0 2px 8px rgba(0,0,0,0.1)
                  name:
                    - justify-self: start
                    - font-size: 14px
                    - color: var(--gray800)
                    - opacity: 0.7
                    - padding-bottom: 7px
              - type: custom:gap-card
                height: 8
              - type: grid
                square: false
                columns: 2
                cards:
                  - type: custom:button-card
                    name: 공기질 온도
                    icon: mdi:thermometer
                    show_label: true
                    label: |
                      [[[
                        const s = states['sensor.gonggijil_ceugjeonggi_1528_temperature'];
                        if (!s || ['unknown','unavailable'].includes(s.state)) return 'N/A';
                        const v = Number(s.state);
                        return Number.isNaN(v) ? 'N/A' : `${Math.round(v*10)/10}°C`;
                      ]]]
                    styles:
                      grid:
                        - grid-template-areas: '"i" "l" "n"'
                      card:
                        - height: 120px
                        - border-radius: 24px
                        - padding: 16px
                        - background: var(--card-background-color)
                      img_cell:
                        - justify-self: end
                        - align-self: start
                        - background: rgba(var(--highlight))
                        - padding: 12px
                        - border-radius: 50%
                        - width: 28px
                        - height: 28px
                      icon:
                        - width: 26px
                        - color: var(--gray800)
                      label:
                        - justify-self: start
                        - font-size: 24px
                        - font-weight: 300
                        - color: var(--gray800)
                      name:
                        - justify-self: start
                        - font-size: 13px
                        - color: var(--gray800)
                        - opacity: 0.7
                  - type: custom:button-card
                    name: 공기질 습도
                    icon: mdi:water-percent
                    show_label: true
                    label: |
                      [[[
                        const s = states['sensor.gonggijil_ceugjeonggi_1528_humidity'];
                        if (!s || ['unknown','unavailable'].includes(s.state)) return 'N/A';
                        const v = Number(s.state);
                        return Number.isNaN(v) ? 'N/A' : `${Math.round(v)}%`;
                      ]]]
                    styles:
                      grid:
                        - grid-template-areas: '"i" "l" "n"'
                      card:
                        - height: 120px
                        - border-radius: 24px
                        - padding: 16px
                        - background: var(--card-background-color)
                      img_cell:
                        - justify-self: end
                        - align-self: start
                        - background: rgba(var(--highlight))
                        - padding: 12px
                        - border-radius: 50%
                        - width: 28px
                        - height: 28px
                      icon:
                        - width: 26px
                        - color: var(--gray800)
                      label:
                        - justify-self: start
                        - font-size: 24px
                        - font-weight: 300
                        - color: var(--gray800)
                      name:
                        - justify-self: start
                        - font-size: 13px
                        - color: var(--gray800)
                        - opacity: 0.7
              - type: custom:gap-card
                height: 8
              - type: custom:button-card
                entity: number.naengjanggo_fridge_temperature
                name: 냉장실 설정온도
                icon: mdi:fridge
                show_label: true
                label: |
                  [[[
                    if (!entity || ['unknown','unavailable'].includes(entity.state)) return 'N/A';
                    return `${entity.state}°C`;
                  ]]]
                tap_action:
                  action: more-info
                styles:
                  grid:
                    - grid-template-columns: 76px 1fr
                    - grid-template-areas: '"i l" "i n"'
                  icon:
                    - width: 30px
                    - color: var(--gray800)
                  img_cell:
                    - justify-self: start
                    - width: 30px
                    - height: 30px
                    - background: rgba(var(--highlight))
                    - padding: 14px
                    - border-radius: 50%
                  label:
                    - justify-self: start
                    - font-size: 18px
                    - padding-top: 4px
                    - font-weight: 500
                    - color: var(--gray800)
                  card:
                    - height: 72px
                    - border-radius: 24px
                    - padding: 4px 20px 4px 4px
                    - background: var(--card-background-color)
                    - box-shadow: 0 2px 8px rgba(0,0,0,0.1)
                  name:
                    - justify-self: start
                    - font-size: 14px
                    - color: var(--gray800)
                    - opacity: 0.7
                    - padding-bottom: 7px
              - type: custom:gap-card
                height: 8
              - type: custom:button-card
                entity: sensor.jubang_siggiseceoggi
                name: 식기세척기
                icon: mdi:dishwasher
                show_label: true
                label: |
                  [[[
                    if (!entity) return 'N/A';
                    return entity.state;  // 예: idle / running / 완료 등
                  ]]]
                tap_action:
                  action: more-info
                styles:
                  grid:
                    - grid-template-columns: 76px 1fr
                    - grid-template-areas: '"i l" "i n"'
                  icon:
                    - width: 30px
                    - color: var(--gray800)
                  img_cell:
                    - justify-self: start
                    - width: 30px
                    - height: 30px
                    - background: rgba(var(--highlight))
                    - padding: 14px
                    - border-radius: 50%
                  label:
                    - justify-self: start
                    - font-size: 16px
                    - padding-top: 4px
                    - font-weight: 500
                    - color: var(--gray800)
                  card:
                    - height: 66px
                    - border-radius: 24px
                    - padding: 4px 20px 4px 4px
                    - background: var(--card-background-color)
                    - box-shadow: 0 2px 8px rgba(0,0,0,0.1)
                  name:
                    - justify-self: start
                    - font-size: 14px
                    - color: var(--gray800)
                    - opacity: 0.7
                    - padding-bottom: 7px
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#woohyun-room'
                name: 우현이방 제어
                icon: mdi:bed-queen
                is_sidebar_hidden: true
                styles: >-
                  .bubble-pop-up-container { --vertical-stack-card-gap:
                  0px!important; } #header-container > div > div { background:
                  var(--popupBG)!important; } #header-container > button {
                  background: none; } .icon-container { background-color:
                  var(--gray800)!important; } .icon-container > ha-icon {
                  color:var(--gray000)!important; opacity:1!important; }
                  .bubble-icon { --mdc-icon-size: 22px !important; }
                bg_blur: '5'
                shadow_opacity: '20'
                bg_opacity: '98'
                margin_top_mobile: 50px
                margin_top_desktop: 50px
                card_layout: large
                button_type: name
              - type: custom:gap-card
                height: 8
              - type: grid
                square: false
                columns: 3
                cards:
                  - type: custom:button-card
                    entity: switch.sihas_switch_5
                    name: 방등 1
                    icon: mdi:ceiling-light
                    tap_action:
                      action: toggle
                    show_state: true
                    state:
                      - value: 'on'
                        styles:
                          card:
                            - background: var(--active-small)
                          name:
                            - color: var(--black)
                          state:
                            - color: var(--black)
                      - value: 'off'
                        styles:
                          card:
                            - background: var(--card-background-color)
                    styles:
                      grid:
                        - grid-template-areas: '"i" "n" "s"'
                      card:
                        - height: 90px
                        - border-radius: 20px
                        - padding: 8px
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.08)
                      icon:
                        - width: 26px
                        - color: var(--gray800)
                      name:
                        - font-size: 12px
                        - color: var(--gray800)
                      state:
                        - font-size: 11px
                        - opacity: 0.7
                        - color: var(--gray800)
                  - type: custom:button-card
                    entity: light.smart_bulb
                    name: 책상 조명
                    icon: mdi:desk-lamp
                    tap_action:
                      action: toggle
                    hold_action:
                      action: more-info
                    show_state: true
                    state:
                      - value: 'on'
                        styles:
                          card:
                            - background: var(--active-small)
                          name:
                            - color: var(--black)
                          state:
                            - color: var(--black)
                      - value: 'off'
                        styles:
                          card:
                            - background: var(--card-background-color)
                    styles:
                      grid:
                        - grid-template-areas: '"i" "n" "s"'
                      card:
                        - height: 90px
                        - border-radius: 20px
                        - padding: 8px
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.08)
                      icon:
                        - width: 26px
                        - color: var(--gray800)
                      name:
                        - font-size: 12px
                        - color: var(--gray800)
                      state:
                        - font-size: 11px
                        - opacity: 0.7
                        - color: var(--gray800)
                  - type: custom:button-card
                    entity: switch.sori_senseo_silheomsil
                    name: 소리 센서
                    icon: mdi:microphone
                    tap_action:
                      action: toggle
                    show_state: true
                    state:
                      - value: 'on'
                        styles:
                          card:
                            - background: var(--active-small)
                          name:
                            - color: var(--black)
                          state:
                            - color: var(--black)
                      - value: 'off'
                        styles:
                          card:
                            - background: var(--card-background-color)
                    styles:
                      grid:
                        - grid-template-areas: '"i" "n" "s"'
                      card:
                        - height: 90px
                        - border-radius: 20px
                        - padding: 8px
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.08)
                      icon:
                        - width: 26px
                        - color: var(--gray800)
                      name:
                        - font-size: 12px
                        - color: var(--gray800)
                      state:
                        - font-size: 11px
                        - opacity: 0.7
                        - color: var(--gray800)
                  - type: custom:button-card
                    entity: switch.jodo_senseo_silheomsil
                    name: 조도 센서
                    icon: mdi:brightness-5
                    tap_action:
                      action: toggle
                    show_state: true
                    state:
                      - value: 'on'
                        styles:
                          card:
                            - background: var(--active-small)
                          name:
                            - color: var(--black)
                          state:
                            - color: var(--black)
                      - value: 'off'
                        styles:
                          card:
                            - background: var(--card-background-color)
                    styles:
                      grid:
                        - grid-template-areas: '"i" "n" "s"'
                      card:
                        - height: 90px
                        - border-radius: 20px
                        - padding: 8px
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.08)
                      icon:
                        - width: 26px
                        - color: var(--gray800)
                      name:
                        - font-size: 12px
                        - color: var(--gray800)
                      state:
                        - font-size: 11px
                        - opacity: 0.7
                        - color: var(--gray800)
              - type: custom:gap-card
                height: 8
              - type: grid
                square: false
                columns: 3
                cards:
                  - type: custom:button-card
                    entity: binary_sensor.aqara_fp2_1ea6_presence
                    name: 존재 감지
                    icon: mdi:account-eye
                    show_label: true
                    label: |
                      [[[
                        if (!entity) return 'N/A';
                        return entity.state === 'on' ? '재실' : '부재';
                      ]]]
                    styles:
                      grid:
                        - grid-template-columns: 60px 1fr
                        - grid-template-areas: '"i l" "i n"'
                      icon:
                        - width: 24px
                        - color: var(--gray800)
                      img_cell:
                        - justify-self: start
                        - width: 24px
                        - height: 24px
                        - background: rgba(var(--highlight))
                        - padding: 10px
                        - border-radius: 50%
                      label:
                        - justify-self: start
                        - font-size: 14px
                        - padding-top: 2px
                        - font-weight: 500
                        - color: var(--gray800)
                      card:
                        - height: 60px
                        - border-radius: 24px
                        - padding: 4px 12px 4px 4px
                        - background: var(--card-background-color)
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.1)
                      name:
                        - justify-self: start
                        - font-size: 12px
                        - color: var(--gray800)
                        - opacity: 0.7
                        - padding-bottom: 4px
                  - type: custom:button-card
                    entity: sensor.eeomoniteo_peulreoseu_air_quality
                    name: 공기질
                    icon: mdi:air-filter
                    show_label: true
                    label: |
                      [[[
                        if (!entity || ['unknown','unavailable'].includes(entity.state)) return 'N/A';
                        const u = entity.attributes.unit_of_measurement || 'AQI';
                        const v = Number(entity.state);
                        return Number.isNaN(v) ? `${entity.state}` : `${Math.round(v)} ${u}`;
                      ]]]
                    styles:
                      grid:
                        - grid-template-columns: 60px 1fr
                        - grid-template-areas: '"i l" "i n"'
                      icon:
                        - width: 24px
                        - color: var(--gray800)
                      img_cell:
                        - justify-self: start
                        - width: 24px
                        - height: 24px
                        - background: rgba(var(--highlight))
                        - padding: 10px
                        - border-radius: 50%
                      label:
                        - justify-self: start
                        - font-size: 14px
                        - padding-top: 2px
                        - font-weight: 500
                        - color: var(--gray800)
                      card:
                        - height: 60px
                        - border-radius: 24px
                        - padding: 4px 12px 4px 4px
                        - background: var(--card-background-color)
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.1)
                      name:
                        - justify-self: start
                        - font-size: 12px
                        - color: var(--gray800)
                        - opacity: 0.7
                        - padding-bottom: 4px
                  - type: custom:button-card
                    entity: sensor.deseukeutab_jeonweon_energy
                    name: 데스크탑 에너지
                    icon: mdi:flash
                    show_label: true
                    label: |
                      [[[
                        if (!entity || ['unknown','unavailable'].includes(entity.state)) return 'N/A';
                        const u = entity.attributes.unit_of_measurement || '';
                        return `${entity.state} ${u}`.trim();
                      ]]]
                    styles:
                      grid:
                        - grid-template-columns: 60px 1fr
                        - grid-template-areas: '"i l" "i n"'
                      icon:
                        - width: 24px
                        - color: var(--gray800)
                      img_cell:
                        - justify-self: start
                        - width: 24px
                        - height: 24px
                        - background: rgba(var(--highlight))
                        - padding: 10px
                        - border-radius: 50%
                      label:
                        - justify-self: start
                        - font-size: 14px
                        - padding-top: 2px
                        - font-weight: 500
                        - color: var(--gray800)
                      card:
                        - height: 60px
                        - border-radius: 24px
                        - padding: 4px 12px 4px 4px
                        - background: var(--card-background-color)
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.1)
                      name:
                        - justify-self: start
                        - font-size: 12px
                        - color: var(--gray800)
                        - opacity: 0.7
                        - padding-bottom: 4px
              - type: custom:gap-card
                height: 8
              - type: grid
                square: false
                columns: 3
                cards:
                  - type: custom:button-card
                    entity: device_tracker.gimuhyeonyi_apple_watch
                    name: Apple Watch
                    icon: mdi:apple-watch
                    show_label: true
                    label: |
                      [[[
                        if (!entity) return 'N/A';
                        if (entity.state === 'home') return '집';
                        if (entity.state === 'not_home') return '부재';
                        return entity.state;
                      ]]]
                    state:
                      - value: home
                        styles:
                          card:
                            - background: var(--active-small)
                          name:
                            - color: var(--black)
                          label:
                            - color: var(--black)
                      - value: not_home
                        styles:
                          card:
                            - background: var(--card-background-color)
                    styles:
                      grid:
                        - grid-template-areas: '"i" "n" "l"'
                      card:
                        - height: 84px
                        - border-radius: 20px
                        - padding: 8px
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.08)
                      icon:
                        - width: 24px
                        - color: var(--gray800)
                      name:
                        - font-size: 12px
                        - color: var(--gray800)
                      label:
                        - font-size: 11px
                        - opacity: 0.8
                        - color: var(--gray800)
                  - type: custom:button-card
                    entity: device_tracker.gimuhyeonyi_macbook_pro_2
                    name: MacBook Pro
                    icon: mdi:laptop-mac
                    show_label: true
                    label: |
                      [[[
                        if (!entity) return 'N/A';
                        if (entity.state === 'home') return '집';
                        if (entity.state === 'not_home') return '부재';
                        return entity.state;
                      ]]]
                    state:
                      - value: home
                        styles:
                          card:
                            - background: var(--active-small)
                          name:
                            - color: var(--black)
                          label:
                            - color: var(--black)
                      - value: not_home
                        styles:
                          card:
                            - background: var(--card-background-color)
                    styles:
                      grid:
                        - grid-template-areas: '"i" "n" "l"'
                      card:
                        - height: 84px
                        - border-radius: 20px
                        - padding: 8px
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.08)
                      icon:
                        - width: 24px
                        - color: var(--gray800)
                      name:
                        - font-size: 12px
                        - color: var(--gray800)
                      label:
                        - font-size: 11px
                        - opacity: 0.8
                        - color: var(--gray800)
                  - type: custom:button-card
                    entity: device_tracker.uhyeonyi_ipad_pro_2
                    name: iPad Pro
                    icon: mdi:tablet
                    show_label: true
                    label: |
                      [[[
                        if (!entity) return 'N/A';
                        if (entity.state === 'home') return '집';
                        if (entity.state === 'not_home') return '부재';
                        return entity.state;
                      ]]]
                    state:
                      - value: home
                        styles:
                          card:
                            - background: var(--active-small)
                          name:
                            - color: var(--black)
                          label:
                            - color: var(--black)
                      - value: not_home
                        styles:
                          card:
                            - background: var(--card-background-color)
                    styles:
                      grid:
                        - grid-template-areas: '"i" "n" "l"'
                      card:
                        - height: 84px
                        - border-radius: 20px
                        - padding: 8px
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.08)
                      icon:
                        - width: 24px
                        - color: var(--gray800)
                      name:
                        - font-size: 12px
                        - color: var(--gray800)
                      label:
                        - font-size: 11px
                        - opacity: 0.8
                        - color: var(--gray800)
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#ahyun-room'
                name: 아현이방 제어
                icon: mdi:bed-queen
                is_sidebar_hidden: true
                styles: >-
                  .bubble-pop-up-container { --vertical-stack-card-gap:
                  0px!important; } #header-container > div > div { background:
                  var(--popupBG)!important; } #header-container > button {
                  background: none; } .icon-container { background-color:
                  var(--gray800)!important; } .icon-container > ha-icon {
                  color:var(--gray000)!important; opacity:1!important; }
                  .bubble-icon { --mdc-icon-size: 22px !important; }
                bg_blur: '5'
                shadow_opacity: '20'
                bg_opacity: '98'
                margin_top_mobile: 50px
                margin_top_desktop: 50px
                card_layout: large
                button_type: name
              - type: custom:gap-card
                height: 8
              - type: grid
                square: false
                columns: 3
                cards:
                  - type: custom:button-card
                    entity: switch.sihas_switch_4
                    name: 방등 1
                    icon: mdi:ceiling-light
                    tap_action:
                      action: toggle
                    show_state: true
                    state:
                      - value: 'on'
                        styles:
                          card:
                            - background: var(--active-small)
                          name:
                            - color: var(--black)
                          state:
                            - color: var(--black)
                      - value: 'off'
                        styles:
                          card:
                            - background: var(--card-background-color)
                    styles:
                      grid:
                        - grid-template-areas: '"i" "n" "s"'
                      card:
                        - height: 90px
                        - border-radius: 20px
                        - padding: 8px
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.08)
                      icon:
                        - width: 26px
                        - color: var(--gray800)
                      name:
                        - font-size: 12px
                        - color: var(--gray800)
                      state:
                        - font-size: 11px
                        - opacity: 0.7
                        - color: var(--gray800)
                  - type: custom:button-card
                    entity: light.smart_bulb_2
                    name: 스마트 전구
                    icon: mdi:lightbulb
                    tap_action:
                      action: toggle
                    hold_action:
                      action: more-info
                    show_state: true
                    state:
                      - value: 'on'
                        styles:
                          card:
                            - background: var(--active-small)
                          name:
                            - color: var(--black)
                          state:
                            - color: var(--black)
                      - value: 'off'
                        styles:
                          card:
                            - background: var(--card-background-color)
                    styles:
                      grid:
                        - grid-template-areas: '"i" "n" "s"'
                      card:
                        - height: 90px
                        - border-radius: 20px
                        - padding: 8px
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.08)
                      icon:
                        - width: 26px
                        - color: var(--gray800)
                      name:
                        - font-size: 12px
                        - color: var(--gray800)
                      state:
                        - font-size: 11px
                        - opacity: 0.7
                        - color: var(--gray800)
                  - type: custom:button-card
                    entity: switch.robos_ceongsogi
                    name: 로봇청소기
                    icon: mdi:robot-vacuum
                    show_label: true
                    label: |
                      [[[
                        if (!entity) return 'N/A';
                        return entity.state === 'on' ? '가동' : entity.state === 'off' ? '대기' : entity.state;
                      ]]]
                    tap_action:
                      action: toggle
                    state:
                      - value: 'on'
                        styles:
                          card:
                            - background: var(--active-small)
                          name:
                            - color: var(--black)
                          label:
                            - color: var(--black)
                      - value: 'off'
                        styles:
                          card:
                            - background: var(--card-background-color)
                    styles:
                      grid:
                        - grid-template-areas: '"i" "n" "l"'
                      card:
                        - height: 90px
                        - border-radius: 20px
                        - padding: 8px
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.08)
                      icon:
                        - width: 26px
                        - color: var(--gray800)
                      name:
                        - font-size: 12px
                        - color: var(--gray800)
                      label:
                        - font-size: 11px
                        - opacity: 0.8
                        - color: var(--gray800)
              - type: custom:gap-card
                height: 8
              - type: grid
                square: false
                columns: 3
                cards:
                  - type: custom:button-card
                    entity: binary_sensor.multipurpose_sensor_door
                    name: 창문
                    icon: mdi:window-open-variant
                    show_label: true
                    label: |
                      [[[
                        if (!entity) return 'N/A';
                        // binary_sensor: on=open, off=closed 가 일반적
                        return entity.state === 'on' ? '열림' : '닫힘';
                      ]]]
                    styles:
                      grid:
                        - grid-template-columns: 60px 1fr
                        - grid-template-areas: '"i l" "i n"'
                      icon:
                        - width: 24px
                        - color: var(--gray800)
                      img_cell:
                        - justify-self: start
                        - width: 24px
                        - height: 24px
                        - background: rgba(var(--highlight))
                        - padding: 10px
                        - border-radius: 50%
                      label:
                        - justify-self: start
                        - font-size: 14px
                        - padding-top: 2px
                        - font-weight: 500
                        - color: var(--gray800)
                      card:
                        - height: 60px
                        - border-radius: 24px
                        - padding: 4px 12px 4px 4px
                        - background: var(--card-background-color)
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.1)
                      name:
                        - justify-self: start
                        - font-size: 12px
                        - color: var(--gray800)
                        - opacity: 0.7
                        - padding-bottom: 4px
                  - type: custom:button-card
                    entity: >-
                      sensor.aqara_temperature_and_humidity_sensor_t1_1_temperature
                    name: 온도
                    icon: mdi:thermometer
                    show_label: true
                    label: |
                      [[[
                        if (!entity || ['unknown','unavailable'].includes(entity.state)) return 'N/A';
                        const v = Number(entity.state);
                        return Number.isNaN(v) ? 'N/A' : `${Math.round(v*10)/10}°C`;
                      ]]]
                    styles:
                      grid:
                        - grid-template-areas: '"i" "l" "n"'
                      card:
                        - height: 120px
                        - border-radius: 24px
                        - padding: 16px
                        - background: var(--card-background-color)
                      img_cell:
                        - justify-self: end
                        - align-self: start
                        - background: rgba(var(--highlight))
                        - padding: 12px
                        - border-radius: 50%
                        - width: 28px
                        - height: 28px
                      icon:
                        - width: 26px
                        - color: var(--gray800)
                      label:
                        - justify-self: start
                        - font-size: 24px
                        - font-weight: 300
                        - color: var(--gray800)
                      name:
                        - justify-self: start
                        - font-size: 13px
                        - color: var(--gray800)
                        - opacity: 0.7
                  - type: custom:button-card
                    entity: sensor.aqara_temperature_and_humidity_sensor_t1_humidity
                    name: 습도
                    icon: mdi:water-percent
                    show_label: true
                    label: |
                      [[[
                        if (!entity || ['unknown','unavailable'].includes(entity.state)) return 'N/A';
                        const v = Number(entity.state);
                        return Number.isNaN(v) ? 'N/A' : `${Math.round(v)}%`;
                      ]]]
                    styles:
                      grid:
                        - grid-template-areas: '"i" "l" "n"'
                      card:
                        - height: 120px
                        - border-radius: 24px
                        - padding: 16px
                        - background: var(--card-background-color)
                      img_cell:
                        - justify-self: end
                        - align-self: start
                        - background: rgba(var(--highlight))
                        - padding: 12px
                        - border-radius: 50%
                        - width: 28px
                        - height: 28px
                      icon:
                        - width: 26px
                        - color: var(--gray800)
                      label:
                        - justify-self: start
                        - font-size: 24px
                        - font-weight: 300
                        - color: var(--gray800)
                      name:
                        - justify-self: start
                        - font-size: 13px
                        - color: var(--gray800)
                        - opacity: 0.7
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#living-room'
                name: 거실 제어
                icon: mdi:sofa
                is_sidebar_hidden: true
                styles: >-
                  .bubble-pop-up-container { --vertical-stack-card-gap:
                  0px!important; } #header-container > div > div { background:
                  var(--popupBG)!important; } #header-container > button {
                  background: none; } .icon-container { background-color:
                  var(--gray800)!important; } .icon-container > ha-icon {
                  color:var(--gray000)!important; opacity:1!important; }
                  .bubble-icon { --mdc-icon-size: 22px !important; }
                bg_blur: '5'
                shadow_opacity: '20'
                bg_opacity: '98'
                margin_top_mobile: 50px
                margin_top_desktop: 50px
                card_layout: large
                button_type: name
              - type: custom:gap-card
                height: 8
              - type: grid
                square: false
                columns: 3
                cards:
                  - type: custom:button-card
                    entity: switch.geosil_jomyeong_1beon
                    name: 거실등 1
                    icon: mdi:ceiling-light
                    tap_action:
                      action: toggle
                    show_state: true
                    state:
                      - value: 'on'
                        styles:
                          card:
                            - background: var(--active-small)
                          name:
                            - color: var(--black)
                          state:
                            - color: var(--black)
                      - value: 'off'
                        styles:
                          card:
                            - background: var(--card-background-color)
                    styles:
                      grid:
                        - grid-template-areas: '"i" "n" "s"'
                      card:
                        - height: 90px
                        - border-radius: 20px
                        - padding: 8px
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.08)
                      icon:
                        - width: 26px
                        - color: var(--gray800)
                      name:
                        - font-size: 12px
                        - color: var(--gray800)
                      state:
                        - font-size: 11px
                        - opacity: 0.7
                        - color: var(--gray800)
                  - type: custom:button-card
                    entity: switch.geosil_jomyeong_2beon
                    name: 거실등 2
                    icon: mdi:ceiling-light-multiple
                    tap_action:
                      action: toggle
                    show_state: true
                    state:
                      - value: 'on'
                        styles:
                          card:
                            - background: var(--active-small)
                          name:
                            - color: var(--black)
                          state:
                            - color: var(--black)
                      - value: 'off'
                        styles:
                          card:
                            - background: var(--card-background-color)
                    styles:
                      grid:
                        - grid-template-areas: '"i" "n" "s"'
                      card:
                        - height: 90px
                        - border-radius: 20px
                        - padding: 8px
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.08)
                      icon:
                        - width: 26px
                        - color: var(--gray800)
                      name:
                        - font-size: 12px
                        - color: var(--gray800)
                      state:
                        - font-size: 11px
                        - opacity: 0.7
                        - color: var(--gray800)
                  - type: custom:button-card
                    entity: switch.geosil_jomyeong_3beon
                    name: 거실등 3
                    icon: mdi:track-light
                    tap_action:
                      action: toggle
                    show_state: true
                    state:
                      - value: 'on'
                        styles:
                          card:
                            - background: var(--active-small)
                          name:
                            - color: var(--black)
                          state:
                            - color: var(--black)
                      - value: 'off'
                        styles:
                          card:
                            - background: var(--card-background-color)
                    styles:
                      grid:
                        - grid-template-areas: '"i" "n" "s"'
                      card:
                        - height: 90px
                        - border-radius: 20px
                        - padding: 8px
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.08)
                      icon:
                        - width: 26px
                        - color: var(--gray800)
                      name:
                        - font-size: 12px
                        - color: var(--gray800)
                      state:
                        - font-size: 11px
                        - opacity: 0.7
                        - color: var(--gray800)
                  - type: custom:button-card
                    entity: switch.wi_fi_smart_plug_2
                    name: 서재 전원
                    icon: mdi:power-socket-eu
                    tap_action:
                      action: toggle
                    show_state: true
                    state:
                      - value: 'on'
                        styles:
                          card:
                            - background: var(--active-small)
                          name:
                            - color: var(--black)
                          state:
                            - color: var(--black)
                      - value: 'off'
                        styles:
                          card:
                            - background: var(--card-background-color)
                    styles:
                      grid:
                        - grid-template-areas: '"i" "n" "s"'
                      card:
                        - height: 90px
                        - border-radius: 20px
                        - padding: 8px
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.08)
                      icon:
                        - width: 26px
                        - color: var(--gray800)
                      name:
                        - font-size: 12px
                        - color: var(--gray800)
                      state:
                        - font-size: 11px
                        - opacity: 0.7
                        - color: var(--gray800)
                  - type: custom:button-card
                    entity: switch.ventilator_power
                    name: 전열 교환기
                    icon: mdi:hvac
                    tap_action:
                      action: toggle
                    show_state: true
                    state:
                      - value: 'on'
                        styles:
                          card:
                            - background: var(--active-small)
                          name:
                            - color: var(--black)
                          state:
                            - color: var(--black)
                      - value: 'off'
                        styles:
                          card:
                            - background: var(--card-background-color)
                    styles:
                      grid:
                        - grid-template-areas: '"i" "n" "s"'
                      card:
                        - height: 90px
                        - border-radius: 20px
                        - padding: 8px
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.08)
                      icon:
                        - width: 26px
                        - color: var(--gray800)
                      name:
                        - font-size: 12px
                        - color: var(--gray800)
                      state:
                        - font-size: 11px
                        - opacity: 0.7
                        - color: var(--gray800)
              - type: custom:gap-card
                height: 8
              - type: grid
                square: false
                columns: 2
                cards:
                  - type: custom:button-card
                    entity: climate.seutaendeuhyeong_eeokeon
                    name: 스탠드형 에어컨
                    icon: mdi:air-conditioner
                    show_label: true
                    label: |
                      [[[
                        if (!entity) return 'N/A';
                        const ct = entity.attributes.current_temperature;
                        const sp = entity.attributes.temperature;
                        const mode = entity.attributes.hvac_mode;
                        const a = entity.attributes.hvac_action;
                        const modeKo = (m) => m === 'off' ? '꺼짐' :
                                               m === 'cool' ? '냉방' :
                                               m === 'heat' ? '난방' :
                                               m === 'dry'  ? '제습' :
                                               m === 'fan_only' ? '송풍' : m;
                        const actKo = (x) => x === 'cooling' ? '냉방중' :
                                              x === 'heating' ? '난방중' :
                                              x === 'drying'  ? '제습중' :
                                              x === 'idle'    ? '대기' : '';
                        const left = (ct!=null && !Number.isNaN(Number(ct))) ? `${Math.round(ct*10)/10}°C` : '';
                        const right = (sp!=null && !Number.isNaN(Number(sp))) ? `설정 ${sp}°C` : '';
                        const line2 = actKo(a) || modeKo(mode || '');
                        return [ [left, right].filter(Boolean).join(' / '), line2 ].filter(Boolean).join(' · ');
                      ]]]
                    tap_action:
                      action: more-info
                    styles:
                      grid:
                        - grid-template-columns: 76px 1fr
                        - grid-template-areas: '"i l" "i n"'
                      icon:
                        - width: 30px
                        - color: var(--gray800)
                      img_cell:
                        - justify-self: start
                        - width: 30px
                        - height: 30px
                        - background: rgba(var(--highlight))
                        - padding: 14px
                        - border-radius: 50%
                      label:
                        - justify-self: start
                        - font-size: 16px
                        - padding-top: 4px
                        - font-weight: 500
                        - color: var(--gray800)
                      card:
                        - height: 72px
                        - border-radius: 24px
                        - padding: 4px 20px 4px 4px
                        - background: var(--card-background-color)
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.1)
                      name:
                        - justify-self: start
                        - font-size: 14px
                        - color: var(--gray800)
                        - opacity: 0.7
                        - padding-bottom: 7px
                  - type: custom:button-card
                    entity: sensor.seutaendeuhyeong_eeokeon_humidity
                    name: 습도
                    icon: mdi:water-percent
                    show_label: true
                    label: |
                      [[[
                        if (!entity || ['unknown','unavailable'].includes(entity.state)) return 'N/A';
                        const v = Number(entity.state);
                        return Number.isNaN(v) ? 'N/A' : `${Math.round(v)}%`;
                      ]]]
                    styles:
                      grid:
                        - grid-template-columns: 76px 1fr
                        - grid-template-areas: '"i l" "i n"'
                      icon:
                        - width: 30px
                        - color: var(--gray800)
                      img_cell:
                        - justify-self: start
                        - width: 30px
                        - height: 30px
                        - background: rgba(var(--highlight))
                        - padding: 14px
                        - border-radius: 50%
                      label:
                        - justify-self: start
                        - font-size: 16px
                        - padding-top: 4px
                        - font-weight: 500
                        - color: var(--gray800)
                      card:
                        - height: 72px
                        - border-radius: 24px
                        - padding: 4px 20px 4px 4px
                        - background: var(--card-background-color)
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.1)
                      name:
                        - justify-self: start
                        - font-size: 14px
                        - color: var(--gray800)
                        - opacity: 0.7
                        - padding-bottom: 7px
              - type: custom:gap-card
                height: 8
              - type: grid
                square: false
                columns: 3
                cards:
                  - type: custom:button-card
                    entity: binary_sensor.multipurpose_sensor_1_acceleration
                    name: 오른쪽 창문
                    icon: mdi:window-closed-variant
                    show_label: true
                    label: |
                      [[[
                        if (!entity) return 'N/A';
                        // acceleration: on=감지, off=정상 으로 표기
                        return entity.state === 'on' ? '진동 감지' : '정상';
                      ]]]
                    styles:
                      grid:
                        - grid-template-columns: 60px 1fr
                        - grid-template-areas: '"i l" "i n"'
                      icon:
                        - width: 24px
                        - color: var(--gray800)
                      img_cell:
                        - justify-self: start
                        - width: 24px
                        - height: 24px
                        - background: rgba(var(--highlight))
                        - padding: 10px
                        - border-radius: 50%
                      label:
                        - justify-self: start
                        - font-size: 14px
                        - padding-top: 2px
                        - font-weight: 500
                        - color: var(--gray800)
                      card:
                        - height: 60px
                        - border-radius: 24px
                        - padding: 4px 12px 4px 4px
                        - background: var(--card-background-color)
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.1)
                      name:
                        - justify-self: start
                        - font-size: 12px
                        - color: var(--gray800)
                        - opacity: 0.7
                        - padding-bottom: 4px
                  - type: custom:button-card
                    entity: sensor.multipurpose_sensor_1_temperature
                    name: 창문 온도
                    icon: mdi:thermometer
                    show_label: true
                    label: |
                      [[[
                        if (!entity || ['unknown','unavailable'].includes(entity.state)) return 'N/A';
                        const v = Number(entity.state);
                        return Number.isNaN(v) ? 'N/A' : `${Math.round(v*10)/10}°C`;
                      ]]]
                    styles:
                      grid:
                        - grid-template-areas: '"i" "l" "n"'
                      card:
                        - height: 120px
                        - border-radius: 24px
                        - padding: 16px
                        - background: var(--card-background-color)
                      img_cell:
                        - justify-self: end
                        - align-self: start
                        - background: rgba(var(--highlight))
                        - padding: 12px
                        - border-radius: 50%
                        - width: 28px
                        - height: 28px
                      icon:
                        - width: 26px
                        - color: var(--gray800)
                      label:
                        - justify-self: start
                        - font-size: 24px
                        - font-weight: 300
                        - color: var(--gray800)
                      name:
                        - justify-self: start
                        - font-size: 13px
                        - color: var(--gray800)
                        - opacity: 0.7
                  - type: custom:button-card
                    entity: sensor.wi_fi_smart_plug_2_energy_2
                    name: 서재 에너지
                    icon: mdi:lightning-bolt
                    show_label: true
                    label: |
                      [[[
                        if (!entity || ['unknown','unavailable'].includes(entity.state)) return 'N/A';
                        const u = entity.attributes.unit_of_measurement || '';
                        return `${entity.state} ${u}`.trim();
                      ]]]
                    styles:
                      grid:
                        - grid-template-columns: 60px 1fr
                        - grid-template-areas: '"i l" "i n"'
                      icon:
                        - width: 24px
                        - color: var(--gray800)
                      img_cell:
                        - justify-self: start
                        - width: 24px
                        - height: 24px
                        - background: rgba(var(--highlight))
                        - padding: 10px
                        - border-radius: 50%
                      label:
                        - justify-self: start
                        - font-size: 14px
                        - padding-top: 2px
                        - font-weight: 500
                        - color: var(--gray800)
                      card:
                        - height: 60px
                        - border-radius: 24px
                        - padding: 4px 12px 4px 4px
                        - background: var(--card-background-color)
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.1)
                      name:
                        - justify-self: start
                        - font-size: 12px
                        - color: var(--gray800)
                        - opacity: 0.7
                        - padding-bottom: 4px
                  - type: custom:button-card
                    entity: sensor.mi_body_composition_scale_fda2_weight
                    name: 체중계
                    icon: mdi:scale-bathroom
                    show_label: true
                    label: |
                      [[[
                        if (!entity || ['unknown','unavailable'].includes(entity.state)) return 'N/A';
                        const u = entity.attributes.unit_of_measurement || 'kg';
                        const v = Number(entity.state);
                        return Number.isNaN(v) ? `${entity.state}` : `${Math.round(v*10)/10} ${u}`;
                      ]]]
                    styles:
                      grid:
                        - grid-template-columns: 60px 1fr
                        - grid-template-areas: '"i l" "i n"'
                      icon:
                        - width: 24px
                        - color: var(--gray800)
                      img_cell:
                        - justify-self: start
                        - width: 24px
                        - height: 24px
                        - background: rgba(var(--highlight))
                        - padding: 10px
                        - border-radius: 50%
                      label:
                        - justify-self: start
                        - font-size: 14px
                        - padding-top: 2px
                        - font-weight: 500
                        - color: var(--gray800)
                      card:
                        - height: 60px
                        - border-radius: 24px
                        - padding: 4px 12px 4px 4px
                        - background: var(--card-background-color)
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.1)
                      name:
                        - justify-self: start
                        - font-size: 12px
                        - color: var(--gray800)
                        - opacity: 0.7
                        - padding-bottom: 4px
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#dress-room'
                name: 드레스룸 제어
                icon: mdi:wardrobe
                is_sidebar_hidden: true
                styles: >-
                  .bubble-pop-up-container { --vertical-stack-card-gap:
                  0px!important; } #header-container > div > div { background:
                  var(--popupBG)!important; } #header-container > button {
                  background: none; } .icon-container { background-color:
                  var(--gray800)!important; } .icon-container > ha-icon {
                  color:var(--gray000)!important; opacity:1!important; }
                  .bubble-icon { --mdc-icon-size: 22px !important; }
                bg_blur: '5'
                shadow_opacity: '20'
                bg_opacity: '98'
                margin_top_mobile: 50px
                margin_top_desktop: 50px
                card_layout: large
                button_type: name
              - type: custom:gap-card
                height: 8
              - type: grid
                square: false
                columns: 2
                cards:
                  - type: custom:button-card
                    entity: switch.deureseurum_deung
                    name: 드레스룸 등
                    icon: mdi:ceiling-light
                    tap_action:
                      action: toggle
                    show_state: true
                    state:
                      - value: 'on'
                        styles:
                          card:
                            - background: var(--active-small)
                          name:
                            - color: var(--black)
                          state:
                            - color: var(--black)
                      - value: 'off'
                        styles:
                          card:
                            - background: var(--card-background-color)
                    styles:
                      grid:
                        - grid-template-areas: '"i" "n" "s"'
                      card:
                        - height: 90px
                        - border-radius: 20px
                        - padding: 8px
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.08)
                      icon:
                        - width: 26px
                        - color: var(--gray800)
                      name:
                        - font-size: 12px
                        - color: var(--gray800)
                      state:
                        - font-size: 11px
                        - opacity: 0.7
                        - color: var(--gray800)
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#laundry-room'
                name: 세탁실 제어
                icon: mdi:washing-machine
                is_sidebar_hidden: true
                styles: >-
                  .bubble-pop-up-container { --vertical-stack-card-gap:
                  0px!important; } #header-container > div > div { background:
                  var(--popupBG)!important; } #header-container > button {
                  background: none; } .icon-container { background-color:
                  var(--gray800)!important; } .icon-container > ha-icon {
                  color:var(--gray000)!important; opacity:1!important; }
                  .bubble-icon { --mdc-icon-size: 22px !important; }
                bg_blur: '5'
                shadow_opacity: '20'
                bg_opacity: '98'
                margin_top_mobile: 50px
                margin_top_desktop: 50px
                card_layout: large
                button_type: name
              - type: custom:gap-card
                height: 8
              - type: grid
                square: false
                columns: 3
                cards:
                  - type: custom:button-card
                    entity: switch.wi_fi_smart_plug_1
                    name: 세탁기 전원
                    icon: mdi:power-socket-eu
                    tap_action:
                      action: toggle
                    show_state: true
                    state:
                      - value: 'on'
                        styles:
                          card:
                            - background: var(--active-small)
                          name:
                            - color: var(--black)
                          state:
                            - color: var(--black)
                      - value: 'off'
                        styles:
                          card:
                            - background: var(--card-background-color)
                    styles:
                      grid:
                        - grid-template-areas: '"i" "n" "s"'
                      card:
                        - height: 90px
                        - border-radius: 20px
                        - padding: 8px
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.08)
                      icon:
                        - width: 26px
                        - color: var(--gray800)
                      name:
                        - font-size: 12px
                        - color: var(--gray800)
                      state:
                        - font-size: 11px
                        - opacity: 0.7
                        - color: var(--gray800)
                  - type: custom:button-card
                    entity: automation.gaseu_geomcim_susja_jadong_pandog
                    name: 가스 검침 자동
                    icon: mdi:barcode-scan
                    tap_action:
                      action: call-service
                      service: automation.toggle
                      target:
                        entity_id: automation.gaseu_geomcim_susja_jadong_pandog
                    show_state: true
                    state:
                      - value: 'on'
                        styles:
                          card:
                            - background: var(--active-small)
                          name:
                            - color: var(--black)
                          state:
                            - color: var(--black)
                      - value: 'off'
                        styles:
                          card:
                            - background: var(--card-background-color)
                    styles:
                      grid:
                        - grid-template-areas: '"i" "n" "s"'
                      card:
                        - height: 90px
                        - border-radius: 20px
                        - padding: 8px
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.08)
                      icon:
                        - width: 26px
                        - color: var(--gray800)
                      name:
                        - font-size: 12px
                        - color: var(--gray800)
                      state:
                        - font-size: 11px
                        - opacity: 0.7
                        - color: var(--gray800)
                  - type: custom:button-card
                    entity: binary_sensor.aqara_water_leak_sensor_moisture
                    name: 누수 감지
                    icon: mdi:water-alert
                    show_label: true
                    label: |
                      [[[
                        if (!entity) return 'N/A';
                        return entity.state === 'on' ? '누수 감지' : '정상';
                      ]]]
                    tap_action:
                      action: more-info
                    styles:
                      grid:
                        - grid-template-columns: 60px 1fr
                        - grid-template-areas: '"i l" "i n"'
                      icon:
                        - width: 24px
                        - color: var(--gray800)
                      img_cell:
                        - justify-self: start
                        - width: 24px
                        - height: 24px
                        - background: rgba(var(--highlight))
                        - padding: 10px
                        - border-radius: 50%
                      label:
                        - justify-self: start
                        - font-size: 14px
                        - padding-top: 2px
                        - font-weight: 500
                        - color: var(--gray800)
                      card:
                        - height: 60px
                        - border-radius: 24px
                        - padding: 4px 12px 4px 4px
                        - background: var(--card-background-color)
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.1)
                      name:
                        - justify-self: start
                        - font-size: 12px
                        - color: var(--gray800)
                        - opacity: 0.7
                        - padding-bottom: 4px
              - type: custom:gap-card
                height: 8
              - type: grid
                square: false
                columns: 3
                cards:
                  - type: custom:button-card
                    entity: sensor.sihas_energy_monitor_power
                    name: 순간 전력
                    icon: mdi:flash
                    show_label: true
                    label: |
                      [[[
                        if (!entity || ['unknown','unavailable'].includes(entity.state)) return 'N/A';
                        const u = entity.attributes.unit_of_measurement || 'W';
                        const v = Number(entity.state);
                        return Number.isNaN(v) ? `${entity.state}` : `${Math.round(v)} ${u}`;
                      ]]]
                    styles:
                      grid:
                        - grid-template-areas: '"i" "l" "n"'
                      card:
                        - height: 120px
                        - border-radius: 24px
                        - padding: 16px
                        - background: var(--card-background-color)
                      img_cell:
                        - justify-self: end
                        - align-self: start
                        - background: rgba(var(--highlight))
                        - padding: 12px
                        - border-radius: 50%
                        - width: 28px
                        - height: 28px
                      icon:
                        - width: 26px
                        - color: var(--gray800)
                      label:
                        - justify-self: start
                        - font-size: 24px
                        - font-weight: 300
                        - color: var(--gray800)
                      name:
                        - justify-self: start
                        - font-size: 13px
                        - color: var(--gray800)
                        - opacity: 0.7
                  - type: custom:button-card
                    entity: sensor.sihas_energy_monitor_energy
                    name: 누적 에너지
                    icon: mdi:lightning-bolt
                    show_label: true
                    label: |
                      [[[
                        if (!entity || ['unknown','unavailable'].includes(entity.state)) return 'N/A';
                        const u = entity.attributes.unit_of_measurement || 'kWh';
                        return `${entity.state} ${u}`;
                      ]]]
                    styles:
                      grid:
                        - grid-template-areas: '"i" "l" "n"'
                      card:
                        - height: 120px
                        - border-radius: 24px
                        - padding: 16px
                        - background: var(--card-background-color)
                      img_cell:
                        - justify-self: end
                        - align-self: start
                        - background: rgba(var(--highlight))
                        - padding: 12px
                        - border-radius: 50%
                        - width: 28px
                        - height: 28px
                      icon:
                        - width: 26px
                        - color: var(--gray800)
                      label:
                        - justify-self: start
                        - font-size: 24px
                        - font-weight: 300
                        - color: var(--gray800)
                      name:
                        - justify-self: start
                        - font-size: 13px
                        - color: var(--gray800)
                        - opacity: 0.7
                  - type: custom:button-card
                    entity: sensor.sihas_energy_monitor_temperature
                    name: 모니터 온도
                    icon: mdi:thermometer
                    show_label: true
                    label: |
                      [[[
                        if (!entity || ['unknown','unavailable'].includes(entity.state)) return 'N/A';
                        const v = Number(entity.state);
                        return Number.isNaN(v) ? 'N/A' : `${Math.round(v*10)/10}°C`;
                      ]]]
                    styles:
                      grid:
                        - grid-template-areas: '"i" "l" "n"'
                      card:
                        - height: 120px
                        - border-radius: 24px
                        - padding: 16px
                        - background: var(--card-background-color)
                      img_cell:
                        - justify-self: end
                        - align-self: start
                        - background: rgba(var(--highlight))
                        - padding: 12px
                        - border-radius: 50%
                        - width: 28px
                        - height: 28px
                      icon:
                        - width: 26px
                        - color: var(--gray800)
                      label:
                        - justify-self: start
                        - font-size: 24px
                        - font-weight: 300
                        - color: var(--gray800)
                      name:
                        - justify-self: start
                        - font-size: 13px
                        - color: var(--gray800)
                        - opacity: 0.7
              - type: custom:gap-card
                height: 8
              - type: grid
                square: false
                columns: 2
                cards:
                  - type: custom:button-card
                    entity: sensor.wi_fi_smart_plug_1_power
                    name: 세탁기 전력
                    icon: mdi:flash-outline
                    show_label: true
                    label: |
                      [[[
                        if (!entity || ['unknown','unavailable'].includes(entity.state)) return 'N/A';
                        const u = entity.attributes.unit_of_measurement || 'W';
                        const v = Number(entity.state);
                        return Number.isNaN(v) ? `${entity.state}` : `${Math.round(v)} ${u}`;
                      ]]]
                    styles:
                      grid:
                        - grid-template-columns: 60px 1fr
                        - grid-template-areas: '"i l" "i n"'
                      icon:
                        - width: 24px
                        - color: var(--gray800)
                      img_cell:
                        - justify-self: start
                        - width: 24px
                        - height: 24px
                        - background: rgba(var(--highlight))
                        - padding: 10px
                        - border-radius: 50%
                      label:
                        - justify-self: start
                        - font-size: 14px
                        - padding-top: 2px
                        - font-weight: 500
                        - color: var(--gray800)
                      card:
                        - height: 60px
                        - border-radius: 24px
                        - padding: 4px 12px 4px 4px
                        - background: var(--card-background-color)
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.1)
                      name:
                        - justify-self: start
                        - font-size: 12px
                        - color: var(--gray800)
                        - opacity: 0.7
                        - padding-bottom: 4px
                  - type: custom:button-card
                    entity: sensor.wi_fi_smart_plug_1_energy_2
                    name: 세탁기 에너지
                    icon: mdi:lightning-bolt-circle
                    show_label: true
                    label: |
                      [[[
                        if (!entity || ['unknown','unavailable'].includes(entity.state)) return 'N/A';
                        const u = entity.attributes.unit_of_measurement || 'kWh';
                        return `${entity.state} ${u}`;
                      ]]]
                    styles:
                      grid:
                        - grid-template-columns: 60px 1fr
                        - grid-template-areas: '"i l" "i n"'
                      icon:
                        - width: 24px
                        - color: var(--gray800)
                      img_cell:
                        - justify-self: start
                        - width: 24px
                        - height: 24px
                        - background: rgba(var(--highlight))
                        - padding: 10px
                        - border-radius: 50%
                      label:
                        - justify-self: start
                        - font-size: 14px
                        - padding-top: 2px
                        - font-weight: 500
                        - color: var(--gray800)
                      card:
                        - height: 60px
                        - border-radius: 24px
                        - padding: 4px 12px 4px 4px
                        - background: var(--card-background-color)
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.1)
                      name:
                        - justify-self: start
                        - font-size: 12px
                        - color: var(--gray800)
                        - opacity: 0.7
                        - padding-bottom: 4px
              - type: custom:gap-card
                height: 8
              - type: grid
                square: false
                columns: 1
                cards:
                  - type: picture-entity
                    entity: camera.esp32_cam_esp32_cam_gas_cam
                    name: 가스 미터 카메라
                    camera_view: live
                    show_state: false
                    show_name: true
                    tap_action:
                      action: more-info
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#inner-room'
                name: 안방 제어
                icon: mdi:bed-king
                is_sidebar_hidden: true
                styles: >-
                  .bubble-pop-up-container { --vertical-stack-card-gap:
                  0px!important; } #header-container > div > div { background:
                  var(--popupBG)!important; } #header-container > button {
                  background: none; } .icon-container { background-color:
                  var(--gray800)!important; } .icon-container > ha-icon {
                  color:var(--gray000)!important; opacity:1!important; }
                  .bubble-icon { --mdc-icon-size: 22px !important; }
                bg_blur: '5'
                shadow_opacity: '20'
                bg_opacity: '98'
                margin_top_mobile: 50px
                margin_top_desktop: 50px
                card_layout: large
                button_type: name
              - type: custom:gap-card
                height: 8
              - type: grid
                square: false
                columns: 2
                cards:
                  - type: custom:button-card
                    entity: light.smart_bulb_3
                    name: 안방 조명
                    icon: mdi:ceiling-light
                    tap_action:
                      action: toggle
                    hold_action:
                      action: more-info
                    show_state: true
                    state:
                      - value: 'on'
                        styles:
                          card:
                            - background: var(--active-small)
                          name:
                            - color: var(--black)
                          state:
                            - color: var(--black)
                      - value: 'off'
                        styles:
                          card:
                            - background: var(--card-background-color)
                    styles:
                      grid:
                        - grid-template-areas: '"i" "n" "s"'
                      card:
                        - height: 90px
                        - border-radius: 20px
                        - padding: 8px
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.08)
                      icon:
                        - width: 26px
                        - color: var(--gray800)
                      name:
                        - font-size: 12px
                        - color: var(--gray800)
                      state:
                        - font-size: 11px
                        - opacity: 0.7
                        - color: var(--gray800)
                  - type: custom:button-card
                    entity: switch.hwajangdae_deung
                    name: 화장대 등
                    icon: mdi:lightbulb
                    tap_action:
                      action: toggle
                    show_state: true
                    state:
                      - value: 'on'
                        styles:
                          card:
                            - background: var(--active-small)
                          name:
                            - color: var(--black)
                          state:
                            - color: var(--black)
                      - value: 'off'
                        styles:
                          card:
                            - background: var(--card-background-color)
                    styles:
                      grid:
                        - grid-template-areas: '"i" "n" "s"'
                      card:
                        - height: 90px
                        - border-radius: 20px
                        - padding: 8px
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.08)
                      icon:
                        - width: 26px
                        - color: var(--gray800)
                      name:
                        - font-size: 12px
                        - color: var(--gray800)
                      state:
                        - font-size: 11px
                        - opacity: 0.7
                        - color: var(--gray800)
              - type: custom:gap-card
                height: 8
              - type: grid
                square: false
                columns: 2
                cards:
                  - type: custom:button-card
                    name: 온도
                    icon: mdi:thermometer
                    show_label: true
                    label: |
                      [[[
                        const s = states['sensor.aqara_temperature_and_humidity_sensor_t1_1_temperature'];
                        if (!s || ['unknown','unavailable'].includes(s.state)) return 'N/A';
                        const v = Number(s.state);
                        return Number.isNaN(v) ? 'N/A' : `${Math.round(v*10)/10}°C`;
                      ]]]
                    styles:
                      grid:
                        - grid-template-areas: '"i" "l" "n"'
                      card:
                        - height: 120px
                        - border-radius: 24px
                        - padding: 16px
                        - background: var(--card-background-color)
                      img_cell:
                        - justify-self: end
                        - align-self: start
                        - background: rgba(var(--highlight))
                        - padding: 12px
                        - border-radius: 50%
                        - width: 28px
                        - height: 28px
                      icon:
                        - width: 26px
                        - color: var(--gray800)
                      label:
                        - justify-self: start
                        - font-size: 24px
                        - font-weight: 300
                        - color: var(--gray800)
                      name:
                        - justify-self: start
                        - font-size: 13px
                        - color: var(--gray800)
                        - opacity: 0.7
                  - type: custom:button-card
                    name: 습도
                    icon: mdi:water-percent
                    show_label: true
                    label: |
                      [[[
                        const s = states['sensor.aqara_temperature_and_humidity_sensor_t1_1_humidity'];
                        if (!s || ['unknown','unavailable'].includes(s.state)) return 'N/A';
                        const v = Number(s.state);
                        return Number.isNaN(v) ? 'N/A' : `${Math.round(v)}%`;
                      ]]]
                    styles:
                      grid:
                        - grid-template-areas: '"i" "l" "n"'
                      card:
                        - height: 120px
                        - border-radius: 24px
                        - padding: 16px
                        - background: var(--card-background-color)
                      img_cell:
                        - justify-self: end
                        - align-self: start
                        - background: rgba(var(--highlight))
                        - padding: 12px
                        - border-radius: 50%
                        - width: 28px
                        - height: 28px
                      icon:
                        - width: 26px
                        - color: var(--gray800)
                      label:
                        - justify-self: start
                        - font-size: 24px
                        - font-weight: 300
                        - color: var(--gray800)
                      name:
                        - justify-self: start
                        - font-size: 13px
                        - color: var(--gray800)
                        - opacity: 0.7
              - type: custom:gap-card
                height: 8
              - type: grid
                square: false
                columns: 2
                cards:
                  - type: custom:button-card
                    entity: sensor.paul_nest_alarms
                    name: 알람
                    icon: mdi:alarm
                    show_label: true
                    label: |
                      [[[
                        const v = states[entity.entity_id]?.state;
                        if (!v || ['unknown','unavailable'].includes(v)) return '—';
                        const d = new Date(v);
                        if (isNaN(d)) {
                          const m = (v || '').toString().match(/^(\d{2}):(\d{2})/);
                          return m ? `${m[1]}:${m[2]}` : v;
                        }
                        const hh = d.getHours().toString().padStart(2,'0');
                        const mm = d.getMinutes().toString().padStart(2,'0');
                        return `${hh}:${mm}`;
                      ]]]
                    styles:
                      grid:
                        - grid-template-columns: 60px 1fr
                        - grid-template-areas: '"i l" "i n"'
                      icon:
                        - width: 24px
                        - color: var(--gray800)
                      img_cell:
                        - justify-self: start
                        - width: 24px
                        - height: 24px
                        - background: rgba(var(--highlight))
                        - padding: 10px
                        - border-radius: 50%
                      label:
                        - justify-self: start
                        - font-size: 16px
                        - padding-top: 2px
                        - font-weight: 500
                        - color: var(--gray800)
                      card:
                        - height: 60px
                        - border-radius: 24px
                        - padding: 4px 12px 4px 4px
                        - background: var(--card-background-color)
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.1)
                      name:
                        - justify-self: start
                        - font-size: 12px
                        - color: var(--gray800)
                        - opacity: 0.7
                        - padding-bottom: 4px
                  - type: custom:button-card
                    entity: number.paul_nest_alarm_volume
                    name: 알람 볼륨
                    icon: mdi:volume-high
                    show_label: true
                    label: |
                      [[[
                        if (!entity || ['unknown','unavailable'].includes(entity.state)) return 'N/A';
                        const v = Number(entity.state);
                        return Number.isNaN(v) ? `${entity.state}` : `${Math.round(v)}%`;
                      ]]]
                    tap_action:
                      action: more-info
                    styles:
                      grid:
                        - grid-template-columns: 60px 1fr
                        - grid-template-areas: '"i l" "i n"'
                      icon:
                        - width: 24px
                        - color: var(--gray800)
                      img_cell:
                        - justify-self: start
                        - width: 24px
                        - height: 24px
                        - background: rgba(var(--highlight))
                        - padding: 10px
                        - border-radius: 50%
                      label:
                        - justify-self: start
                        - font-size: 16px
                        - padding-top: 2px
                        - font-weight: 500
                        - color: var(--gray800)
                      card:
                        - height: 60px
                        - border-radius: 24px
                        - padding: 4px 12px 4px 4px
                        - background: var(--card-background-color)
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.1)
                      name:
                        - justify-self: start
                        - font-size: 12px
                        - color: var(--gray800)
                        - opacity: 0.7
                        - padding-bottom: 4px
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#beranda'
                name: 안방 베란다
                icon: mdi:door
                is_sidebar_hidden: true
                styles: >-
                  .bubble-pop-up-container { --vertical-stack-card-gap:
                  0px!important; } #header-container > div > div { background:
                  var(--popupBG)!important; } #header-container > button {
                  background: none; } .icon-container { background-color:
                  var(--gray800)!important; } .icon-container > ha-icon {
                  color:var(--gray000)!important; opacity:1!important; }
                  .bubble-icon { --mdc-icon-size: 22px !important; }
                bg_blur: '5'
                shadow_opacity: '20'
                bg_opacity: '98'
                margin_top_mobile: 50px
                margin_top_desktop: 50px
                card_layout: large
                button_type: name
              - type: custom:gap-card
                height: 8
              - type: grid
                square: false
                columns: 2
                cards:
                  - type: custom:button-card
                    entity: binary_sensor.multipurpose_sensor_2_door
                    name: 문
                    icon: mdi:door-open
                    show_label: true
                    label: |
                      [[[
                        if (!entity) return 'N/A';
                        const st = entity.state;
                        if (['on','open'].includes(st)) return '열림';
                        if (['off','closed'].includes(st)) return '닫힘';
                        return st;
                      ]]]
                    state:
                      - value: 'on'
                        styles:
                          card:
                            - background: var(--active-small)
                          name:
                            - color: var(--black)
                          label:
                            - color: var(--black)
                      - value: open
                        styles:
                          card:
                            - background: var(--active-small)
                          name:
                            - color: var(--black)
                          label:
                            - color: var(--black)
                    styles:
                      grid:
                        - grid-template-columns: 60px 1fr
                        - grid-template-areas: '"i l" "i n"'
                      icon:
                        - width: 24px
                        - color: var(--gray800)
                      img_cell:
                        - justify-self: start
                        - width: 24px
                        - height: 24px
                        - background: rgba(var(--highlight))
                        - padding: 10px
                        - border-radius: 50%
                      label:
                        - justify-self: start
                        - font-size: 16px
                        - padding-top: 2px
                        - font-weight: 500
                        - color: var(--gray800)
                      card:
                        - height: 60px
                        - border-radius: 24px
                        - padding: 4px 12px 4px 4px
                        - background: var(--card-background-color)
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.1)
                      name:
                        - justify-self: start
                        - font-size: 12px
                        - color: var(--gray800)
                        - opacity: 0.7
                        - padding-bottom: 4px
                  - type: custom:button-card
                    entity: binary_sensor.multipurpose_sensor_2_acceleration
                    name: 가속(움직임)
                    icon: mdi:vibrate
                    show_label: true
                    label: |
                      [[[
                        if (!entity) return 'N/A';
                        return entity.state === 'on' ? '감지됨' :
                               entity.state === 'off' ? '없음' : entity.state;
                      ]]]
                    state:
                      - value: 'on'
                        styles:
                          card:
                            - background: var(--active-small)
                          name:
                            - color: var(--black)
                          label:
                            - color: var(--black)
                    styles:
                      grid:
                        - grid-template-columns: 60px 1fr
                        - grid-template-areas: '"i l" "i n"'
                      icon:
                        - width: 24px
                        - color: var(--gray800)
                      img_cell:
                        - justify-self: start
                        - width: 24px
                        - height: 24px
                        - background: rgba(var(--highlight))
                        - padding: 10px
                        - border-radius: 50%
                      label:
                        - justify-self: start
                        - font-size: 16px
                        - padding-top: 2px
                        - font-weight: 500
                        - color: var(--gray800)
                      card:
                        - height: 60px
                        - border-radius: 24px
                        - padding: 4px 12px 4px 4px
                        - background: var(--card-background-color)
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.1)
                      name:
                        - justify-self: start
                        - font-size: 12px
                        - color: var(--gray800)
                        - opacity: 0.7
                        - padding-bottom: 4px
              - type: custom:gap-card
                height: 8
              - type: grid
                square: false
                columns: 2
                cards:
                  - type: custom:button-card
                    name: 온도
                    icon: mdi:thermometer
                    show_label: true
                    label: |
                      [[[
                        const s = states['sensor.multipurpose_sensor_2_temperature'];
                        if (!s || ['unknown','unavailable'].includes(s.state)) return 'N/A';
                        const v = Number(s.state);
                        return Number.isNaN(v) ? 'N/A' : `${Math.round(v*10)/10}°C`;
                      ]]]
                    styles:
                      grid:
                        - grid-template-areas: '"i" "l" "n"'
                      card:
                        - height: 120px
                        - border-radius: 24px
                        - padding: 16px
                        - background: var(--card-background-color)
                      img_cell:
                        - justify-self: end
                        - align-self: start
                        - background: rgba(var(--highlight))
                        - padding: 12px
                        - border-radius: 50%
                        - width: 28px
                        - height: 28px
                      icon:
                        - width: 26px
                        - color: var(--gray800)
                      label:
                        - justify-self: start
                        - font-size: 24px
                        - font-weight: 300
                        - color: var(--gray800)
                      name:
                        - justify-self: start
                        - font-size: 13px
                        - color: var(--gray800)
                        - opacity: 0.7
                  - type: custom:button-card
                    name: 배터리
                    icon: mdi:battery
                    show_label: true
                    label: |
                      [[[
                        const s = states['sensor.multipurpose_sensor_2_battery'];
                        if (!s || ['unknown','unavailable'].includes(s.state)) return 'N/A';
                        const v = Number(s.state);
                        const u = s.attributes?.unit_of_measurement || '%';
                        return Number.isNaN(v) ? `${s.state}` : `${Math.round(v)}${u}`;
                      ]]]
                    styles:
                      grid:
                        - grid-template-areas: '"i" "l" "n"'
                      card:
                        - height: 120px
                        - border-radius: 24px
                        - padding: 16px
                        - background: var(--card-background-color)
                      img_cell:
                        - justify-self: end
                        - align-self: start
                        - background: rgba(var(--highlight))
                        - padding: 12px
                        - border-radius: 50%
                        - width: 28px
                        - height: 28px
                      icon:
                        - width: 26px
                        - color: var(--gray800)
                      label:
                        - justify-self: start
                        - font-size: 24px
                        - font-weight: 300
                        - color: var(--gray800)
                      name:
                        - justify-self: start
                        - font-size: 13px
                        - color: var(--gray800)
                        - opacity: 0.7
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#master-bathroom-wc'
                name: 안방 화장실
                icon: mdi:toilet
                is_sidebar_hidden: true
                styles: >-
                  .bubble-pop-up-container { --vertical-stack-card-gap:
                  0px!important; } #header-container > div > div { background:
                  var(--popupBG)!important; } #header-container > button {
                  background: none; } .icon-container { background-color:
                  var(--gray800)!important; } .icon-container > ha-icon {
                  color:var(--gray000)!important; opacity:1!important; }
                  .bubble-icon { --mdc-icon-size: 22px !important; }
                bg_blur: '5'
                shadow_opacity: '20'
                bg_opacity: '98'
                margin_top_mobile: 50px
                margin_top_desktop: 50px
                card_layout: large
                button_type: name
              - type: custom:gap-card
                height: 8
              - type: grid
                square: false
                columns: 3
                cards:
                  - type: custom:button-card
                    entity: switch.anbang_syaweosil_deung
                    name: 샤워실 등
                    icon: mdi:shower-head
                    tap_action:
                      action: toggle
                    show_state: true
                    state:
                      - value: 'on'
                        styles:
                          card:
                            - background: var(--active-small)
                          name:
                            - color: var(--black)
                          state:
                            - color: var(--black)
                      - value: 'off'
                        styles:
                          card:
                            - background: var(--card-background-color)
                    styles:
                      grid:
                        - grid-template-areas: '"i" "n" "s"'
                      card:
                        - height: 90px
                        - border-radius: 20px
                        - padding: 8px
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.08)
                      icon:
                        - width: 26px
                        - color: var(--gray800)
                      name:
                        - font-size: 12px
                        - color: var(--gray800)
                      state:
                        - font-size: 11px
                        - opacity: 0.7
                        - color: var(--gray800)
                  - type: custom:button-card
                    entity: switch.anbang_hwajangsil_deung
                    name: 화장실 등
                    icon: mdi:ceiling-light
                    tap_action:
                      action: toggle
                    show_state: true
                    state:
                      - value: 'on'
                        styles:
                          card:
                            - background: var(--active-small)
                          name:
                            - color: var(--black)
                          state:
                            - color: var(--black)
                      - value: 'off'
                        styles:
                          card:
                            - background: var(--card-background-color)
                    styles:
                      grid:
                        - grid-template-areas: '"i" "n" "s"'
                      card:
                        - height: 90px
                        - border-radius: 20px
                        - padding: 8px
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.08)
                      icon:
                        - width: 26px
                        - color: var(--gray800)
                      name:
                        - font-size: 12px
                        - color: var(--gray800)
                      state:
                        - font-size: 11px
                        - opacity: 0.7
                        - color: var(--gray800)
                  - type: custom:button-card
                    entity: switch.anbang_hwajangsil_hwangi
                    name: 환기
                    icon: mdi:fan
                    tap_action:
                      action: toggle
                    show_state: true
                    state:
                      - value: 'on'
                        styles:
                          card:
                            - background: var(--active-small)
                          name:
                            - color: var(--black)
                          state:
                            - color: var(--black)
                      - value: 'off'
                        styles:
                          card:
                            - background: var(--card-background-color)
                    styles:
                      grid:
                        - grid-template-areas: '"i" "n" "s"'
                      card:
                        - height: 90px
                        - border-radius: 20px
                        - padding: 8px
                        - box-shadow: 0 2px 8px rgba(0,0,0,0.08)
                      icon:
                        - width: 26px
                        - color: var(--gray800)
                      name:
                        - font-size: 12px
                        - color: var(--gray800)
                      state:
                        - font-size: 11px
                        - opacity: 0.7
                        - color: var(--gray800)
              - type: custom:gap-card
                height: 8
              - type: custom:paper-buttons-row
                styles:
                  justify-content: center
                  margin: 0 auto
                  width: max-content
                  background-color: var(--popupBG)
                  border: 4px solid var(--popupBG)
                  border-radius: 28px
                buttons:
                  - layout: name
                    name: 모두 켜기
                    tap_action:
                      action: call-service
                      service: homeassistant.turn_on
                      service_data:
                        entity_id:
                          - switch.anbang_syaweosil_deung
                          - switch.anbang_hwajangsil_deung
                          - switch.anbang_hwajangsil_hwangi
                    styles:
                      name:
                        padding: 0 18px
                        color: var(--black)
                      button:
                        display: flex
                        height: 26px
                        background: var(--active-small)
                        border-radius: 24px
                  - layout: name
                    name: 모두 끄기
                    tap_action:
                      action: call-service
                      service: homeassistant.turn_off
                      service_data:
                        entity_id:
                          - switch.anbang_syaweosil_deung
                          - switch.anbang_hwajangsil_deung
                          - switch.anbang_hwajangsil_hwangi
                    styles:
                      name:
                        padding: 0 18px
                        color: var(--gray800)
                      button:
                        display: flex
                        height: 26px
                        background: transparent
                        border-radius: 24px
    header:
      layout: responsive
      badges_position: top
      badges_wrap: scroll
      card:
        type: custom:paper-buttons-row
        styles:
          justify-content: flex-start
          flex-wrap: wrap
          font-size: 1.4em
          line-height: 1.2em
          margin: 6px 0 12px 0
          width: 100%
        buttons:
          - layout: name
            name: >-
              {% set hour = now().hour %} {% if 5 <= hour < 12 %} 좋은 아침이에요, {{
              user }}님!  {% elif 12 <= hour < 18 %} 안녕하세요, {{ user }}님!  {% elif
              18 <= hour < 22 %} 좋은 저녁이에요, {{ user }}님!  {% else %} 편안한 밤 되세요,
              {{ user }}님!  {% endif %}
            styles:
              button:
                flex-basis: 100%
                flex-shrink: 0
                margin-bottom: 8px
              name:
                color: var(--gray1000)
                font-weight: 500
                font-size: 1.1em
    badges:
      - type: custom:mod-card
        card:
          type: custom:hui-entity-badge
          entity: sensor.overview_lights
          icon: mdi:lightbulb
          show_name: true
          name: 조명
          color: yellow
          double_tap_action:
            action: none
          hold_action:
            action: none
          tap_action:
            action: navigate
            navigation_path: /dashboard-unknown/light
        card_mod:
          style:
            hui-entity-badge: >
              {% set lights_on = states('sensor.count_lights_on') |
              int(default=0) %}

              ha-card {
                border: 2px solid {{ 'var(--primary-color)' if lights_on > 0 else 'var(--primary-background-color)' }} !important;
                border-radius: 24px;
                --icon-primary-color: {{ 'var(--icon-primary-color)' if lights_on > 0 else 'grey' }};
                
                {% if lights_on > 0 %}
                  animation: blink 2s ease infinite;
                {% endif %}
              }


              {% if lights_on > 0 %}
                @keyframes blink {
                  50% {
                    opacity: 0.2;
                  }
                }
              {% endif %}
      - type: custom:mod-card
        card:
          type: custom:hui-entity-badge
          entity: sensor.count_media_playing
          icon: mdi:speaker-wireless
          show_name: true
          name: 스피커 및 TV
          color: purple
          double_tap_action:
            action: none
          hold_action:
            action: none
          tap_action:
            action: navigate
            navigation_path: /dashboard-unknown/media-player
        card_mod:
          style:
            hui-entity-badge: >
              {% set media_playing = states('sensor.count_media_playing') |
              int(default=0) %}

              ha-card {
                border: 2px solid {{ 'var(--primary-color)' if media_playing > 0 else 'var(--primary-background-color)' }} !important;
                border-radius: 24px;
                --icon-primary-color: {{ 'var(--icon-primary-color)' if media_playing > 0 else 'grey' }};
                
                {% if media_playing > 0 %}
                            animation: blink 2s ease infinite;
                {% endif %}
              }


              {% if media_playing > 0 %}
                @keyframes blink {
                  50% {
                    opacity: 0.2;
                  }
                }
              {% endif %}
      - type: entity
        show_name: true
        show_state: true
        show_icon: true
        entity: sensor.95beon_beoseu_docag_jeongbo_bs264177
        show_entity_picture: false
        name: 95번 버스
        icon: mdi:bus-clock
      - type: entity
        show_name: true
        show_state: true
        show_icon: true
        entity: sensor.730beon_beoseu_docag_jeongbo_bs264177
        name: 730번 버스
        icon: mdi:bus-clock
    top_margin: false
    cards: []
  - type: sections
    max_columns: 4
    path: light
    sections:
      - type: grid
        cards:
          - type: custom:expander-card
            title: Lights
            cards:
              - type: grid
                columns: 2
                square: false
                cards:
                  - type: custom:slider-button-card
                    entity: light.geosil_jomyeong_1beon
                    name: 거실 조명 1
                    slider:
                      direction: left-right
                      background: gradient
                      use_state_color: false
                      use_percentage_bg_opacity: true
                      show_track: true
                    show_name: true
                    show_state: true
                    compact: false
                    icon:
                      icon: mdi:ceiling-light
                      show: true
                      use_state_color: false
                    action_button:
                      show: false
                    card_mod:
                      style: |
                        :host {
                          --slider-color: rgba(255, 232, 198, 0.95);
                          --slider-bg: linear-gradient(90deg, rgba(86, 75, 63, 0.92) 0%, rgba(255, 226, 187, 0.95) 48%, rgba(255, 240, 210, 0.97) 52%, rgba(86, 75, 63, 0.92) 100%);
                          --slider-bg-filter: brightness(105%);
                          --icon-color: #fff5e6;
                          --state-color-on: #fff9ed;
                          --state-color-off: rgba(255, 249, 237, 0.7);
                          --label-color-on: #fff5e6;
                          --label-color-off: rgba(255, 249, 237, 0.6);
                          --action-icon-color-on: #fff5e6;
                          --action-icon-color-off: rgba(255, 249, 237, 0.6);
                        }
                        ha-card {
                          background: linear-gradient(90deg, rgba(56, 51, 47, 0.75) 0%, rgba(238, 207, 162, 0.88) 45%, rgba(254, 235, 205, 0.94) 55%, rgba(56, 51, 47, 0.75) 100%);
                          color: #fff5e6;
                          border-radius: 22px;
                          border: 1px solid rgba(255, 240, 220, 0.24);
                          box-shadow: inset 0 0 0 1px rgba(255, 240, 220, 0.08), 0 8px 20px rgba(0, 0, 0, 0.35);
                          position: relative;
                          overflow: hidden;
                        }
                        ha-card::before {
                          content: "";
                          position: absolute;
                          inset: 0;
                          border-radius: 22px;
                          background: linear-gradient(140deg, rgba(255, 250, 236, 0.15), rgba(86, 75, 63, 0.06));
                          mix-blend-mode: screen;
                          pointer-events: none;
                        }
                        ha-card ha-icon {
                          color: #fff5e6;
                        }
                        ha-card .name,
                        ha-card .state,
                        ha-card .label,
                        ha-card .value {
                          color: #fff5e6 !important;
                        }
                  - type: custom:slider-button-card
                    entity: light.geosil_jomyeong_2beon
                    name: 거실 조명 2
                    slider:
                      direction: left-right
                      background: gradient
                      use_state_color: false
                      use_percentage_bg_opacity: true
                      show_track: true
                    show_name: true
                    show_state: true
                    compact: false
                    icon:
                      icon: mdi:ceiling-light
                      show: true
                      use_state_color: false
                    action_button:
                      show: false
                    card_mod:
                      style: |
                        :host {
                          --slider-color: rgba(255, 232, 198, 0.95);
                          --slider-bg: linear-gradient(90deg, rgba(86, 75, 63, 0.92) 0%, rgba(255, 226, 187, 0.95) 48%, rgba(255, 240, 210, 0.97) 52%, rgba(86, 75, 63, 0.92) 100%);
                          --slider-bg-filter: brightness(105%);
                          --icon-color: #fff5e6;
                          --state-color-on: #fff9ed;
                          --state-color-off: rgba(255, 249, 237, 0.7);
                          --label-color-on: #fff5e6;
                          --label-color-off: rgba(255, 249, 237, 0.6);
                          --action-icon-color-on: #fff5e6;
                          --action-icon-color-off: rgba(255, 249, 237, 0.6);
                        }
                        ha-card {
                          background: linear-gradient(90deg, rgba(56, 51, 47, 0.75) 0%, rgba(238, 207, 162, 0.88) 45%, rgba(254, 235, 205, 0.94) 55%, rgba(56, 51, 47, 0.75) 100%);
                          color: #fff5e6;
                          border-radius: 22px;
                          border: 1px solid rgba(255, 240, 220, 0.24);
                          box-shadow: inset 0 0 0 1px rgba(255, 240, 220, 0.08), 0 8px 20px rgba(0, 0, 0, 0.35);
                          position: relative;
                          overflow: hidden;
                        }
                        ha-card::before {
                          content: "";
                          position: absolute;
                          inset: 0;
                          border-radius: 22px;
                          background: linear-gradient(140deg, rgba(255, 250, 236, 0.15), rgba(86, 75, 63, 0.06));
                          mix-blend-mode: screen;
                          pointer-events: none;
                        }
                        ha-card ha-icon {
                          color: #fff5e6;
                        }
                        ha-card .name,
                        ha-card .state,
                        ha-card .label,
                        ha-card .value {
                          color: #fff5e6 !important;
                        }
                  - type: custom:slider-button-card
                    entity: light.geosil_jomyeong_3beon
                    name: 거실 조명 3
                    slider:
                      direction: left-right
                      background: gradient
                      use_state_color: false
                      use_percentage_bg_opacity: true
                      show_track: true
                    show_name: true
                    show_state: true
                    compact: false
                    icon:
                      icon: mdi:ceiling-light
                      show: true
                      use_state_color: false
                    action_button:
                      show: false
                    card_mod:
                      style: |
                        :host {
                          --slider-color: rgba(255, 232, 198, 0.95);
                          --slider-bg: linear-gradient(90deg, rgba(86, 75, 63, 0.92) 0%, rgba(255, 226, 187, 0.95) 48%, rgba(255, 240, 210, 0.97) 52%, rgba(86, 75, 63, 0.92) 100%);
                          --slider-bg-filter: brightness(105%);
                          --icon-color: #fff5e6;
                          --state-color-on: #fff9ed;
                          --state-color-off: rgba(255, 249, 237, 0.7);
                          --label-color-on: #fff5e6;
                          --label-color-off: rgba(255, 249, 237, 0.6);
                          --action-icon-color-on: #fff5e6;
                          --action-icon-color-off: rgba(255, 249, 237, 0.6);
                        }
                        ha-card {
                          background: linear-gradient(90deg, rgba(56, 51, 47, 0.75) 0%, rgba(238, 207, 162, 0.88) 45%, rgba(254, 235, 205, 0.94) 55%, rgba(56, 51, 47, 0.75) 100%);
                          color: #fff5e6;
                          border-radius: 22px;
                          border: 1px solid rgba(255, 240, 220, 0.24);
                          box-shadow: inset 0 0 0 1px rgba(255, 240, 220, 0.08), 0 8px 20px rgba(0, 0, 0, 0.35);
                          position: relative;
                          overflow: hidden;
                        }
                        ha-card::before {
                          content: "";
                          position: absolute;
                          inset: 0;
                          border-radius: 22px;
                          background: linear-gradient(140deg, rgba(255, 250, 236, 0.15), rgba(86, 75, 63, 0.06));
                          mix-blend-mode: screen;
                          pointer-events: none;
                        }
                        ha-card ha-icon {
                          color: #fff5e6;
                        }
                        ha-card .name,
                        ha-card .state,
                        ha-card .label,
                        ha-card .value {
                          color: #fff5e6 !important;
                        }
                  - type: custom:slider-button-card
                    entity: light.deureseurum_deung
                    name: 드레스룸 등
                    slider:
                      direction: left-right
                      background: gradient
                      use_state_color: false
                      use_percentage_bg_opacity: true
                      show_track: true
                    show_name: true
                    show_state: true
                    compact: false
                    icon:
                      icon: mdi:hanger
                      show: true
                      use_state_color: false
                    action_button:
                      show: false
                    card_mod:
                      style: |
                        :host {
                          --slider-color: rgba(255, 232, 198, 0.95);
                          --slider-bg: linear-gradient(90deg, rgba(86, 75, 63, 0.92) 0%, rgba(255, 226, 187, 0.95) 48%, rgba(255, 240, 210, 0.97) 52%, rgba(86, 75, 63, 0.92) 100%);
                          --slider-bg-filter: brightness(105%);
                          --icon-color: #fff5e6;
                          --state-color-on: #fff9ed;
                          --state-color-off: rgba(255, 249, 237, 0.7);
                          --label-color-on: #fff5e6;
                          --label-color-off: rgba(255, 249, 237, 0.6);
                          --action-icon-color-on: #fff5e6;
                          --action-icon-color-off: rgba(255, 249, 237, 0.6);
                        }
                        ha-card {
                          background: linear-gradient(90deg, rgba(56, 51, 47, 0.75) 0%, rgba(238, 207, 162, 0.88) 45%, rgba(254, 235, 205, 0.94) 55%, rgba(56, 51, 47, 0.75) 100%);
                          color: #fff5e6;
                          border-radius: 22px;
                          border: 1px solid rgba(255, 240, 220, 0.24);
                          box-shadow: inset 0 0 0 1px rgba(255, 240, 220, 0.08), 0 8px 20px rgba(0, 0, 0, 0.35);
                          position: relative;
                          overflow: hidden;
                        }
                        ha-card::before {
                          content: "";
                          position: absolute;
                          inset: 0;
                          border-radius: 22px;
                          background: linear-gradient(140deg, rgba(255, 250, 236, 0.15), rgba(86, 75, 63, 0.06));
                          mix-blend-mode: screen;
                          pointer-events: none;
                        }
                        ha-card ha-icon {
                          color: #fff5e6;
                        }
                        ha-card .name,
                        ha-card .state,
                        ha-card .label,
                        ha-card .value {
                          color: #fff5e6 !important;
                        }
                  - type: custom:slider-button-card
                    entity: light.hwajangdae_deung
                    name: 화장대 등
                    slider:
                      direction: left-right
                      background: gradient
                      use_state_color: false
                      use_percentage_bg_opacity: true
                      show_track: true
                    show_name: true
                    show_state: true
                    compact: false
                    icon:
                      icon: mdi:face-woman
                      show: true
                      use_state_color: false
                    action_button:
                      show: false
                    card_mod:
                      style: |
                        :host {
                          --slider-color: rgba(255, 232, 198, 0.95);
                          --slider-bg: linear-gradient(90deg, rgba(86, 75, 63, 0.92) 0%, rgba(255, 226, 187, 0.95) 48%, rgba(255, 240, 210, 0.97) 52%, rgba(86, 75, 63, 0.92) 100%);
                          --slider-bg-filter: brightness(105%);
                          --icon-color: #fff5e6;
                          --state-color-on: #fff9ed;
                          --state-color-off: rgba(255, 249, 237, 0.7);
                          --label-color-on: #fff5e6;
                          --label-color-off: rgba(255, 249, 237, 0.6);
                          --action-icon-color-on: #fff5e6;
                          --action-icon-color-off: rgba(255, 249, 237, 0.6);
                        }
                        ha-card {
                          background: linear-gradient(90deg, rgba(56, 51, 47, 0.75) 0%, rgba(238, 207, 162, 0.88) 45%, rgba(254, 235, 205, 0.94) 55%, rgba(56, 51, 47, 0.75) 100%);
                          color: #fff5e6;
                          border-radius: 22px;
                          border: 1px solid rgba(255, 240, 220, 0.24);
                          box-shadow: inset 0 0 0 1px rgba(255, 240, 220, 0.08), 0 8px 20px rgba(0, 0, 0, 0.35);
                          position: relative;
                          overflow: hidden;
                        }
                        ha-card::before {
                          content: "";
                          position: absolute;
                          inset: 0;
                          border-radius: 22px;
                          background: linear-gradient(140deg, rgba(255, 250, 236, 0.15), rgba(86, 75, 63, 0.06));
                          mix-blend-mode: screen;
                          pointer-events: none;
                        }
                        ha-card ha-icon {
                          color: #fff5e6;
                        }
                        ha-card .name,
                        ha-card .state,
                        ha-card .label,
                        ha-card .value {
                          color: #fff5e6 !important;
                        }
                  - type: custom:slider-button-card
                    entity: light.anbang_hwajangsil_deung
                    name: 안방 화장실 등
                    slider:
                      direction: left-right
                      background: gradient
                      use_state_color: false
                      use_percentage_bg_opacity: true
                      show_track: true
                    show_name: true
                    show_state: true
                    compact: false
                    icon:
                      icon: mdi:toilet
                      show: true
                      use_state_color: false
                    action_button:
                      show: false
                    card_mod:
                      style: |
                        :host {
                          --slider-color: rgba(255, 232, 198, 0.95);
                          --slider-bg: linear-gradient(90deg, rgba(86, 75, 63, 0.92) 0%, rgba(255, 226, 187, 0.95) 48%, rgba(255, 240, 210, 0.97) 52%, rgba(86, 75, 63, 0.92) 100%);
                          --slider-bg-filter: brightness(105%);
                          --icon-color: #fff5e6;
                          --state-color-on: #fff9ed;
                          --state-color-off: rgba(255, 249, 237, 0.7);
                          --label-color-on: #fff5e6;
                          --label-color-off: rgba(255, 249, 237, 0.6);
                          --action-icon-color-on: #fff5e6;
                          --action-icon-color-off: rgba(255, 249, 237, 0.6);
                        }
                        ha-card {
                          background: linear-gradient(90deg, rgba(56, 51, 47, 0.75) 0%, rgba(238, 207, 162, 0.88) 45%, rgba(254, 235, 205, 0.94) 55%, rgba(56, 51, 47, 0.75) 100%);
                          color: #fff5e6;
                          border-radius: 22px;
                          border: 1px solid rgba(255, 240, 220, 0.24);
                          box-shadow: inset 0 0 0 1px rgba(255, 240, 220, 0.08), 0 8px 20px rgba(0, 0, 0, 0.35);
                          position: relative;
                          overflow: hidden;
                        }
                        ha-card::before {
                          content: "";
                          position: absolute;
                          inset: 0;
                          border-radius: 22px;
                          background: linear-gradient(140deg, rgba(255, 250, 236, 0.15), rgba(86, 75, 63, 0.06));
                          mix-blend-mode: screen;
                          pointer-events: none;
                        }
                        ha-card ha-icon {
                          color: #fff5e6;
                        }
                        ha-card .name,
                        ha-card .state,
                        ha-card .label,
                        ha-card .value {
                          color: #fff5e6 !important;
                        }
                  - type: custom:slider-button-card
                    entity: light.anbang_syaweosil_deung
                    name: 안방 샤워실 등
                    slider:
                      direction: left-right
                      background: gradient
                      use_state_color: false
                      use_percentage_bg_opacity: true
                      show_track: true
                    show_name: true
                    show_state: true
                    compact: false
                    icon:
                      icon: mdi:shower-head
                      show: true
                      use_state_color: false
                    action_button:
                      show: false
                    card_mod:
                      style: |
                        :host {
                          --slider-color: rgba(255, 232, 198, 0.95);
                          --slider-bg: linear-gradient(90deg, rgba(86, 75, 63, 0.92) 0%, rgba(255, 226, 187, 0.95) 48%, rgba(255, 240, 210, 0.97) 52%, rgba(86, 75, 63, 0.92) 100%);
                          --slider-bg-filter: brightness(105%);
                          --icon-color: #fff5e6;
                          --state-color-on: #fff9ed;
                          --state-color-off: rgba(255, 249, 237, 0.7);
                          --label-color-on: #fff5e6;
                          --label-color-off: rgba(255, 249, 237, 0.6);
                          --action-icon-color-on: #fff5e6;
                          --action-icon-color-off: rgba(255, 249, 237, 0.6);
                        }
                        ha-card {
                          background: linear-gradient(90deg, rgba(56, 51, 47, 0.75) 0%, rgba(238, 207, 162, 0.88) 45%, rgba(254, 235, 205, 0.94) 55%, rgba(56, 51, 47, 0.75) 100%);
                          color: #fff5e6;
                          border-radius: 22px;
                          border: 1px solid rgba(255, 240, 220, 0.24);
                          box-shadow: inset 0 0 0 1px rgba(255, 240, 220, 0.08), 0 8px 20px rgba(0, 0, 0, 0.35);
                          position: relative;
                          overflow: hidden;
                        }
                        ha-card::before {
                          content: "";
                          position: absolute;
                          inset: 0;
                          border-radius: 22px;
                          background: linear-gradient(140deg, rgba(255, 250, 236, 0.15), rgba(86, 75, 63, 0.06));
                          mix-blend-mode: screen;
                          pointer-events: none;
                        }
                        ha-card ha-icon {
                          color: #fff5e6;
                        }
                        ha-card .name,
                        ha-card .state,
                        ha-card .label,
                        ha-card .value {
                          color: #fff5e6 !important;
                        }
                  - type: custom:slider-button-card
                    entity: light.smart_bulb
                    name: 우현이방 책상 조명
                    slider:
                      direction: left-right
                      background: gradient
                      use_state_color: false
                      use_percentage_bg_opacity: true
                      show_track: true
                    show_name: true
                    show_state: true
                    compact: false
                    icon:
                      icon: mdi:desk-lamp
                      show: true
                      use_state_color: false
                    action_button:
                      show: false
                    card_mod:
                      style: |
                        :host {
                          --slider-color: rgba(255, 232, 198, 0.95);
                          --slider-bg: linear-gradient(90deg, rgba(86, 75, 63, 0.92) 0%, rgba(255, 226, 187, 0.95) 48%, rgba(255, 240, 210, 0.97) 52%, rgba(86, 75, 63, 0.92) 100%);
                          --slider-bg-filter: brightness(105%);
                          --icon-color: #fff5e6;
                          --state-color-on: #fff9ed;
                          --state-color-off: rgba(255, 249, 237, 0.7);
                          --label-color-on: #fff5e6;
                          --label-color-off: rgba(255, 249, 237, 0.6);
                          --action-icon-color-on: #fff5e6;
                          --action-icon-color-off: rgba(255, 249, 237, 0.6);
                        }
                        ha-card {
                          background: linear-gradient(90deg, rgba(56, 51, 47, 0.75) 0%, rgba(238, 207, 162, 0.88) 45%, rgba(254, 235, 205, 0.94) 55%, rgba(56, 51, 47, 0.75) 100%);
                          color: #fff5e6;
                          border-radius: 22px;
                          border: 1px solid rgba(255, 240, 220, 0.24);
                          box-shadow: inset 0 0 0 1px rgba(255, 240, 220, 0.08), 0 8px 20px rgba(0, 0, 0, 0.35);
                          position: relative;
                          overflow: hidden;
                        }
                        ha-card::before {
                          content: "";
                          position: absolute;
                          inset: 0;
                          border-radius: 22px;
                          background: linear-gradient(140deg, rgba(255, 250, 236, 0.15), rgba(86, 75, 63, 0.06));
                          mix-blend-mode: screen;
                          pointer-events: none;
                        }
                        ha-card ha-icon {
                          color: #fff5e6;
                        }
                        ha-card .name,
                        ha-card .state,
                        ha-card .label,
                        ha-card .value {
                          color: #fff5e6 !important;
                        }
                  - type: custom:slider-button-card
                    entity: light.smart_bulb_3
                    name: 안방 조명
                    slider:
                      direction: left-right
                      background: gradient
                      use_state_color: false
                      use_percentage_bg_opacity: true
                      show_track: true
                    show_name: true
                    show_state: true
                    compact: false
                    icon:
                      icon: mdi:bed-king
                      show: true
                      use_state_color: false
                    action_button:
                      show: false
                    card_mod:
                      style: |
                        :host {
                          --slider-color: rgba(255, 232, 198, 0.95);
                          --slider-bg: linear-gradient(90deg, rgba(86, 75, 63, 0.92) 0%, rgba(255, 226, 187, 0.95) 48%, rgba(255, 240, 210, 0.97) 52%, rgba(86, 75, 63, 0.92) 100%);
                          --slider-bg-filter: brightness(105%);
                          --icon-color: #fff5e6;
                          --state-color-on: #fff9ed;
                          --state-color-off: rgba(255, 249, 237, 0.7);
                          --label-color-on: #fff5e6;
                          --label-color-off: rgba(255, 249, 237, 0.6);
                          --action-icon-color-on: #fff5e6;
                          --action-icon-color-off: rgba(255, 249, 237, 0.6);
                        }
                        ha-card {
                          background: linear-gradient(90deg, rgba(56, 51, 47, 0.75) 0%, rgba(238, 207, 162, 0.88) 45%, rgba(254, 235, 205, 0.94) 55%, rgba(56, 51, 47, 0.75) 100%);
                          color: #fff5e6;
                          border-radius: 22px;
                          border: 1px solid rgba(255, 240, 220, 0.24);
                          box-shadow: inset 0 0 0 1px rgba(255, 240, 220, 0.08), 0 8px 20px rgba(0, 0, 0, 0.35);
                          position: relative;
                          overflow: hidden;
                        }
                        ha-card::before {
                          content: "";
                          position: absolute;
                          inset: 0;
                          border-radius: 22px;
                          background: linear-gradient(140deg, rgba(255, 250, 236, 0.15), rgba(86, 75, 63, 0.06));
                          mix-blend-mode: screen;
                          pointer-events: none;
                        }
                        ha-card ha-icon {
                          color: #fff5e6;
                        }
                        ha-card .name,
                        ha-card .state,
                        ha-card .label,
                        ha-card .value {
                          color: #fff5e6 !important;
                        }
                  - type: custom:slider-button-card
                    entity: light.sihas_switch_1
                    name: 가스레인지 등
                    slider:
                      direction: left-right
                      background: gradient
                      use_state_color: false
                      use_percentage_bg_opacity: true
                      show_track: true
                    show_name: true
                    show_state: true
                    compact: false
                    icon:
                      icon: mdi:stove
                      show: true
                      use_state_color: false
                    action_button:
                      show: false
                    card_mod:
                      style: |
                        :host {
                          --slider-color: rgba(255, 232, 198, 0.95);
                          --slider-bg: linear-gradient(90deg, rgba(86, 75, 63, 0.92) 0%, rgba(255, 226, 187, 0.95) 48%, rgba(255, 240, 210, 0.97) 52%, rgba(86, 75, 63, 0.92) 100%);
                          --slider-bg-filter: brightness(105%);
                          --icon-color: #fff5e6;
                          --state-color-on: #fff9ed;
                          --state-color-off: rgba(255, 249, 237, 0.7);
                          --label-color-on: #fff5e6;
                          --label-color-off: rgba(255, 249, 237, 0.6);
                          --action-icon-color-on: #fff5e6;
                          --action-icon-color-off: rgba(255, 249, 237, 0.6);
                        }
                        ha-card {
                          background: linear-gradient(90deg, rgba(56, 51, 47, 0.75) 0%, rgba(238, 207, 162, 0.88) 45%, rgba(254, 235, 205, 0.94) 55%, rgba(56, 51, 47, 0.75) 100%);
                          color: #fff5e6;
                          border-radius: 22px;
                          border: 1px solid rgba(255, 240, 220, 0.24);
                          box-shadow: inset 0 0 0 1px rgba(255, 240, 220, 0.08), 0 8px 20px rgba(0, 0, 0, 0.35);
                          position: relative;
                          overflow: hidden;
                        }
                        ha-card::before {
                          content: "";
                          position: absolute;
                          inset: 0;
                          border-radius: 22px;
                          background: linear-gradient(140deg, rgba(255, 250, 236, 0.15), rgba(86, 75, 63, 0.06));
                          mix-blend-mode: screen;
                          pointer-events: none;
                        }
                        ha-card ha-icon {
                          color: #fff5e6;
                        }
                        ha-card .name,
                        ha-card .state,
                        ha-card .label,
                        ha-card .value {
                          color: #fff5e6 !important;
                        }
                  - type: custom:slider-button-card
                    entity: light.sihas_switch_2
                    name: 싱크대 등
                    slider:
                      direction: left-right
                      background: gradient
                      use_state_color: false
                      use_percentage_bg_opacity: true
                      show_track: true
                    show_name: true
                    show_state: true
                    compact: false
                    icon:
                      icon: mdi:water
                      show: true
                      use_state_color: false
                    action_button:
                      show: false
                    card_mod:
                      style: |
                        :host {
                          --slider-color: rgba(255, 232, 198, 0.95);
                          --slider-bg: linear-gradient(90deg, rgba(86, 75, 63, 0.92) 0%, rgba(255, 226, 187, 0.95) 48%, rgba(255, 240, 210, 0.97) 52%, rgba(86, 75, 63, 0.92) 100%);
                          --slider-bg-filter: brightness(105%);
                          --icon-color: #fff5e6;
                          --state-color-on: #fff9ed;
                          --state-color-off: rgba(255, 249, 237, 0.7);
                          --label-color-on: #fff5e6;
                          --label-color-off: rgba(255, 249, 237, 0.6);
                          --action-icon-color-on: #fff5e6;
                          --action-icon-color-off: rgba(255, 249, 237, 0.6);
                        }
                        ha-card {
                          background: linear-gradient(90deg, rgba(56, 51, 47, 0.75) 0%, rgba(238, 207, 162, 0.88) 45%, rgba(254, 235, 205, 0.94) 55%, rgba(56, 51, 47, 0.75) 100%);
                          color: #fff5e6;
                          border-radius: 22px;
                          border: 1px solid rgba(255, 240, 220, 0.24);
                          box-shadow: inset 0 0 0 1px rgba(255, 240, 220, 0.08), 0 8px 20px rgba(0, 0, 0, 0.35);
                          position: relative;
                          overflow: hidden;
                        }
                        ha-card::before {
                          content: "";
                          position: absolute;
                          inset: 0;
                          border-radius: 22px;
                          background: linear-gradient(140deg, rgba(255, 250, 236, 0.15), rgba(86, 75, 63, 0.06));
                          mix-blend-mode: screen;
                          pointer-events: none;
                        }
                        ha-card ha-icon {
                          color: #fff5e6;
                        }
                        ha-card .name,
                        ha-card .state,
                        ha-card .label,
                        ha-card .value {
                          color: #fff5e6 !important;
                        }
                  - type: custom:slider-button-card
                    entity: light.sihas_switch_3
                    name: 식탁 등
                    slider:
                      direction: left-right
                      background: gradient
                      use_state_color: false
                      use_percentage_bg_opacity: true
                      show_track: true
                    show_name: true
                    show_state: true
                    compact: false
                    icon:
                      icon: mdi:silverware-fork-knife
                      show: true
                      use_state_color: false
                    action_button:
                      show: false
                    card_mod:
                      style: |
                        :host {
                          --slider-color: rgba(255, 232, 198, 0.95);
                          --slider-bg: linear-gradient(90deg, rgba(86, 75, 63, 0.92) 0%, rgba(255, 226, 187, 0.95) 48%, rgba(255, 240, 210, 0.97) 52%, rgba(86, 75, 63, 0.92) 100%);
                          --slider-bg-filter: brightness(105%);
                          --icon-color: #fff5e6;
                          --state-color-on: #fff9ed;
                          --state-color-off: rgba(255, 249, 237, 0.7);
                          --label-color-on: #fff5e6;
                          --label-color-off: rgba(255, 249, 237, 0.6);
                          --action-icon-color-on: #fff5e6;
                          --action-icon-color-off: rgba(255, 249, 237, 0.6);
                        }
                        ha-card {
                          background: linear-gradient(90deg, rgba(56, 51, 47, 0.75) 0%, rgba(238, 207, 162, 0.88) 45%, rgba(254, 235, 205, 0.94) 55%, rgba(56, 51, 47, 0.75) 100%);
                          color: #fff5e6;
                          border-radius: 22px;
                          border: 1px solid rgba(255, 240, 220, 0.24);
                          box-shadow: inset 0 0 0 1px rgba(255, 240, 220, 0.08), 0 8px 20px rgba(0, 0, 0, 0.35);
                          position: relative;
                          overflow: hidden;
                        }
                        ha-card::before {
                          content: "";
                          position: absolute;
                          inset: 0;
                          border-radius: 22px;
                          background: linear-gradient(140deg, rgba(255, 250, 236, 0.15), rgba(86, 75, 63, 0.06));
                          mix-blend-mode: screen;
                          pointer-events: none;
                        }
                        ha-card ha-icon {
                          color: #fff5e6;
                        }
                        ha-card .name,
                        ha-card .state,
                        ha-card .label,
                        ha-card .value {
                          color: #fff5e6 !important;
                        }
                  - type: custom:slider-button-card
                    entity: light.sihas_switch_4
                    name: 아현이방 등
                    slider:
                      direction: left-right
                      background: gradient
                      use_state_color: false
                      use_percentage_bg_opacity: true
                      show_track: true
                    show_name: true
                    show_state: true
                    compact: false
                    icon:
                      icon: mdi:bed
                      show: true
                      use_state_color: false
                    action_button:
                      show: false
                    card_mod:
                      style: |
                        :host {
                          --slider-color: rgba(255, 232, 198, 0.95);
                          --slider-bg: linear-gradient(90deg, rgba(86, 75, 63, 0.92) 0%, rgba(255, 226, 187, 0.95) 48%, rgba(255, 240, 210, 0.97) 52%, rgba(86, 75, 63, 0.92) 100%);
                          --slider-bg-filter: brightness(105%);
                          --icon-color: #fff5e6;
                          --state-color-on: #fff9ed;
                          --state-color-off: rgba(255, 249, 237, 0.7);
                          --label-color-on: #fff5e6;
                          --label-color-off: rgba(255, 249, 237, 0.6);
                          --action-icon-color-on: #fff5e6;
                          --action-icon-color-off: rgba(255, 249, 237, 0.6);
                        }
                        ha-card {
                          background: linear-gradient(90deg, rgba(56, 51, 47, 0.75) 0%, rgba(238, 207, 162, 0.88) 45%, rgba(254, 235, 205, 0.94) 55%, rgba(56, 51, 47, 0.75) 100%);
                          color: #fff5e6;
                          border-radius: 22px;
                          border: 1px solid rgba(255, 240, 220, 0.24);
                          box-shadow: inset 0 0 0 1px rgba(255, 240, 220, 0.08), 0 8px 20px rgba(0, 0, 0, 0.35);
                          position: relative;
                          overflow: hidden;
                        }
                        ha-card::before {
                          content: "";
                          position: absolute;
                          inset: 0;
                          border-radius: 22px;
                          background: linear-gradient(140deg, rgba(255, 250, 236, 0.15), rgba(86, 75, 63, 0.06));
                          mix-blend-mode: screen;
                          pointer-events: none;
                        }
                        ha-card ha-icon {
                          color: #fff5e6;
                        }
                        ha-card .name,
                        ha-card .state,
                        ha-card .label,
                        ha-card .value {
                          color: #fff5e6 !important;
                        }
                  - type: custom:slider-button-card
                    entity: light.sihas_switch_5
                    name: 우현이방 등
                    slider:
                      direction: left-right
                      background: gradient
                      use_state_color: false
                      use_percentage_bg_opacity: true
                      show_track: true
                    show_name: true
                    show_state: true
                    compact: false
                    icon:
                      icon: mdi:light-switch
                      show: true
                      use_state_color: false
                    action_button:
                      show: false
                    card_mod:
                      style: |
                        :host {
                          --slider-color: rgba(255, 232, 198, 0.95);
                          --slider-bg: linear-gradient(90deg, rgba(86, 75, 63, 0.92) 0%, rgba(255, 226, 187, 0.95) 48%, rgba(255, 240, 210, 0.97) 52%, rgba(86, 75, 63, 0.92) 100%);
                          --slider-bg-filter: brightness(105%);
                          --icon-color: #fff5e6;
                          --state-color-on: #fff9ed;
                          --state-color-off: rgba(255, 249, 237, 0.7);
                          --label-color-on: #fff5e6;
                          --label-color-off: rgba(255, 249, 237, 0.6);
                          --action-icon-color-on: #fff5e6;
                          --action-icon-color-off: rgba(255, 249, 237, 0.6);
                        }
                        ha-card {
                          background: linear-gradient(90deg, rgba(56, 51, 47, 0.75) 0%, rgba(238, 207, 162, 0.88) 45%, rgba(254, 235, 205, 0.94) 55%, rgba(56, 51, 47, 0.75) 100%);
                          color: #fff5e6;
                          border-radius: 22px;
                          border: 1px solid rgba(255, 240, 220, 0.24);
                          box-shadow: inset 0 0 0 1px rgba(255, 240, 220, 0.08), 0 8px 20px rgba(0, 0, 0, 0.35);
                          position: relative;
                          overflow: hidden;
                        }
                        ha-card::before {
                          content: "";
                          position: absolute;
                          inset: 0;
                          border-radius: 22px;
                          background: linear-gradient(140deg, rgba(255, 250, 236, 0.15), rgba(86, 75, 63, 0.06));
                          mix-blend-mode: screen;
                          pointer-events: none;
                        }
                        ha-card ha-icon {
                          color: #fff5e6;
                        }
                        ha-card .name,
                        ha-card .state,
                        ha-card .label,
                        ha-card .value {
                          color: #fff5e6 !important;
                        }
    badges:
      - type: custom:mod-card
        card:
          type: custom:hui-entity-badge
          entity: sensor.overview_lights
          icon: mdi:lightbulb
          show_name: true
          name: 조명
          color: yellow
          double_tap_action:
            action: none
          hold_action:
            action: none
          tap_action:
            action: navigate
            navigation_path: /dashboard-unknown/home
        card_mod:
          style:
            hui-entity-badge: >
              {% set lights_on = states('sensor.count_lights_on') |
              int(default=0) %}

              ha-card {
                border: 2px solid {{ 'var(--primary-color)' if lights_on > 0 else 'var(--primary-background-color)' }} !important;
                border-radius: 24px;
                --icon-primary-color: {{ 'var(--icon-primary-color)' if lights_on > 0 else 'grey' }};
                --ha-card-background: var(--primary-color);
                --primary-text-color: var(--primary-background-color);
                --secondary-text-color: var(--primary-background-color);                
                {% if lights_on > 0 %}
                  animation: blink 2s ease infinite;
                {% endif %}
              }


              {% if lights_on > 0 %}
                @keyframes blink {
                  50% {
                    opacity: 0.2;
                  }
                }
              {% endif %}
    subview: true
    icon: mdi:ceiling-light
    cards: []
  - type: sections
    max_columns: 4
    path: music
    sections:
      - type: grid
        cards:
          - type: heading
            heading: 새 섹션
          - type: custom:auto-entities
            show_empty: false
            card:
              type: vertical-stack
              card_param: cards
            sort:
              method: entity_id
            filter:
              template: |-
                {% for ENTITY in expand('media_player.uhyeonibang') %}
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "condition": "state",
                        "entity": "{{ ENTITY.entity_id }}",
                        "state": "playing"
                      }
                    ],
                    "card": {
                      "type": "custom:mini-media-player",
                      "entity": "{{ ENTITY.entity_id }}",
                      "name": "{{ state_attr(ENTITY.entity_id, 'friendly_name') | replace(' 스피커', '') }}",
                      "artwork": "full-cover",
                      "speaker_group": {
                        "platform": "media_player",
                        "show_group_count": "true",
                        "entities": [
                          {% for mass_entity in integration_entities('music_assistant') %}
                            {
                              "entity_id": "{{ mass_entity }}",
                              "name": "{{ state_attr(mass_entity, 'friendly_name') }}"
                            }{% if not loop.last %},{% endif %}
                          {% endfor %}
                        ]
                      }
                    }
                  }{% if not loop.last %},{% endif %}
                {% endfor %}
          - type: custom:auto-entities
            show_empty: false
            card:
              type: vertical-stack
            card_param: cards
            sort:
              method: entity_id
            filter:
              template: |-
                {% for ENTITY in expand('group.all_media_players')
                  | selectattr('state', 'eq', 'playing') %}
                  {
                    "type": "conditional",
                    "conditions": [
                      {
                        "condition": "state",
                        "entity": "{{ ENTITY.entity_id }}",
                        "state": "playing"
                      }
                    ],
                    "card": {
                      "type": "custom:mini-media-player",
                      "entity": "{{ ENTITY.entity_id }}",
                      "name": "{{ state_attr(ENTITY.entity_id, 'friendly_name') }}",
                      "artwork": "full-cover"
                    }
                  },
                {% endfor %}
      - type: grid
        cards:
          - type: heading
            heading: 새 섹션
          - type: vertical-stack
            cards:
              - type: heading
                heading: 재생 중인 미디어
                heading_style: title
                card_mod:
                  style:
                    .: |
                      ha-card {
                        border: 2px solid var(--primary-color); 
                        border-radius: 24px;      
                        background-color: var(--primary-background-color) !important;
                        border-style: solid;
                      }
                      .title > p {
                        color: var(--primary-text-color) !important;
                        font-size: 20px !important;
                        font-weight: bold;
                        padding-left: 12px;
                      }
              - type: custom:auto-entities
                card:
                  type: grid
                  square: false
                  columns: 1
                card_param: cards
                filter:
                  include:
                    - group: group.all_media_players
                      options:
                        type: custom:bubble-card
                        card_type: button
                        button_type: slider
                        scrolling_effect: true
                        slider_live_update: false
                        show_name: true
                        card_layout: large
                        force_icon: false
                sort:
                  method: entity_id
            visibility:
              - condition: numeric_state
                entity: sensor.count_media_playing
                above: 0
    subview: true
    cards: []
    icon: mdi:music-note
  - type: sections
    max_columns: 4
    title: Home Assistant
    path: home-assistant
    subview: true
    sections:
      - type: grid
        cards:
          - type: heading
            heading: 새 섹션
          - type: entities
            show_header_toggle: false
            title: Home Assistant
            entities:
              - type: attribute
                entity: update.home_assistant_core_update
                attribute: installed_version
                icon: mdi:home-assistant
                name: Core
              - type: attribute
                entity: update.home_assistant_supervisor_update
                attribute: installed_version
                icon: mdi:home-assistant
                name: Supervisor
              - type: attribute
                entity: update.home_assistant_operating_system_update
                attribute: installed_version
                icon: mdi:home-assistant
                name: OS
              - type: divider
              - entity: sensor.system_monitor_processor_use
                name: CPU
                card_mod:
                  style: |
                    hui-generic-entity-row {
                      background:
                        {% set perc = states(config.entity)|float(0) %}
                        {% if perc >= 59 %} {% set bar = '255,0,0' %}
                        {% elif perc >= 44 %} {% set bar = '128,0,0' %}
                        {% elif perc >= 24 %} {% set bar = '255,165,0' %}
                        {% elif perc >= 9 %} {% set bar = '0,100,0' %}
                        {% else %} {% set bar = '0,128,0' %}
                        {% endif %}
                        linear-gradient(to right, rgb({{bar}},0.9) 0%, rgb({{bar}},0.6) {{perc}}%,
                                                  rgba({{bar}},0.3) {{perc}}%, rgba({{bar}},0.1) 100%);
                    }
              - entity: sensor.pi5_memory_usage
                name: Memory
                card_mod:
                  style: |
                    hui-generic-entity-row {
                      background:
                        {% set perc = states(config.entity)|float(0) %}
                        {% if perc >= 85 %} {% set bar = '255,0,0' %}
                        {% elif perc >= 75 %} {% set bar = '128,0,0' %}
                        {% elif perc >= 60 %} {% set bar = '255,165,0' %}
                        {% elif perc >= 50 %} {% set bar = '165,42,42' %}
                        {% else %} {% set bar = '0,128,0' %}
                        {% endif %}
                        linear-gradient(to right, rgba({{bar}},0.9) 0%, rgb({{bar}},0.9) {{perc}}%,
                                                  rgba({{bar}},0.6) {{perc}}%, rgba({{bar}},0.2) 100%);
                    }
              - entity: sensor.system_monitor_disk_usage
                name: Disk
                card_mod:
                  style: |
                    hui-generic-entity-row {
                      background:
                        {% set perc = states(config.entity)|float(0) %}
                        {% if perc >= 59 %} {% set bar = '255,0,0' %}
                        {% elif perc >= 44 %} {% set bar = '128,0,0' %}
                        {% elif perc >= 24 %} {% set bar = '255,165,0' %}
                        {% elif perc >= 9 %} {% set bar = '0,100,0' %}
                        {% else %} {% set bar = '0,128,0' %}
                        {% endif %}
                        linear-gradient(to right, rgb({{bar}},0.9) 0%, rgb({{bar}},0.6) {{perc}}%,
                                                  rgba({{bar}},0.3) {{perc}}%, rgba({{bar}},0.1) 100%);
                    }
              - type: divider
              - entity: sensor.ha_log_size
                name: Log
                icon: mdi:file-document
              - type: divider
              - entity: sensor.uptime
                name: 마지막 재부팅
              - type: custom:hui-element
                card_type: horizontal-stack
                cards:
                  - type: custom:button-card
                    name: Restart
                    tap_action:
                      action: perform-action
                      confirmation:
                        text: 정말로 재시작하시겠습니까?
                      perform_action: homeassistant.restart
                  - type: custom:button-card
                    name: Reload All
                    tap_action:
                      action: perform-action
                      confirmation:
                        text: 정말로 리로드 하시겠습니까?
                      perform_action: homeassistant.reload_all
      - type: grid
        cards:
          - type: heading
            heading: 새 섹션
          - type: entities
            title: 📊 InfluxDB 백업 상태
            entities:
              - entity: sensor.influxdb_latest_backup
                name: 최근 백업
                icon: mdi:database-clock
              - entity: sensor.influxdb_backup_count
                name: 백업 개수
                icon: mdi:counter
              - entity: sensor.influxdb_backup_size
                name: 총 용량
                icon: mdi:harddisk
              - entity: sensor.influxdb_backup_status
                name: 백업 상태
                icon: mdi:check-circle
            state_color: true
          - type: vertical-stack
            cards:
              - type: custom:layout-card
                layout_type: custom:grid-layout
                cards:
                  - type: custom:button-card
                    entity: sensor.count_lights_on
                    name: 조명
                    icon: mdi:lightbulb-group
                    show_state: false
                    show_label: true
                    tap_action:
                      action: navigate
                      navigation_path: '#lights'
                    label: |
                      [[[
                        const raw = states['sensor.count_lights_on']?.state;
                        if (!raw || raw === 'unknown' || raw === 'unavailable') {
                          return '데이터 없음';
                        }
                        const value = Number(raw);
                        if (!Number.isFinite(value) || value <= 0) {
                          return '모두 꺼짐';
                        }
                        return `${value}개 켜짐`;
                      ]]]
                    styles:
                      grid:
                        - grid-template-areas: '"i name" "i l"'
                        - grid-template-columns: min-content 1fr
                        - align-items: center
                        - column-gap: 12px
                      card:
                        - background: >-
                            linear-gradient(135deg, rgba(68, 68, 76, 0.9),
                            rgba(28, 28, 32, 0.9))
                        - border-radius: 22px
                        - padding: 14px 16px
                        - box-shadow: none
                      icon:
                        - width: 28px
                        - color: null
                      name:
                        - grid-area: name
                        - justify-self: start
                        - align-self: end
                        - font-size: 16px
                        - font-weight: 600
                        - color: rgba(255, 245, 230, 0.9)
                      label:
                        - grid-area: l
                        - justify-self: start
                        - align-self: start
                        - font-size: 13px
                        - color: rgba(255, 245, 230, 0.7)
                  - type: custom:button-card
                    entity: sensor.sihas_energy_monitor_power
                    name: 소비 전력
                    icon: mdi:flash
                    show_state: false
                    show_label: true
                    tap_action:
                      action: navigate
                      navigation_path: '#strom'
                    label: |
                      [[[
                        const sensor = states['sensor.sihas_energy_monitor_power'];
                        const raw = sensor?.state;
                        if (!raw || raw === 'unknown' || raw === 'unavailable') {
                          return '데이터 없음';
                        }
                        const value = Number(raw);
                        if (!Number.isFinite(value)) {
                          return '데이터 없음';
                        }
                        const unit = sensor?.attributes?.unit_of_measurement || 'W';
                        return `${value.toFixed(0)} ${unit}`;
                      ]]]
                    styles:
                      grid:
                        - grid-template-areas: '"i name" "i l"'
                        - grid-template-columns: min-content 1fr
                        - align-items: center
                        - column-gap: 12px
                      card:
                        - background: >-
                            linear-gradient(135deg, rgba(68, 68, 76, 0.9),
                            rgba(28, 28, 32, 0.9))
                        - border-radius: 22px
                        - padding: 14px 16px
                        - box-shadow: none
                      icon:
                        - width: 28px
                        - color: null
                      name:
                        - grid-area: name
                        - justify-self: start
                        - align-self: end
                        - font-size: 16px
                        - font-weight: 600
                        - color: rgba(255, 245, 230, 0.9)
                      label:
                        - grid-area: l
                        - justify-self: start
                        - align-self: start
                        - font-size: 13px
                        - color: rgba(255, 245, 230, 0.7)
                  - type: custom:button-card
                    entity: sensor.average_indoor_temperature
                    name: 실내 온도
                    icon: mdi:home-thermometer
                    show_state: false
                    show_label: true
                    tap_action:
                      action: more-info
                    label: |
                      [[[
                        const temp = states['sensor.average_indoor_temperature'];
                        const hum = states['sensor.average_indoor_humidity'];
                        const tempRaw = temp?.state;
                        const humRaw = hum?.state;
                        const tempUnit = temp?.attributes?.unit_of_measurement || '°C';
                        const tempValue = Number(tempRaw);
                        const humValue = Number(humRaw);
                        const tempText = Number.isFinite(tempValue)
                          ? `${(Math.round(tempValue * 10) / 10).toLocaleString()}${tempUnit}`
                          : '온도 정보 없음';
                        const humText = Number.isFinite(humValue)
                          ? `습도 ${humValue.toFixed(0)}%`
                          : '습도 정보 없음';
                        return `${tempText} · ${humText}`;
                      ]]]
                    styles:
                      grid:
                        - grid-template-areas: '"i name" "i l"'
                        - grid-template-columns: min-content 1fr
                        - align-items: center
                        - column-gap: 12px
                      card:
                        - background: >-
                            linear-gradient(135deg, rgba(68, 68, 76, 0.9),
                            rgba(28, 28, 32, 0.9))
                        - border-radius: 22px
                        - padding: 14px 16px
                        - box-shadow: none
                      icon:
                        - width: 28px
                        - color: null
                      name:
                        - grid-area: name
                        - justify-self: start
                        - align-self: end
                        - font-size: 16px
                        - font-weight: 600
                        - color: rgba(255, 245, 230, 0.9)
                      label:
                        - grid-area: l
                        - justify-self: start
                        - align-self: start
                        - font-size: 13px
                        - color: rgba(255, 245, 230, 0.7)
                  - type: custom:button-card
                    entity: group.security_doors
                    name: 문/창 감시
                    icon: mdi:door-closed-lock
                    show_state: false
                    show_label: true
                    tap_action:
                      action: more-info
                    label: |
                      [[[
                        const state = states['group.security_doors']?.state;
                        if (!state || state === 'unknown' || state === 'unavailable') {
                          return '상태 확인 불가';
                        }
                        return state === 'on' ? '열림 감지됨' : '모두 닫힘';
                      ]]]
                    styles:
                      grid:
                        - grid-template-areas: '"i name" "i l"'
                        - grid-template-columns: min-content 1fr
                        - align-items: center
                        - column-gap: 12px
                      card:
                        - background: >-
                            linear-gradient(135deg, rgba(68, 68, 76, 0.9),
                            rgba(28, 28, 32, 0.9))
                        - border-radius: 22px
                        - padding: 14px 16px
                        - box-shadow: none
                      icon:
                        - width: 28px
                        - color: null
                      name:
                        - grid-area: name
                        - justify-self: start
                        - align-self: end
                        - font-size: 16px
                        - font-weight: 600
                        - color: rgba(255, 245, 230, 0.9)
                      label:
                        - grid-area: l
                        - justify-self: start
                        - align-self: start
                        - font-size: 13px
                        - color: rgba(255, 245, 230, 0.7)
                layout:
                  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr))
                  grid-auto-rows: minmax(96px, auto)
                  column-gap: 12px
                  row-gap: 12px
            grid_options:
              columns: 9
              rows: auto
  - type: sections
    max_columns: 4
    title: weather
    path: weather
    subview: true
    sections:
      - type: grid
        cards:
          - type: heading
            heading: 새 섹션
          - type: custom:button-card
            entity: sensor.gonggijil_ceugjeonggi_1528_carbon_dioxide
            name: 공기질 측정기(1528) CO₂
            icon: mdi:molecule-co2
            variables:
              symbol: ' ppm'
              color_base: '#4CAF50'
              state_data: |
                [[[
                  const state = entity.state;
                  const levels = ["나쁨", "보통", "좋음"];
                  const colors = ["#FF6B6B", "#FFA500", "#4CAF50"];
                  const thresholds = [1400, 1000, 0];      
                  let data = {
                    value: state || 'N/A',
                    level: 'Unknown',
                    color: 'var(--disabled-text-color)',
                    percentage: 0
                  };

                  if (state === undefined || state === null || state === 'unavailable' || state === 'unknown' || isNaN(state)) {
                    return data;
                  }

                  const value = parseFloat(state);
                  data.value = value;

                  const index = thresholds.findIndex(threshold => value >= threshold);

                  if (index !== -1) {
                    data.level = levels[index];
                    data.color = colors[index];
                  } else {
                     data.level = levels[levels.length - 1];
                     data.color = colors[colors.length - 1];
                  }

                  const min_ppm = 400;
                  const max_ppm = 2000;
                  let percentage = ((value - min_ppm) / (max_ppm - min_ppm)) * 100;
                  if (isNaN(percentage)) {
                    percentage = 0;
                  }
                  data.percentage = Math.max(0, Math.min(100, percentage));

                  return data;
                ]]]
            label: |
              [[[
                const data = variables.state_data;
                const displayValue = typeof data.value === 'number' ? data.value : variables.entity_state;
                if (data.level === 'Unknown') return 'N/A';
                return displayValue + '<span style="font-size:14px;line-height:1px">' + variables.symbol + '</span>';
              ]]]
            show_icon: true
            show_label: true
            styles:
              card:
                - padding: 0
                - height: 160px
              grid:
                - grid-template-areas: '"i i" "l state" "n n" "bar bar"'
              label:
                - justify-self: start
                - font-size: 2em
                - line-height: 1.5em
                - font-weight: 300
                - color: var(--gray1000)
                - padding-left: 20px
              name:
                - justify-self: start
                - font-size: 14px
                - color: var(--gray1000)
                - opacity: '0.7'
                - padding-left: 20px
                - line-height: 17px
              img_cell:
                - justify-self: end
                - align-self: start
                - background: '#4CAF50'
                - padding: 14px
                - border-radius: 50%
                - margin: 4px 4px 0 0
                - width: 30px
                - height: 30px
              icon:
                - width: 30px
                - height: 30px
                - color: var(--gray1000)
              custom_fields:
                state:
                  - justify-self: end
                  - align-self: end
                  - font-size: 14px
                  - color: var(--gray1000)
                  - opacity: '0.7'
                  - padding-right: 20px
                  - padding-bottom: 9px
                bar:
                  - justify-self: start
                  - width: 100%
                  - background-image: |
                      [[[
                        const color = variables.state_data.color || 'transparent';
                        return `repeating-linear-gradient(45deg,transparent,transparent 2px,${color} 3px,transparent 4px)`;
                      ]]]
                  - height: 30px
                  - margin-top: 6px
            custom_fields:
              state: |
                [[[
                  return variables.state_data.level;
                ]]]
              bar: |
                [[[
                  const color = variables.state_data.color || 'transparent';
                  const width = variables.state_data.percentage;
                  return `<div> <div style="background:${color}; height:30px; width:${width}%; "></div></div>`
                ]]]
          - type: custom:button-card
            entity: sensor.eeomoniteo_peulreoseu_carbon_dioxide
            name: 에어모니터 플러스 CO₂
            icon: mdi:molecule-co2
            variables:
              symbol: ' ppm'
              state_data: |
                [[[
                  const state = entity.state;
                  const levels = ["나쁨", "보통", "좋음"];
                  const colors = ["#FF6B6B", "#FFA500", "#4CAF50"];
                  const thresholds = [1400, 1000, 0];      
                  let data = {
                    value: state || 'N/A',
                    level: 'Unknown',
                    color: 'var(--disabled-text-color)',
                    percentage: 0
                  };

                  if (state === undefined || state === null || state === 'unavailable' || state === 'unknown' || isNaN(state)) {
                    return data;
                  }

                  const value = parseFloat(state);
                  data.value = value;

                  const index = thresholds.findIndex(threshold => value >= threshold);

                  if (index !== -1) {
                    data.level = levels[index];
                    data.color = colors[index];
                  } else {
                     data.level = levels[levels.length - 1];
                     data.color = colors[colors.length - 1];
                  }

                  const min_ppm = 400;
                  const max_ppm = 2000;
                  let percentage = ((value - min_ppm) / (max_ppm - min_ppm)) * 100;
                  if (isNaN(percentage)) {
                    percentage = 0;
                  }
                  data.percentage = Math.max(0, Math.min(100, percentage));

                  return data;
                ]]]
            label: |
              [[[
                const data = variables.state_data;
                const displayValue = typeof data.value === 'number' ? data.value : variables.entity_state;
                if (data.level === 'Unknown') return 'N/A';
                return displayValue + '<span style="font-size:14px;line-height:1px">' + variables.symbol + '</span>';
              ]]]
            show_icon: true
            show_label: true
            styles:
              card:
                - padding: 0
                - height: 160px
              grid:
                - grid-template-areas: '"i i" "l state" "n n" "bar bar"'
              label:
                - justify-self: start
                - font-size: 2em
                - line-height: 1.5em
                - font-weight: 300
                - color: var(--gray1000)
                - padding-left: 20px
              name:
                - justify-self: start
                - font-size: 14px
                - color: var(--gray1000)
                - opacity: '0.7'
                - padding-left: 20px
                - line-height: 17px
              img_cell:
                - justify-self: end
                - align-self: start
                - background: '#4CAF50'
                - padding: 14px
                - border-radius: 50%
                - margin: 4px 4px 0 0
                - width: 30px
                - height: 30px
              icon:
                - width: 30px
                - height: 30px
                - color: var(--gray1000)
              custom_fields:
                state:
                  - justify-self: end
                  - align-self: end
                  - font-size: 14px
                  - color: var(--gray1000)
                  - opacity: '0.7'
                  - padding-right: 20px
                  - padding-bottom: 9px
                bar:
                  - justify-self: start
                  - width: 100%
                  - background-image: |
                      [[[
                        const color = variables.state_data.color || 'transparent';
                        return `repeating-linear-gradient(45deg,transparent,transparent 2px,${color} 3px,transparent 4px)`;
                      ]]]
                  - height: 30px
                  - margin-top: 6px
            custom_fields:
              state: |
                [[[
                  return variables.state_data.level;
                ]]]
              bar: |
                [[[
                  const color = variables.state_data.color || 'transparent';
                  const width = variables.state_data.percentage;
                  return `<div> <div style="background:${color}; height:30px; width:${width}%; "></div></div>`
                ]]]
          - type: custom:button-card
            entity: sensor.gonggijil_ceugjeonggi_1528_humidity
            name: 공기질 측정기(1528) 습도
            icon: mdi:water-percent
            variables:
              symbol: '%'
              state_data: |
                [[[
                  const state = entity.state;
                  const levels = ["건조", "쾌적", "습함"];
                  const colors = ["#FFA726", "#9C27B0", "#5E35B1"];
                  const thresholds = [70, 30, 0];
                  let data = {
                    value: state || 'N/A',
                    level: 'Unknown',
                    color: 'var(--disabled-text-color)',
                    percentage: 0
                  };

                  if (state === undefined || state === null || state === 'unavailable' || state === 'unknown' || isNaN(state)) {
                    return data;
                  }

                  const value = parseFloat(state);
                  data.value = value;

                  const index = thresholds.findIndex(threshold => value >= threshold);

                  if (index !== -1) {
                    data.level = levels[index];
                    data.color = colors[index];
                  } else {
                     data.level = levels[levels.length - 1];
                     data.color = colors[colors.length - 1];
                  }

                  const min_value = 0;
                  const max_value = 100;
                  let percentage = ((value - min_value) / (max_value - min_value)) * 100;
                  if (isNaN(percentage)) {
                    percentage = 0;
                  }
                  data.percentage = Math.max(0, Math.min(100, percentage));

                  return data;
                ]]]
            label: |
              [[[
                const data = variables.state_data;
                const displayValue = typeof data.value === 'number' ? data.value.toFixed(1) : variables.entity_state;
                if (data.level === 'Unknown') return 'N/A';
                return displayValue + '<span style="font-size:14px;line-height:1px">' + variables.symbol + '</span>';
              ]]]
            show_icon: true
            show_label: true
            styles:
              card:
                - padding: 0
                - height: 160px
              grid:
                - grid-template-areas: '"i i" "l state" "n n" "bar bar"'
              label:
                - justify-self: start
                - font-size: 2em
                - line-height: 1.5em
                - font-weight: 300
                - color: var(--gray1000)
                - padding-left: 20px
              name:
                - justify-self: start
                - font-size: 14px
                - color: var(--gray1000)
                - opacity: '0.7'
                - padding-left: 20px
                - line-height: 17px
              img_cell:
                - justify-self: end
                - align-self: start
                - background: '#64B5F6'
                - padding: 14px
                - border-radius: 50%
                - margin: 4px 4px 0 0
                - width: 30px
                - height: 30px
              icon:
                - width: 30px
                - height: 30px
                - color: var(--gray1000)
              custom_fields:
                state:
                  - justify-self: end
                  - align-self: end
                  - font-size: 14px
                  - color: var(--gray1000)
                  - opacity: '0.7'
                  - padding-right: 20px
                  - padding-bottom: 9px
                bar:
                  - justify-self: start
                  - width: 100%
                  - background-image: |
                      [[[
                        const color = variables.state_data.color || 'transparent';
                        return `repeating-linear-gradient(45deg,transparent,transparent 2px,${color} 3px,transparent 4px)`;
                      ]]]
                  - height: 30px
                  - margin-top: 6px
            custom_fields:
              state: |
                [[[
                  return variables.state_data.level;
                ]]]
              bar: |
                [[[
                  const color = variables.state_data.color || 'transparent';
                  const width = variables.state_data.percentage;
                  return `<div> <div style="background:${color}; height:30px; width:${width}%; "></div></div>`
                ]]]
          - type: custom:button-card
            entity: sensor.eeomoniteo_peulreoseu_humidity
            name: 에어모니터 플러스 습도
            icon: mdi:water-percent
            variables:
              symbol: '%'
              state_data: |
                [[[
                  const state = entity.state;
                  const levels = ["건조", "쾌적", "습함"];
                  const colors = ["#FFA726", "#9C27B0", "#5E35B1"];
                  const thresholds = [70, 30, 0];
                  let data = {
                    value: state || 'N/A',
                    level: 'Unknown',
                    color: 'var(--disabled-text-color)',
                    percentage: 0
                  };

                  if (state === undefined || state === null || state === 'unavailable' || state === 'unknown' || isNaN(state)) {
                    return data;
                  }

                  const value = parseFloat(state);
                  data.value = value;

                  const index = thresholds.findIndex(threshold => value >= threshold);

                  if (index !== -1) {
                    data.level = levels[index];
                    data.color = colors[index];
                  } else {
                     data.level = levels[levels.length - 1];
                     data.color = colors[colors.length - 1];
                  }

                  const min_value = 0;
                  const max_value = 100;
                  let percentage = ((value - min_value) / (max_value - min_value)) * 100;
                  if (isNaN(percentage)) {
                    percentage = 0;
                  }
                  data.percentage = Math.max(0, Math.min(100, percentage));

                  return data;
                ]]]
            label: |
              [[[
                const data = variables.state_data;
                const displayValue = typeof data.value === 'number' ? data.value.toFixed(1) : variables.entity_state;
                if (data.level === 'Unknown') return 'N/A';
                return displayValue + '<span style="font-size:14px;line-height:1px">' + variables.symbol + '</span>';
              ]]]
            show_icon: true
            show_label: true
            styles:
              card:
                - padding: 0
                - height: 160px
              grid:
                - grid-template-areas: '"i i" "l state" "n n" "bar bar"'
              label:
                - justify-self: start
                - font-size: 2em
                - line-height: 1.5em
                - font-weight: 300
                - color: var(--gray1000)
                - padding-left: 20px
              name:
                - justify-self: start
                - font-size: 14px
                - color: var(--gray1000)
                - opacity: '0.7'
                - padding-left: 20px
                - line-height: 17px
              img_cell:
                - justify-self: end
                - align-self: start
                - background: '#64B5F6'
                - padding: 14px
                - border-radius: 50%
                - margin: 4px 4px 0 0
                - width: 30px
                - height: 30px
              icon:
                - width: 30px
                - height: 30px
                - color: var(--gray1000)
              custom_fields:
                state:
                  - justify-self: end
                  - align-self: end
                  - font-size: 14px
                  - color: var(--gray1000)
                  - opacity: '0.7'
                  - padding-right: 20px
                  - padding-bottom: 9px
                bar:
                  - justify-self: start
                  - width: 100%
                  - background-image: |
                      [[[
                        const color = variables.state_data.color || 'transparent';
                        return `repeating-linear-gradient(45deg,transparent,transparent 2px,${color} 3px,transparent 4px)`;
                      ]]]
                  - height: 30px
                  - margin-top: 6px
            custom_fields:
              state: |
                [[[
                  return variables.state_data.level;
                ]]]
              bar: |
                [[[
                  const color = variables.state_data.color || 'transparent';
                  const width = variables.state_data.percentage;
                  return `<div> <div style="background:${color}; height:30px; width:${width}%; "></div></div>`
                ]]]
          - type: custom:button-card
            entity: sensor.gonggijil_ceugjeonggi_1528_pm2_5
            name: 공기질 측정기(1528) PM2.5
            icon: mdi:air-purifier
            variables:
              symbol: ' μg/m³'
              state_data: |
                [[[
                  const state = entity.state;
                  const levels = ["나쁨", "보통", "좋음"];
                  const colors = ["#FF6B6B", "#FFA500", "#2196F3"];
                  const thresholds = [50, 25, 0];
                  let data = {
                    value: state || 'N/A',
                    level: 'Unknown',
                    color: 'var(--disabled-text-color)',
                    percentage: 0
                  };

                  if (state === undefined || state === null || state === 'unavailable' || state === 'unknown' || isNaN(state)) {
                    return data;
                  }

                  const value = parseFloat(state);
                  data.value = value;

                  const index = thresholds.findIndex(threshold => value >= threshold);

                  if (index !== -1) {
                    data.level = levels[index];
                    data.color = colors[index];
                  } else {
                     data.level = levels[levels.length - 1];
                     data.color = colors[colors.length - 1];
                  }

                  const min_value = 0;
                  const max_value = 100;
                  let percentage = ((value - min_value) / (max_value - min_value)) * 100;
                  if (isNaN(percentage)) {
                    percentage = 0;
                  }
                  data.percentage = Math.max(0, Math.min(100, percentage));

                  return data;
                ]]]
            label: |
              [[[
                const data = variables.state_data;
                const displayValue = typeof data.value === 'number' ? data.value.toFixed(1) : variables.entity_state;
                if (data.level === 'Unknown') return 'N/A';
                return displayValue + '<span style="font-size:14px;line-height:1px">' + variables.symbol + '</span>';
              ]]]
            show_icon: true
            show_label: true
            styles:
              card:
                - padding: 0
                - height: 160px
              grid:
                - grid-template-areas: '"i i" "l state" "n n" "bar bar"'
              label:
                - justify-self: start
                - font-size: 2em
                - line-height: 1.5em
                - font-weight: 300
                - color: var(--gray1000)
                - padding-left: 20px
              name:
                - justify-self: start
                - font-size: 14px
                - color: var(--gray1000)
                - opacity: '0.7'
                - padding-left: 20px
                - line-height: 17px
              img_cell:
                - justify-self: end
                - align-self: start
                - background: '#9E9E9E'
                - padding: 14px
                - border-radius: 50%
                - margin: 4px 4px 0 0
                - width: 30px
                - height: 30px
              icon:
                - width: 30px
                - height: 30px
                - color: var(--gray1000)
              custom_fields:
                state:
                  - justify-self: end
                  - align-self: end
                  - font-size: 14px
                  - color: var(--gray1000)
                  - opacity: '0.7'
                  - padding-right: 20px
                  - padding-bottom: 9px
                bar:
                  - justify-self: start
                  - width: 100%
                  - background-image: |
                      [[[
                        const color = variables.state_data.color || 'transparent';
                        return `repeating-linear-gradient(45deg,transparent,transparent 2px,${color} 3px,transparent 4px)`;
                      ]]]
                  - height: 30px
                  - margin-top: 6px
            custom_fields:
              state: |
                [[[
                  return variables.state_data.level;
                ]]]
              bar: |
                [[[
                  const color = variables.state_data.color || 'transparent';
                  const width = variables.state_data.percentage;
                  return `<div> <div style="background:${color}; height:30px; width:${width}%; "></div></div>`
                ]]]
          - type: custom:button-card
            entity: sensor.eeomoniteo_peulreoseu_pm2_5
            name: 에어모니터 플러스 PM2.5
            icon: mdi:air-purifier
            variables:
              symbol: ' μg/m³'
              state_data: |
                [[[
                  const state = entity.state;
                  const levels = ["나쁨", "보통", "좋음"];
                  const colors = ["#FF6B6B", "#FFA500", "#2196F3"];
                  const thresholds = [50, 25, 0];
                  let data = {
                    value: state || 'N/A',
                    level: 'Unknown',
                    color: 'var(--disabled-text-color)',
                    percentage: 0
                  };

                  if (state === undefined || state === null || state === 'unavailable' || state === 'unknown' || isNaN(state)) {
                    return data;
                  }

                  const value = parseFloat(state);
                  data.value = value;

                  const index = thresholds.findIndex(threshold => value >= threshold);

                  if (index !== -1) {
                    data.level = levels[index];
                    data.color = colors[index];
                  } else {
                     data.level = levels[levels.length - 1];
                     data.color = colors[colors.length - 1];
                  }

                  const min_value = 0;
                  const max_value = 100;
                  let percentage = ((value - min_value) / (max_value - min_value)) * 100;
                  if (isNaN(percentage)) {
                    percentage = 0;
                  }
                  data.percentage = Math.max(0, Math.min(100, percentage));

                  return data;
                ]]]
            label: |
              [[[
                const data = variables.state_data;
                const displayValue = typeof data.value === 'number' ? data.value.toFixed(1) : variables.entity_state;
                if (data.level === 'Unknown') return 'N/A';
                return displayValue + '<span style="font-size:14px;line-height:1px">' + variables.symbol + '</span>';
              ]]]
            show_icon: true
            show_label: true
            styles:
              card:
                - padding: 0
                - height: 160px
              grid:
                - grid-template-areas: '"i i" "l state" "n n" "bar bar"'
              label:
                - justify-self: start
                - font-size: 2em
                - line-height: 1.5em
                - font-weight: 300
                - color: var(--gray1000)
                - padding-left: 20px
              name:
                - justify-self: start
                - font-size: 14px
                - color: var(--gray1000)
                - opacity: '0.7'
                - padding-left: 20px
                - line-height: 17px
              img_cell:
                - justify-self: end
                - align-self: start
                - background: '#9E9E9E'
                - padding: 14px
                - border-radius: 50%
                - margin: 4px 4px 0 0
                - width: 30px
                - height: 30px
              icon:
                - width: 30px
                - height: 30px
                - color: var(--gray1000)
              custom_fields:
                state:
                  - justify-self: end
                  - align-self: end
                  - font-size: 14px
                  - color: var(--gray1000)
                  - opacity: '0.7'
                  - padding-right: 20px
                  - padding-bottom: 9px
                bar:
                  - justify-self: start
                  - width: 100%
                  - background-image: |
                      [[[
                        const color = variables.state_data.color || 'transparent';
                        return `repeating-linear-gradient(45deg,transparent,transparent 2px,${color} 3px,transparent 4px)`;
                      ]]]
                  - height: 30px
                  - margin-top: 6px
            custom_fields:
              state: |
                [[[
                  return variables.state_data.level;
                ]]]
              bar: |
                [[[
                  const color = variables.state_data.color || 'transparent';
                  const width = variables.state_data.percentage;
                  return `<div> <div style="background:${color}; height:30px; width:${width}%; "></div></div>`
                ]]]
          - type: custom:button-card
            entity: sensor.gonggijil_ceugjeonggi_1528_pm10
            name: 공기질 측정기(1528) PM10
            icon: mdi:air-purifier
            variables:
              symbol: ' μg/m³'
              state_data: |
                [[[
                  const state = entity.state;
                  const levels = ["나쁨", "보통", "좋음"];
                  const colors = ["#FF6B6B", "#FFA500", "#2196F3"];
                  const thresholds = [100, 50, 0];
                  let data = {
                    value: state || 'N/A',
                    level: 'Unknown',
                    color: 'var(--disabled-text-color)',
                    percentage: 0
                  };

                  if (state === undefined || state === null || state === 'unavailable' || state === 'unknown' || isNaN(state)) {
                    return data;
                  }

                  const value = parseFloat(state);
                  data.value = value;

                  const index = thresholds.findIndex(threshold => value >= threshold);

                  if (index !== -1) {
                    data.level = levels[index];
                    data.color = colors[index];
                  } else {
                     data.level = levels[levels.length - 1];
                     data.color = colors[colors.length - 1];
                  }

                  const min_value = 0;
                  const max_value = 200;
                  let percentage = ((value - min_value) / (max_value - min_value)) * 100;
                  if (isNaN(percentage)) {
                    percentage = 0;
                  }
                  data.percentage = Math.max(0, Math.min(100, percentage));

                  return data;
                ]]]
            label: |
              [[[
                const data = variables.state_data;
                const displayValue = typeof data.value === 'number' ? data.value.toFixed(1) : variables.entity_state;
                if (data.level === 'Unknown') return 'N/A';
                return displayValue + '<span style="font-size:14px;line-height:1px">' + variables.symbol + '</span>';
              ]]]
            show_icon: true
            show_label: true
            styles:
              card:
                - padding: 0
                - height: 160px
              grid:
                - grid-template-areas: '"i i" "l state" "n n" "bar bar"'
              label:
                - justify-self: start
                - font-size: 2em
                - line-height: 1.5em
                - font-weight: 300
                - color: var(--gray1000)
                - padding-left: 20px
              name:
                - justify-self: start
                - font-size: 14px
                - color: var(--gray1000)
                - opacity: '0.7'
                - padding-left: 20px
                - line-height: 17px
              img_cell:
                - justify-self: end
                - align-self: start
                - background: '#9E9E9E'
                - padding: 14px
                - border-radius: 50%
                - margin: 4px 4px 0 0
                - width: 30px
                - height: 30px
              icon:
                - width: 30px
                - height: 30px
                - color: var(--gray1000)
              custom_fields:
                state:
                  - justify-self: end
                  - align-self: end
                  - font-size: 14px
                  - color: var(--gray1000)
                  - opacity: '0.7'
                  - padding-right: 20px
                  - padding-bottom: 9px
                bar:
                  - justify-self: start
                  - width: 100%
                  - background-image: |
                      [[[
                        const color = variables.state_data.color || 'transparent';
                        return `repeating-linear-gradient(45deg,transparent,transparent 2px,${color} 3px,transparent 4px)`;
                      ]]]
                  - height: 30px
                  - margin-top: 6px
            custom_fields:
              state: |
                [[[
                  return variables.state_data.level;
                ]]]
              bar: |
                [[[
                  const color = variables.state_data.color || 'transparent';
                  const width = variables.state_data.percentage;
                  return `<div> <div style="background:${color}; height:30px; width:${width}%; "></div></div>`
                ]]]
          - type: custom:button-card
            entity: sensor.eeomoniteo_peulreoseu_pm10
            name: 에어모니터 플러스 PM10
            icon: mdi:air-purifier
            variables:
              symbol: ' μg/m³'
              state_data: |
                [[[
                  const state = entity.state;
                  const levels = ["나쁨", "보통", "좋음"];
                  const colors = ["#FF6B6B", "#FFA500", "#2196F3"];
                  const thresholds = [100, 50, 0];
                  let data = {
                    value: state || 'N/A',
                    level: 'Unknown',
                    color: 'var(--disabled-text-color)',
                    percentage: 0
                  };

                  if (state === undefined || state === null || state === 'unavailable' || state === 'unknown' || isNaN(state)) {
                    return data;
                  }

                  const value = parseFloat(state);
                  data.value = value;

                  const index = thresholds.findIndex(threshold => value >= threshold);

                  if (index !== -1) {
                    data.level = levels[index];
                    data.color = colors[index];
                  } else {
                     data.level = levels[levels.length - 1];
                     data.color = colors[colors.length - 1];
                  }

                  const min_value = 0;
                  const max_value = 200;
                  let percentage = ((value - min_value) / (max_value - min_value)) * 100;
                  if (isNaN(percentage)) {
                    percentage = 0;
                  }
                  data.percentage = Math.max(0, Math.min(100, percentage));

                  return data;
                ]]]
            label: |
              [[[
                const data = variables.state_data;
                const displayValue = typeof data.value === 'number' ? data.value.toFixed(1) : variables.entity_state;
                if (data.level === 'Unknown') return 'N/A';
                return displayValue + '<span style="font-size:14px;line-height:1px">' + variables.symbol + '</span>';
              ]]]
            show_icon: true
            show_label: true
            styles:
              card:
                - padding: 0
                - height: 160px
              grid:
                - grid-template-areas: '"i i" "l state" "n n" "bar bar"'
              label:
                - justify-self: start
                - font-size: 2em
                - line-height: 1.5em
                - font-weight: 300
                - color: var(--gray1000)
                - padding-left: 20px
              name:
                - justify-self: start
                - font-size: 14px
                - color: var(--gray1000)
                - opacity: '0.7'
                - padding-left: 20px
                - line-height: 17px
              img_cell:
                - justify-self: end
                - align-self: start
                - background: '#9E9E9E'
                - padding: 14px
                - border-radius: 50%
                - margin: 4px 4px 0 0
                - width: 30px
                - height: 30px
              icon:
                - width: 30px
                - height: 30px
                - color: var(--gray1000)
              custom_fields:
                state:
                  - justify-self: end
                  - align-self: end
                  - font-size: 14px
                  - color: var(--gray1000)
                  - opacity: '0.7'
                  - padding-right: 20px
                  - padding-bottom: 9px
                bar:
                  - justify-self: start
                  - width: 100%
                  - background-image: |
                      [[[
                        const color = variables.state_data.color || 'transparent';
                        return `repeating-linear-gradient(45deg,transparent,transparent 2px,${color} 3px,transparent 4px)`;
                      ]]]
                  - height: 30px
                  - margin-top: 6px
            custom_fields:
              state: |
                [[[
                  return variables.state_data.level;
                ]]]
              bar: |
                [[[
                  const color = variables.state_data.color || 'transparent';
                  const width = variables.state_data.percentage;
                  return `<div> <div style="background:${color}; height:30px; width:${width}%; "></div></div>`
                ]]]
          - type: custom:button-card
            entity: sensor.eeomoniteo_peulreoseu_pm1
            name: 에어모니터 플러스 PM1
            icon: mdi:air-purifier
            variables:
              symbol: ' μg/m³'
              state_data: |
                [[[
                  const state = entity.state;
                  const levels = ["나쁨", "보통", "좋음"];
                  const colors = ["#FF6B6B", "#FFA500", "#2196F3"];
                  const thresholds = [30, 10, 0];
                  let data = {
                    value: state || 'N/A',
                    level: 'Unknown',
                    color: 'var(--disabled-text-color)',
                    percentage: 0
                  };

                  if (state === undefined || state === null || state === 'unavailable' || state === 'unknown' || isNaN(state)) {
                    return data;
                  }

                  const value = parseFloat(state);
                  data.value = value;

                  const index = thresholds.findIndex(threshold => value >= threshold);

                  if (index !== -1) {
                    data.level = levels[index];
                    data.color = colors[index];
                  } else {
                     data.level = levels[levels.length - 1];
                     data.color = colors[colors.length - 1];
                  }

                  const min_value = 0;
                  const max_value = 60;
                  let percentage = ((value - min_value) / (max_value - min_value)) * 100;
                  if (isNaN(percentage)) {
                    percentage = 0;
                  }
                  data.percentage = Math.max(0, Math.min(100, percentage));

                  return data;
                ]]]
            label: |
              [[[
                const data = variables.state_data;
                const displayValue = typeof data.value === 'number' ? data.value.toFixed(1) : variables.entity_state;
                if (data.level === 'Unknown') return 'N/A';
                return displayValue + '<span style="font-size:14px;line-height:1px">' + variables.symbol + '</span>';
              ]]]
            show_icon: true
            show_label: true
            styles:
              card:
                - padding: 0
                - height: 160px
              grid:
                - grid-template-areas: '"i i" "l state" "n n" "bar bar"'
              label:
                - justify-self: start
                - font-size: 2em
                - line-height: 1.5em
                - font-weight: 300
                - color: var(--gray1000)
                - padding-left: 20px
              name:
                - justify-self: start
                - font-size: 14px
                - color: var(--gray1000)
                - opacity: '0.7'
                - padding-left: 20px
                - line-height: 17px
              img_cell:
                - justify-self: end
                - align-self: start
                - background: '#9E9E9E'
                - padding: 14px
                - border-radius: 50%
                - margin: 4px 4px 0 0
                - width: 30px
                - height: 30px
              icon:
                - width: 30px
                - height: 30px
                - color: var(--gray1000)
              custom_fields:
                state:
                  - justify-self: end
                  - align-self: end
                  - font-size: 14px
                  - color: var(--gray1000)
                  - opacity: '0.7'
                  - padding-right: 20px
                  - padding-bottom: 9px
                bar:
                  - justify-self: start
                  - width: 100%
                  - background-image: |
                      [[[
                        const color = variables.state_data.color || 'transparent';
                        return `repeating-linear-gradient(45deg,transparent,transparent 2px,${color} 3px,transparent 4px)`;
                      ]]]
                  - height: 30px
                  - margin-top: 6px
            custom_fields:
              state: |
                [[[
                  return variables.state_data.level;
                ]]]
              bar: |
                [[[
                  const color = variables.state_data.color || 'transparent';
                  const width = variables.state_data.percentage;
                  return `<div> <div style="background:${color}; height:30px; width:${width}%; "></div></div>`
                ]]]
          - type: custom:button-card
            entity: sensor.eeomoniteo_peulreoseu_temperature
            name: 에어모니터 플러스 온도
            icon: mdi:thermometer
            variables:
              symbol: °C
              state_data: |
                [[[
                  const state = entity.state;
                  const levels = ["추움", "쾌적", "더움"];
                  const colors = ["#64B5F6", "#FF9800", "#FF5722"];
                  const thresholds = [28, 20, 0];
                  let data = {
                    value: state || 'N/A',
                    level: 'Unknown',
                    color: 'var(--disabled-text-color)',
                    percentage: 0
                  };

                  if (state === undefined || state === null || state === 'unavailable' || state === 'unknown' || isNaN(state)) {
                    return data;
                  }

                  const value = parseFloat(state);
                  data.value = value;

                  const index = thresholds.findIndex(threshold => value >= threshold);

                  if (index !== -1) {
                    data.level = levels[index];
                    data.color = colors[index];
                  } else {
                     data.level = levels[levels.length - 1];
                     data.color = colors[colors.length - 1];
                  }

                  const min_value = 10;
                  const max_value = 40;
                  let percentage = ((value - min_value) / (max_value - min_value)) * 100;
                  if (isNaN(percentage)) {
                    percentage = 0;
                  }
                  data.percentage = Math.max(0, Math.min(100, percentage));

                  return data;
                ]]]
            label: |
              [[[
                const data = variables.state_data;
                const displayValue = typeof data.value === 'number' ? data.value.toFixed(1) : variables.entity_state;
                if (data.level === 'Unknown') return 'N/A';
                return displayValue + '<span style="font-size:14px;line-height:1px">' + variables.symbol + '</span>';
              ]]]
            show_icon: true
            show_label: true
            styles:
              card:
                - padding: 0
                - height: 160px
              grid:
                - grid-template-areas: '"i i" "l state" "n n" "bar bar"'
              label:
                - justify-self: start
                - font-size: 2em
                - line-height: 1.5em
                - font-weight: 300
                - color: var(--gray1000)
                - padding-left: 20px
              name:
                - justify-self: start
                - font-size: 14px
                - color: var(--gray1000)
                - opacity: '0.7'
                - padding-left: 20px
                - line-height: 17px
              img_cell:
                - justify-self: end
                - align-self: start
                - background: '#FF9800'
                - padding: 14px
                - border-radius: 50%
                - margin: 4px 4px 0 0
                - width: 30px
                - height: 30px
              icon:
                - width: 30px
                - height: 30px
                - color: var(--gray1000)
              custom_fields:
                state:
                  - justify-self: end
                  - align-self: end
                  - font-size: 14px
                  - color: var(--gray1000)
                  - opacity: '0.7'
                  - padding-right: 20px
                  - padding-bottom: 9px
                bar:
                  - justify-self: start
                  - width: 100%
                  - background-image: |
                      [[[
                        const color = variables.state_data.color || 'transparent';
                        return `repeating-linear-gradient(45deg,transparent,transparent 2px,${color} 3px,transparent 4px)`;
                      ]]]
                  - height: 30px
                  - margin-top: 6px
            custom_fields:
              state: |
                [[[
                  return variables.state_data.level;
                ]]]
              bar: |
                [[[
                  const color = variables.state_data.color || 'transparent';
                  const width = variables.state_data.percentage;
                  return `<div> <div style="background:${color}; height:30px; width:${width}%; "></div></div>`
                ]]]
          - type: custom:button-card
            entity: sensor.gonggijil_ceugjeonggi_1528_temperature
            name: 공기질 측정기(1528) 온도
            icon: mdi:thermometer
            variables:
              symbol: °C
              state_data: |
                [[[
                  const state = entity.state;
                  const levels = ["추움", "쾌적", "더움"];
                  const colors = ["#64B5F6", "#FF9800", "#FF5722"];
                  const thresholds = [28, 20, 0];
                  let data = {
                    value: state || 'N/A',
                    level: 'Unknown',
                    color: 'var(--disabled-text-color)',
                    percentage: 0
                  };

                  if (state === undefined || state === null || state === 'unavailable' || state === 'unknown' || isNaN(state)) {
                    return data;
                  }

                  const value = parseFloat(state);
                  data.value = value;

                  const index = thresholds.findIndex(threshold => value >= threshold);

                  if (index !== -1) {
                    data.level = levels[index];
                    data.color = colors[index];
                  } else {
                     data.level = levels[levels.length - 1];
                     data.color = colors[colors.length - 1];
                  }

                  const min_value = 10;
                  const max_value = 40;
                  let percentage = ((value - min_value) / (max_value - min_value)) * 100;
                  if (isNaN(percentage)) {
                    percentage = 0;
                  }
                  data.percentage = Math.max(0, Math.min(100, percentage));

                  return data;
                ]]]
            label: |
              [[[
                const data = variables.state_data;
                const displayValue = typeof data.value === 'number' ? data.value.toFixed(1) : variables.entity_state;
                if (data.level === 'Unknown') return 'N/A';
                return displayValue + '<span style="font-size:14px;line-height:1px">' + variables.symbol + '</span>';
              ]]]
            show_icon: true
            show_label: true
            styles:
              card:
                - padding: 0
                - height: 160px
              grid:
                - grid-template-areas: '"i i" "l state" "n n" "bar bar"'
              label:
                - justify-self: start
                - font-size: 2em
                - line-height: 1.5em
                - font-weight: 300
                - color: var(--gray1000)
                - padding-left: 20px
              name:
                - justify-self: start
                - font-size: 14px
                - color: var(--gray1000)
                - opacity: '0.7'
                - padding-left: 20px
                - line-height: 17px
              img_cell:
                - justify-self: end
                - align-self: start
                - background: '#FF9800'
                - padding: 14px
                - border-radius: 50%
                - margin: 4px 4px 0 0
                - width: 30px
                - height: 30px
              icon:
                - width: 30px
                - height: 30px
                - color: var(--gray1000)
              custom_fields:
                state:
                  - justify-self: end
                  - align-self: end
                  - font-size: 14px
                  - color: var(--gray1000)
                  - opacity: '0.7'
                  - padding-right: 20px
                  - padding-bottom: 9px
                bar:
                  - justify-self: start
                  - width: 100%
                  - background-image: |
                      [[[
                        const color = variables.state_data.color || 'transparent';
                        return `repeating-linear-gradient(45deg,transparent,transparent 2px,${color} 3px,transparent 4px)`;
                      ]]]
                  - height: 30px
                  - margin-top: 6px
            custom_fields:
              state: |
                [[[
                  return variables.state_data.level;
                ]]]
              bar: |
                [[[
                  const color = variables.state_data.color || 'transparent';
                  const width = variables.state_data.percentage;
                  return `<div> <div style="background:${color}; height:30px; width:${width}%; "></div></div>`
                ]]]
          - type: custom:button-card
            entity: sensor.gonggijil_ceugjeonggi_1528_volatile_organic_compounds_parts
            name: 공기질 측정기(1528) VOC
            icon: mdi:cloud-alert
            variables:
              symbol: ' ppm'
              state_data: |
                [[[
                  const state = entity.state;
                  const levels = ["나쁨", "보통", "좋음"];
                  const colors = ["#F44336", "#FF9800", "#4CAF50"];
                  const thresholds = [1.0, 0.5, 0];
                  let data = {
                    value: state || 'N/A',
                    level: 'Unknown',
                    color: 'var(--disabled-text-color)',
                    percentage: 0
                  };

                  if (state === undefined || state === null || state === 'unavailable' || state === 'unknown' || isNaN(state)) {
                    return data;
                  }

                  const value = parseFloat(state);
                  data.value = value;

                  const index = thresholds.findIndex(threshold => value >= threshold);

                  if (index !== -1) {
                    data.level = levels[index];
                    data.color = colors[index];
                  } else {
                     data.level = levels[levels.length - 1];
                     data.color = colors[colors.length - 1];
                  }

                  const min_value = 0;
                  const max_value = 2.0;
                  let percentage = ((value - min_value) / (max_value - min_value)) * 100;
                  if (isNaN(percentage)) {
                    percentage = 0;
                  }
                  data.percentage = Math.max(0, Math.min(100, percentage));

                  return data;
                ]]]
            label: |
              [[[
                const data = variables.state_data;
                const displayValue = typeof data.value === 'number' ? data.value.toFixed(3) : variables.entity_state;
                if (data.level === 'Unknown') return 'N/A';
                return displayValue + '<span style="font-size:14px;line-height:1px">' + variables.symbol + '</span>';
              ]]]
            show_icon: true
            show_label: true
            styles:
              card:
                - padding: 0
                - height: 160px
              grid:
                - grid-template-areas: '"i i" "l state" "n n" "bar bar"'
              label:
                - justify-self: start
                - font-size: 2em
                - line-height: 1.5em
                - font-weight: 300
                - color: var(--gray1000)
                - padding-left: 20px
              name:
                - justify-self: start
                - font-size: 14px
                - color: var(--gray1000)
                - opacity: '0.7'
                - padding-left: 20px
                - line-height: 17px
              img_cell:
                - justify-self: end
                - align-self: start
                - background: '#9C27B0'
                - padding: 14px
                - border-radius: 50%
                - margin: 4px 4px 0 0
                - width: 30px
                - height: 30px
              icon:
                - width: 30px
                - height: 30px
                - color: var(--gray1000)
              custom_fields:
                state:
                  - justify-self: end
                  - align-self: end
                  - font-size: 14px
                  - color: var(--gray1000)
                  - opacity: '0.7'
                  - padding-right: 20px
                  - padding-bottom: 9px
                bar:
                  - justify-self: start
                  - width: 100%
                  - background-image: |
                      [[[
                        const color = variables.state_data.color || 'transparent';
                        return `repeating-linear-gradient(45deg,transparent,transparent 2px,${color} 3px,transparent 4px)`;
                      ]]]
                  - height: 30px
                  - margin-top: 6px
            custom_fields:
              state: |
                [[[
                  return variables.state_data.level;
                ]]]
              bar: |
                [[[
                  const color = variables.state_data.color || 'transparent';
                  const width = variables.state_data.percentage;
                  return `<div> <div style="background:${color}; height:30px; width:${width}%; "></div></div>`
                ]]]
          - type: custom:button-card
            entity: sensor.eeomoniteo_peulreoseu_odor_sensor
            name: 에어모니터 플러스 냄새
            icon: mdi:smoke
            variables:
              symbol: ''
              state_data: |
                [[[
                  const state = entity.state;
                  const levels = ["나쁨", "보통", "좋음"];
                  const colors = ["#F44336", "#FF9800", "#4CAF50"];
                  const thresholds = [3, 1, 0];
                  let data = {
                    value: state || 'N/A',
                    level: 'Unknown',
                    color: 'var(--disabled-text-color)',
                    percentage: 0
                  };

                  if (state === undefined || state === null || state === 'unavailable' || state === 'unknown' || isNaN(state)) {
                    return data;
                  }

                  const value = parseFloat(state);
                  data.value = value;

                  const index = thresholds.findIndex(threshold => value >= threshold);

                  if (index !== -1) {
                    data.level = levels[index];
                    data.color = colors[index];
                  } else {
                     data.level = levels[levels.length - 1];
                     data.color = colors[colors.length - 1];
                  }

                  const min_value = 0;
                  const max_value = 5;
                  let percentage = ((value - min_value) / (max_value - min_value)) * 100;
                  if (isNaN(percentage)) {
                    percentage = 0;
                  }
                  data.percentage = Math.max(0, Math.min(100, percentage));

                  return data;
                ]]]
            label: |
              [[[
                const data = variables.state_data;
                const levels_kr = ["나쁨", "보통", "좋음"];
                const displayValue = data.level !== 'Unknown' ? data.level : 'N/A';
                return displayValue;
              ]]]
            show_icon: true
            show_label: true
            styles:
              card:
                - padding: 0
                - height: 160px
              grid:
                - grid-template-areas: '"i i" "l state" "n n" "bar bar"'
              label:
                - justify-self: start
                - font-size: 2em
                - line-height: 1.5em
                - font-weight: 300
                - color: var(--gray1000)
                - padding-left: 20px
              name:
                - justify-self: start
                - font-size: 14px
                - color: var(--gray1000)
                - opacity: '0.7'
                - padding-left: 20px
                - line-height: 17px
              img_cell:
                - justify-self: end
                - align-self: start
                - background: '#795548'
                - padding: 14px
                - border-radius: 50%
                - margin: 4px 4px 0 0
                - width: 30px
                - height: 30px
              icon:
                - width: 30px
                - height: 30px
                - color: var(--gray1000)
              custom_fields:
                state:
                  - justify-self: end
                  - align-self: end
                  - font-size: 14px
                  - color: var(--gray1000)
                  - opacity: '0.7'
                  - padding-right: 20px
                  - padding-bottom: 9px
                bar:
                  - justify-self: start
                  - width: 100%
                  - background-image: |
                      [[[
                        const color = variables.state_data.color || 'transparent';
                        return `repeating-linear-gradient(45deg,transparent,transparent 2px,${color} 3px,transparent 4px)`;
                      ]]]
                  - height: 30px
                  - margin-top: 6px
            custom_fields:
              state: |
                [[[
                  return variables.state_data.level;
                ]]]
              bar: |
                [[[
                  const color = variables.state_data.color || 'transparent';
                  const width = variables.state_data.percentage;
                  return `<div> <div style="background:${color}; height:30px; width:${width}%; "></div></div>`
                ]]]
      - type: grid
        cards:
          - type: heading
            heading: 새 섹션
          - type: custom:button-card
            view_layout:
              grid-area: weather
            entity: weather.wn_jib
            show_icon: false
            show_name: false
            show_state: false
            tap_action:
              action: navigate
              navigation_path: '#weather'
            custom_fields:
              icon: |
                [[[
                  const weather = entity;
                  const fallbackState = states['sensor.wn_jib_current_condition']?.state || '';
                  const raw = weather?.state;
                  const condition = typeof raw === 'string' ? raw : (raw ?? '').toString();
                  const normalized = condition ? condition.replace(/_/g, '-') : '';
                  const map = {
                    'clear-night': 'mdi:weather-night',
                    night: 'mdi:weather-night',
                    clear: 'mdi:weather-sunny',
                    sunny: 'mdi:weather-sunny',
                    cloudy: 'mdi:weather-cloudy',
                    overcast: 'mdi:weather-cloudy',
                    fog: 'mdi:weather-fog',
                    mist: 'mdi:weather-fog',
                    haze: 'mdi:weather-fog',
                    hail: 'mdi:weather-hail',
                    lightning: 'mdi:weather-lightning',
                    'lightning-rainy': 'mdi:weather-lightning-rainy',
                    partlycloudy: 'mdi:weather-partly-cloudy',
                    partly_cloudy: 'mdi:weather-partly-cloudy',
                    pouring: 'mdi:weather-pouring',
                    rainy: 'mdi:weather-rainy',
                    rain: 'mdi:weather-rainy',
                    snowy: 'mdi:weather-snowy',
                    snow: 'mdi:weather-snowy',
                    'snowy-rainy': 'mdi:weather-snowy-rainy',
                    windy: 'mdi:weather-windy',
                    'windy-variant': 'mdi:weather-windy-variant',
                    exceptional: 'mdi:weather-cloud-alert',
                    맑음: 'mdi:weather-sunny',
                    흐림: 'mdi:weather-cloudy',
                    구름: 'mdi:weather-partly-cloudy',
                    비: 'mdi:weather-rainy',
                    눈: 'mdi:weather-snowy',
                    안개: 'mdi:weather-fog',
                    황사: 'mdi:weather-hazy',
                    '맑고 가끔 구름': 'mdi:weather-partly-cloudy'
                  };
                  const candidates = [
                    condition,
                    normalized,
                    fallbackState,
                    fallbackState && fallbackState.replace(/\s+/g, '')
                  ].filter(Boolean);
                  let icon = '';
                  for (const key of candidates) {
                    if (key && map[key]) {
                      icon = map[key];
                      break;
                    }
                  }
                  if (!icon && normalized) {
                    icon = `mdi:weather-${normalized}`;
                  }
                  if (!icon || icon === 'mdi:weather-') {
                    icon = 'mdi:weather-cloudy';
                  }
                  return `<ha-icon icon="${icon}" style="--mdc-icon-size: 64px; color: #fff5e6;"></ha-icon>`;
                ]]]
              temp: |
                [[[
                  const parseNumber = (value) => {
                    const num = Number(value);
                    return Number.isFinite(num) ? num : undefined;
                  };
                  let temp = parseNumber(entity?.attributes?.temperature);
                  if (temp === undefined) {
                    temp = parseNumber(states['sensor.wn_jib_temperature']?.state);
                  }
                  if (temp === undefined) {
                    return '--';
                  }
                  const unit = entity?.attributes?.temperature_unit
                    || states['sensor.wn_jib_temperature']?.attributes?.unit_of_measurement
                    || hass.config.unit_system.temperature
                    || '°C';
                  return `${(Math.round(temp * 10) / 10).toLocaleString()}${unit}`;
                ]]]
              feels: |
                [[[
                  const parseNumber = (value) => {
                    const num = Number(value);
                    return Number.isFinite(num) ? num : undefined;
                  };
                  let feels = parseNumber(entity?.attributes?.apparent_temperature);
                  if (feels === undefined) {
                    feels = parseNumber(states['sensor.wn_jib_temperature_feels_like']?.state);
                  }
                  if (feels === undefined) {
                    return '';
                  }
                  const unit = entity?.attributes?.temperature_unit
                    || states['sensor.wn_jib_temperature_feels_like']?.attributes?.unit_of_measurement
                    || hass.config.unit_system.temperature
                    || '°C';
                  return `${(Math.round(feels * 10) / 10).toLocaleString()}${unit}`;
                ]]]
              condition: |
                [[[
                  const fallback = states['sensor.wn_jib_current_condition']?.state || '';
                  const raw = entity?.state;
                  const condition = typeof raw === 'string' ? raw : (raw ?? '').toString();
                  const localized = condition ? hass.localize(`component.weather.state._.${condition}`) : '';
                  const english = condition ? condition.replace(/[_-]/g, ' ') : '';
                  const candidate = localized && localized !== `component.weather.state._.${condition}`
                    ? localized
                    : english;
                  const text = (candidate || fallback || '').toString().trim();
                  return text || '날씨 정보 없음';
                ]]]
              details: |
                [[[
                  const parseNumber = (value) => {
                    const num = Number(value);
                    return Number.isFinite(num) ? num : undefined;
                  };
                  const humidity = parseNumber(entity?.attributes?.humidity)
                    ?? parseNumber(states['sensor.wn_jib_relative_humidity']?.state);
                  const wind = parseNumber(entity?.attributes?.wind_speed)
                    ?? parseNumber(states['sensor.wn_jib_wind_speed']?.state);
                  const windUnit = entity?.attributes?.wind_speed_unit
                    || states['sensor.wn_jib_wind_speed']?.attributes?.unit_of_measurement
                    || 'km/h';
                  const precip = parseNumber(states['sensor.wn_jib_precipitation_probability']?.state);
                  const segments = [];
                  if (humidity !== undefined) {
                    segments.push(`습도 ${humidity}%`);
                  }
                  if (wind !== undefined) {
                    segments.push(`바람 ${wind}${windUnit}`);
                  }
                  if (precip !== undefined) {
                    segments.push(`강수확률 ${precip}%`);
                  }
                  return segments.join(' · ');
                ]]]
            styles:
              grid:
                - grid-template-areas: '"icon temp" "icon feels" "icon condition" "icon details"'
                - grid-template-columns: 80px 1fr
                - grid-template-rows: auto auto auto auto
                - column-gap: 16px
                - row-gap: 4px
                - align-items: center
              custom_fields:
                icon:
                  - grid-area: icon
                  - justify-self: center
                  - align-self: center
                temp:
                  - grid-area: temp
                  - align-self: start
                  - justify-self: start
                  - font-size: 42px
                  - font-weight: 600
                  - color: null
                feels:
                  - grid-area: feels
                  - align-self: start
                  - justify-self: start
                  - font-size: 16px
                  - color: rgba(255, 245, 230, 0.75)
                condition:
                  - grid-area: condition
                  - align-self: start
                  - justify-self: start
                  - font-size: 18px
                  - font-weight: 500
                  - color: rgba(255, 245, 230, 0.9)
                details:
                  - grid-area: details
                  - align-self: start
                  - justify-self: start
                  - font-size: 14px
                  - color: rgba(255, 245, 230, 0.7)
              card:
                - background: >-
                    linear-gradient(135deg, rgba(64, 64, 72, 0.92), rgba(32, 32,
                    36, 0.92))
                - border-radius: 26px
                - padding: 16px 18px
                - box-shadow: none
                - overflow: hidden
              img_cell:
                - display: none
          - show_current: true
            show_forecast: true
            type: weather-forecast
            entity: weather.wn_jib
            forecast_type: daily
            forecast_slots: 7
            secondary_info_attribute: apparent_temperature
          - type: custom:apexcharts-card
            update_delay: 1s
            update_interval: 10min
            graph_span: 9d
            span:
              start: day
              offset: +1d
            experimental:
              color_threshold: true
            apex_config:
              chart:
                height: 220px
              grid:
                borderColor: rgba(127,127,127,0.3)
                strokeDashArray: 2
                xaxis:
                  lines:
                    show: true
              tooltip:
                enabled: false
                x:
                  show: false
              xaxis:
                labels:
                  show: true
                  rotate: -45
                  rotateAlways: true
                  hideOverlappingLabels: false
                  showDuplicates: false
                  trim: false
                  format: M/d
                  offsetY: -5
              dataLabels:
                enabled: true
                offsetX: 0
                offsetY: -4
                style:
                  fontSize: 11px
                  fontWeight: 400
                background:
                  enabled: false
              legend:
                show: true
            all_series_config:
              show:
                legend_value: false
            header:
              title: 미세먼지 일별 예보
              show_states: false
              show: true
              colorize_states: true
            series:
              - entity: sensor.wn_jib_pm_forecast
                name: 미세먼지
                type: line
                stroke_width: 4
                curve: smooth
                show:
                  datalabels: true
                color_threshold:
                  - value: 0
                    color: blue
                  - value: 31
                    color: green
                  - value: 81
                    color: orange
                  - value: 151
                    color: red
                data_generator: >
                  return
                  Object.entries(entity.attributes.pmForecastDaily).map(([k,data])
                  => {
                    return [new Date(data.date).getTime(), data.pm10];
                  });
              - entity: sensor.wn_jib_pm_forecast
                name: 초미세먼지
                type: line
                stroke_width: 2
                curve: smooth
                show:
                  datalabels: true
                color_threshold:
                  - value: 0
                    color: blue
                  - value: 16
                    color: green
                  - value: 36
                    color: orange
                  - value: 76
                    color: red
                data_generator: >
                  return
                  Object.entries(entity.attributes.pmForecastDaily).map(([k,data])
                  =>

                  {
                    return [new Date(data.date).getTime(), data.pm25];
                  });type: ""
          - type: custom:apexcharts-card
            update_delay: 1s
            update_interval: 10min
            graph_span: 1d
            span:
              start: hour
            experimental:
              color_threshold: true
            apex_config:
              chart:
                height: 220px
              grid:
                borderColor: rgba(127,127,127,0.3)
                strokeDashArray: 2
                xaxis:
                  lines:
                    show: true
              tooltip:
                enabled: false
                x:
                  show: false
              xaxis:
                labels:
                  format: HH
              dataLabels:
                enabled: true
                offsetX: 0
                offsetY: -4
                style:
                  fontSize: 10px
                  fontWeight: 400
                background:
                  enabled: false
              legend:
                show: true
            all_series_config:
              show:
                legend_value: false
            header:
              title: 미세먼지 시별 예보
              show_states: false
              show: true
              colorize_states: true
            series:
              - entity: sensor.wn_jib_pm_forecast
                name: 미세먼지
                type: line
                stroke_width: 4
                curve: smooth
                show:
                  datalabels: true
                color_threshold:
                  - value: 0
                    color: blue
                  - value: 31
                    color: green
                  - value: 81
                    color: orange
                  - value: 151
                    color: red
                data_generator: >
                  return
                  Object.entries(entity.attributes.pmForecastHourly).map(([k,data])
                  => {
                    return [new Date(data.date).getTime(), data.pm10];
                  });
              - entity: sensor.wn_jib_pm_forecast
                name: 초미세먼지
                type: line
                stroke_width: 2
                curve: smooth
                show:
                  datalabels: true
                color_threshold:
                  - value: 0
                    color: blue
                  - value: 16
                    color: green
                  - value: 36
                    color: orange
                  - value: 76
                    color: red
                data_generator: >
                  return
                  Object.entries(entity.attributes.pmForecastHourly).map(([k,data])
                  =>

                  {
                    return [new Date(data.date).getTime(), data.pm25];
                  });
          - type: custom:apexcharts-card
            update_delay: 1s
            update_interval: 10min
            graph_span: 9d
            span:
              start: day
              offset: +1d
            experimental:
              color_threshold: true
            apex_config:
              chart:
                height: 150px
              grid:
                borderColor: rgba(127,127,127,0.3)
                strokeDashArray: 2
                xaxis:
                  lines:
                    show: true
              tooltip:
                enabled: false
                x:
                  show: true
              xaxis:
                labels:
                  show: true
                  rotate: -45
                  rotateAlways: true
                  hideOverlappingLabels: false
                  showDuplicates: false
                  trim: false
                  format: M/d
                  offsetY: -5
              dataLabels:
                enabled: true
                offsetX: 0
                offsetY: -4
                style:
                  fontSize: 11px
                  fontWeight: 400
                background:
                  enabled: false
              legend:
                show: true
            all_series_config:
              show:
                legend_value: false
            header:
              title: 통합대기 일별 예보
              show_states: false
              show: true
              colorize_states: true
            series:
              - entity: sensor.wn_jib_pm_forecast
                name: AQI
                type: line
                stroke_width: 4
                curve: smooth
                show:
                  datalabels: true
                color_threshold:
                  - value: 0
                    color: blue
                  - value: 51
                    color: green
                  - value: 101
                    color: orange
                  - value: 251
                    color: red
                data_generator: >
                  return
                  Object.entries(entity.attributes.pmForecastDaily).map(([k,data])
                  => {
                    return [new Date(data.date).getTime(), data.aqi];
                  });
