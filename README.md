# 2025ESWContest_smart_kossmetheus

# ğŸ  CareDian: ìŠ¤ë§ˆíŠ¸ í™ˆ í†µí•© ê´€ë¦¬ ì‹œìŠ¤í…œ

## ğŸ“˜ í”„ë¡œì íŠ¸ ê°œìš”

CareDianì€ ê³ ë ¹ìÂ·1ì¸ê°€êµ¬Â·ì†Œí˜•ê°€êµ¬ì—ì„œë„ **ëˆ„êµ¬ë‚˜ ì‰½ê²Œ ì“°ëŠ” ìŠ¤ë§ˆíŠ¸í™ˆ**ì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.  
Home Assistantë¥¼ í—ˆë¸Œë¡œ ì‚¼ì•„ LG ThinQ, SmartThings, HomeKit, Zigbee/Matter, ESPHome ë“±ì˜ ìƒíƒœê³„ë¥¼ í†µí•©í•˜ì—¬  
ìŒì„± ì¤‘ì‹¬ì˜ ì§ê´€ì  ì¸í„°ë™ì…˜ê³¼ mmWave ê¸°ë°˜ ë‚™ìƒ ê°ì§€ë¥¼ ê²°í•©í•œ **ì•ˆì „Â·í¸ì˜ í†µí•© í”Œë«í¼**ì…ë‹ˆë‹¤.


---

## ğŸ’¡ ê°œë°œ ë°°ê²½ ë° ë™ê¸°

- ì œì¡°ì‚¬Â·í”Œë«í¼ë³„ë¡œ ì œê°ê°ì¸ ì œì–´ ì²´ê³„ëŠ” ì‚¬ìš©ìì—ê²Œ ë³µì¡í•œ ì„¤ì •ê³¼ ë†’ì€ ì§„ì…ì¥ë²½ì„ ì´ˆë˜í•©ë‹ˆë‹¤.  
- ì¹´ë©”ë¼ ì¤‘ì‹¬ ê°ì‹œëŠ” í”„ë¼ì´ë²„ì‹œ ìš°ë ¤ì™€ ì„¤ì¹˜ ë¶€ë‹´ìœ¼ë¡œ ì‹¤ì œ ë„ì…ì´ ì–´ë µìŠµë‹ˆë‹¤.  
- ê³ ë ¹ìì™€ 1ì¸ê°€êµ¬ì˜ ì•ˆì „ê³¼ ì ‘ê·¼ì„±ì„ ê³ ë ¤í•œ â€œ**ìƒí˜¸ìš´ìš©ì„± ì¤‘ì‹¬ì˜ ìŒì„± ì¸í„°í˜ì´ìŠ¤**â€ê°€ í•„ìš”í•©ë‹ˆë‹¤.

ì´ì— CareDianì€ ë‹¤ìŒì„ ì‹¤í˜„í•©ë‹ˆë‹¤.

> **ëˆ„êµ¬ë‚˜ ì´í•´í•˜ê³  ì¦‰ì‹œ ì“¸ ìˆ˜ ìˆëŠ” ì—°ê²°**  
> - í‘œì¤€í™”ëœ ê¸°ê¸° ì œì–´ (Zigbee/Matter/ESPHome ë“±)  
> - ìŒì„± ê¸°ë°˜ ì¸í„°ë™ì…˜ (ìë…€ ìŒìƒ‰ TTS, ìƒí™©ë³„ ì•ˆë‚´)  
> - mmWave ë‚™ìƒ ê°ì§€ ë° ì•ˆì „ ëª¨ë‹ˆí„°ë§  
> - ì™¸ë¶€ ì—°ë™: Dynu ë„ë©”ì¸, Let's Encrypt TLS, Tailscale VPN  

---

## ğŸ¯ ê°œë°œ ëª©í‘œ

- **ìƒí˜¸ìš´ìš©ì„± í™•ë³´ ë° í‘œì¤€í™”**: ì´ê¸°ì¢… í”„ë¡œí† ì½œ í†µí•© ë§¤í•‘  
- **ìŒì„± ì¤‘ì‹¬ ì´ˆê°„í¸ ì¸í„°í˜ì´ìŠ¤**: ì „ë ¥, ì¡°ëª…, ì˜ˆì•½ ë“± ì£¼ìš” ê¸°ëŠ¥ì„ ìŒì„±ìœ¼ë¡œ ìˆ˜í–‰  
- **í”„ë¼ì´ë²„ì‹œ ë³´í˜¸**: mmWave ê¸°ë°˜ ë¹„ì‹œê° ê°ì§€ë¡œ ì‚¬ê°ì§€ëŒ€ ìµœì†Œí™”  
- **ë°ì´í„° ê¸°ë°˜ ìë™í™”**: ì—ë„ˆì§€ ì ˆê° ë° ìƒí™œ íŒ¨í„´ ìµœì í™”  

---

## ğŸ§© ì‹œìŠ¤í…œ êµ¬ì„±ë„

| êµ¬ì„± ìš”ì†Œ | ì„¤ëª… |
|------------|------|
| **Home Assistant** | ìŠ¤ë§ˆíŠ¸í™ˆ í—ˆë¸Œ. ëª¨ë“  ê¸°ê¸°Â·ìë™í™”ë¥¼ í†µí•© ê´€ë¦¬ |
| **FastAPI Gateway** | ë‚™ìƒ ê°ì§€, ì•Œë¦¼ ì „ì†¡, InfluxDB ë¡œê·¸ ìˆ˜ì§‘ API |
| **Voice Interface (TTS)** | VoxCPM ê¸°ë°˜ ìŒì„± í•©ì„±, Home Assistant TTS ì—°ë™ |
| **ESP mmWave Sensor** | ë¹„ì‹œê° ë‚™ìƒ ê°ì§€, ì›€ì§ì„/ì¡´ì¬ ê°ì§€ |
| **InfluxDB + Grafana** | ì‹œê³„ì—´ ë°ì´í„° ìˆ˜ì§‘ ë° ëŒ€ì‹œë³´ë“œ ì‹œê°í™” |

<p align="center">
  <img src="./assets/dev_environment.jpeg" width="80%">
</p>

---

## âš™ï¸ Home Assistant êµ¬ì„±

**ì£¼ìš” íŒŒì¼ êµ¬ì¡°**
```
CareDian-backend/
â”œâ”€â”€ configuration.yaml # í†µí•© ì„¤ì •
â”œâ”€â”€ automations.yaml # ìë™í™” ê·œì¹™
â”œâ”€â”€ influxdb.yaml # ì‹œê³„ì—´ ë°ì´í„° ì—°ë™
â”œâ”€â”€ custom_components/ # LG ThinQ, SmartThings í†µí•©
â”œâ”€â”€ pyscript/ # Python ìë™í™” ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ lovelace/ # ëŒ€ì‹œë³´ë“œ UI
â”œâ”€â”€ esphome/ # ESP ì¥ì¹˜ ì„¤ì •
â””â”€â”€ www/ # ì •ì  ë¦¬ì†ŒìŠ¤
```
---

## ğŸ—£ï¸ TTS (Voice Interface)

**ê¸°ìˆ  ìŠ¤íƒ**
- **ì—”ì§„**: VoxCPM-0.5B  
- **ì „ì²˜ë¦¬**: Kiwi(í˜•íƒœì†Œ ë¶„ì„), num2words(ìˆ«ì ë°œìŒ), g2p-en(ì˜ë¬¸ ë°œìŒ), KSS(ë¬¸ì¥ ë¶„ë¦¬)  
- **í”„ë¡œí† ì½œ**: Wyoming (Home Assistant í‘œì¤€)  
- **ì¶œë ¥ í¬ë§·**: 16kHz / mono / 16bit WAV  

**íŒŒì¼ êµ¬ì¡°**
```
CareDian-voice-interface/
â”œâ”€â”€ tts_pipeline/
â”‚ â”œâ”€â”€ frontend/ # í…ìŠ¤íŠ¸ ì „ì²˜ë¦¬
â”‚ â”œâ”€â”€ synth_voxcpn.py # ìŒì„± í•©ì„±
â”‚ â””â”€â”€ server.py # Wyoming ì„œë²„
â”œâ”€â”€ config.py
â””â”€â”€ voices/korean_male/
```
---

## ğŸš€ ë‚™ìƒ ê°ì§€ FastAPI Gateway

**ì£¼ìš” ëª¨ë“ˆ**
```
CAREDIAN-GATEWAY
â”œâ”€â”€ app
â”‚   â””â”€â”€ main.py, server_tls.py, __init__.py      
â”œâ”€â”€ api
â”‚   â””â”€â”€ device.py, fall.py, ha.py, influx_routes.py, __init__.py           
â”œâ”€â”€ core
â”‚   â””â”€â”€ config.py, logging.py, rate_limit.py, __init__.py
â”œâ”€â”€ models
â”‚   â”œâ”€â”€ fall_lstm_final_v2_meta.json, fall_lstm_model.h5
â”‚   â”œâ”€â”€ fall_lstm_model_final_v2.keras, fall_lstm_model_final_v2.tflite
â”‚   â””â”€â”€ scaler_final_v2.pkl
â”œâ”€â”€ security
â”‚   â””â”€â”€ api_key.py, cc_jwt.py, ha_auth.py, __init__.py
â”œâ”€â”€ services
â”‚   â”œâ”€â”€ fall_runtime.py, ha_notify.py, influx_v1.py
â”‚   â””â”€â”€ __init__.py    
â”œâ”€â”€ certs
â”‚   â”œâ”€â”€ ca.crt, ca.key,ca.srl
â”‚   â””â”€â”€ server.cnf, server.crt, server.csr,server.key
â”œâ”€â”€ keys
â”‚   â”œâ”€â”€ jwt_private.pem, jwt_private.pem.pub
â”‚   â””â”€â”€ jwt_public.pem
â”œâ”€â”€ scripts
â”‚   â””â”€â”€ log_to_csv.py
â”œâ”€â”€ data/
â”œâ”€â”€ .env
â”œâ”€â”€ gunicorn.conf.py
â””â”€â”€ requirements.txt
```
---

## ğŸ–¥ï¸ ê°œë°œ í™˜ê²½

| í•­ëª© | ë²„ì „ / êµ¬ì„± |
|------|-------------|
| **Backend** | Python 3.12 / FastAPI / Uvicorn / TensorFlow / scikit-learn |
| **Frontend (HA)** | Home Assistant Core 2025.1 / Lovelace / ESPHome |
| **Voice** | VoxCPM-0.5B / Wyoming / FFmpeg / PyDub / soundfile |
| **Database** | InfluxDB 2.x / Grafana |
| **Security** | Let's Encrypt TLS / JWT Auth / VPN (Tailscale) |
---

### ğŸ§  CareDian Tech Stack
![Python](https://img.shields.io/badge/Python-3.12-blue?logo=python&logoColor=white)
![FastAPI](https://img.shields.io/badge/FastAPI-009688?logo=fastapi&logoColor=white)
![TensorFlow](https://img.shields.io/badge/TensorFlow-FF6F00?logo=tensorflow&logoColor=white)
![Home Assistant](https://img.shields.io/badge/Home%20Assistant-41BDF5?logo=homeassistant&logoColor=white)
![ESPHome](https://img.shields.io/badge/ESPHome-000000?logo=esphome&logoColor=white)
...

---

## ğŸ‘¥ Contributors
### Members
| ğŸ§‘â€ğŸ’» ì´ë¦„ | ğŸ›  ì—­í•  |  Github |
|---------|------|-------------|
| ì´ì¼í™˜ | TTS,í”„ë¡ íŠ¸ì—”ë“œ |[@3leeilwhan](https://github.com/3leeilwhan)|
| ê¹€ìš°í˜„ | ë°±ì—”ë“œ, í™ˆì–´ì‹œìŠ¤í„´íŠ¸ ë° ê°€ì „ ì„œë²„ í†µí•© |[@mrpc2003](https://github.com/mrpc2003)  |
| ê¹€ì„±í˜ | TTS, ë°±ì—… ë° ì•”í˜¸í™” ì‘ì—… |[@KOSSseonghyeok](https://github.com/KOSSseonghyeok)  |
| ê¹€ì˜ˆì§€ | ë‚™ìƒ ê°ì§€ ë° ì•Œë¦¼ ìë™í™” | [@jyhannakim](https://github.com/jyhannakim)|
| ì „ì˜ˆì°¬ | FastAPI ì„œë²„ êµ¬ì¶•, OIDC ì¸ì¦ |[@aliquis-facio](https://github.com/aliquis-facio)  |
---

## ğŸŒ Reference
- Home Assistant Developer Docs  
- ESPHome API  
- VoxCPM
- TensorFlow Lite / InfluxDB Client Docs
---

## ğŸ§¾ License
MIT License Â© 2025 CareDian Team  
(ë³¸ í”„ë¡œì íŠ¸ëŠ” 23rd Embedded Software Contest ì¶œí’ˆì‘ìœ¼ë¡œ ê°œë°œë˜ì—ˆìŠµë‹ˆë‹¤.)
