# Air Quality card for Air Quality Sensor 1528 device
# Template sensor: sensor.airquality_1528

type: custom:button-card
entity: sensor.airquality_1528
name: 공기질 측정기(1528)
label: |
  [[[ return entity.state + '%' ]]]
show_icon: true
show_label: true
icon: mdi:sprout
styles:
  card:
    - padding: 0
    - height: 180px
    - background: var(--popupBG)
  grid:
    - grid-template-areas: "\"i\" \"l\" \"n\" \"bar\""
  label:
    - justify-self: start
    - font-size: 40px
    - font-weight: 300
    - padding-left: 20px
    - color: var(--gray800)
  name:
    - justify-self: start
    - align-self: start
    - font-size: 14px
    - color: var(--gray800)
    - padding-left: 20px
    - opacity: "0.7"
  img_cell:
    - justify-self: end
    - align-self: start
    - background: rgba(var(--highlight))
    - padding: 14px
    - border-radius: 50%
    - margin: 4px 4px 0 0
    - width: 30px
    - height: 30px
  icon:
    - width: 30px
    - height: 30px
    - color: var(--gray800)
  custom_fields:
    bar:
      - justify-self: start
      - width: 100%
      - background-image: >
          [[[      var color; var state = entity.state;

          if (state >= 80) {
              color = "#9EDF9C";
          } else if (state >= 60) {
              color = "#78B3CE";
          } else if (state >= 40) {
              color = "#FBD288";
          } else if (state >= 20) {
              color = "#FF9C73";
          } else {
              color = "#F95454";
          }

          return `repeating-linear-gradient(45deg,transparent,transparent
          2px,${color} 3px,transparent 4px)` ]]]  
      - height: 30px
      - margin-top: 6px
custom_fields:
  bar: >
    [[[      var color; var state = entity.state;

    if (state >= 80) {
        color = "#9EDF9C";
    } else if (state >= 60) {
        color = "#78B3CE";
    } else if (state >= 40) {
        color = "#FBD288";
    } else if (state >= 20) {
        color = "#FF9C73";
    } else {
        color = "#F95454";
    }

    return `<div> <div style="background:${color}; height: 30px;width:${state}%;
    "></div></div>` ]]]

