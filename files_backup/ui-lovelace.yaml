title: Lovelace
#background: center /cover no-repeat url('/local/floorplan/background.png') fixed
button_card_templates: !include_dir_merge_named 'templates'
decluttering_templates: !include_dir_merge_named 'templates'
kiosk_mode:
  non_admin_settings:
    kiosk: true
    ignore_entity_settings: true
  entity_settings:
    - entity:
        input_boolean.show_kiosk: on
      hide_header: true
      hide_sidebar: false
    - entity:
        input_boolean.show_kiosk: off
      hide_header: false
      hide_sidebar: false
views:
#################################################### home
  - title: HOME
    icon: mdi:home-assistant
    path: home
    cards:
      - type: custom:stack-in-card
        cards:
          - type: custom:layout-card
            layout_type: masonry
            layout: {}
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:mushroom-chips-card
                    chips:
                      #- type: menu
                      - type: template
                        entity: input_boolean.trigger_home_absence
                        icon: |-
                          {{'mdi:shield-lock' if is_state(config.entity, 'on') else 'mdi:shield-lock-open-outline'}}
                        icon_color: |-
                          {{'white' if is_state(config.entity, 'on') else 'green'}}
                        content: null
                        tap_action:
                          action: call-service
                          confirmation:
                            text: '부재/재실모드 스위치를 전환합니까?'
                          service: input_boolean.toggle
                          service_data:
                            entity_id: input_boolean.trigger_home_absence
                        double_tap_action:
                          action: call-service
                          confirmation:
                            text: '부재모드 전환방법을 변경합니까?'
                          service: input_boolean.toggle
                          service_data:
                            entity_id: input_boolean.auto_home_absence
                        card_mod:
                          style: |
                            ha-card {
                              {{'animation: blink 1.5s linear infinite;' if is_state(config.entity, 'on')}}
                              transform-style: preserve-3d;
                            }
                            @keyframes blink {
                              30% {opacity: 0.1;}
                            }
                            ha-card:before {
                              content: '';
                              position: absolute;
                              border-radius: 25px;
                              inset: -2px !important;
                              transform: translate3d(0px, 0px, -1px);
                              filter: blur(4px);
                              {% if states(config.entity) == 'on' %}
                                animation: test 5s ease infinite;
                              {% else %}
                              {% endif %}
                            }
                            @keyframes test {
                              0% {background: conic-gradient(from 85deg at 0%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              1% {background: conic-gradient(from 85deg at 2%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              2% {background: conic-gradient(from 85deg at 4%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              3% {background: conic-gradient(from 85deg at 6%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              4% {background: conic-gradient(from 85deg at 8%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              5% {background: conic-gradient(from 85deg at 10%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              6% {background: conic-gradient(from 85deg at 12%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              7% {background: conic-gradient(from 85deg at 14%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              8% {background: conic-gradient(from 85deg at 16%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              9% {background: conic-gradient(from 85deg at 18%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              10% {background: conic-gradient(from 85deg at 20%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              11% {background: conic-gradient(from 85deg at 22%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              12% {background: conic-gradient(from 85deg at 24%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              13% {background: conic-gradient(from 85deg at 26%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              14% {background: conic-gradient(from 85deg at 28%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              15% {background: conic-gradient(from 85deg at 30%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              16% {background: conic-gradient(from 85deg at 32%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              17% {background: conic-gradient(from 85deg at 34%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              18% {background: conic-gradient(from 85deg at 36%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              19% {background: conic-gradient(from 85deg at 38%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              20% {background: conic-gradient(from 85deg at 40%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              21% {background: conic-gradient(from 85deg at 42%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              22% {background: conic-gradient(from 85deg at 44%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              23% {background: conic-gradient(from 85deg at 46%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              24% {background: conic-gradient(from 85deg at 48%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              25% {background: conic-gradient(from 85deg at 50%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              26% {background: conic-gradient(from 85deg at 52%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              27% {background: conic-gradient(from 85deg at 54%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              28% {background: conic-gradient(from 85deg at 56%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              29% {background: conic-gradient(from 85deg at 58%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              30% {background: conic-gradient(from 85deg at 60%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              31% {background: conic-gradient(from 85deg at 62%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              32% {background: conic-gradient(from 85deg at 64%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              33% {background: conic-gradient(from 85deg at 66%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              34% {background: conic-gradient(from 85deg at 68%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              35% {background: conic-gradient(from 85deg at 70%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              36% {background: conic-gradient(from 85deg at 72%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              37% {background: conic-gradient(from 85deg at 74%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              38% {background: conic-gradient(from 85deg at 76%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              39% {background: conic-gradient(from 85deg at 78%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              40% {background: conic-gradient(from 85deg at 80%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              41% {background: conic-gradient(from 85deg at 82%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              42% {background: conic-gradient(from 85deg at 84%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              43% {background: conic-gradient(from 85deg at 86%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              44% {background: conic-gradient(from 85deg at 88%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              45% {background: conic-gradient(from 85deg at 90%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              46% {background: conic-gradient(from 85deg at 92%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              47% {background: conic-gradient(from 85deg at 94%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              48% {background: conic-gradient(from 85deg at 96%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              49% {background: conic-gradient(from 85deg at 98%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              50% {background: conic-gradient(from 85deg at 100%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              51% {background: conic-gradient(from 85deg at 98%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              52% {background: conic-gradient(from 85deg at 96%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              53% {background: conic-gradient(from 85deg at 94%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              54% {background: conic-gradient(from 85deg at 92%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              55% {background: conic-gradient(from 85deg at 90%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              56% {background: conic-gradient(from 85deg at 88%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              57% {background: conic-gradient(from 85deg at 86%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              58% {background: conic-gradient(from 85deg at 84%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              59% {background: conic-gradient(from 85deg at 82%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              60% {background: conic-gradient(from 85deg at 80%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              61% {background: conic-gradient(from 85deg at 78%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              62% {background: conic-gradient(from 85deg at 76%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              63% {background: conic-gradient(from 85deg at 74%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              64% {background: conic-gradient(from 85deg at 72%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              65% {background: conic-gradient(from 85deg at 70%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              66% {background: conic-gradient(from 85deg at 68%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              67% {background: conic-gradient(from 85deg at 66%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              68% {background: conic-gradient(from 85deg at 64%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              69% {background: conic-gradient(from 85deg at 62%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              70% {background: conic-gradient(from 85deg at 60%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              71% {background: conic-gradient(from 85deg at 58%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              72% {background: conic-gradient(from 85deg at 56%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              73% {background: conic-gradient(from 85deg at 54%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              74% {background: conic-gradient(from 85deg at 52%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              75% {background: conic-gradient(from 85deg at 50%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              76% {background: conic-gradient(from 85deg at 48%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              77% {background: conic-gradient(from 85deg at 46%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              78% {background: conic-gradient(from 85deg at 44%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              79% {background: conic-gradient(from 85deg at 42%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              80% {background: conic-gradient(from 85deg at 40%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              81% {background: conic-gradient(from 85deg at 38%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              82% {background: conic-gradient(from 85deg at 36%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              83% {background: conic-gradient(from 85deg at 34%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              84% {background: conic-gradient(from 85deg at 32%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              85% {background: conic-gradient(from 85deg at 30%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              86% {background: conic-gradient(from 85deg at 28%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              87% {background: conic-gradient(from 85deg at 26%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              88% {background: conic-gradient(from 85deg at 24%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              89% {background: conic-gradient(from 85deg at 22%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              90% {background: conic-gradient(from 85deg at 20%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              91% {background: conic-gradient(from 85deg at 18%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              92% {background: conic-gradient(from 85deg at 16%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              93% {background: conic-gradient(from 85deg at 14%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              94% {background: conic-gradient(from 85deg at 12%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              95% {background: conic-gradient(from 85deg at 10%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              96% {background: conic-gradient(from 85deg at 8%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              97% {background: conic-gradient(from 85deg at 6%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              98% {background: conic-gradient(from 85deg at 4%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              99% {background: conic-gradient(from 85deg at 2%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                              100% {background: conic-gradient(from 85deg at 0%, #ffd700, #f79d03, #ee6907, #e6390a, #de0d0d, #d61039, #cf1261, #c71585, #cf1261, #d61039, #de0d0d, #ee6907, #f79d03, #ffd700, #ffd700, #ffd700); }
                            }
                      - type: conditional
                        conditions:
                          - entity: lock.0x00158d00031e9334
                            state: 'unlock'
                        chip:
                          type: template
                          entity: lock.0x00158d00031e9334
                          icon: mdi:lock-open
                          icon_color: red
                          card_mod:
                            style: |
                              ha-card {
                                {{'animation: blink 1.5s linear infinite;' if is_state(config.entity, 'unlock')}}
                              }
                              @keyframes blink {
                                30% {opacity: 0.1;}
                              }
                      - type: conditional
                        conditions:
                          - entity: sensor.0x00158d00031e9334_door_state
                            state: 'open'
                        chip:
                          type: template
                          entity: sensor.0x00158d00031e9334_door_state
                          icon: mdi:door-open
                          icon_color: red
                      - type: conditional
                        conditions:
                          - entity: group.light
                            state: 'on'
                        chip:
                          type: template
                          entity: group.light
                          icon: mdi:lightbulb
                          icon_color: yellow
                          content: >-
                            {{ expand(states.group.light) | selectattr( 'state', 'eq', 'on') | list | count }}
                          tap_action:
                            action: more-info
                      - type: conditional
                        conditions:
                          - entity: group.restroomfan
                            state: 'on'
                        chip:
                          type: template
                          entity: group.restroomfan
                          icon: mdi:fan
                          icon_color: blue
                          content: >-
                            {{ expand(states.group.restroomfan) | selectattr( 'state', 'eq', 'on') | list | count }}
                          tap_action:
                            action: more-info
                      - type: conditional
                        conditions:
                          - entity: group.alert
                            state: 'on'
                        chip:
                          type: template
                          entity: group.alert
                          icon: mdi:home-alert
                          icon_color: red
                          tap_action:
                            action: navigate
                            navigation_path: '#alert'
                            haptic: medium
                      - type: entity
                        entity: sensor.krw_kwhto_won
                        icon_color: red
                        card_mod:
                          style: |
                            ha-card {
                              position: relative;
                              overflow: hidden;
                            }
                            ha-card::before {
                              content: "";
                              info_color: red;
                              position: absolute;
                              top: -50%;
                              left: -50%;
                              width: 200%;
                              height: 200%;
                              box-shadow: 0 0 5px red, 0 0 10px red, 0 0 15px red;
                              animation: runningFire 2s linear infinite;
                            }
                            @keyframes runningFire {
                              0% {
                                transform: translate(0, 0);
                              }
                              100% {
                                transform: translate(0, 100%);
                              }
                            }
                        tap_action:
                          action: navigate
                          navigation_path: '#usage'
                          haptic: medium
                  - type: custom:button-card
                    template: extra_styles_shifting
                    entity: sensor.weather_icon
                    show_name: false
                    show_entity_picture: true
                    size: 100%
                    styles:
                      img_cell:
                        - width: 55px
                        - top: '-5px'
                      grid:
                        - grid-template-areas: "'i'"
                        - grid-template-columns: auto
                        - grid-template-rows: auto
                      card:
                        - background: transparent
                        - box-shadow: none
                        - width: auto
                        - height: 50px
                        - animation: shifting 4s linear infinite alternate
                    tap_action:
                      action: navigate
                      navigation_path: '#weather'
                      haptic: medium
                    double_tap_action:
                      action: navigate
                      navigation_path: '#sun'
                      haptic: medium
        card_mod:
          style: |
            ha-card {
              box-shadow: none;
              background: rgba(var(--rgb-primary-text-color), 0.00);
            }
            :host {
              position: sticky !important;
              z-index: 4 !important;
              top: 5px; #var(--header-height) !important;
            }
        ##위 host구문이 화면스크롤시 최상위 chip 아이콘이 화면의 최상단에 위치되어 가려지지 않도록 하는것임

  #################################################### 가족카드
      - square: false
        columns: 2
        type: grid
        cards:
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-chips-card
                chips:
                  - type: conditional
                    conditions:
                      - entity: person.aiden
                        state: 'home'
                    chip:
                      type: entity
                      entity: person.aiden
                      content_info: none
                      use_entity_picture: true
                      tap_action:
                        action: navigate
                        navigation_path: '#aiden'
                        haptic: medium
                      double_tap_action:
                        action: navigate
                        navigation_path: '#aiden_fortune'
                        haptic: medium
                      card_mod:
                        style: |
                          /* Color border around avatar to show person status */
                          ha-card {
                            --chip-background:
                            {% if is_state(config.entity, 'home') %}
                              rgb(var(--rgb-state-person-{{ states(config.entity) | replace('_', '-') }} ))
                            {% else %}
                              rgb(var(--rgb-state-person-zone))
                            {% endif %}
                          }
                          /* Slightly enlarge & bring to front on hover */
                          ha-card:hover {
                            transform: scale(1.2);
                            transform-origin: top center;
                            z-index: 1;
                            transition: all 1s;
                          }
                  - type: conditional
                    conditions:
                      - entity: person.eunkyung
                        state: 'home'
                    chip:
                      type: entity
                      entity: person.eunkyung
                      content_info: none
                      use_entity_picture: true
                      tap_action:
                        action: navigate
                        navigation_path: '#eunkyung'
                        haptic: medium
                      card_mod:
                        style: |
                          /* Color border around avatar to show person status */
                          ha-card {
                            --chip-background:
                            {% if is_state(config.entity, 'home') %}
                              rgb(var(--rgb-state-person-{{ states(config.entity) | replace('_', '-') }} ))
                            {% else %}
                              rgb(var(--rgb-state-person-zone))
                            {% endif %}
                          }
                          /* Slightly enlarge & bring to front on hover */
                          ha-card:hover {
                            transform: scale(1.2);
                            transform-origin: top center;
                            z-index: 1;
                            transition: all 1s;
                          }
                  - type: conditional
                    conditions:
                      - entity: person.dohyun
                        state: 'home'
                    chip:
                      type: entity
                      entity: person.dohyun
                      content_info: none
                      use_entity_picture: true
                      tap_action:
                        action: navigate
                        navigation_path: '#dohyun'
                        haptic: medium
                      card_mod:
                        style: |
                          /* Color border around avatar to show person status */
                          ha-card {
                            --chip-background:
                            {% if is_state(config.entity, 'home') %}
                              rgb(var(--rgb-state-person-{{ states(config.entity) | replace('_', '-') }} ))
                            {% else %}
                              rgb(var(--rgb-state-person-zone))
                            {% endif %}
                          }
                          /* Slightly enlarge & bring to front on hover */
                          ha-card:hover {
                            transform: scale(1.2);
                            transform-origin: top center;
                            z-index: 1;
                            transition: all 1s;
                          }
                  - type: conditional
                    conditions:
                      - entity: person.taekang
                        state: 'home'
                    chip:
                      type: entity
                      entity: person.taekang
                      content_info: none
                      use_entity_picture: true
                      tap_action:
                        action: navigate
                        navigation_path: '#taekang'
                        haptic: medium
                      card_mod:
                        style: |
                          /* Color border around avatar to show person status */
                          ha-card {
                            --chip-background:
                            {% if is_state(config.entity, 'home') %}
                              rgb(var(--rgb-state-person-{{ states(config.entity) | replace('_', '-') }} ))
                            {% else %}
                              rgb(var(--rgb-state-person-zone))
                            {% endif %}
                          }
                          /* Slightly enlarge & bring to front on hover */
                          ha-card:hover {
                            transform: scale(1.2);
                            transform-origin: top center;
                            z-index: 1;
                            transition: all 1s;
                          }
                alignment: start
                card_mod:
                  style: |
                    ha-card {
                      margin-left: 8px;
                      /* Overlap avatar Chips */
                      --chip-spacing: calc(-1 * var(--mush-chip-spacing, 8px));
                      /* Set size of border around Chips */
                      --chip-avatar-padding: 2px;
                      /* Reduce width to fit Chips & allow max space for weather */
                      width: fit-content;
                      transition: all 0s;
                    }
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-chips-card
                chips:
                  - type: conditional
                    conditions:
                      - entity: person.aiden
                        state: 'not_home'
                    chip:
                      type: entity
                      entity: person.aiden
                      content_info: none
                      use_entity_picture: true
                      tap_action:
                        action: navigate
                        navigation_path: '#aiden'
                        haptic: medium
                      double_tap_action:
                        action: navigate
                        navigation_path: '#aiden_fortune'
                        haptic: medium
                      card_mod:
                        style: |
                          /* Color border around avatar to show person status */
                          ha-card {
                            --chip-background:
                            {% if is_state(config.entity, ['not_home', 'unknown']) %}
                              rgb(var(--rgb-state-person-{{ states(config.entity) | replace('_', '-') }} ))
                            {% else %}
                              rgb(var(--rgb-state-person-zone))
                            {% endif %}
                          }
                          /* Slightly enlarge & bring to front on hover */
                          ha-card:hover {
                            transform: scale(1.2);
                            transform-origin: top center;
                            z-index: 1;
                            transition: all 1s;
                          }
                  - type: conditional
                    conditions:
                      - entity: person.eunkyung
                        state: 'not_home'
                    chip:
                      type: entity
                      entity: person.eunkyung
                      content_info: none
                      use_entity_picture: true
                      tap_action:
                        action: navigate
                        navigation_path: '#eunkyung'
                        haptic: medium
                      card_mod:
                        style: |
                          /* Color border around avatar to show person status */
                          ha-card {
                            --chip-background:
                            {% if is_state(config.entity, ['not_home', 'unknown']) %}
                              rgb(var(--rgb-state-person-{{ states(config.entity) | replace('_', '-') }} ))
                            {% else %}
                              rgb(var(--rgb-state-person-zone))
                            {% endif %}
                          }
                          /* Slightly enlarge & bring to front on hover */
                          ha-card:hover {
                            transform: scale(1.2);
                            transform-origin: top center;
                            z-index: 1;
                            transition: all 1s;
                          }
                  - type: conditional
                    conditions:
                      - entity: person.dohyun
                        state: 'not_home'
                    chip:
                      type: entity
                      entity: person.dohyun
                      content_info: none
                      use_entity_picture: true
                      tap_action:
                        action: navigate
                        navigation_path: '#dohyun'
                        haptic: medium
                      card_mod:
                        style: |
                          /* Color border around avatar to show person status */
                          ha-card {
                            --chip-background:
                            {% if is_state(config.entity, ['not_home', 'unknown']) %}
                              rgb(var(--rgb-state-person-{{ states(config.entity) | replace('_', '-') }} ))
                            {% else %}
                              rgb(var(--rgb-state-person-zone))
                            {% endif %}
                          }
                          /* Slightly enlarge & bring to front on hover */
                          ha-card:hover {
                            transform: scale(1.2);
                            transform-origin: top center;
                            z-index: 1;
                            transition: all 1s;
                          }
                  - type: conditional
                    conditions:
                      - entity: person.taekang
                        state: 'not_home'
                    chip:
                      type: entity
                      entity: person.taekang
                      content_info: none
                      use_entity_picture: true
                      tap_action:
                        action: navigate
                        navigation_path: '#taekang'
                        haptic: medium
                      card_mod:
                        style: |
                          /* Color border around avatar to show person status */
                          ha-card {
                            --chip-background:
                            {% if is_state(config.entity, ['not_home', 'unknown']) %}
                              rgb(var(--rgb-state-person-{{ states(config.entity) | replace('_', '-') }} ))
                            {% else %}
                              rgb(var(--rgb-state-person-zone))
                            {% endif %}
                          }
                          /* Slightly enlarge & bring to front on hover */
                          ha-card:hover {
                            transform: scale(1.2);
                            transform-origin: top center;
                            z-index: 1;
                            transition: all 1s;
                          }
                alignment: end
                card_mod:
                  style: |
                    ha-card {
                      margin-left: 8px;
                      /* Overlap avatar Chips */
                      --chip-spacing: calc(-1 * var(--mush-chip-spacing, 8px));
                      /* Set size of border around Chips */
                      --chip-avatar-padding: 2px;
                      /* Reduce width to fit Chips & allow max space for weather */
                      width: fit-content;
                      transition: all 0s;
                    }
        card_mod:
          style: |
            ha-card {
              box-shadow: none;
              background: rgba(var(--rgb-primary-text-color), 0.00);
            }


  #################################################### 원카드
      - type: custom:swipe-card
        cards:
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                entity: input_boolean.trigger_home_absence
                icon: mdi:home-assistant
                icon_color: |-
                  {{'red' if is_state(config.entity, 'on') else 'green'}}
                tap_action:
                  action: fire-dom-event
                  local_conditional_card:
                    action: set
                    ids:
                      - home: toggle
                      - light: hide
                      - weather: hide
                      - noti: hide
                      - youtube: hide
                      - speaker: hide
                      - camera: hide
                      - water: hide
                      - temp: hide
                      - humid: hide
                      - vacuum: hide
                      - remote: hide
                      - tv: hide
                hold_action:
                  action: none
                card_mod:
                  style: |
                    ha-card {
                      background: var(--card-background-color) !important;
                      box-shadow: var(--ha-card-box-shadow) !important;
                      width: 58px;
                      --spacing: 8px;
                      {{ 'padding-bottom: calc(var(--spacing) * 1.118) !important;' if config.secondary != '' }}
                      border-radius: calc(var(--ha-card-border-radius, 12px) * 2) !important;
                      margin-left: auto;
                      margin-right: auto;
                    }
                    ha-state-icon {
                      animation: boing 3s ease infinite;
                      transform-origin: 50% 90%;
                    }
                    @keyframes boing {
                      0% { transform: scale3d(1, 1, 1); }
                      7% { transform: scale3d(1.25, 0.75, 1); }
                      10% { transform: scale3d(0.75, 1.25, 1); }
                      12% { transform: scale3d(1.15, 0.85, 1); }
                      16% { transform: scale3d(0.95, 1.05, 1); }
                      19% { transform: scale3d(1.05, 0.95, 1); }
                      25% { transform: scale3d(1, 1, 1); }
                    }
              - type: custom:mushroom-template-card
                entity: input_boolean.alert_switch
                icon: mdi:remote
                icon_color: teal
                tap_action:
                  action: fire-dom-event
                  local_conditional_card:
                    action: set
                    ids:
                      - home: hide
                      - light: hide
                      - weather: hide
                      - noti: hide
                      - youtube: hide
                      - speaker: hide
                      - camera: hide
                      - water: hide
                      - temp: hide
                      - humid: hide
                      - vacuum: hide
                      - remote: toggle
                      - tv: hide
                card_mod:
                  style:
                    mushroom-shape-icon$: |
                      .shape {
                        --shape-animation: ping 1.5s infinite;
                      }
                      @keyframes ping {
                        0% { box-shadow: 0 0 1px 1px rgba(var(--rgb-teal), 0.3) inset; }
                        50% { box-shadow: 0 0 5px 15px transparent inset; }
                        51% { box-shadow: 0 0 1px 1px rgba(var(--rgb-teal), 0.3); }
                        100% { box-shadow: 0 0 5px 15px transparent; }
                      }
                    .: |
                      ha-state-icon {
                        animation: clip 1.5s infinite;
                      }
                      @keyframes clip {
                        0% { clip-path: circle(13.0% at 50% 50%); }
                        100% { clip-path: circle(50.0% at 50% 50%); }
                      }
                      ha-card {
                        background: var(--card-background-color) !important;
                        box-shadow: var(--ha-card-box-shadow) !important;
                        width: 58px;
                        --spacing: 8px;
                        {{ 'padding-bottom: calc(var(--spacing) * 1.118) !important;' if config.secondary != '' }}
                        border-radius: calc(var(--ha-card-border-radius, 12px) * 2) !important;
                        margin-left: auto;
                        margin-right: auto;
                      }
              - type: custom:mushroom-template-card
                entity: input_boolean.auto_camera_livingroom_cpt
                icon: mdi:cctv
                icon_color: red
                tap_action:
                  action: fire-dom-event
                  local_conditional_card:
                    action: set
                    ids:
                      - home: hide
                      - light: hide
                      - weather: hide
                      - noti: hide
                      - youtube: hide
                      - speaker: hide
                      - camera: toggle
                      - water: hide
                      - temp: hide
                      - humid: hide
                      - vacuum: hide
                      - remote: hide
                      - tv: hide
                card_mod:
                  style: |
                    ha-card {
                      background: var(--card-background-color) !important;
                      box-shadow: var(--ha-card-box-shadow) !important;
                      width: 58px;
                      --spacing: 8px;
                      {{ 'padding-bottom: calc(var(--spacing) * 1.118) !important;' if config.secondary != '' }}
                      border-radius: calc(var(--ha-card-border-radius, 12px) * 2) !important;
                      margin-left: auto;
                      margin-right: auto;
                    }
                    ha-state-icon {
                      animation: flip 8s ease-in-out infinite alternate;
                    }
                    @keyframes flip {
                      50% { transform: rotateY(180deg); }
                    }
              - type: custom:mushroom-template-card
                entity: input_boolean.show_calendar
                icon: mdi:format-list-bulleted-square
                icon_color: purple
                tap_action:
                  action: fire-dom-event
                  local_conditional_card:
                    action: set
                    ids:
                      - home: hide
                      - light: hide
                      - weather: hide
                      - noti: toggle
                      - youtube: hide
                      - speaker: hide
                      - camera: hide
                      - water: hide
                      - temp: hide
                      - humid: hide
                      - vacuum: hide
                      - remote: hide
                      - tv: hide
                double_tap_action:
                  action: toggle
                hold_action:
                  action: none
                card_mod:
                  style: |
                    ha-state-icon {
                      animation: clip 2s steps(4) infinite;
                    }
                    @keyframes clip {
                      0% { clip-path: inset(0 0 85% 0); }
                      100% { clip-path: inset(0 0 -5% 0); }
                    }
                    ha-card {
                      background: var(--card-background-color) !important;
                      box-shadow: var(--ha-card-box-shadow) !important;
                      width: 58px;
                      --spacing: 8px;
                      {{ 'padding-bottom: calc(var(--spacing) * 1.118) !important;' if config.secondary != '' }}
                      border-radius: calc(var(--ha-card-border-radius, 12px) * 2) !important;
                      margin-left: auto;
                      margin-right: auto;
                    }
              - type: custom:mushroom-media-player-card
                entity: media_player.ytube_music_player
                tap_action:
                  action: fire-dom-event
                  local_conditional_card:
                    action: set
                    ids:
                      - home: hide
                      - light: hide
                      - weather: hide
                      - noti: hide
                      - youtube: toggle
                      - speaker: hide
                      - camera: hide
                      - water: hide
                      - temp: hide
                      - humid: hide
                      - vacuum: hide
                      - remote: hide
                      - tv: hide
                double_tap_action:
                  action: fire-dom-event
                  local_conditional_card:
                    action: set
                    ids:
                      - home: hide
                      - light: hide
                      - weather: hide
                      - noti: hide
                      - youtube: hide
                      - speaker: toggle
                      - camera: hide
                      - water: hide
                      - temp: hide
                      - humid: hide
                      - vacuum: hide
                      - remote: hide
                      - tv: hide
                card_mod:
                  style: |
                    mushroom-shape-icon {
                      display: flex;
                      {% set media_type = state_attr(config.entity, 'media_content_type') %}
                      {% if media_type == 'music' %}
                        --card-mod-icon: mdi:music;
                        animation: beat 1.3s ease-out infinite both;
                      {% elif media_type == 'playlist' %}
                        --card-mod-icon: mdi:music;
                        animation: beat 1.3s ease-out infinite both;
                      {% elif media_type == 'paused' %}
                        --card-mod-icon: mdi:pause;
                        animation: beat 1.3s ease-out infinite both;
                      {% else %}
                        --card-mod-icon: mdi:youtube;
                      {% endif %}
                    }
                    @keyframes flicker {
                      0%, 31.98%, 32.98%, 34.98%, 36.98%, 39.98%, 67.98%, 68.98%, 95.98%, 96.98%, 97.98%, 98.98%, 100% { --icon-color: rgba(var(--rgb-indigo), 1); }
                      32%, 33%, 35%, 36%, 37%, 40%, 68%, 69%, 96%, 97%, 98%, 99% { --icon-color: rgba(var(--rgb-indigo), 0.6); }
                    }
                    @keyframes beat {
                      0%, 60% { --icon-symbol-size: 21px; }
                      5%, 17%, 57% { --icon-symbol-size: 22px; }
                      10%, 20%, 51% { --icon-symbol-size: 23px; }
                      25%, 45% { --icon-symbol-size: 24px; }
                      30%, 39% { --icon-symbol-size: 25px; }
                      33% { --icon-symbol-size: 26px; }
                    }
                    ha-card {
                      background: var(--card-background-color) !important;
                      box-shadow: var(--ha-card-box-shadow) !important;
                      width: 58px;
                      --spacing: 8px;
                      {{ 'padding-bottom: calc(var(--spacing) * 1.118) !important;' if config.secondary != '' }}
                      border-radius: calc(var(--ha-card-border-radius, 12px) * 2) !important;
                      margin-left: auto;
                      margin-right: auto;
                    }
                    ha-state-icon {
                      animation: charge 1s linear infinite;
                    }
                    @keyframes charge {
                      0%, 10%, 20%, 30%, 40%, 50%, 60%, 70%, 80%, 90%, 100% { transform: translate(0, 0); }
                      5% { transform: translate({{ range(-10, 10) | random / 10 }}px, {{ range(-10, 10) | random / 10 }}px); }
                      15% { transform: translate({{ range(-10, 10) | random / 10 }}px, {{ range(-10, 10) | random / 10 }}px); }
                      25% { transform: translate({{ range(-10, 10) | random / 10 }}px, {{ range(-10, 10) | random / 10 }}px); }
                      35% { transform: translate({{ range(-10, 10) | random / 10 }}px, {{ range(-10, 10) | random / 10 }}px); }
                      45% { transform: translate({{ range(-10, 10) | random / 10 }}px, {{ range(-10, 10) | random / 10 }}px); }
                      55% { transform: translate({{ range(-10, 10) | random / 10 }}px, {{ range(-10, 10) | random / 10 }}px); }
                      65% { transform: translate({{ range(-10, 10) | random / 10 }}px, {{ range(-10, 10) | random / 10 }}px); }
                      75% { transform: translate({{ range(-10, 10) | random / 10 }}px, {{ range(-10, 10) | random / 10 }}px); }
                      85% { transform: translate({{ range(-10, 10) | random / 10 }}px, {{ range(-10, 10) | random / 10 }}px); }
                      95% { transform: translate({{ range(-10, 10) | random / 10 }}px, {{ range(-10, 10) | random / 10 }}px); }
                    }

      - type: horizontal-stack
        cards:
          - type: conditional
            conditions:
              - entity: input_boolean.show_calendar
                state: 'on'
            card:
              type: custom:button-card
              entity: sensor.holiday_description
              show_state: true
              show_name: false
              show_icon: false
              styles:
                card:
                  - background-color: transparent
                  - box-shadow: none
                  - height: auto
                state:
                  - text-overflow: unset
                  - white-space: unset
                  - word-break: break-word
                  - text-align: start
                  - font-color: 'var(--primary-text-color)'
                  - font-size: 15px


  #################################################### 탭카드
      - type: custom:local-conditional-card
        default: show
        id: home
        card:
          type: horizontal-stack
          cards:
            - square: false
              columns: 3
              type: grid
              cards:
                - type: custom:mushroom-entity-card
                  entity: weather.wansangu_pyeonghwa2dong
                  name: Weather
                  layout: vertical
                  tap_action:
                    action: fire-dom-event
                    local_conditional_card:
                      action: set
                      ids:
                        - home: hide
                        - light: hide
                        - weather: toggle
                        - noti: hide
                        - youtube: hide
                        - speaker: hide
                        - camera: hide
                        - water: hide
                        - temp: hide
                        - humid: hide
                        - vacuum: hide
                        - remote: hide
                        - tv: hide
                  double_tap_action:
                    action: none
                  card_mod:
                    style: |
                      ha-state-icon {
                        animation: drift 10s ease-in-out infinite;
                      }
                      @keyframes drift {
                        0%, 100% { transform: translate(3px, 0px); }
                        30% { transform: translate(-1px, 2px); }
                        45% { transform: translate(1.5px, 0px); }
                        75% { transform: translate(-3.2px, -3px); }
                      }
                - type: custom:mushroom-template-card
                  entity: sensor.0x00158d0002e2de81_temperature
                  primary: Temperature
                  secondary: '{{ states(config.entity) }}°C'
                  icon: mdi:thermometer
                  icon_color: |-
                    {% set temp = states(config.entity) | float %}
                    {% if temp < 10 %}
                      cyan
                    {% elif temp < 15 %}
                      blue
                    {% elif temp < 20 %}
                      teal
                    {% elif temp < 25 %}
                      light-green
                    {% elif temp < 30 %}
                      orange
                    {% else %}
                      red
                    {% endif %}
                  layout: vertical
                  tap_action:
                    action: fire-dom-event
                    local_conditional_card:
                      action: set
                      ids:
                        - home: hide
                        - light: hide
                        - weather: hide
                        - noti: hide
                        - youtube: hide
                        - speaker: hide
                        - camera: hide
                        - water: hide
                        - temp: toggle
                        - humid: hide
                        - vacuum: hide
                        - remote: hide
                        - tv: hide
                - type: custom:mushroom-template-card
                  entity: sensor.0x00158d0002e2de81_humidity
                  primary: Humidity
                  secondary: '{{ states(config.entity) }}%'
                  icon: mdi:water-percent
                  icon_color: |-
                    {% set temp = states(config.entity) | float %}
                    {% if temp > 80 %}
                      red
                    {% elif temp > 70 %}
                      orange
                    {% elif temp > 60 %}
                      light-green
                    {% elif temp > 50 %}
                      blue
                    {% elif temp > 40 %}
                      teal
                    {% else %}
                      cyan
                    {% endif %}
                  layout: vertical
                  tap_action:
                    action: fire-dom-event
                    local_conditional_card:
                      action: set
                      ids:
                        - home: hide
                        - light: hide
                        - weather: hide
                        - noti: hide
                        - youtube: hide
                        - speaker: hide
                        - camera: hide
                        - water: hide
                        - temp: hide
                        - humid: toggle
                        - vacuum: hide
                        - remote: hide
                        - tv: hide
                - type: custom:mushroom-template-card
                  entity: sensor.jeonju_water_ntu_level
                  icon: mdi:fish
                  primary: Water
                  secondary: |-
                    {% if is_state(config.entity, '좋음') %}
                      물맛좋음!
                    {% elif is_state(config.entity, '보통') %}
                      물맛보통!
                    {% elif is_state(config.entity, '나쁨') %}
                      필터확인!
                    {% elif is_state(config.entity, '치명') %}
                      생수준비!
                    {% else %}
                      모름!
                    {% endif %}
                  icon_color: |-
                    {% if is_state(config.entity, '좋음') %}
                      green
                    {% elif is_state(config.entity, '보통') %}
                      yellow
                    {% elif is_state(config.entity, '나쁨') %}
                      red
                    {% elif is_state(config.entity, '치명') %}
                      purple
                    {% else %}
                      grey
                    {% endif %}
                  layout: vertical
                  tap_action:
                    action: fire-dom-event
                    local_conditional_card:
                      action: set
                      ids:
                        - home: hide
                        - light: hide
                        - weather: hide
                        - noti: hide
                        - youtube: hide
                        - speaker: hide
                        - camera: hide
                        - water: toggle
                        - temp: hide
                        - humid: hide
                        - vacuum: hide
                        - remote: hide
                        - tv: hide
                  double_tap_action:
                    action: none
                  card_mod:
                    style: |
                      ha-state-icon {
                        animation: alarm 2.0s ease infinite;
                      }
                      @keyframes alarm {
                        0%, 80%, 100% { transform: translateY(0); }
                        10% { transform: translateY(-2px) rotate(-27deg); }
                        20% { transform: translateY(-2px) rotate(21deg); }
                        30% { transform: translateY(-2px) rotate(-15deg); }
                        40% { transform: translateY(-2px) rotate(9deg); }
                        50% { transform: translateY(0); }
                        60% { transform: translateY(-1.2px) }
                      }
                - type: custom:mushroom-template-card
                  primary: Floor Plan
                  secondary: 평면도
                  icon: mdi:floor-plan
                  icon_color: brown
                  layout: vertical
                  tap_action:
                    action: navigate
                    navigation_path: /lovelace/floorplan
                    haptic: medium
                  double_tap_action:
                    action: navigate
                    navigation_path: /lovelace/homeanalytics
                    haptic: medium
                - type: custom:mushroom-template-card
                  entity: group.light
                  primary: Light
                  secondary: |-
                    {% if is_state(config.entity, 'off') %}
                      꺼짐
                    {% else %}
                      {{ expand(states.group.light) | selectattr( 'state', 'eq', 'on') | list | count }}개
                    {% endif %}
                  icon: mdi:lightbulb-on
                  icon_color: |-
                    {% if is_state(config.entity, 'on') %}
                      amber
                    {% else %}
                      grey
                    {% endif %}
                  layout: vertical
                  tap_action:
                    action: fire-dom-event
                    local_conditional_card:
                      action: set
                      ids:
                        - home: hide
                        - light: toggle
                        - weather: hide
                        - noti: hide
                        - youtube: hide
                        - speaker: hide
                        - camera: hide
                        - water: hide
                        - temp: hide
                        - humid: hide
                        - vacuum: hide
                        - remote: hide
                        - tv: hide
                  double_tap_action:
                    action: fire-dom-event
                    haptic: heavy
                    browser_mod:
                      service: browser_mod.popup
                      data:
                        style: |
                          --mdc-theme-surface: transparent;
                          --popup-background-color: transparent;
                          --popup-border-radius: 15px;
                          --popup-border-color: transparent;
                        content:
                          type: vertical-stack
                          cards:
                            - type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - group: group.light
                                exclude:
                                  - state: 'off'
                                  - state: unavailable
                              sort:
                                method: state
                  card_mod:
                    style: |
                      ha-state-icon {
                        {% if is_state(config.entity, 'on')%}
                          animation: illumination 2s infinite;
                        {% else %}
                        {% endif %}
                      }
                      @keyframes illumination {
                        0%, 100% { clip-path: inset(0 0 0 0); }
                        80% { clip-path: polygon(0% 99%, 20% 55%, 22% 37%, 39% 20%, 61% 21%, 77% 35%, 79% 57%, 99% 100%); }
                      }
                      mushroom-badge-icon {
                        {% if states('config.entity') == 'on' %}
                        animation: blink 1.5s linear infinite;
                        }
                        @keyframes blink {
                          0% {opacity: 0;}
                          }
                        {%- else -%}
                          display: none;
                        {%- endif %}
                      }
                - type: custom:mushroom-template-card
                  entity: sensor.0x00158d00031e9334_door_state
                  primary: Entrance
                  secondary: |-
                    {% if is_state(config.entity, 'closed') %}
                      닫힘
                    {% else %}
                      열림
                    {% endif %}
                  icon: |-
                    {% if is_state(config.entity, 'closed') %}
                      mdi:door-closed
                    {% else %}
                      mdi:door-open
                    {% endif %}
                  icon_color: |-
                    {% if is_state(config.entity, 'closed') %}
                      cyan
                    {% else %}
                      red
                    {% endif %}
                  layout: vertical
                  tap_action:
                    action: fire-dom-event
                    haptic: heavy
                    browser_mod:
                      service: browser_mod.popup
                      data:
                        style: '--mdc-theme-surface: transparent;'
                        size: normal
                        content:
                          type: vertical-stack
                          cards:
                            - type: custom:stack-in-card
                              cards:
                                - type: custom:mushroom-media-player-card
                                  entity: camera.entrance
                                  name: Entrance
                                  icon: mdi:play
                                  use_media_info: true
                                  use_media_artwork: false
                                  show_volume_level: false
                                  fill_container: false
                                  card_mod:
                                    style: |
                                      mushroom-shape-icon {
                                        display: flex;
                                          --card-mod-icon: mdi:cctv;
                                        {{ 'animation: none;' if not is_state(config.entity, 'unavailable') }}
                                      }
                                      @keyframes flicker {
                                        0%, 31.98%, 32.98%, 34.98%, 36.98%, 39.98%, 67.98%, 68.98%, 95.98%, 96.98%, 97.98%, 98.98%, 100% { --icon-color: rgba(var(--rgb-indigo), 1); }
                                        32%, 33%, 35%, 36%, 37%, 40%, 68%, 69%, 96%, 97%, 98%, 99% { --icon-color: rgba(var(--rgb-indigo), 0.6); }
                                      }
                                      @keyframes beat {
                                        0%, 60% { --icon-symbol-size: 21px; }
                                        5%, 17%, 57% { --icon-symbol-size: 22px; }
                                        10%, 20%, 51% { --icon-symbol-size: 23px; }
                                        25%, 45% { --icon-symbol-size: 24px; }
                                        30%, 39% { --icon-symbol-size: 25px; }
                                        33% { --icon-symbol-size: 26px; }
                                      }
                                      ha-card {
                                        --ha-card-border-width: 0;
                                      }
                                      ha-card:before {
                                        transform: translate3d(0,0,0);
                                        -webkit-transform: translate3d(0,0,0);
                                        content: "";
                                        background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                        {% if not is_state(config.entity, 'unavailable') %}
                                          background: url( '{{ state_attr(config.entity, 'entity_picture') }}') center no-repeat;
                                        {% endif %}
                                        background-size: contain;
                                        margin: 4px 4px 16px;
                                        filter: drop-shadow(4px 4px 6px rgba(0, 0, 0, 0.5));
                                        border-radius: var(--control-border-radius);
                                        {% if not is_state(config.entity, 'unavailable') %}
                                          aspect-ratio: 4 / 3;
                                        {% else %}
                                          aspect-ratio: 1 / 1;
                                        {% endif %}
                                      }
                              card_mod:
                                style: |
                                  ha-card:before {
                                    transform: translate3d(0,0,0);
                                    -webkit-transform: translate3d(0,0,0);
                                    content: "";
                                    position: absolute;
                                    height: 100%;
                                    width: 100%;
                                    background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                    {% if not is_state('camera.entrance', 'unavailable') %}
                                      background: url( '{{ state_attr('camera.entrance', 'entity_picture') }}' ) center no-repeat;
                                    {% endif %}
                                    filter: blur(150px) saturate(200%);
                                    background-size: 100% 100%;
                                  }
                                  ha-card {
                                    transform: translate3d(0,0,0);
                                    -webkit-transform: translate3d(0,0,0);
                                  }
                - type: custom:mushroom-template-card
                  entity: group.veranda
                  primary: Veranda
                  secondary: |-
                    {% if is_state(config.entity, 'off') %}
                      닫힘
                    {% else %}
                      {{ expand(states.group.veranda) | selectattr( 'state', 'eq', 'on') | list | count }}개
                    {% endif %}
                  icon: |-
                    {% if is_state(config.entity, 'off') %}
                      mdi:window-closed-variant
                    {% else %}
                      mdi:window-open-variant
                    {% endif %}
                  icon_color: |-
                    {% if is_state(config.entity, 'on') %}
                      red
                    {% else %}
                      grey
                    {% endif %}
                  layout: vertical
                  tap_action:
                    action: fire-dom-event
                    haptic: heavy
                    browser_mod:
                      service: browser_mod.popup
                      data:
                        style: |
                          --mdc-theme-surface: transparent;
                          --popup-background-color: transparent;
                          --popup-border-radius: 15px;
                          --popup-border-color: transparent;
                        content:
                          type: vertical-stack
                          cards:
                            - type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - group: group.veranda
                                exclude:
                                  - state: 'off'
                                  - state: unavailable
                              sort:
                                method: state
                  card_mod:
                    style:
                      mushroom-shape-icon$: |
                        .shape {
                          {{ '--shape-animation: ping 1.5s infinite;' if is_state(config.entity, 'on') }}
                        }
                        @keyframes ping {
                          0% { box-shadow: 0 0 0 0 rgba(var(--rgb-red), 0.7); }
                          100% { box-shadow: 0 0 5px 15px transparent; }
                        }
                - type: custom:mushroom-template-card
                  entity: group.restroomfan
                  primary: Toilet Fan
                  secondary: |-
                    {% if is_state(config.entity, 'off') %}
                      꺼짐
                    {% else %}
                      {{ expand(states.group.restroomfan) | selectattr( 'state', 'eq', 'on') | list | count }}개
                    {% endif %}
                  icon: mdi:fan
                  icon_color: |-
                    {% if is_state(config.entity, 'on') %}
                      blue
                    {% else %}
                      grey
                    {% endif %}
                  layout: vertical
                  tap_action:
                    action: fire-dom-event
                    haptic: heavy
                    browser_mod:
                      service: browser_mod.popup
                      data:
                        style: |
                          --mdc-theme-surface: transparent;
                          --popup-background-color: transparent;
                          --popup-border-radius: 15px;
                          --popup-border-color: transparent;
                        content:
                          type: vertical-stack
                          cards:
                            - type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - group: group.restroomfan
                                exclude:
                                  - state: 'off'
                                  - state: unavailable
                              sort:
                                method: state
                  card_mod:
                    style: |
                      ha-state-icon {
                        {% if is_state(config.entity, 'on') %}
                          animation: spin .5s linear infinite;
                        {% else %}
                        {% endif %}
                      }
                - type: custom:mushroom-template-card
                  entity: vacuum.cleaner1s
                  primary: Vacuum
                  secondary: |-
                    {% if is_state(config.entity, 'docked') %}
                      충전중
                    {% else %}
                      청소중
                    {% endif %}
                  icon: mdi:robot-vacuum
                  icon_color: |-
                    {% if is_state(config.entity, 'cleaning') %}
                      cyan
                    {% else %}
                      green
                    {% endif %}
                  layout: vertical
                  tap_action:
                    action: fire-dom-event
                    local_conditional_card:
                      action: set
                      ids:
                        - home: hide
                        - light: hide
                        - weather: hide
                        - noti: hide
                        - youtube: hide
                        - speaker: hide
                        - camera: hide
                        - water: hide
                        - temp: hide
                        - humid: hide
                        - vacuum: toggle
                        - remote: hide
                        - tv: hide
                  card_mod:
                    style: |
                      ha-state-icon {
                       {% if is_state(config.entity, 'cleaning') %}
                         animation: ducky 2s ease-in-out infinite;
                         transform-origin: 50% 75%;
                       {% else %}
                       {% endif %}
                      }
                      @keyframes ducky {
                        0%, 100% { transform: rotate(-15deg); }
                        50% { transform: rotate(15deg); }
                      }
                - type: custom:mushroom-template-card
                  entity: media_player.livingroom_tv
                  primary: TV
                  secondary: |-
                    {% if is_state(config.entity, 'on') %}
                      {{ state_attr(config.entity, 'source') }}
                    {% else %}
                      꺼짐
                    {% endif %}
                  icon: mdi:television-classic
                  icon_color: |-
                    {% if is_state(config.entity, 'on') %}
                      orange
                    {% else %}
                    {% endif %}
                  layout: vertical
                  tap_action:
                    action: fire-dom-event
                    local_conditional_card:
                      action: set
                      ids:
                        - home: hide
                        - light: hide
                        - weather: hide
                        - noti: hide
                        - youtube: hide
                        - speaker: hide
                        - camera: hide
                        - water: hide
                        - temp: hide
                        - humid: hide
                        - vacuum: hide
                        - remote: hide
                        - tv: toggle
                  double_tap_action:
                    action: call-service
                    confirmation:
                      text: 'TV를 켜시겠습니까?'
                    service: switch.turn_on
                    service_data:
                      entity_id: switch.lvr_tv_power
                  card_mod:
                    style: |
                        ha-state-icon {
                          {% if is_state(config.entity, 'on') %}
                            animation: tube-on 1s linear, flicker 1s linear 1s infinite alternate;
                          {% else %}
                            animation: tube-off 2s linear forwards;
                          {% endif %}
                        }
                        @keyframes tube-off {
                          1%, 15% { transform: scale(1, 0.2); }
                          40%  { transform: scale(0.2); opacity: 1; }
                          100%  { transform: scale(0.2); opacity: 0; }
                        }
                        @keyframes tube-on {
                          0% { transform: scale(0.2); opacity: 0; }
                          5%  { transform: scale(1, 0.2); opacity: 0.3; }
                          15%  { transform: scale(1); opacity: 0.4; }
                          100%  { transform: scale(1); opacity: 1; }
                        }
                        @keyframes flicker {
                          0%, 31.98%, 32.98%, 34.98%, 36.98%, 39.98%, 67.98%, 68.98%, 95.98%, 96.98%, 97.98%, 98.98%, 100% { opacity: 0.6; }
                          32%, 33%, 35%, 36%, 37%, 40%, 68%, 69%, 96%, 97%, 98%, 99% { opacity: 1; }
                        }
                        ha-card {
                          {% if is_state(config.entity, 'on') %}
                            background-image: url( '{{ state_attr(config.entity, 'entity_picture') }}' );
                            background-position: center;
                            background-repeat: no-repeat;
                            background-size: cover;
                            background-color: rgba(var(--rgb-card-background-color),0.6);
                            background-blend-mode: overlay;
                            --primary-text-color: transparent;
                            --secondary-text-color: rgba(114,114,114,0.3);
                          {% else %}
                            background-color: rgba(var(--rgb-card-background-color),0.9);
                          {% endif %}
                        }
                        ha-card:active {
                          background: rgba(var(--rgb-disabled), 0.9);
                          transform: scale(0.915);
                          transition: 0s;
                        }
                - type: custom:mushroom-template-card
                  entity: group.update
                  primary: Update
                  secondary: |-
                    {% if is_state(config.entity, 'off') %}
                      No Update
                    {% else %}
                     Go to Update
                    {% endif %}
                  icon: |-
                    {% if is_state(config.entity, 'on') %}
                      mdi:cloud-download
                    {% else %}
                      mdi:cloud-check
                    {% endif %}
                  icon_color: |-
                    {% if is_state(config.entity, 'on') %}
                      blue
                    {% else %}
                      grey
                    {% endif %}
                  layout: vertical
                  tap_action:
                    action: navigate
                    navigation_path: '#installed'
                  double_tap_action:
                    action: navigate
                    navigation_path: /lovelace/system
                  card_mod:
                    style: |
                      ha-state-icon {
                        {% if is_state(config.entity, 'on') %}
                          animation: spin 1s, flash 4s linear infinite;
                          transform: rotate(360deg);
                          transition: 500ms;
                        {% else %}
                        {% endif %}
                      }
                      @keyframes flash {
                        0%, 4%, 8%, 12%, 16%, 20%, 24%, 28%, 32%, 100% { transform: translate(0px,0px); }
                        2% { transform: translate(-0.3px, 0px); }
                        6% { transform: translate(0.3px, 0px); }
                        10% { transform: translate(-0.2px, 0px); }
                        14% { transform: translate(0.2px, 0px); }
                        18% { transform: translate(-0.2px, 0px); }
                        22% { transform: translate(0.5px, 0px); }
                        26% { transform: translate(-0.5px, 0px); }
                        34% { transform: translate(-1px, 5px); color: rgb(var(--rgb-amber)); }
                        38% { transform: translate(0px, 0px); color: rgb(var(--rgb-white)); }
                        40% { color: rgb(var(--rgb-amber)); }
                      }


  ####################################################################### local-conditional: weather
      - type: custom:local-conditional-card
        default: hide
        id: weather
        card:
          type: custom:tabbed-card
          tabs:
            - card:
                square: false
                columns: 2
                type: grid
                cards:
                  - type: custom:mini-graph-card
                    card_mod:
                      style: |
                        .graph .graph__container .graph__container__svg svg g mask .line {
                          animation-duration: 5s !important;
                          animation-delay: 0s !important;
                          animation-timing-function: linear !important;
                          animation-iteration-count: infinite !important;
                        }
                    name: 온도
                    hours_to_show: 24
                    points_per_hour: 1
                    height: 30
                    line_width: 3
                    align_icon: left
                    align_header: left
                    font_size_header: 12
                    font_size: 40
                    animate: true
                    smoothing: true
                    show:
                      name: true
                      labels: false
                      icon: true
                      legend: true
                      extrema: false
                      average: false
                      fill: true
                    entities:
                      - color: var(--google-red)
                        entity: sensor.home_temp
                        show_graph: true
                        show_state: true
                  - type: custom:mini-graph-card
                    card_mod:
                      style: |
                        .graph .graph__container .graph__container__svg svg g mask .line {
                          animation-duration: 5s !important;
                          animation-delay: 0s !important;
                          animation-timing-function: linear !important;
                          animation-iteration-count: infinite !important;
                        }
                    name: 습도
                    hours_to_show: 24
                    points_per_hour: 1
                    height: 30
                    line_width: 3
                    align_icon: left
                    align_header: left
                    font_size_header: 12
                    font_size: 40
                    animate: true
                    smoothing: true
                    show:
                      name: true
                      labels: false
                      icon: true
                      legend: true
                      extrema: false
                      average: false
                      fill: true
                    entities:
                      - color: var(--google-blue)
                        entity: sensor.home_humid
                        show_graph: true
                        show_state: true
                  - type: custom:mini-graph-card
                    card_mod:
                      style: |
                        .graph .graph__container .graph__container__svg svg g mask .line {
                          animation-duration: 5s !important;
                          animation-delay: 0s !important;
                          animation-timing-function: linear !important;
                          animation-iteration-count: infinite !important;
                        }
                    name: 초미세먼지
                    hours_to_show: 24
                    points_per_hour: 1
                    height: 30
                    line_width: 3
                    align_icon: left
                    align_header: left
                    font_size_header: 12
                    font_size: 40
                    animate: true
                    smoothing: true
                    show:
                      name: true
                      labels: false
                      icon: true
                      legend: true
                      extrema: false
                      average: false
                      fill: true
                    entities:
                      - color: var(--google-yellow)
                        entity: sensor.home_pm25
                        show_graph: true
                        show_state: true
                  - type: custom:mini-graph-card
                    card_mod:
                      style: |
                        .graph .graph__container .graph__container__svg svg g mask .line {
                          animation-duration: 5s !important;
                          animation-delay: 0s !important;
                          animation-timing-function: linear !important;
                          animation-iteration-count: infinite !important;
                        }
                    name: 이산화탄소
                    hours_to_show: 24
                    points_per_hour: 1
                    height: 30
                    line_width: 3
                    align_icon: left
                    align_header: left
                    font_size_header: 12
                    font_size: 40
                    animate: true
                    smoothing: true
                    show:
                      name: true
                      labels: false
                      icon: true
                      legend: true
                      extrema: false
                      average: false
                      fill: true
                    entities:
                      - color: var(--google-green)
                        entity: sensor.home_co2
                        show_graph: true
                        show_state: true
              attributes:
                label: INSIDE
                #isFadingIndicator: true
                #icon: mdi:thermometer-lines
                #stacked: true
            - card:
                square: false
                columns: 2
                type: grid
                cards:
                  - type: custom:mini-graph-card
                    card_mod:
                      style: |
                        .graph .graph__container .graph__container__svg svg g mask .line {
                          animation-duration: 5s !important;
                          animation-delay: 0s !important;
                          animation-timing-function: linear !important;
                          animation-iteration-count: infinite !important;
                        }
                    name: 온도
                    hours_to_show: 24
                    points_per_hour: 1
                    height: 30
                    line_width: 3
                    align_icon: left
                    align_header: left
                    font_size_header: 12
                    font_size: 40
                    animate: true
                    smoothing: true
                    show:
                      name: true
                      labels: false
                      icon: true
                      legend: true
                      extrema: false
                      average: false
                      fill: true
                    entities:
                      - color: var(--google-red)
                        entity: sensor.hyeonjaeondo
                        show_graph: true
                        show_state: true
                  - type: custom:mini-graph-card
                    card_mod:
                      style: |
                        .graph .graph__container .graph__container__svg svg g mask .line {
                          animation-duration: 5s !important;
                          animation-delay: 0s !important;
                          animation-timing-function: linear !important;
                          animation-iteration-count: infinite !important;
                        }
                    name: 습도
                    hours_to_show: 24
                    points_per_hour: 1
                    height: 30
                    line_width: 3
                    align_icon: left
                    align_header: left
                    font_size_header: 12
                    font_size: 40
                    animate: true
                    smoothing: true
                    show:
                      name: true
                      labels: false
                      icon: true
                      legend: true
                      extrema: false
                      average: false
                      fill: true
                    entities:
                      - color: var(--google-blue)
                        entity: sensor.hyeonjaeseubdo
                        show_graph: true
                        show_state: true
                  - type: custom:mini-graph-card
                    card_mod:
                      style: |
                        .graph .graph__container .graph__container__svg svg g mask .line {
                          animation-duration: 5s !important;
                          animation-delay: 0s !important;
                          animation-timing-function: linear !important;
                          animation-iteration-count: infinite !important;
                        }
                    name: 초미세먼지
                    hours_to_show: 24
                    points_per_hour: 1
                    height: 30
                    line_width: 3
                    align_icon: left
                    align_header: left
                    font_size_header: 12
                    font_size: 40
                    animate: true
                    smoothing: true
                    show:
                      name: true
                      labels: false
                      icon: true
                      legend: true
                      extrema: false
                      average: false
                      fill: true
                    entities:
                      - color: var(--google-yellow)
                        entity: sensor.comisemeonji
                        show_graph: true
                        show_state: true
                  - type: custom:mini-graph-card
                    card_mod:
                      style: |
                        .graph .graph__container .graph__container__svg svg g mask .line {
                          animation-duration: 5s !important;
                          animation-delay: 0s !important;
                          animation-timing-function: linear !important;
                          animation-iteration-count: infinite !important;
                        }
                    name: 오존
                    hours_to_show: 24
                    points_per_hour: 1
                    height: 30
                    line_width: 3
                    align_icon: left
                    align_header: left
                    font_size_header: 12
                    font_size: 40
                    animate: true
                    smoothing: true
                    show:
                      name: true
                      labels: false
                      icon: true
                      legend: true
                      extrema: false
                      average: false
                      fill: true
                    entities:
                      - color: var(--google-green)
                        entity: sensor.ojon
                        show_graph: true
                        show_state: true
              attributes:
                label: OUTSIDE

  ####################################################################### local-conditional: temp
      - type: custom:local-conditional-card
        default: hide
        id: temp
        card:
          square: false
          columns: 3
          type: grid
          cards:
            - type: custom:mini-graph-card
              card_mod:
                style: |
                  .graph .graph__container .graph__container__svg svg g mask .line {
                    animation-duration: 5s !important;
                    animation-delay: 0s !important;
                    animation-timing-function: linear !important;
                    animation-iteration-count: infinite !important;
                  }
              name: 거실
              hours_to_show: 24
              points_per_hour: 2
              height: 150
              line_width: 3
              align_icon: left
              align_header: left
              font_size_header: 12
              font_size: 40
              animate: true
              smoothing: true
              show:
                name: true
                labels: false
                icon: true
                legend: true
                extrema: false
                average: false
                fill: true
              entities:
                - color: var(--google-red)
                  entity: sensor.0x00158d0002e2de81_temperature
                  show_graph: true
                  show_state: true
              tap_action:
                action: fire-dom-event
                browser_mod:
                  service: browser_mod.popup
                  data:
                    size: normal
                    style: |-
                      --mdc-theme-surface: rgba(var(--rgb-primary-text-color), 0.5);
                      --popup-header-background-color: black;
                      --popup-background-color: transparent;
                      --popup-border-radius: 15px;
                      --popup-border-color: transparent;
                    content:
                      type: custom:mini-graph-card
                      name: 거실
                      hours_to_show: 24
                      points_per_hour: 2
                      height: 200
                      line_width: 3
                      align_icon: left
                      align_header: left
                      font_size_header: 12
                      font_size: 40
                      animate: true
                      smoothing: true
                      more_info: true
                      show:
                        name: true
                        legend: false
                        extrema: true
                      entities:
                        - entity: sensor.0x00158d0002e2de81_temperature
                          show_state: true
                      color_thresholds:
                        - value: 30
                          color: '#FF1744'
                        - value: 26
                          color: '#D32F2F'
                        - value: 21
                          color: '#F44336'
                        - value: 18
                          color: '#E57373'
                        - value: 15
                          color: '#FFCDD2'
                      card_mod:
                        style: |
                          .info.flex div.info__item:nth-child(2)
                          .info__item__value {
                            color: red;
                          } .info.flex div.info__item:nth-child(1)
                          .info__item__value {
                            color: rgba(39, 170, 245, 0.8);
                          } .header.flex .name.flex {
                            font-size: 18px;
                          } ha-card { box-shadow: none !important;
                          border-style: solid !important;
                          border-width: 0px !important;
                          border-color: transparent; font-size:
                          16px !important;
            - type: custom:mini-graph-card
              card_mod:
                style: |
                  .graph .graph__container .graph__container__svg svg g mask .line {
                    animation-duration: 5s !important;
                    animation-delay: 0s !important;
                    animation-timing-function: linear !important;
                    animation-iteration-count: infinite !important;
                  }
              name: 주방
              hours_to_show: 24
              points_per_hour: 2
              height: 150
              line_width: 3
              align_icon: left
              align_header: left
              font_size_header: 12
              font_size: 40
              animate: true
              smoothing: true
              show:
                name: true
                labels: false
                icon: true
                legend: true
                extrema: false
                average: false
                fill: true
              entities:
                - color: var(--google-red)
                  entity: sensor.0x00158d00045cb3a9_temperature
                  show_graph: true
                  show_state: true
              tap_action:
                action: fire-dom-event
                browser_mod:
                  service: browser_mod.popup
                  data:
                    size: normal
                    style: |-
                      --mdc-theme-surface: rgba(var(--rgb-primary-text-color), 0.5);
                      --popup-header-background-color: black;
                      --popup-background-color: transparent;
                      --popup-border-radius: 15px;
                      --popup-border-color: transparent;
                    content:
                      type: custom:mini-graph-card
                      name: 주방
                      hours_to_show: 24
                      points_per_hour: 2
                      height: 200
                      line_width: 3
                      align_icon: left
                      align_header: left
                      font_size_header: 12
                      font_size: 40
                      animate: true
                      smoothing: true
                      more_info: true
                      show:
                        name: true
                        legend: false
                        extrema: true
                      entities:
                        - entity: sensor.0x00158d00045cb3a9_temperature
                          show_state: true
                      color_thresholds:
                        - value: 30
                          color: '#FF1744'
                        - value: 26
                          color: '#D32F2F'
                        - value: 21
                          color: '#F44336'
                        - value: 18
                          color: '#E57373'
                        - value: 15
                          color: '#FFCDD2'
                      card_mod:
                        style: |
                          .info.flex div.info__item:nth-child(2)
                          .info__item__value {
                            color: red;
                          } .info.flex div.info__item:nth-child(1)
                          .info__item__value {
                            color: rgba(39, 170, 245, 0.8);
                          } .header.flex .name.flex {
                            font-size: 18px;
                          } ha-card { box-shadow: none !important;
                          border-style: solid !important;
                          border-width: 0px !important;
                          border-color: transparent; font-size:
                          16px !important;
            - type: custom:mini-graph-card
              card_mod:
                style: |
                  .graph .graph__container .graph__container__svg svg g mask .line {
                    animation-duration: 5s !important;
                    animation-delay: 0s !important;
                    animation-timing-function: linear !important;
                    animation-iteration-count: infinite !important;
                  }
              name: 안방
              hours_to_show: 24
              points_per_hour: 2
              height: 150
              line_width: 3
              align_icon: left
              align_header: left
              font_size_header: 12
              font_size: 40
              animate: true
              smoothing: true
              show:
                name: true
                labels: false
                icon: true
                legend: true
                extrema: false
                average: false
                fill: true
              entities:
                - color: var(--google-red)
                  entity: sensor.0x00158d00025e9521_temperature
                  show_graph: true
                  show_state: true
              tap_action:
                action: fire-dom-event
                browser_mod:
                  service: browser_mod.popup
                  data:
                    size: normal
                    style: |-
                      --mdc-theme-surface: rgba(var(--rgb-primary-text-color), 0.5);
                      --popup-header-background-color: black;
                      --popup-background-color: transparent;
                      --popup-border-radius: 15px;
                      --popup-border-color: transparent;
                    content:
                      type: custom:mini-graph-card
                      name: 안방
                      hours_to_show: 24
                      points_per_hour: 2
                      height: 200
                      line_width: 3
                      align_icon: left
                      align_header: left
                      font_size_header: 12
                      font_size: 40
                      animate: true
                      smoothing: true
                      more_info: true
                      show:
                        name: true
                        legend: false
                        extrema: true
                      entities:
                        - entity: sensor.0x00158d00025e9521_temperature
                          show_state: true
                      color_thresholds:
                        - value: 30
                          color: '#FF1744'
                        - value: 26
                          color: '#D32F2F'
                        - value: 21
                          color: '#F44336'
                        - value: 18
                          color: '#E57373'
                        - value: 15
                          color: '#FFCDD2'
                      card_mod:
                        style: |
                          .info.flex div.info__item:nth-child(2)
                          .info__item__value {
                            color: red;
                          } .info.flex div.info__item:nth-child(1)
                          .info__item__value {
                            color: rgba(39, 170, 245, 0.8);
                          } .header.flex .name.flex {
                            font-size: 18px;
                          } ha-card { box-shadow: none !important;
                          border-style: solid !important;
                          border-width: 0px !important;
                          border-color: transparent; font-size:
                          16px !important;
            - type: custom:mini-graph-card
              card_mod:
                style: |
                  .graph .graph__container .graph__container__svg svg g mask .line {
                    animation-duration: 5s !important;
                    animation-delay: 0s !important;
                    animation-timing-function: linear !important;
                    animation-iteration-count: infinite !important;
                  }
              name: 공부방
              hours_to_show: 24
              points_per_hour: 2
              height: 150
              line_width: 3
              align_icon: left
              align_header: left
              font_size_header: 12
              font_size: 40
              animate: true
              smoothing: true
              show:
                name: true
                labels: false
                icon: true
                legend: true
                extrema: false
                average: false
                fill: true
              entities:
                - color: var(--google-red)
                  entity: sensor.0x00158d0002e221bd_temperature
                  show_graph: true
                  show_state: true
              tap_action:
                action: fire-dom-event
                browser_mod:
                  service: browser_mod.popup
                  data:
                    size: normal
                    style: |-
                      --mdc-theme-surface: rgba(var(--rgb-primary-text-color), 0.5);
                      --popup-header-background-color: black;
                      --popup-background-color: transparent;
                      --popup-border-radius: 15px;
                      --popup-border-color: transparent;
                    content:
                      type: custom:mini-graph-card
                      name: 공부방
                      hours_to_show: 24
                      points_per_hour: 2
                      height: 200
                      line_width: 3
                      align_icon: left
                      align_header: left
                      font_size_header: 12
                      font_size: 40
                      animate: true
                      smoothing: true
                      more_info: true
                      show:
                        name: true
                        legend: false
                        extrema: true
                      entities:
                        - entity: sensor.0x00158d0002e221bd_temperature
                          show_state: true
                      color_thresholds:
                        - value: 30
                          color: '#FF1744'
                        - value: 26
                          color: '#D32F2F'
                        - value: 21
                          color: '#F44336'
                        - value: 18
                          color: '#E57373'
                        - value: 15
                          color: '#FFCDD2'
                      card_mod:
                        style: |
                          .info.flex div.info__item:nth-child(2)
                          .info__item__value {
                            color: red;
                          } .info.flex div.info__item:nth-child(1)
                          .info__item__value {
                            color: rgba(39, 170, 245, 0.8);
                          } .header.flex .name.flex {
                            font-size: 18px;
                          } ha-card { box-shadow: none !important;
                          border-style: solid !important;
                          border-width: 0px !important;
                          border-color: transparent; font-size:
                          16px !important;
            - type: custom:mini-graph-card
              card_mod:
                style: |
                  .graph .graph__container .graph__container__svg svg g mask .line {
                    animation-duration: 5s !important;
                    animation-delay: 0s !important;
                    animation-timing-function: linear !important;
                    animation-iteration-count: infinite !important;
                  }
              name: 아들방
              hours_to_show: 24
              points_per_hour: 2
              height: 150
              line_width: 3
              align_icon: left
              align_header: left
              font_size_header: 12
              font_size: 40
              animate: true
              smoothing: true
              show:
                name: true
                labels: false
                icon: true
                legend: true
                extrema: false
                average: false
                fill: true
              entities:
                - color: var(--google-red)
                  entity: sensor.0x00158d0002e2ea37_temperature
                  show_graph: true
                  show_state: true
              tap_action:
                action: fire-dom-event
                browser_mod:
                  service: browser_mod.popup
                  data:
                    size: normal
                    style: |-
                      --mdc-theme-surface: rgba(var(--rgb-primary-text-color), 0.5);
                      --popup-header-background-color: black;
                      --popup-background-color: transparent;
                      --popup-border-radius: 15px;
                      --popup-border-color: transparent;
                    content:
                      type: custom:mini-graph-card
                      name: 아들방
                      hours_to_show: 24
                      points_per_hour: 2
                      height: 200
                      line_width: 3
                      align_icon: left
                      align_header: left
                      font_size_header: 12
                      font_size: 40
                      animate: true
                      smoothing: true
                      more_info: true
                      show:
                        name: true
                        legend: false
                        extrema: true
                      entities:
                        - entity: sensor.0x00158d0002e2ea37_temperature
                          show_state: true
                      color_thresholds:
                        - value: 30
                          color: '#FF1744'
                        - value: 26
                          color: '#D32F2F'
                        - value: 21
                          color: '#F44336'
                        - value: 18
                          color: '#E57373'
                        - value: 15
                          color: '#FFCDD2'
                      card_mod:
                        style: |
                          .info.flex div.info__item:nth-child(2)
                          .info__item__value {
                            color: red;
                          } .info.flex div.info__item:nth-child(1)
                          .info__item__value {
                            color: rgba(39, 170, 245, 0.8);
                          } .header.flex .name.flex {
                            font-size: 18px;
                          } ha-card { box-shadow: none !important;
                          border-style: solid !important;
                          border-width: 0px !important;
                          border-color: transparent; font-size:
                          16px !important;

  ####################################################################### local-conditional: humid
      - type: custom:local-conditional-card
        default: hide
        id: humid
        card:
          square: false
          columns: 3
          type: grid
          cards:
            - type: custom:mini-graph-card
              card_mod:
                style: |
                  .graph .graph__container .graph__container__svg svg g mask .line {
                    animation-duration: 5s !important;
                    animation-delay: 0s !important;
                    animation-timing-function: linear !important;
                    animation-iteration-count: infinite !important;
                  }
              name: 거실
              hours_to_show: 24
              points_per_hour: 2
              height: 150
              line_width: 3
              align_icon: left
              align_header: left
              font_size_header: 12
              font_size: 40
              animate: true
              smoothing: true
              show:
                name: true
                labels: false
                icon: true
                legend: true
                extrema: false
                average: false
                fill: true
              entities:
                - color: var(--google-blue)
                  entity: sensor.0x00158d0002e2de81_humidity
                  show_graph: true
                  show_state: true
              tap_action:
                action: fire-dom-event
                browser_mod:
                  service: browser_mod.popup
                  data:
                    size: normal
                    style: |-
                      --mdc-theme-surface: rgba(var(--rgb-primary-text-color), 0.5);
                      --popup-header-background-color: black;
                      --popup-background-color: transparent;
                      --popup-border-radius: 15px;
                      --popup-border-color: transparent;
                    content:
                      type: custom:mini-graph-card
                      name: 거실
                      hours_to_show: 24
                      points_per_hour: 2
                      height: 200
                      line_width: 3
                      align_icon: left
                      align_header: left
                      font_size_header: 12
                      font_size: 40
                      animate: true
                      smoothing: true
                      more_info: true
                      show:
                        name: true
                        legend: false
                        extrema: true
                      entities:
                        - entity: sensor.0x00158d0002e2de81_humidity
                          show_state: true
                      color_thresholds:
                        - value: 30
                          color: '#BBDEFB'
                        - value: 40
                          color: '#64B5F6'
                        - value: 50
                          color: '#2196F3'
                        - value: 60
                          color: '#2196F3'
                        - value: 70
                          color: '#0D47A1'
                      card_mod:
                        style: |
                          .info.flex div.info__item:nth-child(2)
                          .info__item__value {
                            color: red;
                          } .info.flex div.info__item:nth-child(1)
                          .info__item__value {
                            color: rgba(39, 170, 245, 0.8);
                          } .header.flex .name.flex {
                            font-size: 18px;
                          } ha-card { box-shadow: none !important;
                          border-style: solid !important;
                          border-width: 0px !important;
                          border-color: transparent; font-size:
                          16px !important;
            - type: custom:mini-graph-card
              card_mod:
                style: |
                  .graph .graph__container .graph__container__svg svg g mask .line {
                    animation-duration: 5s !important;
                    animation-delay: 0s !important;
                    animation-timing-function: linear !important;
                    animation-iteration-count: infinite !important;
                  }
              name: 주방
              hours_to_show: 24
              points_per_hour: 2
              height: 150
              line_width: 3
              align_icon: left
              align_header: left
              font_size_header: 12
              font_size: 40
              animate: true
              smoothing: true
              show:
                name: true
                labels: false
                icon: true
                legend: true
                extrema: false
                average: false
                fill: true
              entities:
                - color: var(--google-blue)
                  entity: sensor.0x00158d00045cb3a9_humidity
                  show_graph: true
                  show_state: true
              tap_action:
                action: fire-dom-event
                browser_mod:
                  service: browser_mod.popup
                  data:
                    size: normal
                    style: |-
                      --mdc-theme-surface: rgba(var(--rgb-primary-text-color), 0.5);
                      --popup-header-background-color: black;
                      --popup-background-color: transparent;
                      --popup-border-radius: 15px;
                      --popup-border-color: transparent;
                    content:
                      type: custom:mini-graph-card
                      name: 주방
                      hours_to_show: 24
                      points_per_hour: 2
                      height: 200
                      line_width: 3
                      align_icon: left
                      align_header: left
                      font_size_header: 12
                      font_size: 40
                      animate: true
                      smoothing: true
                      more_info: true
                      show:
                        name: true
                        legend: false
                        extrema: true
                      entities:
                        - entity: sensor.0x00158d00045cb3a9_humidity
                          show_state: true
                      color_thresholds:
                        - value: 30
                          color: '#BBDEFB'
                        - value: 40
                          color: '#64B5F6'
                        - value: 50
                          color: '#2196F3'
                        - value: 60
                          color: '#2196F3'
                        - value: 70
                          color: '#0D47A1'
                      card_mod:
                        style: |
                          .info.flex div.info__item:nth-child(2)
                          .info__item__value {
                            color: red;
                          } .info.flex div.info__item:nth-child(1)
                          .info__item__value {
                            color: rgba(39, 170, 245, 0.8);
                          } .header.flex .name.flex {
                            font-size: 18px;
                          } ha-card { box-shadow: none !important;
                          border-style: solid !important;
                          border-width: 0px !important;
                          border-color: transparent; font-size:
                          16px !important;
            - type: custom:mini-graph-card
              card_mod:
                style: |
                  .graph .graph__container .graph__container__svg svg g mask .line {
                    animation-duration: 5s !important;
                    animation-delay: 0s !important;
                    animation-timing-function: linear !important;
                    animation-iteration-count: infinite !important;
                  }
              name: 안방
              hours_to_show: 24
              points_per_hour: 2
              height: 150
              line_width: 3
              align_icon: left
              align_header: left
              font_size_header: 12
              font_size: 40
              animate: true
              smoothing: true
              show:
                name: true
                labels: false
                icon: true
                legend: true
                extrema: false
                average: false
                fill: true
              entities:
                - color: var(--google-blue)
                  entity: sensor.0x00158d00025e9521_humidity
                  show_graph: true
                  show_state: true
              tap_action:
                action: fire-dom-event
                browser_mod:
                  service: browser_mod.popup
                  data:
                    size: normal
                    style: |-
                      --popup-header-background-color: black;
                      --popup-background-color: transparent;
                      --popup-border-radius: 15px;
                      --popup-border-color: transparent;
                    content:
                      type: custom:mini-graph-card
                      name: 안방
                      hours_to_show: 24
                      points_per_hour: 2
                      height: 200
                      line_width: 3
                      align_icon: left
                      align_header: left
                      font_size_header: 12
                      font_size: 40
                      animate: true
                      smoothing: true
                      more_info: true
                      show:
                        name: true
                        legend: false
                        extrema: true
                      entities:
                        - entity: sensor.0x00158d00025e9521_humidity
                          show_state: true
                      color_thresholds:
                        - value: 30
                          color: '#BBDEFB'
                        - value: 40
                          color: '#64B5F6'
                        - value: 50
                          color: '#2196F3'
                        - value: 60
                          color: '#2196F3'
                        - value: 70
                          color: '#0D47A1'
                      card_mod:
                        style: |
                          .info.flex div.info__item:nth-child(2)
                          .info__item__value {
                            color: red;
                          } .info.flex div.info__item:nth-child(1)
                          .info__item__value {
                            color: rgba(39, 170, 245, 0.8);
                          } .header.flex .name.flex {
                            font-size: 18px;
                          } ha-card { box-shadow: none !important;
                          border-style: solid !important;
                          border-width: 0px !important;
                          border-color: transparent; font-size:
                          16px !important;
            - type: custom:mini-graph-card
              card_mod:
                style: |
                  .graph .graph__container .graph__container__svg svg g mask .line {
                    animation-duration: 5s !important;
                    animation-delay: 0s !important;
                    animation-timing-function: linear !important;
                    animation-iteration-count: infinite !important;
                  }
              name: 공부방
              hours_to_show: 24
              points_per_hour: 2
              height: 150
              line_width: 3
              align_icon: left
              align_header: left
              font_size_header: 12
              font_size: 40
              animate: true
              smoothing: true
              show:
                name: true
                labels: false
                icon: true
                legend: true
                extrema: false
                average: false
                fill: true
              entities:
                - color: var(--google-blue)
                  entity: sensor.0x00158d0002e221bd_humidity
                  show_graph: true
                  show_state: true
              tap_action:
                action: fire-dom-event
                browser_mod:
                  service: browser_mod.popup
                  data:
                    size: normal
                    style: |-
                      --mdc-theme-surface: rgba(var(--rgb-primary-text-color), 0.5);
                      --popup-header-background-color: black;
                      --popup-background-color: transparent;
                      --popup-border-radius: 15px;
                      --popup-border-color: transparent;
                    content:
                      type: custom:mini-graph-card
                      name: 공부방
                      hours_to_show: 24
                      points_per_hour: 2
                      height: 200
                      line_width: 3
                      align_icon: left
                      align_header: left
                      font_size_header: 12
                      font_size: 40
                      animate: true
                      smoothing: true
                      more_info: true
                      show:
                        name: true
                        legend: false
                        extrema: true
                      entities:
                        - entity: sensor.0x00158d0002e221bd_humidity
                          show_state: true
                      color_thresholds:
                        - value: 30
                          color: '#BBDEFB'
                        - value: 40
                          color: '#64B5F6'
                        - value: 50
                          color: '#2196F3'
                        - value: 60
                          color: '#2196F3'
                        - value: 70
                          color: '#0D47A1'
                      card_mod:
                        style: |
                          .info.flex div.info__item:nth-child(2)
                          .info__item__value {
                            color: red;
                          } .info.flex div.info__item:nth-child(1)
                          .info__item__value {
                            color: rgba(39, 170, 245, 0.8);
                          } .header.flex .name.flex {
                            font-size: 18px;
                          } ha-card { box-shadow: none !important;
                          border-style: solid !important;
                          border-width: 0px !important;
                          border-color: transparent; font-size:
                          16px !important;
            - type: custom:mini-graph-card
              card_mod:
                style: |
                  .graph .graph__container .graph__container__svg svg g mask .line {
                    animation-duration: 5s !important;
                    animation-delay: 0s !important;
                    animation-timing-function: linear !important;
                    animation-iteration-count: infinite !important;
                  }
              name: 아들방
              hours_to_show: 24
              points_per_hour: 2
              height: 150
              line_width: 3
              align_icon: left
              align_header: left
              font_size_header: 12
              font_size: 40
              animate: true
              smoothing: true
              show:
                name: true
                labels: false
                icon: true
                legend: true
                extrema: false
                average: false
                fill: true
              entities:
                - color: var(--google-blue)
                  entity: sensor.0x00158d0002e2ea37_humidity
                  show_graph: true
                  show_state: true
              tap_action:
                action: fire-dom-event
                browser_mod:
                  service: browser_mod.popup
                  data:
                    size: normal
                    style: |-
                      --mdc-theme-surface: rgba(var(--rgb-primary-text-color), 0.5);
                      --popup-header-background-color: black;
                      --popup-background-color: transparent;
                      --popup-border-radius: 15px;
                      --popup-border-color: transparent;
                    content:
                      type: custom:mini-graph-card
                      name: 아들방
                      hours_to_show: 24
                      points_per_hour: 2
                      height: 200
                      line_width: 3
                      align_icon: left
                      align_header: left
                      font_size_header: 12
                      font_size: 40
                      animate: true
                      smoothing: true
                      more_info: true
                      show:
                        name: true
                        legend: false
                        extrema: true
                      entities:
                        - entity: sensor.0x00158d0002e2ea37_humidity
                          show_state: true
                      color_thresholds:
                        - value: 30
                          color: '#BBDEFB'
                        - value: 40
                          color: '#64B5F6'
                        - value: 50
                          color: '#2196F3'
                        - value: 60
                          color: '#2196F3'
                        - value: 70
                          color: '#0D47A1'
                      card_mod:
                        style: |
                          .info.flex div.info__item:nth-child(2)
                          .info__item__value {
                            color: red;
                          } .info.flex div.info__item:nth-child(1)
                          .info__item__value {
                            color: rgba(39, 170, 245, 0.8);
                          } .header.flex .name.flex {
                            font-size: 18px;
                          } ha-card { box-shadow: none !important;
                          border-style: solid !important;
                          border-width: 0px !important;
                          border-color: transparent; font-size:
                          16px !important;

  ####################################################################### local-conditional: camera
      - type: custom:local-conditional-card
        default: hide
        id: camera
        card:
          type: custom:tabbed-card
          tabs:
            - card:
                type: horizontal-stack
                cards:
                  - square: false
                    columns: 3
                    type: grid
                    cards:
                      - type: custom:mushroom-template-card
                        entity: binary_sensor.0x00158d0004059202_occupancy
                        primary: ''
                        secondary: Livingroom
                        layout: vertical
                        icon_color: >-
                          {% if is_state(config.entity, 'on') %}
                            disable
                          {% else %}
                            blue
                          {% endif %}
                        icon: >-
                          {% if is_state(config.entity, 'on') %}
                            disable
                          {% else %}
                            mdi:cctv
                          {% endif %}
                        hold_action:
                          action: none
                        double_tap_action:
                          action: none
                        tap_action:
                          action: fire-dom-event
                          haptic: heavy
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              style: '--mdc-theme-surface: rgba(var(--rgb-primary-text-color), 0.5);'
                              size: normal
                              content:
                                type: vertical-stack
                                cards:
                                  - type: custom:stack-in-card
                                    cards:
                                      - type: custom:mushroom-media-player-card
                                        entity: camera.livingroom
                                        name: Livingroom
                                        icon: mdi:play
                                        use_media_info: true
                                        use_media_artwork: false
                                        show_volume_level: false
                                        fill_container: false
                                        tap_action:
                                          action: fire-dom-event
                                          haptic: heavy
                                          browser_mod:
                                            service: browser_mod.popup
                                            data:
                                              style: '--mdc-theme-surface: rgba(var(--rgb-primary-text-color), 0.5);'
                                              size: normal
                                              content:
                                                type: vertical-stack
                                                cards:
                                                  - type: picture-elements
                                                    title: " "
                                                    entity: camera.slideshow_livingroom
                                                    camera_image: camera.slideshow_livingroom
                                                    camera_view: live
                                                    aspect_ratio: 100%
                                                    elements:
                                                      - type: icon
                                                        icon: mdi:skip-previous
                                                        style:
                                                          background: 'rgba(255,255,255,0.2)'
                                                          right: 50px
                                                          bottom: 100px
                                                        tap_action:
                                                          action: call-service
                                                          service: imagedirectory.camera_prev_image
                                                          service_data:
                                                            entity_id: camera.slideshow_livingroom
                                                      - type: icon
                                                        icon: mdi:skip-next
                                                        style:
                                                          background: 'rgba(255,255,255,0.2)'
                                                          right: 0px
                                                          bottom: 100px
                                                        tap_action:
                                                          action: call-service
                                                          service: imagedirectory.camera_next_image
                                                          service_data:
                                                            entity_id: camera.slideshow_livingroom
                                                      - type: conditional
                                                        conditions:
                                                          - entity: camera.slideshow_livingroom
                                                            state: streaming
                                                        elements:
                                                          - type: icon
                                                            icon: mdi:pause
                                                            style:
                                                              background: 'rgba(255,255,255,0.2)'
                                                              right: 25px
                                                              bottom: 100px
                                                            tap_action:
                                                              action: call-service
                                                              service: imagedirectory.camera_toggle_pause
                                                              service_data:
                                                                entity_id: camera.slideshow_livingroom
                                                      - type: conditional
                                                        conditions:
                                                          - entity: camera.slideshow_livingroom
                                                            state: paused
                                                        elements:
                                                          - type: icon
                                                            icon: mdi:play
                                                            style:
                                                              background: 'rgba(255,255,255,0.2)'
                                                              right: 25px
                                                              bottom: 100px
                                                            tap_action:
                                                              action: call-service
                                                              service: imagedirectory.camera_toggle_pause
                                                              service_data:
                                                                entity_id: camera.slideshow_livingroom
                                                    card_mod:
                                                      style: |
                                                        ha-card:before {
                                                          transform: translate3d(0,0,0);
                                                          -webkit-transform: translate3d(0,0,0);
                                                          content: "";
                                                          position: absolute;
                                                          height: 100%;
                                                          width: 100%;
                                                          background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                                          {% if not is_state('camera.livingroom', 'unavailable') %}
                                                            background: url( '{{ state_attr('camera.livingroom', 'entity_picture') }}' ) center no-repeat;
                                                          {% endif %}
                                                          filter: blur(150px) saturate(200%);
                                                          background-size: 100% 100%;
                                                        }
                                                        ha-card {
                                                          transform: translate3d(0,0,0);
                                                          -webkit-transform: translate3d(0,0,0);
                                                        }
                                        card_mod:
                                          style: |
                                            mushroom-shape-icon {
                                              display: flex;
                                                --card-mod-icon: mdi:cctv;
                                              {{ 'animation: none;' if not is_state(config.entity, 'unavailable') }}
                                            }
                                            @keyframes flicker {
                                              0%, 31.98%, 32.98%, 34.98%, 36.98%, 39.98%, 67.98%, 68.98%, 95.98%, 96.98%, 97.98%, 98.98%, 100% { --icon-color: rgba(var(--rgb-indigo), 1); }
                                              32%, 33%, 35%, 36%, 37%, 40%, 68%, 69%, 96%, 97%, 98%, 99% { --icon-color: rgba(var(--rgb-indigo), 0.6); }
                                            }
                                            @keyframes beat {
                                              0%, 60% { --icon-symbol-size: 21px; }
                                              5%, 17%, 57% { --icon-symbol-size: 22px; }
                                              10%, 20%, 51% { --icon-symbol-size: 23px; }
                                              25%, 45% { --icon-symbol-size: 24px; }
                                              30%, 39% { --icon-symbol-size: 25px; }
                                              33% { --icon-symbol-size: 26px; }
                                            }
                                            ha-card {
                                              --ha-card-border-width: 0;
                                            }
                                            ha-card:before {
                                              transform: translate3d(0,0,0);
                                              -webkit-transform: translate3d(0,0,0);
                                              content: "";
                                              background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                              {% if not is_state(config.entity, 'unavailable') %}
                                                background: url( '{{ state_attr(config.entity, 'entity_picture') }}') center no-repeat;
                                              {% endif %}
                                              background-size: contain;
                                              margin: 4px 4px 16px;
                                              filter: drop-shadow(4px 4px 6px rgba(0, 0, 0, 0.5));
                                              border-radius: var(--control-border-radius);
                                              {% if not is_state(config.entity, 'unavailable') %}
                                                aspect-ratio: 4 / 3;
                                              {% else %}
                                                aspect-ratio: 1 / 1;
                                              {% endif %}
                                            }
                                    card_mod:
                                      style: |
                                        ha-card:before {
                                          transform: translate3d(0,0,0);
                                          -webkit-transform: translate3d(0,0,0);
                                          content: "";
                                          position: absolute;
                                          height: 100%;
                                          width: 100%;
                                          background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                          {% if not is_state('camera.livingroom', 'unavailable') %}
                                            background: url( '{{ state_attr('camera.livingroom', 'entity_picture') }}' ) center no-repeat;
                                          {% endif %}
                                          filter: blur(150px) saturate(200%);
                                          background-size: 100% 100%;
                                        }
                                        ha-card {
                                          transform: translate3d(0,0,0);
                                          -webkit-transform: translate3d(0,0,0);
                                        }
                                  - square: false
                                    columns: 3
                                    type: grid
                                    cards:
                                      - type: custom:mushroom-template-card
                                        primary: 거실
                                        secondary: 주방측
                                        icon: mdi:video-box
                                        icon_color: red
                                        #layout: vertical
                                        entity: script.camera_preset_synology_lvr_kitchen
                                        tap_action:
                                          action: call-service
                                          service: script.turn_on
                                          service_data:
                                            entity_id: script.camera_preset_synology_lvr_kitchen
                                      - type: custom:mushroom-template-card
                                        primary: 거실
                                        secondary: 거실측
                                        icon: mdi:video-box
                                        icon_color: red
                                        #layout: vertical
                                        entity: script.camera_preset_synology_lvr_livingroom
                                        tap_action:
                                          action: call-service
                                          service: script.turn_on
                                          service_data:
                                            entity_id: script.camera_preset_synology_lvr_livingroom
                                      - type: custom:mushroom-template-card
                                        primary: 거실
                                        secondary: 보호
                                        icon: mdi:video-box-off
                                        icon_color: cyan
                                        #layout: vertical
                                        entity: script.camera_preset_synology_lvr_privacy
                                        tap_action:
                                          action: call-service
                                          service: script.turn_on
                                          service_data:
                                            entity_id: script.camera_preset_synology_lvr_privacy
                        card_mod:
                          style: |
                            ha-card {
                              {% if is_state(config.entity, 'on') %}
                                background-image: url( '{{ state_attr('camera.livingroom', 'entity_picture') }}' );
                                background-position: center;
                                background-repeat: no-repeat;
                                background-size: cover;
                                background-color: rgba(var(--rgb-card-background-color),0.5);
                                background-blend-mode: overlay;
                                --primary-text-color: transparent;
                                --secondary-text-color: transparent;
                              {% else %}
                                background-color: rgba(var(--rgb-card-background-color),0.8);
                              {% endif %}
                            }
                            ha-card:active {
                              background: rgba(var(--rgb-disabled), 0.9);
                              transform: scale(0.915);
                              transition: 0s;
                            }
                            mushroom-shape-icon {
                              --icon-size: 65px;
                            }
                      - type: custom:mushroom-template-card
                        entity: binary_sensor.0x00158d0002b70b2b_occupancy
                        primary: ''
                        secondary: Kitchen
                        layout: vertical
                        icon_color: >-
                          {% if is_state(config.entity, 'on') %}
                            disable
                          {% else %}
                            blue
                          {% endif %}
                        icon: >-
                          {% if is_state(config.entity, 'on') %}
                            disable
                          {% else %}
                            mdi:cctv
                          {% endif %}
                        hold_action:
                          action: none
                        double_tap_action:
                          action: none
                        tap_action:
                          action: fire-dom-event
                          haptic: heavy
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              style: '--mdc-theme-surface: rgba(var(--rgb-primary-text-color), 0.5);'
                              size: normal
                              content:
                                type: vertical-stack
                                cards:
                                  - type: custom:stack-in-card
                                    cards:
                                      - type: custom:mushroom-media-player-card
                                        entity: camera.kitchen
                                        name: Kitchen
                                        icon: mdi:play
                                        use_media_info: true
                                        use_media_artwork: false
                                        show_volume_level: false
                                        fill_container: false
                                        tap_action:
                                          action: fire-dom-event
                                          haptic: heavy
                                          browser_mod:
                                            service: browser_mod.popup
                                            data:
                                              style: '--mdc-theme-surface: rgba(var(--rgb-primary-text-color), 0.5);'
                                              size: normal
                                              content:
                                                type: vertical-stack
                                                cards:
                                                  - type: picture-elements
                                                    title: " "
                                                    entity: camera.slideshow_kitchen
                                                    camera_image: camera.slideshow_kitchen
                                                    camera_view: live
                                                    aspect_ratio: 100%
                                                    elements:
                                                      - type: icon
                                                        icon: mdi:skip-previous
                                                        style:
                                                          background: 'rgba(255,255,255,0.2)'
                                                          right: 50px
                                                          bottom: 100px
                                                        tap_action:
                                                          action: call-service
                                                          service: imagedirectory.camera_prev_image
                                                          service_data:
                                                            entity_id: camera.slideshow_kitchen
                                                      - type: icon
                                                        icon: mdi:skip-next
                                                        style:
                                                          background: 'rgba(255,255,255,0.2)'
                                                          right: 0px
                                                          bottom: 100px
                                                        tap_action:
                                                          action: call-service
                                                          service: imagedirectory.camera_next_image
                                                          service_data:
                                                            entity_id: camera.slideshow_kitchen
                                                      - type: conditional
                                                        conditions:
                                                          - entity: camera.slideshow_kitchen
                                                            state: streaming
                                                        elements:
                                                          - type: icon
                                                            icon: mdi:pause
                                                            style:
                                                              background: 'rgba(255,255,255,0.2)'
                                                              right: 25px
                                                              bottom: 100px
                                                            tap_action:
                                                              action: call-service
                                                              service: imagedirectory.camera_toggle_pause
                                                              service_data:
                                                                entity_id: camera.slideshow_kitchen
                                                      - type: conditional
                                                        conditions:
                                                          - entity: camera.slideshow_kitchen
                                                            state: paused
                                                        elements:
                                                          - type: icon
                                                            icon: mdi:play
                                                            style:
                                                              background: 'rgba(255,255,255,0.2)'
                                                              right: 25px
                                                              bottom: 100px
                                                            tap_action:
                                                              action: call-service
                                                              service: imagedirectory.camera_toggle_pause
                                                              service_data:
                                                                entity_id: camera.slideshow_kitchen
                                                    card_mod:
                                                      style: |
                                                        ha-card:before {
                                                          transform: translate3d(0,0,0);
                                                          -webkit-transform: translate3d(0,0,0);
                                                          content: "";
                                                          position: absolute;
                                                          height: 100%;
                                                          width: 100%;
                                                          background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                                          {% if not is_state('camera.kitchen', 'unavailable') %}
                                                            background: url( '{{ state_attr('camera.kitchen', 'entity_picture') }}' ) center no-repeat;
                                                          {% endif %}
                                                          filter: blur(150px) saturate(200%);
                                                          background-size: 100% 100%;
                                                        }
                                                        ha-card {
                                                          transform: translate3d(0,0,0);
                                                          -webkit-transform: translate3d(0,0,0);
                                                        }
                                        card_mod:
                                          style: |
                                            mushroom-shape-icon {
                                              display: flex;
                                                --card-mod-icon: mdi:cctv;
                                              {{ 'animation: none;' if not is_state(config.entity, 'unavailable') }}
                                            }
                                            @keyframes flicker {
                                              0%, 31.98%, 32.98%, 34.98%, 36.98%, 39.98%, 67.98%, 68.98%, 95.98%, 96.98%, 97.98%, 98.98%, 100% { --icon-color: rgba(var(--rgb-indigo), 1); }
                                              32%, 33%, 35%, 36%, 37%, 40%, 68%, 69%, 96%, 97%, 98%, 99% { --icon-color: rgba(var(--rgb-indigo), 0.6); }
                                            }
                                            @keyframes beat {
                                              0%, 60% { --icon-symbol-size: 21px; }
                                              5%, 17%, 57% { --icon-symbol-size: 22px; }
                                              10%, 20%, 51% { --icon-symbol-size: 23px; }
                                              25%, 45% { --icon-symbol-size: 24px; }
                                              30%, 39% { --icon-symbol-size: 25px; }
                                              33% { --icon-symbol-size: 26px; }
                                            }
                                            ha-card {
                                              --ha-card-border-width: 0;
                                            }
                                            ha-card:before {
                                              transform: translate3d(0,0,0);
                                              -webkit-transform: translate3d(0,0,0);
                                              content: "";
                                              background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                              {% if not is_state(config.entity, 'unavailable') %}
                                                background: url( '{{ state_attr(config.entity, 'entity_picture') }}') center no-repeat;
                                              {% endif %}
                                              background-size: contain;
                                              margin: 4px 4px 16px;
                                              filter: drop-shadow(4px 4px 6px rgba(0, 0, 0, 0.5));
                                              border-radius: var(--control-border-radius);
                                              {% if not is_state(config.entity, 'unavailable') %}
                                                aspect-ratio: 4 / 3;
                                              {% else %}
                                                aspect-ratio: 1 / 1;
                                              {% endif %}
                                            }
                                    card_mod:
                                      style: |
                                        ha-card:before {
                                          transform: translate3d(0,0,0);
                                          -webkit-transform: translate3d(0,0,0);
                                          content: "";
                                          position: absolute;
                                          height: 100%;
                                          width: 100%;
                                          background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                          {% if not is_state('camera.kitchen', 'unavailable') %}
                                            background: url( '{{ state_attr('camera.kitchen', 'entity_picture') }}' ) center no-repeat;
                                          {% endif %}
                                          filter: blur(150px) saturate(200%);
                                          background-size: 100% 100%;
                                        }
                                        ha-card {
                                          transform: translate3d(0,0,0);
                                          -webkit-transform: translate3d(0,0,0);
                                        }
                                  - square: false
                                    columns: 3
                                    type: grid
                                    cards:
                                      - type: custom:mushroom-template-card
                                        primary: 주방
                                        secondary: 주방측
                                        icon: mdi:video-box
                                        icon_color: red
                                        #layout: vertical
                                        entity: script.camera_preset_synology_kc_kitchen
                                        tap_action:
                                          action: call-service
                                          service: script.turn_on
                                          service_data:
                                            entity_id: script.camera_preset_synology_kc_kitchen
                                      - type: custom:mushroom-template-card
                                        primary: 주방
                                        secondary: 식탁측
                                        icon: mdi:video-box
                                        icon_color: red
                                        #layout: vertical
                                        entity: script.camera_preset_synology_kc_kitchen_table
                                        tap_action:
                                          action: call-service
                                          service: script.turn_on
                                          service_data:
                                            entity_id: script.camera_preset_synology_kc_kitchen_table
                                      - type: custom:mushroom-template-card
                                        primary: 주방
                                        secondary: 보호
                                        icon: mdi:video-box-off
                                        icon_color: cyan
                                        #layout: vertical
                                        entity: script.camera_preset_synology_kc_privacy
                                        tap_action:
                                          action: call-service
                                          service: script.turn_on
                                          service_data:
                                            entity_id: script.camera_preset_synology_kc_privacy
                        card_mod:
                          style: |
                            ha-card {
                              {% if is_state(config.entity, 'on') %}
                                background-image: url( '{{ state_attr('camera.kitchen', 'entity_picture') }}' );
                                background-position: center;
                                background-repeat: no-repeat;
                                background-size: cover;
                                background-color: rgba(var(--rgb-card-background-color),0.5);
                                background-blend-mode: overlay;
                                --primary-text-color: transparent;
                                --secondary-text-color: transparent;
                              {% else %}
                                background-color: rgba(var(--rgb-card-background-color),0.8);
                              {% endif %}
                            }
                            ha-card:active {
                              background: rgba(var(--rgb-disabled), 0.9);
                              transform: scale(0.915);
                              transition: 0s;
                            }
                            mushroom-shape-icon {
                              --icon-size: 65px;
                            }
                      - type: custom:mushroom-template-card
                        entity: binary_sensor.0x00158d00045225c2_occupancy
                        primary: ''
                        secondary: Sonroom
                        layout: vertical
                        icon_color: >-
                          {% if is_state(config.entity, 'on') %}
                            disable
                          {% else %}
                            blue
                          {% endif %}
                        icon: >-
                          {% if is_state(config.entity, 'on') %}
                            disable
                          {% else %}
                            mdi:cctv
                          {% endif %}
                        hold_action:
                          action: none
                        double_tap_action:
                          action: none
                        tap_action:
                          action: fire-dom-event
                          haptic: heavy
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              style: '--mdc-theme-surface: rgba(var(--rgb-primary-text-color), 0.5);'
                              size: normal
                              content:
                                type: vertical-stack
                                cards:
                                  - type: custom:stack-in-card
                                    cards:
                                      - type: custom:mushroom-media-player-card
                                        entity: camera.sonroom
                                        name: Sonroom
                                        icon: mdi:play
                                        use_media_info: true
                                        use_media_artwork: false
                                        show_volume_level: false
                                        fill_container: false
                                        tap_action:
                                          action: fire-dom-event
                                          haptic: heavy
                                          browser_mod:
                                            service: browser_mod.popup
                                            data:
                                              style: '--mdc-theme-surface: rgba(var(--rgb-primary-text-color), 0.5);'
                                              size: normal
                                              content:
                                                type: vertical-stack
                                                cards:
                                                  - type: picture-elements
                                                    title: " "
                                                    entity: camera.slideshow_sonroom
                                                    camera_image: camera.slideshow_sonroom
                                                    camera_view: live
                                                    aspect_ratio: 100%
                                                    elements:
                                                      - type: icon
                                                        icon: mdi:skip-previous
                                                        style:
                                                          background: 'rgba(255,255,255,0.2)'
                                                          right: 50px
                                                          bottom: 100px
                                                        tap_action:
                                                          action: call-service
                                                          service: imagedirectory.camera_prev_image
                                                          service_data:
                                                            entity_id: camera.slideshow_sonroom
                                                      - type: icon
                                                        icon: mdi:skip-next
                                                        style:
                                                          background: 'rgba(255,255,255,0.2)'
                                                          right: 0px
                                                          bottom: 100px
                                                        tap_action:
                                                          action: call-service
                                                          service: imagedirectory.camera_next_image
                                                          service_data:
                                                            entity_id: camera.slideshow_sonroom
                                                      - type: conditional
                                                        conditions:
                                                          - entity: camera.slideshow_sonroom
                                                            state: streaming
                                                        elements:
                                                          - type: icon
                                                            icon: mdi:pause
                                                            style:
                                                              background: 'rgba(255,255,255,0.2)'
                                                              right: 25px
                                                              bottom: 100px
                                                            tap_action:
                                                              action: call-service
                                                              service: imagedirectory.camera_toggle_pause
                                                              service_data:
                                                                entity_id: camera.slideshow_sonroom
                                                      - type: conditional
                                                        conditions:
                                                          - entity: camera.slideshow_sonroom
                                                            state: paused
                                                        elements:
                                                          - type: icon
                                                            icon: mdi:play
                                                            style:
                                                              background: 'rgba(255,255,255,0.2)'
                                                              right: 25px
                                                              bottom: 100px
                                                            tap_action:
                                                              action: call-service
                                                              service: imagedirectory.camera_toggle_pause
                                                              service_data:
                                                                entity_id: camera.slideshow_sonroom
                                                    card_mod:
                                                      style: |
                                                        ha-card:before {
                                                          transform: translate3d(0,0,0);
                                                          -webkit-transform: translate3d(0,0,0);
                                                          content: "";
                                                          position: absolute;
                                                          height: 100%;
                                                          width: 100%;
                                                          background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                                          {% if not is_state('camera.sonroom', 'unavailable') %}
                                                            background: url( '{{ state_attr('camera.sonroom', 'entity_picture') }}' ) center no-repeat;
                                                          {% endif %}
                                                          filter: blur(150px) saturate(200%);
                                                          background-size: 100% 100%;
                                                        }
                                                        ha-card {
                                                          transform: translate3d(0,0,0);
                                                          -webkit-transform: translate3d(0,0,0);
                                                        }
                                        card_mod:
                                          style: |
                                            mushroom-shape-icon {
                                              display: flex;
                                                --card-mod-icon: mdi:cctv;
                                              {{ 'animation: none;' if not is_state(config.entity, 'unavailable') }}
                                            }
                                            @keyframes flicker {
                                              0%, 31.98%, 32.98%, 34.98%, 36.98%, 39.98%, 67.98%, 68.98%, 95.98%, 96.98%, 97.98%, 98.98%, 100% { --icon-color: rgba(var(--rgb-indigo), 1); }
                                              32%, 33%, 35%, 36%, 37%, 40%, 68%, 69%, 96%, 97%, 98%, 99% { --icon-color: rgba(var(--rgb-indigo), 0.6); }
                                            }
                                            @keyframes beat {
                                              0%, 60% { --icon-symbol-size: 21px; }
                                              5%, 17%, 57% { --icon-symbol-size: 22px; }
                                              10%, 20%, 51% { --icon-symbol-size: 23px; }
                                              25%, 45% { --icon-symbol-size: 24px; }
                                              30%, 39% { --icon-symbol-size: 25px; }
                                              33% { --icon-symbol-size: 26px; }
                                            }
                                            ha-card {
                                              --ha-card-border-width: 0;
                                            }
                                            ha-card:before {
                                              transform: translate3d(0,0,0);
                                              -webkit-transform: translate3d(0,0,0);
                                              content: "";
                                              background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                              {% if not is_state(config.entity, 'unavailable') %}
                                                background: url( '{{ state_attr(config.entity, 'entity_picture') }}') center no-repeat;
                                              {% endif %}
                                              background-size: contain;
                                              margin: 4px 4px 16px;
                                              filter: drop-shadow(4px 4px 6px rgba(0, 0, 0, 0.5));
                                              border-radius: var(--control-border-radius);
                                              {% if not is_state(config.entity, 'unavailable') %}
                                                aspect-ratio: 4 / 3;
                                              {% else %}
                                                aspect-ratio: 1 / 1;
                                              {% endif %}
                                            }
                                    card_mod:
                                      style: |
                                        ha-card:before {
                                          transform: translate3d(0,0,0);
                                          -webkit-transform: translate3d(0,0,0);
                                          content: "";
                                          position: absolute;
                                          height: 100%;
                                          width: 100%;
                                          background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                          {% if not is_state('camera.sonroom', 'unavailable') %}
                                            background: url( '{{ state_attr('camera.sonroom', 'entity_picture') }}' ) center no-repeat;
                                          {% endif %}
                                          filter: blur(150px) saturate(200%);
                                          background-size: 100% 100%;
                                        }
                                        ha-card {
                                          transform: translate3d(0,0,0);
                                          -webkit-transform: translate3d(0,0,0);
                                        }
                        card_mod:
                          style: |
                            ha-card {
                              {% if is_state(config.entity, 'on') %}
                                background-image: url( '{{ state_attr('camera.sonroom', 'entity_picture') }}' );
                                background-position: center;
                                background-repeat: no-repeat;
                                background-size: cover;
                                background-color: rgba(var(--rgb-card-background-color),0.5);
                                background-blend-mode: overlay;
                                --primary-text-color: transparent;
                                --secondary-text-color: transparent;
                              {% else %}
                                background-color: rgba(var(--rgb-card-background-color),0.8);
                              {% endif %}
                            }
                            ha-card:active {
                              background: rgba(var(--rgb-disabled), 0.9);
                              transform: scale(0.915);
                              transition: 0s;
                            }
                            mushroom-shape-icon {
                              --icon-size: 65px;
                            }
                      - type: custom:mushroom-template-card
                        entity: binary_sensor.0x00158d00040c3dbf_occupancy
                        primary: ''
                        secondary: Studyroom
                        layout: vertical
                        icon_color: >-
                          {% if is_state(config.entity, 'on') %}
                            disable
                          {% else %}
                            blue
                          {% endif %}
                        icon: >-
                          {% if is_state(config.entity, 'on') %}
                            disable
                          {% else %}
                            mdi:cctv
                          {% endif %}
                        hold_action:
                          action: none
                        double_tap_action:
                          action: none
                        tap_action:
                          action: fire-dom-event
                          haptic: heavy
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              style: '--mdc-theme-surface: rgba(var(--rgb-primary-text-color), 0.5);'
                              size: normal
                              content:
                                type: vertical-stack
                                cards:
                                  - type: custom:stack-in-card
                                    cards:
                                      - type: custom:mushroom-media-player-card
                                        entity: camera.studyroom
                                        name: Studyroom
                                        icon: mdi:play
                                        use_media_info: true
                                        use_media_artwork: false
                                        show_volume_level: false
                                        fill_container: false
                                        tap_action:
                                          action: fire-dom-event
                                          haptic: heavy
                                          browser_mod:
                                            service: browser_mod.popup
                                            data:
                                              style: '--mdc-theme-surface: rgba(var(--rgb-primary-text-color), 0.5);'
                                              size: normal
                                              content:
                                                type: vertical-stack
                                                cards:
                                                  - type: picture-elements
                                                    title: " "
                                                    entity: camera.slideshow_studyroom
                                                    camera_image: camera.slideshow_studyroom
                                                    camera_view: live
                                                    aspect_ratio: 100%
                                                    elements:
                                                      - type: icon
                                                        icon: mdi:skip-previous
                                                        style:
                                                          background: 'rgba(255,255,255,0.2)'
                                                          right: 50px
                                                          bottom: 100px
                                                        tap_action:
                                                          action: call-service
                                                          service: imagedirectory.camera_prev_image
                                                          service_data:
                                                            entity_id: camera.slideshow_studyroom
                                                      - type: icon
                                                        icon: mdi:skip-next
                                                        style:
                                                          background: 'rgba(255,255,255,0.2)'
                                                          right: 0px
                                                          bottom: 100px
                                                        tap_action:
                                                          action: call-service
                                                          service: imagedirectory.camera_next_image
                                                          service_data:
                                                            entity_id: camera.slideshow_studyroom
                                                      - type: conditional
                                                        conditions:
                                                          - entity: camera.slideshow_studyroom
                                                            state: streaming
                                                        elements:
                                                          - type: icon
                                                            icon: mdi:pause
                                                            style:
                                                              background: 'rgba(255,255,255,0.2)'
                                                              right: 25px
                                                              bottom: 100px
                                                            tap_action:
                                                              action: call-service
                                                              service: imagedirectory.camera_toggle_pause
                                                              service_data:
                                                                entity_id: camera.slideshow_studyroom
                                                      - type: conditional
                                                        conditions:
                                                          - entity: camera.slideshow_studyroom
                                                            state: paused
                                                        elements:
                                                          - type: icon
                                                            icon: mdi:play
                                                            style:
                                                              background: 'rgba(255,255,255,0.2)'
                                                              right: 25px
                                                              bottom: 100px
                                                            tap_action:
                                                              action: call-service
                                                              service: imagedirectory.camera_toggle_pause
                                                              service_data:
                                                                entity_id: camera.slideshow_studyroom
                                                    card_mod:
                                                      style: |
                                                        ha-card:before {
                                                          transform: translate3d(0,0,0);
                                                          -webkit-transform: translate3d(0,0,0);
                                                          content: "";
                                                          position: absolute;
                                                          height: 100%;
                                                          width: 100%;
                                                          background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                                          {% if not is_state('camera.studyroom', 'unavailable') %}
                                                            background: url( '{{ state_attr('camera.studyroom', 'entity_picture') }}' ) center no-repeat;
                                                          {% endif %}
                                                          filter: blur(150px) saturate(200%);
                                                          background-size: 100% 100%;
                                                        }
                                                        ha-card {
                                                          transform: translate3d(0,0,0);
                                                          -webkit-transform: translate3d(0,0,0);
                                                        }
                                        card_mod:
                                          style: |
                                            mushroom-shape-icon {
                                              display: flex;
                                                --card-mod-icon: mdi:cctv;
                                              {{ 'animation: none;' if not is_state(config.entity, 'unavailable') }}
                                            }
                                            @keyframes flicker {
                                              0%, 31.98%, 32.98%, 34.98%, 36.98%, 39.98%, 67.98%, 68.98%, 95.98%, 96.98%, 97.98%, 98.98%, 100% { --icon-color: rgba(var(--rgb-indigo), 1); }
                                              32%, 33%, 35%, 36%, 37%, 40%, 68%, 69%, 96%, 97%, 98%, 99% { --icon-color: rgba(var(--rgb-indigo), 0.6); }
                                            }
                                            @keyframes beat {
                                              0%, 60% { --icon-symbol-size: 21px; }
                                              5%, 17%, 57% { --icon-symbol-size: 22px; }
                                              10%, 20%, 51% { --icon-symbol-size: 23px; }
                                              25%, 45% { --icon-symbol-size: 24px; }
                                              30%, 39% { --icon-symbol-size: 25px; }
                                              33% { --icon-symbol-size: 26px; }
                                            }
                                            ha-card {
                                              --ha-card-border-width: 0;
                                            }
                                            ha-card:before {
                                              transform: translate3d(0,0,0);
                                              -webkit-transform: translate3d(0,0,0);
                                              content: "";
                                              background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                              {% if not is_state(config.entity, 'unavailable') %}
                                                background: url( '{{ state_attr(config.entity, 'entity_picture') }}') center no-repeat;
                                              {% endif %}
                                              background-size: contain;
                                              margin: 4px 4px 16px;
                                              filter: drop-shadow(4px 4px 6px rgba(0, 0, 0, 0.5));
                                              border-radius: var(--control-border-radius);
                                              {% if not is_state(config.entity, 'unavailable') %}
                                                aspect-ratio: 4 / 3;
                                              {% else %}
                                                aspect-ratio: 1 / 1;
                                              {% endif %}
                                            }
                                    card_mod:
                                      style: |
                                        ha-card:before {
                                          transform: translate3d(0,0,0);
                                          -webkit-transform: translate3d(0,0,0);
                                          content: "";
                                          position: absolute;
                                          height: 100%;
                                          width: 100%;
                                          background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                          {% if not is_state('camera.studyroom', 'unavailable') %}
                                            background: url( '{{ state_attr('camera.studyroom', 'entity_picture') }}' ) center no-repeat;
                                          {% endif %}
                                          filter: blur(150px) saturate(200%);
                                          background-size: 100% 100%;
                                        }
                                        ha-card {
                                          transform: translate3d(0,0,0);
                                          -webkit-transform: translate3d(0,0,0);
                                        }
                                  - square: false
                                    columns: 3
                                    type: grid
                                    cards:
                                      - type: custom:mushroom-template-card
                                        primary: 공부방
                                        secondary: 서재측
                                        icon: mdi:video-box
                                        icon_color: red
                                        #layout: vertical
                                        entity: script.camera_preset_synology_stdr_readingroom
                                        tap_action:
                                          action: call-service
                                          service: script.turn_on
                                          service_data:
                                            entity_id: script.camera_preset_synology_stdr_readingroom
                                      - type: custom:mushroom-template-card
                                        primary: 공부방
                                        secondary: 방측
                                        icon: mdi:video-box
                                        icon_color: red
                                        #layout: vertical
                                        entity: script.camera_preset_synology_stdr_monitoring
                                        tap_action:
                                          action: call-service
                                          service: script.turn_on
                                          service_data:
                                            entity_id: script.camera_preset_synology_stdr_monitoring
                                      - type: custom:mushroom-template-card
                                        primary: 공부방
                                        secondary: 보호
                                        icon: mdi:video-box-off
                                        icon_color: cyan
                                        #layout: vertical
                                        entity: script.camera_preset_synology_stdr_privacy
                                        tap_action:
                                          action: call-service
                                          service: script.turn_on
                                          service_data:
                                            entity_id: script.camera_preset_synology_stdr_privacy
                        card_mod:
                          style: |
                            ha-card {
                              {% if is_state(config.entity, 'on') %}
                                background-image: url( '{{ state_attr('camera.studyroom', 'entity_picture') }}' );
                                background-position: center;
                                background-repeat: no-repeat;
                                background-size: cover;
                                background-color: rgba(var(--rgb-card-background-color),0.5);
                                background-blend-mode: overlay;
                                --primary-text-color: transparent;
                                --secondary-text-color: transparent;
                              {% else %}
                                background-color: rgba(var(--rgb-card-background-color),0.8);
                              {% endif %}
                            }
                            ha-card:active {
                              background: rgba(var(--rgb-disabled), 0.9);
                              transform: scale(0.915);
                              transition: 0s;
                            }
                            mushroom-shape-icon {
                              --icon-size: 65px;
                            }
                      - type: custom:mushroom-template-card
                        entity: sensor.0x00158d00031e9334_door_state
                        primary: ''
                        secondary: Entrance
                        layout: vertical
                        icon_color: >-
                          {% if is_state(config.entity, 'open') %}
                            disable
                          {% else %}
                            blue
                          {% endif %}
                        icon: >-
                          {% if is_state(config.entity, 'open') %}
                            disable
                          {% else %}
                            mdi:cctv
                          {% endif %}
                        hold_action:
                          action: none
                        double_tap_action:
                          action: none
                        tap_action:
                          action: fire-dom-event
                          haptic: heavy
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              style: '--mdc-theme-surface: rgba(var(--rgb-primary-text-color), 0.5);'
                              size: normal
                              content:
                                type: vertical-stack
                                cards:
                                  - type: custom:stack-in-card
                                    cards:
                                      - type: custom:mushroom-media-player-card
                                        entity: camera.entrance
                                        name: Entrance
                                        icon: mdi:play
                                        use_media_info: true
                                        use_media_artwork: false
                                        show_volume_level: false
                                        fill_container: false
                                        tap_action:
                                          action: fire-dom-event
                                          haptic: heavy
                                          browser_mod:
                                            service: browser_mod.popup
                                            data:
                                              style: '--mdc-theme-surface: rgba(var(--rgb-primary-text-color), 0.5);'
                                              size: normal
                                              content:
                                                type: vertical-stack
                                                cards:
                                                  - type: picture-elements
                                                    title: " "
                                                    entity: camera.slideshow_entrance
                                                    camera_image: camera.slideshow_entrance
                                                    camera_view: live
                                                    aspect_ratio: 100%
                                                    elements:
                                                      - type: icon
                                                        icon: mdi:skip-previous
                                                        style:
                                                          background: 'rgba(255,255,255,0.2)'
                                                          right: 50px
                                                          bottom: 100px
                                                        tap_action:
                                                          action: call-service
                                                          service: imagedirectory.camera_prev_image
                                                          service_data:
                                                            entity_id: camera.slideshow_entrance
                                                      - type: icon
                                                        icon: mdi:skip-next
                                                        style:
                                                          background: 'rgba(255,255,255,0.2)'
                                                          right: 0px
                                                          bottom: 100px
                                                        tap_action:
                                                          action: call-service
                                                          service: imagedirectory.camera_next_image
                                                          service_data:
                                                            entity_id: camera.slideshow_entrance
                                                      - type: conditional
                                                        conditions:
                                                          - entity: camera.slideshow_entrance
                                                            state: streaming
                                                        elements:
                                                          - type: icon
                                                            icon: mdi:pause
                                                            style:
                                                              background: 'rgba(255,255,255,0.2)'
                                                              right: 25px
                                                              bottom: 100px
                                                            tap_action:
                                                              action: call-service
                                                              service: imagedirectory.camera_toggle_pause
                                                              service_data:
                                                                entity_id: camera.slideshow_entrance
                                                      - type: conditional
                                                        conditions:
                                                          - entity: camera.slideshow_entrance
                                                            state: paused
                                                        elements:
                                                          - type: icon
                                                            icon: mdi:play
                                                            style:
                                                              background: 'rgba(255,255,255,0.2)'
                                                              right: 25px
                                                              bottom: 100px
                                                            tap_action:
                                                              action: call-service
                                                              service: imagedirectory.camera_toggle_pause
                                                              service_data:
                                                                entity_id: camera.slideshow_entrance
                                                    card_mod:
                                                      style: |
                                                        ha-card:before {
                                                          transform: translate3d(0,0,0);
                                                          -webkit-transform: translate3d(0,0,0);
                                                          content: "";
                                                          position: absolute;
                                                          height: 100%;
                                                          width: 100%;
                                                          background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                                          {% if not is_state('camera.entrance', 'unavailable') %}
                                                            background: url( '{{ state_attr('camera.entrance', 'entity_picture') }}' ) center no-repeat;
                                                          {% endif %}
                                                          filter: blur(150px) saturate(200%);
                                                          background-size: 100% 100%;
                                                        }
                                                        ha-card {
                                                          transform: translate3d(0,0,0);
                                                          -webkit-transform: translate3d(0,0,0);
                                                        }
                                        card_mod:
                                          style: |
                                            mushroom-shape-icon {
                                              display: flex;
                                                --card-mod-icon: mdi:cctv;
                                              {{ 'animation: none;' if not is_state(config.entity, 'unavailable') }}
                                            }
                                            @keyframes flicker {
                                              0%, 31.98%, 32.98%, 34.98%, 36.98%, 39.98%, 67.98%, 68.98%, 95.98%, 96.98%, 97.98%, 98.98%, 100% { --icon-color: rgba(var(--rgb-indigo), 1); }
                                              32%, 33%, 35%, 36%, 37%, 40%, 68%, 69%, 96%, 97%, 98%, 99% { --icon-color: rgba(var(--rgb-indigo), 0.6); }
                                            }
                                            @keyframes beat {
                                              0%, 60% { --icon-symbol-size: 21px; }
                                              5%, 17%, 57% { --icon-symbol-size: 22px; }
                                              10%, 20%, 51% { --icon-symbol-size: 23px; }
                                              25%, 45% { --icon-symbol-size: 24px; }
                                              30%, 39% { --icon-symbol-size: 25px; }
                                              33% { --icon-symbol-size: 26px; }
                                            }
                                            ha-card {
                                              --ha-card-border-width: 0;
                                            }
                                            ha-card:before {
                                              transform: translate3d(0,0,0);
                                              -webkit-transform: translate3d(0,0,0);
                                              content: "";
                                              background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                              {% if not is_state(config.entity, 'unavailable') %}
                                                background: url( '{{ state_attr(config.entity, 'entity_picture') }}') center no-repeat;
                                              {% endif %}
                                              background-size: contain;
                                              margin: 4px 4px 16px;
                                              filter: drop-shadow(4px 4px 6px rgba(0, 0, 0, 0.5));
                                              border-radius: var(--control-border-radius);
                                              {% if not is_state(config.entity, 'unavailable') %}
                                                aspect-ratio: 4 / 3;
                                              {% else %}
                                                aspect-ratio: 1 / 1;
                                              {% endif %}
                                            }
                                    card_mod:
                                      style: |
                                        ha-card:before {
                                          transform: translate3d(0,0,0);
                                          -webkit-transform: translate3d(0,0,0);
                                          content: "";
                                          position: absolute;
                                          height: 100%;
                                          width: 100%;
                                          background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                          {% if not is_state('camera.entrance', 'unavailable') %}
                                            background: url( '{{ state_attr('camera.entrance', 'entity_picture') }}' ) center no-repeat;
                                          {% endif %}
                                          filter: blur(150px) saturate(200%);
                                          background-size: 100% 100%;
                                        }
                                        ha-card {
                                          transform: translate3d(0,0,0);
                                          -webkit-transform: translate3d(0,0,0);
                                        }
                        card_mod:
                          style: |
                            ha-card {
                              {% if is_state(config.entity, 'open') %}
                                background-image: url( '{{ state_attr('camera.entrance', 'entity_picture') }}' );
                                background-position: center;
                                background-repeat: no-repeat;
                                background-size: cover;
                                background-color: rgba(var(--rgb-card-background-color),0.5);
                                background-blend-mode: overlay;
                                --primary-text-color: transparent;
                                --secondary-text-color: transparent;
                              {% else %}
                                background-color: rgba(var(--rgb-card-background-color),0.8);
                              {% endif %}
                            }
                            ha-card:active {
                              background: rgba(var(--rgb-disabled), 0.9);
                              transform: scale(0.915);
                              transition: 0s;
                            }
                            mushroom-shape-icon {
                              --icon-size: 65px;
                            }
                      - type: custom:mushroom-template-card
                        entity: camera.doorbell
                        primary: ''
                        secondary: Doorbell
                        layout: vertical
                        icon_color: >-
                          {% if is_state(config.entity, 'recording') %}
                            disable
                          {% else %}
                            blue
                          {% endif %}
                        icon: >-
                          {% if is_state(config.entity, 'recording') %}
                            disable
                          {% else %}
                            mdi:cctv
                          {% endif %}
                        hold_action:
                          action: none
                        double_tap_action:
                          action: none
                        tap_action:
                          action: fire-dom-event
                          haptic: heavy
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              style: '--mdc-theme-surface: rgba(var(--rgb-primary-text-color), 0.5);'
                              size: normal
                              content:
                                type: vertical-stack
                                cards:
                                  - type: custom:stack-in-card
                                    cards:
                                      - type: custom:mushroom-media-player-card
                                        entity: camera.doorbell
                                        name: Doorbell
                                        icon: mdi:play
                                        use_media_info: true
                                        use_media_artwork: false
                                        show_volume_level: false
                                        fill_container: false
                                        tap_action:
                                          action: fire-dom-event
                                          haptic: heavy
                                          browser_mod:
                                            service: browser_mod.popup
                                            data:
                                              style: '--mdc-theme-surface: rgba(var(--rgb-primary-text-color), 0.5);'
                                              size: normal
                                              content:
                                                type: vertical-stack
                                                cards:
                                                  - type: picture-elements
                                                    title: " "
                                                    entity: camera.slideshow_doorbell
                                                    camera_image: camera.slideshow_doorbell
                                                    camera_view: live
                                                    aspect_ratio: 100%
                                                    elements:
                                                      - type: icon
                                                        icon: mdi:skip-previous
                                                        style:
                                                          background: 'rgba(255,255,255,0.2)'
                                                          right: 50px
                                                          bottom: 100px
                                                        tap_action:
                                                          action: call-service
                                                          service: imagedirectory.camera_prev_image
                                                          service_data:
                                                            entity_id: camera.slideshow_doorbell
                                                      - type: icon
                                                        icon: mdi:skip-next
                                                        style:
                                                          background: 'rgba(255,255,255,0.2)'
                                                          right: 0px
                                                          bottom: 100px
                                                        tap_action:
                                                          action: call-service
                                                          service: imagedirectory.camera_next_image
                                                          service_data:
                                                            entity_id: camera.slideshow_doorbell
                                                      - type: conditional
                                                        conditions:
                                                          - entity: camera.slideshow_doorbell
                                                            state: streaming
                                                        elements:
                                                          - type: icon
                                                            icon: mdi:pause
                                                            style:
                                                              background: 'rgba(255,255,255,0.2)'
                                                              right: 25px
                                                              bottom: 100px
                                                            tap_action:
                                                              action: call-service
                                                              service: imagedirectory.camera_toggle_pause
                                                              service_data:
                                                                entity_id: camera.slideshow_doorbell
                                                      - type: conditional
                                                        conditions:
                                                          - entity: camera.slideshow_doorbell
                                                            state: paused
                                                        elements:
                                                          - type: icon
                                                            icon: mdi:play
                                                            style:
                                                              background: 'rgba(255,255,255,0.2)'
                                                              right: 25px
                                                              bottom: 100px
                                                            tap_action:
                                                              action: call-service
                                                              service: imagedirectory.camera_toggle_pause
                                                              service_data:
                                                                entity_id: camera.slideshow_doorbell
                                                    card_mod:
                                                      style: |
                                                        ha-card:before {
                                                          transform: translate3d(0,0,0);
                                                          -webkit-transform: translate3d(0,0,0);
                                                          content: "";
                                                          position: absolute;
                                                          height: 100%;
                                                          width: 100%;
                                                          background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                                          {% if not is_state('camera.doorbell', 'unavailable') %}
                                                            background: url( '{{ state_attr('camera.doorbell', 'entity_picture') }}' ) center no-repeat;
                                                          {% endif %}
                                                          filter: blur(150px) saturate(200%);
                                                          background-size: 100% 100%;
                                                        }
                                                        ha-card {
                                                          transform: translate3d(0,0,0);
                                                          -webkit-transform: translate3d(0,0,0);
                                                        }
                                        card_mod:
                                          style: |
                                            mushroom-shape-icon {
                                              display: flex;
                                                --card-mod-icon: mdi:cctv;
                                              {{ 'animation: none;' if not is_state(config.entity, 'unavailable') }}
                                            }
                                            @keyframes flicker {
                                              0%, 31.98%, 32.98%, 34.98%, 36.98%, 39.98%, 67.98%, 68.98%, 95.98%, 96.98%, 97.98%, 98.98%, 100% { --icon-color: rgba(var(--rgb-indigo), 1); }
                                              32%, 33%, 35%, 36%, 37%, 40%, 68%, 69%, 96%, 97%, 98%, 99% { --icon-color: rgba(var(--rgb-indigo), 0.6); }
                                            }
                                            @keyframes beat {
                                              0%, 60% { --icon-symbol-size: 21px; }
                                              5%, 17%, 57% { --icon-symbol-size: 22px; }
                                              10%, 20%, 51% { --icon-symbol-size: 23px; }
                                              25%, 45% { --icon-symbol-size: 24px; }
                                              30%, 39% { --icon-symbol-size: 25px; }
                                              33% { --icon-symbol-size: 26px; }
                                            }
                                            ha-card {
                                              --ha-card-border-width: 0;
                                            }
                                            ha-card:before {
                                              transform: translate3d(0,0,0);
                                              -webkit-transform: translate3d(0,0,0);
                                              content: "";
                                              background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                              {% if not is_state(config.entity, 'unavailable') %}
                                                background: url( '{{ state_attr(config.entity, 'entity_picture') }}') center no-repeat;
                                              {% endif %}
                                              background-size: contain;
                                              margin: 4px 4px 16px;
                                              filter: drop-shadow(4px 4px 6px rgba(0, 0, 0, 0.5));
                                              border-radius: var(--control-border-radius);
                                              {% if not is_state(config.entity, 'unavailable') %}
                                                aspect-ratio: 4 / 3;
                                              {% else %}
                                                aspect-ratio: 1 / 1;
                                              {% endif %}
                                            }
                                    card_mod:
                                      style: |
                                        ha-card:before {
                                          transform: translate3d(0,0,0);
                                          -webkit-transform: translate3d(0,0,0);
                                          content: "";
                                          position: absolute;
                                          height: 100%;
                                          width: 100%;
                                          background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                          {% if not is_state('camera.doorbell', 'unavailable') %}
                                            background: url( '{{ state_attr('camera.doorbell', 'entity_picture') }}' ) center no-repeat;
                                          {% endif %}
                                          filter: blur(150px) saturate(200%);
                                          background-size: 100% 100%;
                                        }
                                        ha-card {
                                          transform: translate3d(0,0,0);
                                          -webkit-transform: translate3d(0,0,0);
                                        }
                        card_mod:
                          style: |
                            ha-card {
                              {% if is_state(config.entity, 'recording') %}
                                background-image: url( '{{ state_attr(config.entity, 'entity_picture') }}' );
                                background-position: center;
                                background-repeat: no-repeat;
                                background-size: cover;
                                background-color: rgba(var(--rgb-card-background-color),0.5);
                                background-blend-mode: overlay;
                                --primary-text-color: transparent;
                                --secondary-text-color: transparent;
                              {% else %}
                                background-color: rgba(var(--rgb-card-background-color),0.8);
                              {% endif %}
                            }
                            ha-card:active {
                              background: rgba(var(--rgb-disabled), 0.9);
                              transform: scale(0.915);
                              transition: 0s;
                            }
                            mushroom-shape-icon {
                              --icon-size: 65px;
                            }
                      - type: custom:mushroom-template-card
                        entity: lock.0x00158d00031e9334
                        primary: ''
                        secondary: Parcel
                        layout: vertical
                        icon_color: >-
                          {% if is_state(config.entity, 'unlock') %}
                            disable
                          {% else %}
                            blue
                          {% endif %}
                        icon: >-
                          {% if is_state(config.entity, 'unlock') %}
                            disable
                          {% else %}
                            mdi:cctv
                          {% endif %}
                        hold_action:
                          action: none
                        double_tap_action:
                          action: none
                        tap_action:
                          action: fire-dom-event
                          haptic: heavy
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              style: '--mdc-theme-surface: rgba(var(--rgb-primary-text-color), 0.5);'
                              size: normal
                              content:
                                type: vertical-stack
                                cards:
                                  - type: custom:stack-in-card
                                    cards:
                                      - type: custom:mushroom-media-player-card
                                        entity: camera.parcel
                                        name: Parcel
                                        icon: mdi:play
                                        use_media_info: true
                                        use_media_artwork: false
                                        show_volume_level: false
                                        fill_container: false
                                        tap_action:
                                          action: fire-dom-event
                                          haptic: heavy
                                          browser_mod:
                                            service: browser_mod.popup
                                            data:
                                              style: '--mdc-theme-surface: rgba(var(--rgb-primary-text-color), 0.5);'
                                              size: normal
                                              content:
                                                type: vertical-stack
                                                cards:
                                                  - type: picture-elements
                                                    title: " "
                                                    entity: camera.slideshow_parcel
                                                    camera_image: camera.slideshow_parcel
                                                    camera_view: live
                                                    aspect_ratio: 100%
                                                    elements:
                                                      - type: icon
                                                        icon: mdi:skip-previous
                                                        style:
                                                          background: 'rgba(255,255,255,0.2)'
                                                          right: 50px
                                                          bottom: 100px
                                                        tap_action:
                                                          action: call-service
                                                          service: imagedirectory.camera_prev_image
                                                          service_data:
                                                            entity_id: camera.slideshow_parcel
                                                      - type: icon
                                                        icon: mdi:skip-next
                                                        style:
                                                          background: 'rgba(255,255,255,0.2)'
                                                          right: 0px
                                                          bottom: 100px
                                                        tap_action:
                                                          action: call-service
                                                          service: imagedirectory.camera_next_image
                                                          service_data:
                                                            entity_id: camera.slideshow_parcel
                                                      - type: conditional
                                                        conditions:
                                                          - entity: camera.slideshow_parcel
                                                            state: streaming
                                                        elements:
                                                          - type: icon
                                                            icon: mdi:pause
                                                            style:
                                                              background: 'rgba(255,255,255,0.2)'
                                                              right: 25px
                                                              bottom: 100px
                                                            tap_action:
                                                              action: call-service
                                                              service: imagedirectory.camera_toggle_pause
                                                              service_data:
                                                                entity_id: camera.slideshow_parcel
                                                      - type: conditional
                                                        conditions:
                                                          - entity: camera.slideshow_parcel
                                                            state: paused
                                                        elements:
                                                          - type: icon
                                                            icon: mdi:play
                                                            style:
                                                              background: 'rgba(255,255,255,0.2)'
                                                              right: 25px
                                                              bottom: 100px
                                                            tap_action:
                                                              action: call-service
                                                              service: imagedirectory.camera_toggle_pause
                                                              service_data:
                                                                entity_id: camera.slideshow_parcel
                                                    card_mod:
                                                      style: |
                                                        ha-card:before {
                                                          transform: translate3d(0,0,0);
                                                          -webkit-transform: translate3d(0,0,0);
                                                          content: "";
                                                          position: absolute;
                                                          height: 100%;
                                                          width: 100%;
                                                          background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                                          {% if not is_state('camera.parcel', 'unavailable') %}
                                                            background: url( '{{ state_attr('camera.parcel', 'entity_picture') }}' ) center no-repeat;
                                                          {% endif %}
                                                          filter: blur(150px) saturate(200%);
                                                          background-size: 100% 100%;
                                                        }
                                                        ha-card {
                                                          transform: translate3d(0,0,0);
                                                          -webkit-transform: translate3d(0,0,0);
                                                        }
                                        card_mod:
                                          style: |
                                            mushroom-shape-icon {
                                              display: flex;
                                                --card-mod-icon: mdi:cctv;
                                              {{ 'animation: none;' if not is_state(config.entity, 'unavailable') }}
                                            }
                                            @keyframes flicker {
                                              0%, 31.98%, 32.98%, 34.98%, 36.98%, 39.98%, 67.98%, 68.98%, 95.98%, 96.98%, 97.98%, 98.98%, 100% { --icon-color: rgba(var(--rgb-indigo), 1); }
                                              32%, 33%, 35%, 36%, 37%, 40%, 68%, 69%, 96%, 97%, 98%, 99% { --icon-color: rgba(var(--rgb-indigo), 0.6); }
                                            }
                                            @keyframes beat {
                                              0%, 60% { --icon-symbol-size: 21px; }
                                              5%, 17%, 57% { --icon-symbol-size: 22px; }
                                              10%, 20%, 51% { --icon-symbol-size: 23px; }
                                              25%, 45% { --icon-symbol-size: 24px; }
                                              30%, 39% { --icon-symbol-size: 25px; }
                                              33% { --icon-symbol-size: 26px; }
                                            }
                                            ha-card {
                                              --ha-card-border-width: 0;
                                            }
                                            ha-card:before {
                                              transform: translate3d(0,0,0);
                                              -webkit-transform: translate3d(0,0,0);
                                              content: "";
                                              background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                              {% if not is_state(config.entity, 'unavailable') %}
                                                background: url( '{{ state_attr(config.entity, 'entity_picture') }}') center no-repeat;
                                              {% endif %}
                                              background-size: contain;
                                              margin: 4px 4px 16px;
                                              filter: drop-shadow(4px 4px 6px rgba(0, 0, 0, 0.5));
                                              border-radius: var(--control-border-radius);
                                              {% if not is_state(config.entity, 'unavailable') %}
                                                aspect-ratio: 4 / 3;
                                              {% else %}
                                                aspect-ratio: 1 / 1;
                                              {% endif %}
                                            }
                                    card_mod:
                                      style: |
                                        ha-card:before {
                                          transform: translate3d(0,0,0);
                                          -webkit-transform: translate3d(0,0,0);
                                          content: "";
                                          position: absolute;
                                          height: 100%;
                                          width: 100%;
                                          background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                          {% if not is_state('camera.parcel', 'unavailable') %}
                                            background: url( '{{ state_attr('camera.parcel', 'entity_picture') }}' ) center no-repeat;
                                          {% endif %}
                                          filter: blur(150px) saturate(200%);
                                          background-size: 100% 100%;
                                        }
                                        ha-card {
                                          transform: translate3d(0,0,0);
                                          -webkit-transform: translate3d(0,0,0);
                                        }
                        card_mod:
                          style: |
                            ha-card {
                              {% if is_state(config.entity, 'unlock') %}
                                background-image: url( '{{ state_attr('camera.parcel', 'entity_picture') }}' );
                                background-position: center;
                                background-repeat: no-repeat;
                                background-size: cover;
                                background-color: rgba(var(--rgb-card-background-color),0.5);
                                background-blend-mode: overlay;
                                --primary-text-color: transparent;
                                --secondary-text-color: transparent;
                              {% else %}
                                background-color: rgba(var(--rgb-card-background-color),0.8);
                              {% endif %}
                            }
                            ha-card:active {
                              background: rgba(var(--rgb-disabled), 0.9);
                              transform: scale(0.915);
                              transition: 0s;
                            }
                            mushroom-shape-icon {
                              --icon-size: 65px;
                            }
                      - type: custom:mushroom-template-card
                        entity: camera.veranda
                        primary: ''
                        secondary: Veranda
                        layout: vertical
                        icon_color: >-
                          {% if is_state(config.entity, 'recording') %}
                            disable
                          {% else %}
                            blue
                          {% endif %}
                        icon: >-
                          {% if is_state(config.entity, 'recording') %}
                            disable
                          {% else %}
                            mdi:cctv
                          {% endif %}
                        hold_action:
                          action: none
                        double_tap_action:
                          action: none
                        tap_action:
                          action: fire-dom-event
                          haptic: heavy
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              style: '--mdc-theme-surface: rgba(var(--rgb-primary-text-color), 0.5);'
                              size: normal
                              content:
                                type: vertical-stack
                                cards:
                                  - type: custom:stack-in-card
                                    cards:
                                      - type: custom:mushroom-media-player-card
                                        entity: camera.veranda
                                        name: Veranda
                                        icon: mdi:play
                                        use_media_info: true
                                        use_media_artwork: false
                                        show_volume_level: false
                                        fill_container: false
                                        tap_action:
                                          action: fire-dom-event
                                          haptic: heavy
                                          browser_mod:
                                            service: browser_mod.popup
                                            data:
                                              style: '--mdc-theme-surface: rgba(var(--rgb-primary-text-color), 0.5);'
                                              size: normal
                                              content:
                                                type: vertical-stack
                                                cards:
                                                  - type: picture-elements
                                                    title: " "
                                                    entity: camera.slideshow_veranda
                                                    camera_image: camera.slideshow_veranda
                                                    camera_view: live
                                                    aspect_ratio: 100%
                                                    elements:
                                                      - type: icon
                                                        icon: mdi:skip-previous
                                                        style:
                                                          background: 'rgba(255,255,255,0.2)'
                                                          right: 50px
                                                          bottom: 100px
                                                        tap_action:
                                                          action: call-service
                                                          service: imagedirectory.camera_prev_image
                                                          service_data:
                                                            entity_id: camera.slideshow_veranda
                                                      - type: icon
                                                        icon: mdi:skip-next
                                                        style:
                                                          background: 'rgba(255,255,255,0.2)'
                                                          right: 0px
                                                          bottom: 100px
                                                        tap_action:
                                                          action: call-service
                                                          service: imagedirectory.camera_next_image
                                                          service_data:
                                                            entity_id: camera.slideshow_veranda
                                                      - type: conditional
                                                        conditions:
                                                          - entity: camera.slideshow_veranda
                                                            state: streaming
                                                        elements:
                                                          - type: icon
                                                            icon: mdi:pause
                                                            style:
                                                              background: 'rgba(255,255,255,0.2)'
                                                              right: 25px
                                                              bottom: 100px
                                                            tap_action:
                                                              action: call-service
                                                              service: imagedirectory.camera_toggle_pause
                                                              service_data:
                                                                entity_id: camera.slideshow_veranda
                                                      - type: conditional
                                                        conditions:
                                                          - entity: camera.slideshow_veranda
                                                            state: paused
                                                        elements:
                                                          - type: icon
                                                            icon: mdi:play
                                                            style:
                                                              background: 'rgba(255,255,255,0.2)'
                                                              right: 25px
                                                              bottom: 100px
                                                            tap_action:
                                                              action: call-service
                                                              service: imagedirectory.camera_toggle_pause
                                                              service_data:
                                                                entity_id: camera.slideshow_veranda
                                                    card_mod:
                                                      style: |
                                                        ha-card:before {
                                                          transform: translate3d(0,0,0);
                                                          -webkit-transform: translate3d(0,0,0);
                                                          content: "";
                                                          position: absolute;
                                                          height: 100%;
                                                          width: 100%;
                                                          background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                                          {% if not is_state('camera.veranda', 'unavailable') %}
                                                            background: url( '{{ state_attr('camera.veranda', 'entity_picture') }}' ) center no-repeat;
                                                          {% endif %}
                                                          filter: blur(150px) saturate(200%);
                                                          background-size: 100% 100%;
                                                        }
                                                        ha-card {
                                                          transform: translate3d(0,0,0);
                                                          -webkit-transform: translate3d(0,0,0);
                                                        }
                                        card_mod:
                                          style: |
                                            mushroom-shape-icon {
                                              display: flex;
                                                --card-mod-icon: mdi:cctv;
                                              {{ 'animation: none;' if not is_state(config.entity, 'unavailable') }}
                                            }
                                            @keyframes flicker {
                                              0%, 31.98%, 32.98%, 34.98%, 36.98%, 39.98%, 67.98%, 68.98%, 95.98%, 96.98%, 97.98%, 98.98%, 100% { --icon-color: rgba(var(--rgb-indigo), 1); }
                                              32%, 33%, 35%, 36%, 37%, 40%, 68%, 69%, 96%, 97%, 98%, 99% { --icon-color: rgba(var(--rgb-indigo), 0.6); }
                                            }
                                            @keyframes beat {
                                              0%, 60% { --icon-symbol-size: 21px; }
                                              5%, 17%, 57% { --icon-symbol-size: 22px; }
                                              10%, 20%, 51% { --icon-symbol-size: 23px; }
                                              25%, 45% { --icon-symbol-size: 24px; }
                                              30%, 39% { --icon-symbol-size: 25px; }
                                              33% { --icon-symbol-size: 26px; }
                                            }
                                            ha-card {
                                              --ha-card-border-width: 0;
                                            }
                                            ha-card:before {
                                              transform: translate3d(0,0,0);
                                              -webkit-transform: translate3d(0,0,0);
                                              content: "";
                                              background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                              {% if not is_state(config.entity, 'unavailable') %}
                                                background: url( '{{ state_attr(config.entity, 'entity_picture') }}') center no-repeat;
                                              {% endif %}
                                              background-size: contain;
                                              margin: 4px 4px 16px;
                                              filter: drop-shadow(4px 4px 6px rgba(0, 0, 0, 0.5));
                                              border-radius: var(--control-border-radius);
                                              {% if not is_state(config.entity, 'unavailable') %}
                                                aspect-ratio: 4 / 3;
                                              {% else %}
                                                aspect-ratio: 1 / 1;
                                              {% endif %}
                                            }
                                    card_mod:
                                      style: |
                                        ha-card:before {
                                          transform: translate3d(0,0,0);
                                          -webkit-transform: translate3d(0,0,0);
                                          content: "";
                                          position: absolute;
                                          height: 100%;
                                          width: 100%;
                                          background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                          {% if not is_state('camera.veranda', 'unavailable') %}
                                            background: url( '{{ state_attr('camera.veranda', 'entity_picture') }}' ) center no-repeat;
                                          {% endif %}
                                          filter: blur(150px) saturate(200%);
                                          background-size: 100% 100%;
                                        }
                                        ha-card {
                                          transform: translate3d(0,0,0);
                                          -webkit-transform: translate3d(0,0,0);
                                        }
                                  - square: false
                                    columns: 3
                                    type: grid
                                    cards:
                                      - type: custom:mushroom-template-card
                                        primary: 베란다
                                        secondary: 좌측
                                        icon: mdi:video-box
                                        icon_color: red
                                        #layout: vertical
                                        entity: script.camera_preset_synology_vrd_outside_left
                                        tap_action:
                                          action: call-service
                                          service: script.turn_on
                                          service_data:
                                            entity_id: script.camera_preset_synology_vrd_outside_left
                                      - type: custom:mushroom-template-card
                                        primary: 베란다
                                        secondary: 우측
                                        icon: mdi:video-box
                                        icon_color: red
                                        #layout: vertical
                                        entity: script.camera_preset_synology_vrd_outside_right
                                        tap_action:
                                          action: call-service
                                          service: script.turn_on
                                          service_data:
                                            entity_id: script.camera_preset_synology_vrd_outside_right
                                      - type: custom:mushroom-template-card
                                        primary: 베란다
                                        secondary: 캣타워
                                        icon: mdi:video-box
                                        icon_color: red
                                        #layout: vertical
                                        entity: script.camera_preset_synology_vrd_cattower
                                        tap_action:
                                          action: call-service
                                          service: script.turn_on
                                          service_data:
                                            entity_id: script.camera_preset_synology_vrd_cattower
                        card_mod:
                          style: |
                            ha-card {
                              {% if is_state(config.entity, 'recording') %}
                                background-image: url( '{{ state_attr(config.entity, 'entity_picture') }}' );
                                background-position: center;
                                background-repeat: no-repeat;
                                background-size: cover;
                                background-color: rgba(var(--rgb-card-background-color),0.5);
                                background-blend-mode: overlay;
                                --primary-text-color: transparent;
                                --secondary-text-color: transparent;
                              {% else %}
                                background-color: rgba(var(--rgb-card-background-color),0.8);
                              {% endif %}
                            }
                            ha-card:active {
                              background: rgba(var(--rgb-disabled), 0.9);
                              transform: scale(0.915);
                              transition: 0s;
                            }
                            mushroom-shape-icon {
                              --icon-size: 65px;
                            }
                      - type: custom:mushroom-template-card
                        entity: camera.outside
                        primary: ''
                        secondary: Outside
                        layout: vertical
                        icon_color: >-
                          {% if is_state(config.entity, 'recording') %}
                            disable
                          {% else %}
                            blue
                          {% endif %}
                        icon: >-
                          {% if is_state(config.entity, 'recording') %}
                            disable
                          {% else %}
                            mdi:cctv
                          {% endif %}
                        hold_action:
                          action: none
                        double_tap_action:
                          action: none
                        tap_action:
                          action: fire-dom-event
                          haptic: heavy
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              style: '--mdc-theme-surface: rgba(var(--rgb-primary-text-color), 0.5);'
                              size: normal
                              content:
                                type: vertical-stack
                                cards:
                                  - type: custom:stack-in-card
                                    cards:
                                      - type: custom:mushroom-media-player-card
                                        entity: camera.outside
                                        name: Outside
                                        icon: mdi:play
                                        use_media_info: true
                                        use_media_artwork: false
                                        show_volume_level: false
                                        fill_container: false
                                        tap_action:
                                          action: fire-dom-event
                                          haptic: heavy
                                          browser_mod:
                                            service: browser_mod.popup
                                            data:
                                              style: '--mdc-theme-surface: rgba(var(--rgb-primary-text-color), 0.5);'
                                              size: normal
                                              content:
                                                type: vertical-stack
                                                cards:
                                                  - type: picture-elements
                                                    title: " "
                                                    entity: camera.slideshow_outside
                                                    camera_image: camera.slideshow_outside
                                                    camera_view: live
                                                    aspect_ratio: 100%
                                                    elements:
                                                      - type: icon
                                                        icon: mdi:skip-previous
                                                        style:
                                                          background: 'rgba(255,255,255,0.2)'
                                                          right: 50px
                                                          bottom: 100px
                                                        tap_action:
                                                          action: call-service
                                                          service: imagedirectory.camera_prev_image
                                                          service_data:
                                                            entity_id: camera.slideshow_outside
                                                      - type: icon
                                                        icon: mdi:skip-next
                                                        style:
                                                          background: 'rgba(255,255,255,0.2)'
                                                          right: 0px
                                                          bottom: 100px
                                                        tap_action:
                                                          action: call-service
                                                          service: imagedirectory.camera_next_image
                                                          service_data:
                                                            entity_id: camera.slideshow_outside
                                                      - type: conditional
                                                        conditions:
                                                          - entity: camera.slideshow_outside
                                                            state: streaming
                                                        elements:
                                                          - type: icon
                                                            icon: mdi:pause
                                                            style:
                                                              background: 'rgba(255,255,255,0.2)'
                                                              right: 25px
                                                              bottom: 100px
                                                            tap_action:
                                                              action: call-service
                                                              service: imagedirectory.camera_toggle_pause
                                                              service_data:
                                                                entity_id: camera.slideshow_outside
                                                      - type: conditional
                                                        conditions:
                                                          - entity: camera.slideshow_outside
                                                            state: paused
                                                        elements:
                                                          - type: icon
                                                            icon: mdi:play
                                                            style:
                                                              background: 'rgba(255,255,255,0.2)'
                                                              right: 25px
                                                              bottom: 100px
                                                            tap_action:
                                                              action: call-service
                                                              service: imagedirectory.camera_toggle_pause
                                                              service_data:
                                                                entity_id: camera.slideshow_outside
                                                    card_mod:
                                                      style: |
                                                        ha-card:before {
                                                          transform: translate3d(0,0,0);
                                                          -webkit-transform: translate3d(0,0,0);
                                                          content: "";
                                                          position: absolute;
                                                          height: 100%;
                                                          width: 100%;
                                                          background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                                          {% if not is_state('camera.outside', 'unavailable') %}
                                                            background: url( '{{ state_attr('camera.outside', 'entity_picture') }}' ) center no-repeat;
                                                          {% endif %}
                                                          filter: blur(150px) saturate(200%);
                                                          background-size: 100% 100%;
                                                        }
                                                        ha-card {
                                                          transform: translate3d(0,0,0);
                                                          -webkit-transform: translate3d(0,0,0);
                                                        }
                                        card_mod:
                                          style: |
                                            mushroom-shape-icon {
                                              display: flex;
                                                --card-mod-icon: mdi:cctv;
                                              {{ 'animation: none;' if not is_state(config.entity, 'unavailable') }}
                                            }
                                            @keyframes flicker {
                                              0%, 31.98%, 32.98%, 34.98%, 36.98%, 39.98%, 67.98%, 68.98%, 95.98%, 96.98%, 97.98%, 98.98%, 100% { --icon-color: rgba(var(--rgb-indigo), 1); }
                                              32%, 33%, 35%, 36%, 37%, 40%, 68%, 69%, 96%, 97%, 98%, 99% { --icon-color: rgba(var(--rgb-indigo), 0.6); }
                                            }
                                            @keyframes beat {
                                              0%, 60% { --icon-symbol-size: 21px; }
                                              5%, 17%, 57% { --icon-symbol-size: 22px; }
                                              10%, 20%, 51% { --icon-symbol-size: 23px; }
                                              25%, 45% { --icon-symbol-size: 24px; }
                                              30%, 39% { --icon-symbol-size: 25px; }
                                              33% { --icon-symbol-size: 26px; }
                                            }
                                            ha-card {
                                              --ha-card-border-width: 0;
                                            }
                                            ha-card:before {
                                              transform: translate3d(0,0,0);
                                              -webkit-transform: translate3d(0,0,0);
                                              content: "";
                                              background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                              {% if not is_state(config.entity, 'unavailable') %}
                                                background: url( '{{ state_attr(config.entity, 'entity_picture') }}') center no-repeat;
                                              {% endif %}
                                              background-size: contain;
                                              margin: 4px 4px 16px;
                                              filter: drop-shadow(4px 4px 6px rgba(0, 0, 0, 0.5));
                                              border-radius: var(--control-border-radius);
                                              {% if not is_state(config.entity, 'unavailable') %}
                                                aspect-ratio: 4 / 3;
                                              {% else %}
                                                aspect-ratio: 1 / 1;
                                              {% endif %}
                                            }
                                    card_mod:
                                      style: |
                                        ha-card:before {
                                          transform: translate3d(0,0,0);
                                          -webkit-transform: translate3d(0,0,0);
                                          content: "";
                                          position: absolute;
                                          height: 100%;
                                          width: 100%;
                                          background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                          {% if not is_state('camera.outside', 'unavailable') %}
                                            background: url( '{{ state_attr('camera.outside', 'entity_picture') }}' ) center no-repeat;
                                          {% endif %}
                                          filter: blur(150px) saturate(200%);
                                          background-size: 100% 100%;
                                        }
                                        ha-card {
                                          transform: translate3d(0,0,0);
                                          -webkit-transform: translate3d(0,0,0);
                                        }
                        card_mod:
                          style: |
                            ha-card {
                              {% if is_state(config.entity, 'recording') %}
                                background-image: url( '{{ state_attr(config.entity, 'entity_picture') }}' );
                                background-position: center;
                                background-repeat: no-repeat;
                                background-size: cover;
                                background-color: rgba(var(--rgb-card-background-color),0.5);
                                background-blend-mode: overlay;
                                --primary-text-color: transparent;
                                --secondary-text-color: transparent;
                              {% else %}
                                background-color: rgba(var(--rgb-card-background-color),0.8);
                              {% endif %}
                            }
                            ha-card:active {
                              background: rgba(var(--rgb-disabled), 0.9);
                              transform: scale(0.915);
                              transition: 0s;
                            }
                            mushroom-shape-icon {
                              --icon-size: 65px;
                            }
              attributes:
                label: INSIDE
            - card:
                type: horizontal-stack
                cards:
                  - square: false
                    columns: 3
                    type: grid
                    cards:
                      - type: custom:mushroom-template-card
                        entity: camera.rd001
                        primary: ''
                        secondary: 동도미소드림
                        layout: vertical
                        icon_color: blue
                        icon: mdi:cctv
                        hold_action:
                          action: none
                        double_tap_action:
                          action: none
                        tap_action:
                          action: fire-dom-event
                          haptic: heavy
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              style: '--mdc-theme-surface: rgba(var(--rgb-primary-text-color), 0.5);'
                              size: normal
                              content:
                                type: vertical-stack
                                cards:
                                  - type: custom:stack-in-card
                                    cards:
                                      - type: custom:mushroom-media-player-card
                                        entity: camera.rd001
                                        name: 동도미소드림
                                        icon: mdi:play
                                        use_media_info: true
                                        use_media_artwork: false
                                        show_volume_level: false
                                        fill_container: false
                                        card_mod:
                                          style: |
                                            mushroom-shape-icon {
                                              display: flex;
                                                --card-mod-icon: mdi:cctv;
                                              {{ 'animation: none;' if not is_state(config.entity, 'unavailable') }}
                                            }
                                            @keyframes flicker {
                                              0%, 31.98%, 32.98%, 34.98%, 36.98%, 39.98%, 67.98%, 68.98%, 95.98%, 96.98%, 97.98%, 98.98%, 100% { --icon-color: rgba(var(--rgb-indigo), 1); }
                                              32%, 33%, 35%, 36%, 37%, 40%, 68%, 69%, 96%, 97%, 98%, 99% { --icon-color: rgba(var(--rgb-indigo), 0.6); }
                                            }
                                            @keyframes beat {
                                              0%, 60% { --icon-symbol-size: 21px; }
                                              5%, 17%, 57% { --icon-symbol-size: 22px; }
                                              10%, 20%, 51% { --icon-symbol-size: 23px; }
                                              25%, 45% { --icon-symbol-size: 24px; }
                                              30%, 39% { --icon-symbol-size: 25px; }
                                              33% { --icon-symbol-size: 26px; }
                                            }
                                            ha-card {
                                              --ha-card-border-width: 0;
                                            }
                                            ha-card:before {
                                              transform: translate3d(0,0,0);
                                              -webkit-transform: translate3d(0,0,0);
                                              content: "";
                                              background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                              {% if not is_state(config.entity, 'unavailable') %}
                                                background: url( '{{ state_attr(config.entity, 'entity_picture') }}') center no-repeat;
                                              {% endif %}
                                              background-size: contain;
                                              margin: 4px 4px 16px;
                                              filter: drop-shadow(4px 4px 6px rgba(0, 0, 0, 0.5));
                                              border-radius: var(--control-border-radius);
                                              {% if not is_state(config.entity, 'unavailable') %}
                                                aspect-ratio: 4 / 3;
                                              {% else %}
                                                aspect-ratio: 1 / 1;
                                              {% endif %}
                                            }
                                    card_mod:
                                      style: |
                                        ha-card:before {
                                          transform: translate3d(0,0,0);
                                          -webkit-transform: translate3d(0,0,0);
                                          content: "";
                                          position: absolute;
                                          height: 100%;
                                          width: 100%;
                                          background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                          {% if not is_state('camera.rd001', 'unavailable') %}
                                            background: url( '{{ state_attr('camera.rd001', 'entity_picture') }}' ) center no-repeat;
                                          {% endif %}
                                          filter: blur(150px) saturate(200%);
                                          background-size: 100% 100%;
                                        }
                                        ha-card {
                                          transform: translate3d(0,0,0);
                                          -webkit-transform: translate3d(0,0,0);
                                        }
                        card_mod:
                          style: |
                            ha-card {
                              {% if is_state(config.entity, 'recording') %}
                                background-image: url( '{{ state_attr(config.entity, 'entity_picture') }}' );
                                background-position: center;
                                background-repeat: no-repeat;
                                background-size: cover;
                                background-color: rgba(var(--rgb-card-background-color),0.5);
                                background-blend-mode: overlay;
                                --primary-text-color: transparent;
                                --secondary-text-color: transparent;
                              {% else %}
                                background-color: rgba(var(--rgb-card-background-color),0.8);
                              {% endif %}
                            }
                            ha-card:active {
                              background: rgba(var(--rgb-disabled), 0.9);
                              transform: scale(0.915);
                              transition: 0s;
                            }
                            mushroom-shape-icon {
                              --icon-size: 65px;
                            }
                      - type: custom:mushroom-template-card
                        entity: camera.rd002
                        primary: ''
                        secondary: 꽃밭정이네거리
                        layout: vertical
                        icon_color: blue
                        icon: mdi:cctv
                        hold_action:
                          action: none
                        double_tap_action:
                          action: none
                        tap_action:
                          action: fire-dom-event
                          haptic: heavy
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              style: '--mdc-theme-surface: rgba(var(--rgb-primary-text-color), 0.5);'
                              size: normal
                              content:
                                type: vertical-stack
                                cards:
                                  - type: custom:stack-in-card
                                    cards:
                                      - type: custom:mushroom-media-player-card
                                        entity: camera.rd002
                                        name: 꽃밭정이네거리
                                        icon: mdi:play
                                        use_media_info: true
                                        use_media_artwork: false
                                        show_volume_level: false
                                        fill_container: false
                                        card_mod:
                                          style: |
                                            mushroom-shape-icon {
                                              display: flex;
                                                --card-mod-icon: mdi:cctv;
                                              {{ 'animation: none;' if not is_state(config.entity, 'unavailable') }}
                                            }
                                            @keyframes flicker {
                                              0%, 31.98%, 32.98%, 34.98%, 36.98%, 39.98%, 67.98%, 68.98%, 95.98%, 96.98%, 97.98%, 98.98%, 100% { --icon-color: rgba(var(--rgb-indigo), 1); }
                                              32%, 33%, 35%, 36%, 37%, 40%, 68%, 69%, 96%, 97%, 98%, 99% { --icon-color: rgba(var(--rgb-indigo), 0.6); }
                                            }
                                            @keyframes beat {
                                              0%, 60% { --icon-symbol-size: 21px; }
                                              5%, 17%, 57% { --icon-symbol-size: 22px; }
                                              10%, 20%, 51% { --icon-symbol-size: 23px; }
                                              25%, 45% { --icon-symbol-size: 24px; }
                                              30%, 39% { --icon-symbol-size: 25px; }
                                              33% { --icon-symbol-size: 26px; }
                                            }
                                            ha-card {
                                              --ha-card-border-width: 0;
                                            }
                                            ha-card:before {
                                              transform: translate3d(0,0,0);
                                              -webkit-transform: translate3d(0,0,0);
                                              content: "";
                                              background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                              {% if not is_state(config.entity, 'unavailable') %}
                                                background: url( '{{ state_attr(config.entity, 'entity_picture') }}') center no-repeat;
                                              {% endif %}
                                              background-size: contain;
                                              margin: 4px 4px 16px;
                                              filter: drop-shadow(4px 4px 6px rgba(0, 0, 0, 0.5));
                                              border-radius: var(--control-border-radius);
                                              {% if not is_state(config.entity, 'unavailable') %}
                                                aspect-ratio: 4 / 3;
                                              {% else %}
                                                aspect-ratio: 1 / 1;
                                              {% endif %}
                                            }
                                    card_mod:
                                      style: |
                                        ha-card:before {
                                          transform: translate3d(0,0,0);
                                          -webkit-transform: translate3d(0,0,0);
                                          content: "";
                                          position: absolute;
                                          height: 100%;
                                          width: 100%;
                                          background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                          {% if not is_state('camera.rd002', 'unavailable') %}
                                            background: url( '{{ state_attr('camera.rd002', 'entity_picture') }}' ) center no-repeat;
                                          {% endif %}
                                          filter: blur(150px) saturate(200%);
                                          background-size: 100% 100%;
                                        }
                                        ha-card {
                                          transform: translate3d(0,0,0);
                                          -webkit-transform: translate3d(0,0,0);
                                        }
                        card_mod:
                          style: |
                            ha-card {
                              {% if is_state(config.entity, 'recording') %}
                                background-image: url( '{{ state_attr(config.entity, 'entity_picture') }}' );
                                background-position: center;
                                background-repeat: no-repeat;
                                background-size: cover;
                                background-color: rgba(var(--rgb-card-background-color),0.5);
                                background-blend-mode: overlay;
                                --primary-text-color: transparent;
                                --secondary-text-color: transparent;
                              {% else %}
                                background-color: rgba(var(--rgb-card-background-color),0.8);
                              {% endif %}
                            }
                            ha-card:active {
                              background: rgba(var(--rgb-disabled), 0.9);
                              transform: scale(0.915);
                              transition: 0s;
                            }
                            mushroom-shape-icon {
                              --icon-size: 65px;
                            }
                      - type: custom:mushroom-template-card
                        entity: camera.rd003
                        primary: ''
                        secondary: 싸전다리
                        layout: vertical
                        icon_color: blue
                        icon: mdi:cctv
                        hold_action:
                          action: none
                        double_tap_action:
                          action: none
                        tap_action:
                          action: fire-dom-event
                          haptic: heavy
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              style: '--mdc-theme-surface: rgba(var(--rgb-primary-text-color), 0.5);'
                              size: normal
                              content:
                                type: vertical-stack
                                cards:
                                  - type: custom:stack-in-card
                                    cards:
                                      - type: custom:mushroom-media-player-card
                                        entity: camera.rd003
                                        name: 싸전다리
                                        icon: mdi:play
                                        use_media_info: true
                                        use_media_artwork: false
                                        show_volume_level: false
                                        fill_container: false
                                        card_mod:
                                          style: |
                                            mushroom-shape-icon {
                                              display: flex;
                                                --card-mod-icon: mdi:cctv;
                                              {{ 'animation: none;' if not is_state(config.entity, 'unavailable') }}
                                            }
                                            @keyframes flicker {
                                              0%, 31.98%, 32.98%, 34.98%, 36.98%, 39.98%, 67.98%, 68.98%, 95.98%, 96.98%, 97.98%, 98.98%, 100% { --icon-color: rgba(var(--rgb-indigo), 1); }
                                              32%, 33%, 35%, 36%, 37%, 40%, 68%, 69%, 96%, 97%, 98%, 99% { --icon-color: rgba(var(--rgb-indigo), 0.6); }
                                            }
                                            @keyframes beat {
                                              0%, 60% { --icon-symbol-size: 21px; }
                                              5%, 17%, 57% { --icon-symbol-size: 22px; }
                                              10%, 20%, 51% { --icon-symbol-size: 23px; }
                                              25%, 45% { --icon-symbol-size: 24px; }
                                              30%, 39% { --icon-symbol-size: 25px; }
                                              33% { --icon-symbol-size: 26px; }
                                            }
                                            ha-card {
                                              --ha-card-border-width: 0;
                                            }
                                            ha-card:before {
                                              transform: translate3d(0,0,0);
                                              -webkit-transform: translate3d(0,0,0);
                                              content: "";
                                              background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                              {% if not is_state(config.entity, 'unavailable') %}
                                                background: url( '{{ state_attr(config.entity, 'entity_picture') }}') center no-repeat;
                                              {% endif %}
                                              background-size: contain;
                                              margin: 4px 4px 16px;
                                              filter: drop-shadow(4px 4px 6px rgba(0, 0, 0, 0.5));
                                              border-radius: var(--control-border-radius);
                                              {% if not is_state(config.entity, 'unavailable') %}
                                                aspect-ratio: 4 / 3;
                                              {% else %}
                                                aspect-ratio: 1 / 1;
                                              {% endif %}
                                            }
                                    card_mod:
                                      style: |
                                        ha-card:before {
                                          transform: translate3d(0,0,0);
                                          -webkit-transform: translate3d(0,0,0);
                                          content: "";
                                          position: absolute;
                                          height: 100%;
                                          width: 100%;
                                          background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                          {% if not is_state('camera.rd003', 'unavailable') %}
                                            background: url( '{{ state_attr('camera.rd003', 'entity_picture') }}' ) center no-repeat;
                                          {% endif %}
                                          filter: blur(150px) saturate(200%);
                                          background-size: 100% 100%;
                                        }
                                        ha-card {
                                          transform: translate3d(0,0,0);
                                          -webkit-transform: translate3d(0,0,0);
                                        }
                        card_mod:
                          style: |
                            ha-card {
                              {% if is_state(config.entity, 'recording') %}
                                background-image: url( '{{ state_attr(config.entity, 'entity_picture') }}' );
                                background-position: center;
                                background-repeat: no-repeat;
                                background-size: cover;
                                background-color: rgba(var(--rgb-card-background-color),0.5);
                                background-blend-mode: overlay;
                                --primary-text-color: transparent;
                                --secondary-text-color: transparent;
                              {% else %}
                                background-color: rgba(var(--rgb-card-background-color),0.8);
                              {% endif %}
                            }
                            ha-card:active {
                              background: rgba(var(--rgb-disabled), 0.9);
                              transform: scale(0.915);
                              transition: 0s;
                            }
                            mushroom-shape-icon {
                              --icon-size: 65px;
                            }
                      - type: custom:mushroom-template-card
                        entity: camera.rd004
                        primary: ''
                        secondary: 남천교
                        layout: vertical
                        icon_color: blue
                        icon: mdi:cctv
                        hold_action:
                          action: none
                        double_tap_action:
                          action: none
                        tap_action:
                          action: fire-dom-event
                          haptic: heavy
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              style: '--mdc-theme-surface: rgba(var(--rgb-primary-text-color), 0.5);'
                              size: normal
                              content:
                                type: vertical-stack
                                cards:
                                  - type: custom:stack-in-card
                                    cards:
                                      - type: custom:mushroom-media-player-card
                                        entity: camera.rd004
                                        name: 남천교
                                        icon: mdi:play
                                        use_media_info: true
                                        use_media_artwork: false
                                        show_volume_level: false
                                        fill_container: false
                                        card_mod:
                                          style: |
                                            mushroom-shape-icon {
                                              display: flex;
                                                --card-mod-icon: mdi:cctv;
                                              {{ 'animation: none;' if not is_state(config.entity, 'unavailable') }}
                                            }
                                            @keyframes flicker {
                                              0%, 31.98%, 32.98%, 34.98%, 36.98%, 39.98%, 67.98%, 68.98%, 95.98%, 96.98%, 97.98%, 98.98%, 100% { --icon-color: rgba(var(--rgb-indigo), 1); }
                                              32%, 33%, 35%, 36%, 37%, 40%, 68%, 69%, 96%, 97%, 98%, 99% { --icon-color: rgba(var(--rgb-indigo), 0.6); }
                                            }
                                            @keyframes beat {
                                              0%, 60% { --icon-symbol-size: 21px; }
                                              5%, 17%, 57% { --icon-symbol-size: 22px; }
                                              10%, 20%, 51% { --icon-symbol-size: 23px; }
                                              25%, 45% { --icon-symbol-size: 24px; }
                                              30%, 39% { --icon-symbol-size: 25px; }
                                              33% { --icon-symbol-size: 26px; }
                                            }
                                            ha-card {
                                              --ha-card-border-width: 0;
                                            }
                                            ha-card:before {
                                              transform: translate3d(0,0,0);
                                              -webkit-transform: translate3d(0,0,0);
                                              content: "";
                                              background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                              {% if not is_state(config.entity, 'unavailable') %}
                                                background: url( '{{ state_attr(config.entity, 'entity_picture') }}') center no-repeat;
                                              {% endif %}
                                              background-size: contain;
                                              margin: 4px 4px 16px;
                                              filter: drop-shadow(4px 4px 6px rgba(0, 0, 0, 0.5));
                                              border-radius: var(--control-border-radius);
                                              {% if not is_state(config.entity, 'unavailable') %}
                                                aspect-ratio: 4 / 3;
                                              {% else %}
                                                aspect-ratio: 1 / 1;
                                              {% endif %}
                                            }
                                    card_mod:
                                      style: |
                                        ha-card:before {
                                          transform: translate3d(0,0,0);
                                          -webkit-transform: translate3d(0,0,0);
                                          content: "";
                                          position: absolute;
                                          height: 100%;
                                          width: 100%;
                                          background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                          {% if not is_state('camera.rd004', 'unavailable') %}
                                            background: url( '{{ state_attr('camera.rd004', 'entity_picture') }}' ) center no-repeat;
                                          {% endif %}
                                          filter: blur(150px) saturate(200%);
                                          background-size: 100% 100%;
                                        }
                                        ha-card {
                                          transform: translate3d(0,0,0);
                                          -webkit-transform: translate3d(0,0,0);
                                        }
                        card_mod:
                          style: |
                            ha-card {
                              {% if is_state(config.entity, 'recording') %}
                                background-image: url( '{{ state_attr(config.entity, 'entity_picture') }}' );
                                background-position: center;
                                background-repeat: no-repeat;
                                background-size: cover;
                                background-color: rgba(var(--rgb-card-background-color),0.5);
                                background-blend-mode: overlay;
                                --primary-text-color: transparent;
                                --secondary-text-color: transparent;
                              {% else %}
                                background-color: rgba(var(--rgb-card-background-color),0.8);
                              {% endif %}
                            }
                            ha-card:active {
                              background: rgba(var(--rgb-disabled), 0.9);
                              transform: scale(0.915);
                              transition: 0s;
                            }
                            mushroom-shape-icon {
                              --icon-size: 65px;
                            }
                      - type: custom:mushroom-template-card
                        entity: camera.rd005
                        primary: ''
                        secondary: 통일광장
                        layout: vertical
                        icon_color: blue
                        icon: mdi:cctv
                        hold_action:
                          action: none
                        double_tap_action:
                          action: none
                        tap_action:
                          action: fire-dom-event
                          haptic: heavy
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              style: '--mdc-theme-surface: rgba(var(--rgb-primary-text-color), 0.5);'
                              size: normal
                              content:
                                type: vertical-stack
                                cards:
                                  - type: custom:stack-in-card
                                    cards:
                                      - type: custom:mushroom-media-player-card
                                        entity: camera.rd005
                                        name: 통일광장
                                        icon: mdi:play
                                        use_media_info: true
                                        use_media_artwork: false
                                        show_volume_level: false
                                        fill_container: false
                                        card_mod:
                                          style: |
                                            mushroom-shape-icon {
                                              display: flex;
                                                --card-mod-icon: mdi:cctv;
                                              {{ 'animation: none;' if not is_state(config.entity, 'unavailable') }}
                                            }
                                            @keyframes flicker {
                                              0%, 31.98%, 32.98%, 34.98%, 36.98%, 39.98%, 67.98%, 68.98%, 95.98%, 96.98%, 97.98%, 98.98%, 100% { --icon-color: rgba(var(--rgb-indigo), 1); }
                                              32%, 33%, 35%, 36%, 37%, 40%, 68%, 69%, 96%, 97%, 98%, 99% { --icon-color: rgba(var(--rgb-indigo), 0.6); }
                                            }
                                            @keyframes beat {
                                              0%, 60% { --icon-symbol-size: 21px; }
                                              5%, 17%, 57% { --icon-symbol-size: 22px; }
                                              10%, 20%, 51% { --icon-symbol-size: 23px; }
                                              25%, 45% { --icon-symbol-size: 24px; }
                                              30%, 39% { --icon-symbol-size: 25px; }
                                              33% { --icon-symbol-size: 26px; }
                                            }
                                            ha-card {
                                              --ha-card-border-width: 0;
                                            }
                                            ha-card:before {
                                              transform: translate3d(0,0,0);
                                              -webkit-transform: translate3d(0,0,0);
                                              content: "";
                                              background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                              {% if not is_state(config.entity, 'unavailable') %}
                                                background: url( '{{ state_attr(config.entity, 'entity_picture') }}') center no-repeat;
                                              {% endif %}
                                              background-size: contain;
                                              margin: 4px 4px 16px;
                                              filter: drop-shadow(4px 4px 6px rgba(0, 0, 0, 0.5));
                                              border-radius: var(--control-border-radius);
                                              {% if not is_state(config.entity, 'unavailable') %}
                                                aspect-ratio: 4 / 3;
                                              {% else %}
                                                aspect-ratio: 1 / 1;
                                              {% endif %}
                                            }
                                    card_mod:
                                      style: |
                                        ha-card:before {
                                          transform: translate3d(0,0,0);
                                          -webkit-transform: translate3d(0,0,0);
                                          content: "";
                                          position: absolute;
                                          height: 100%;
                                          width: 100%;
                                          background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                          {% if not is_state('camera.rd005', 'unavailable') %}
                                            background: url( '{{ state_attr('camera.rd005', 'entity_picture') }}' ) center no-repeat;
                                          {% endif %}
                                          filter: blur(150px) saturate(200%);
                                          background-size: 100% 100%;
                                        }
                                        ha-card {
                                          transform: translate3d(0,0,0);
                                          -webkit-transform: translate3d(0,0,0);
                                        }
                        card_mod:
                          style: |
                            ha-card {
                              {% if is_state(config.entity, 'recording') %}
                                background-image: url( '{{ state_attr(config.entity, 'entity_picture') }}' );
                                background-position: center;
                                background-repeat: no-repeat;
                                background-size: cover;
                                background-color: rgba(var(--rgb-card-background-color),0.5);
                                background-blend-mode: overlay;
                                --primary-text-color: transparent;
                                --secondary-text-color: transparent;
                              {% else %}
                                background-color: rgba(var(--rgb-card-background-color),0.8);
                              {% endif %}
                            }
                            ha-card:active {
                              background: rgba(var(--rgb-disabled), 0.9);
                              transform: scale(0.915);
                              transition: 0s;
                            }
                            mushroom-shape-icon {
                              --icon-size: 65px;
                            }
                      - type: custom:mushroom-template-card
                        entity: camera.rd006
                        primary: ''
                        secondary: 충경로네거리
                        layout: vertical
                        icon_color: blue
                        icon: mdi:cctv
                        hold_action:
                          action: none
                        double_tap_action:
                          action: none
                        tap_action:
                          action: fire-dom-event
                          haptic: heavy
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              style: '--mdc-theme-surface: rgba(var(--rgb-primary-text-color), 0.5);'
                              size: normal
                              content:
                                type: vertical-stack
                                cards:
                                  - type: custom:stack-in-card
                                    cards:
                                      - type: custom:mushroom-media-player-card
                                        entity: camera.rd006
                                        name: 충경로네거리
                                        icon: mdi:play
                                        use_media_info: true
                                        use_media_artwork: false
                                        show_volume_level: false
                                        fill_container: false
                                        card_mod:
                                          style: |
                                            mushroom-shape-icon {
                                              display: flex;
                                                --card-mod-icon: mdi:cctv;
                                              {{ 'animation: none;' if not is_state(config.entity, 'unavailable') }}
                                            }
                                            @keyframes flicker {
                                              0%, 31.98%, 32.98%, 34.98%, 36.98%, 39.98%, 67.98%, 68.98%, 95.98%, 96.98%, 97.98%, 98.98%, 100% { --icon-color: rgba(var(--rgb-indigo), 1); }
                                              32%, 33%, 35%, 36%, 37%, 40%, 68%, 69%, 96%, 97%, 98%, 99% { --icon-color: rgba(var(--rgb-indigo), 0.6); }
                                            }
                                            @keyframes beat {
                                              0%, 60% { --icon-symbol-size: 21px; }
                                              5%, 17%, 57% { --icon-symbol-size: 22px; }
                                              10%, 20%, 51% { --icon-symbol-size: 23px; }
                                              25%, 45% { --icon-symbol-size: 24px; }
                                              30%, 39% { --icon-symbol-size: 25px; }
                                              33% { --icon-symbol-size: 26px; }
                                            }
                                            ha-card {
                                              --ha-card-border-width: 0;
                                            }
                                            ha-card:before {
                                              transform: translate3d(0,0,0);
                                              -webkit-transform: translate3d(0,0,0);
                                              content: "";
                                              background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                              {% if not is_state(config.entity, 'unavailable') %}
                                                background: url( '{{ state_attr(config.entity, 'entity_picture') }}') center no-repeat;
                                              {% endif %}
                                              background-size: contain;
                                              margin: 4px 4px 16px;
                                              filter: drop-shadow(4px 4px 6px rgba(0, 0, 0, 0.5));
                                              border-radius: var(--control-border-radius);
                                              {% if not is_state(config.entity, 'unavailable') %}
                                                aspect-ratio: 4 / 3;
                                              {% else %}
                                                aspect-ratio: 1 / 1;
                                              {% endif %}
                                            }
                                    card_mod:
                                      style: |
                                        ha-card:before {
                                          transform: translate3d(0,0,0);
                                          -webkit-transform: translate3d(0,0,0);
                                          content: "";
                                          position: absolute;
                                          height: 100%;
                                          width: 100%;
                                          background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                          {% if not is_state('camera.rd006', 'unavailable') %}
                                            background: url( '{{ state_attr('camera.rd006', 'entity_picture') }}' ) center no-repeat;
                                          {% endif %}
                                          filter: blur(150px) saturate(200%);
                                          background-size: 100% 100%;
                                        }
                                        ha-card {
                                          transform: translate3d(0,0,0);
                                          -webkit-transform: translate3d(0,0,0);
                                        }
                        card_mod:
                          style: |
                            ha-card {
                              {% if is_state(config.entity, 'recording') %}
                                background-image: url( '{{ state_attr(config.entity, 'entity_picture') }}' );
                                background-position: center;
                                background-repeat: no-repeat;
                                background-size: cover;
                                background-color: rgba(var(--rgb-card-background-color),0.5);
                                background-blend-mode: overlay;
                                --primary-text-color: transparent;
                                --secondary-text-color: transparent;
                              {% else %}
                                background-color: rgba(var(--rgb-card-background-color),0.8);
                              {% endif %}
                            }
                            ha-card:active {
                              background: rgba(var(--rgb-disabled), 0.9);
                              transform: scale(0.915);
                              transition: 0s;
                            }
                            mushroom-shape-icon {
                              --icon-size: 65px;
                            }
                      - type: custom:mushroom-template-card
                        entity: camera.rd007
                        primary: ''
                        secondary: 한옥마을주차장
                        layout: vertical
                        icon_color: blue
                        icon: mdi:cctv
                        hold_action:
                          action: none
                        double_tap_action:
                          action: none
                        tap_action:
                          action: fire-dom-event
                          haptic: heavy
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              style: '--mdc-theme-surface: rgba(var(--rgb-primary-text-color), 0.5);'
                              size: normal
                              content:
                                type: vertical-stack
                                cards:
                                  - type: custom:stack-in-card
                                    cards:
                                      - type: custom:mushroom-media-player-card
                                        entity: camera.rd007
                                        name: 한옥마을주차장
                                        icon: mdi:play
                                        use_media_info: true
                                        use_media_artwork: false
                                        show_volume_level: false
                                        fill_container: false
                                        card_mod:
                                          style: |
                                            mushroom-shape-icon {
                                              display: flex;
                                                --card-mod-icon: mdi:cctv;
                                              {{ 'animation: none;' if not is_state(config.entity, 'unavailable') }}
                                            }
                                            @keyframes flicker {
                                              0%, 31.98%, 32.98%, 34.98%, 36.98%, 39.98%, 67.98%, 68.98%, 95.98%, 96.98%, 97.98%, 98.98%, 100% { --icon-color: rgba(var(--rgb-indigo), 1); }
                                              32%, 33%, 35%, 36%, 37%, 40%, 68%, 69%, 96%, 97%, 98%, 99% { --icon-color: rgba(var(--rgb-indigo), 0.6); }
                                            }
                                            @keyframes beat {
                                              0%, 60% { --icon-symbol-size: 21px; }
                                              5%, 17%, 57% { --icon-symbol-size: 22px; }
                                              10%, 20%, 51% { --icon-symbol-size: 23px; }
                                              25%, 45% { --icon-symbol-size: 24px; }
                                              30%, 39% { --icon-symbol-size: 25px; }
                                              33% { --icon-symbol-size: 26px; }
                                            }
                                            ha-card {
                                              --ha-card-border-width: 0;
                                            }
                                            ha-card:before {
                                              transform: translate3d(0,0,0);
                                              -webkit-transform: translate3d(0,0,0);
                                              content: "";
                                              background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                              {% if not is_state(config.entity, 'unavailable') %}
                                                background: url( '{{ state_attr(config.entity, 'entity_picture') }}') center no-repeat;
                                              {% endif %}
                                              background-size: contain;
                                              margin: 4px 4px 16px;
                                              filter: drop-shadow(4px 4px 6px rgba(0, 0, 0, 0.5));
                                              border-radius: var(--control-border-radius);
                                              {% if not is_state(config.entity, 'unavailable') %}
                                                aspect-ratio: 4 / 3;
                                              {% else %}
                                                aspect-ratio: 1 / 1;
                                              {% endif %}
                                            }
                                    card_mod:
                                      style: |
                                        ha-card:before {
                                          transform: translate3d(0,0,0);
                                          -webkit-transform: translate3d(0,0,0);
                                          content: "";
                                          position: absolute;
                                          height: 100%;
                                          width: 100%;
                                          background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                          {% if not is_state('camera.rd007', 'unavailable') %}
                                            background: url( '{{ state_attr('camera.rd007', 'entity_picture') }}' ) center no-repeat;
                                          {% endif %}
                                          filter: blur(150px) saturate(200%);
                                          background-size: 100% 100%;
                                        }
                                        ha-card {
                                          transform: translate3d(0,0,0);
                                          -webkit-transform: translate3d(0,0,0);
                                        }
                        card_mod:
                          style: |
                            ha-card {
                              {% if is_state(config.entity, 'recording') %}
                                background-image: url( '{{ state_attr(config.entity, 'entity_picture') }}' );
                                background-position: center;
                                background-repeat: no-repeat;
                                background-size: cover;
                                background-color: rgba(var(--rgb-card-background-color),0.5);
                                background-blend-mode: overlay;
                                --primary-text-color: transparent;
                                --secondary-text-color: transparent;
                              {% else %}
                                background-color: rgba(var(--rgb-card-background-color),0.8);
                              {% endif %}
                            }
                            ha-card:active {
                              background: rgba(var(--rgb-disabled), 0.9);
                              transform: scale(0.915);
                              transition: 0s;
                            }
                            mushroom-shape-icon {
                              --icon-size: 65px;
                            }
                      - type: custom:mushroom-template-card
                        entity: camera.rd099
                        primary: ''
                        secondary: 울릉도도동항
                        layout: vertical
                        icon_color: blue
                        icon: mdi:cctv
                        hold_action:
                          action: none
                        double_tap_action:
                          action: none
                        tap_action:
                          action: fire-dom-event
                          haptic: heavy
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              style: '--mdc-theme-surface: rgba(var(--rgb-primary-text-color), 0.5);'
                              size: normal
                              content:
                                type: vertical-stack
                                cards:
                                  - type: custom:stack-in-card
                                    cards:
                                      - type: custom:mushroom-media-player-card
                                        entity: camera.rd099
                                        name: 울릉도도동항
                                        icon: mdi:play
                                        use_media_info: true
                                        use_media_artwork: false
                                        show_volume_level: false
                                        fill_container: false
                                        card_mod:
                                          style: |
                                            mushroom-shape-icon {
                                              display: flex;
                                                --card-mod-icon: mdi:cctv;
                                              {{ 'animation: none;' if not is_state(config.entity, 'unavailable') }}
                                            }
                                            @keyframes flicker {
                                              0%, 31.98%, 32.98%, 34.98%, 36.98%, 39.98%, 67.98%, 68.98%, 95.98%, 96.98%, 97.98%, 98.98%, 100% { --icon-color: rgba(var(--rgb-indigo), 1); }
                                              32%, 33%, 35%, 36%, 37%, 40%, 68%, 69%, 96%, 97%, 98%, 99% { --icon-color: rgba(var(--rgb-indigo), 0.6); }
                                            }
                                            @keyframes beat {
                                              0%, 60% { --icon-symbol-size: 21px; }
                                              5%, 17%, 57% { --icon-symbol-size: 22px; }
                                              10%, 20%, 51% { --icon-symbol-size: 23px; }
                                              25%, 45% { --icon-symbol-size: 24px; }
                                              30%, 39% { --icon-symbol-size: 25px; }
                                              33% { --icon-symbol-size: 26px; }
                                            }
                                            ha-card {
                                              --ha-card-border-width: 0;
                                            }
                                            ha-card:before {
                                              transform: translate3d(0,0,0);
                                              -webkit-transform: translate3d(0,0,0);
                                              content: "";
                                              background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                              {% if not is_state(config.entity, 'unavailable') %}
                                                background: url( '{{ state_attr(config.entity, 'entity_picture') }}') center no-repeat;
                                              {% endif %}
                                              background-size: contain;
                                              margin: 4px 4px 16px;
                                              filter: drop-shadow(4px 4px 6px rgba(0, 0, 0, 0.5));
                                              border-radius: var(--control-border-radius);
                                              {% if not is_state(config.entity, 'unavailable') %}
                                                aspect-ratio: 4 / 3;
                                              {% else %}
                                                aspect-ratio: 1 / 1;
                                              {% endif %}
                                            }
                                    card_mod:
                                      style: |
                                        ha-card:before {
                                          transform: translate3d(0,0,0);
                                          -webkit-transform: translate3d(0,0,0);
                                          content: "";
                                          position: absolute;
                                          height: 100%;
                                          width: 100%;
                                          background: url('/local/floorplan/cctv_bg.png') center no-repeat;
                                          {% if not is_state('camera.rd099', 'unavailable') %}
                                            background: url( '{{ state_attr('camera.rd099', 'entity_picture') }}' ) center no-repeat;
                                          {% endif %}
                                          filter: blur(150px) saturate(200%);
                                          background-size: 100% 100%;
                                        }
                                        ha-card {
                                          transform: translate3d(0,0,0);
                                          -webkit-transform: translate3d(0,0,0);
                                        }
                        card_mod:
                          style: |
                            ha-card {
                              {% if is_state(config.entity, 'recording') %}
                                background-image: url( '{{ state_attr(config.entity, 'entity_picture') }}' );
                                background-position: center;
                                background-repeat: no-repeat;
                                background-size: cover;
                                background-color: rgba(var(--rgb-card-background-color),0.5);
                                background-blend-mode: overlay;
                                --primary-text-color: transparent;
                                --secondary-text-color: transparent;
                              {% else %}
                                background-color: rgba(var(--rgb-card-background-color),0.8);
                              {% endif %}
                            }
                            ha-card:active {
                              background: rgba(var(--rgb-disabled), 0.9);
                              transform: scale(0.915);
                              transition: 0s;
                            }
                            mushroom-shape-icon {
                              --icon-size: 65px;
                            }
              attributes:
                label: OUTSIDE
            - card:
                type: vertical-stack
                cards:
                  - type: markdown
                    content: '[텔레그램]으로 짧은 영상을 보고 싶으면 **카메라**를 선택하세요.'
                    theme: minimalist-mobile
                    card_mod:
                      style: |
                        ha-card {
                          background-color: transparent;
                          box-shadow: none;
                        }
                  - type: entities
                    entities:
                        - entity: input_select.home_cctv
                          name: '선택 영상 보내기'
                        - entity: input_select.traffic_camera
                          name: "선택 영상 보내기"
              attributes:
                label: CLIP
            - card:
                type: entities
                show_header_toggle: false
                entities:
                  - entity: input_boolean.notify_onoff
                    type: custom:multiple-entity-row
                    name: 캡쳐1
                    icon: mdi:home-automation
                    show_state: false
                    show_header_toggle: false
                    state_color: true
                    entities:
                      - entity: input_boolean.auto_camera_livingroom
                        name: 거실
                        toggle: true
                      - entity: input_boolean.auto_camera_kitchen
                        name: 주방
                        toggle: true
                      - entity: input_boolean.auto_camera_studyroom
                        name: 공부방
                        toggle: true
                      - entity: input_boolean.auto_camera_entrance
                        name: 현관
                        toggle: true
                  - entity: input_boolean.auto_light
                    type: custom:multiple-entity-row
                    name: 캡쳐2
                    icon: mdi:home-automation
                    show_state: false
                    show_header_toggle: false
                    state_color: true
                    entities:
                      - entity: input_boolean.auto_camera_doorbell
                        name: 도어벨
                        toggle: true
                      - entity: input_boolean.auto_camera_parcel
                        name: 택배
                        toggle: true
                      - entity: input_boolean.auto_camera_veranda
                        name: 베란다
                        toggle: true
                      - entity: input_boolean.auto_camera_outside
                        name: 실외
                        toggle: true
                  - entity: group.storage
                    type: custom:multiple-entity-row
                    name: 저장1
                    show_state: false
                    icon: mdi:sd
                    format: 
                      - precision1
                    entities:
                      - entity: sensor.livingroom
                        name: 거실
                        toggle: false
                      - entity: sensor.kitchen
                        name: 주방
                        toggle: false
                      - entity: sensor.studyroom
                        name: 공부방
                        toggle: false
                      - entity: sensor.entrance
                        name: 현관
                        toggle: false
                  - entity: group.storage
                    type: custom:multiple-entity-row
                    name: 저장2
                    show_state: false
                    icon: mdi:sd
                    format: 
                      - precision1
                    entities:
                      - entity: sensor.doorbell
                        name: 도어벨
                        toggle: false
                      - entity: sensor.parcel
                        name: 택배
                        toggle: false
                      - entity: sensor.veranda
                        name: 베란다
                        toggle: false
                      - entity: sensor.outside
                        name: 실외
                        toggle: false
                card_mod:
                  style: |
                    ha-card {
                      background-color: transparent;
                      box-shadow: none;
                      --ha-card-border-style: none;
                      text-align: left;
                    }
              attributes:
                label: CONTROLS


  ####################################################################### local-conditional: light
      - type: custom:local-conditional-card
        id: light
        default: hide
        card:
          type: custom:tabbed-card
          tabs:
            - card:
                square: false
                columns: 3
                type: grid
                cards:
                  - type: custom:mushroom-template-card
                    entity: light.livingroom_ctr
                    primary: 거실중앙
                    icon: mdi:lightbulb-on
                    layout: vertical
                    fill_container: true
                    secondary: |-
                      {{ states ('sensor.0x00158d0002e2de81_temperature') }}°C
                        /
                      {{ states ('sensor.0x00158d0002e2de81_humidity') }}%
                    icon_color: |-
                      {% if is_state(config.entity, 'on') %}
                        orange
                      {% endif %}
                    badge_icon: |-
                      mdi:motion-sensor
                    badge_color: |-
                      {% if is_state('binary_sensor.0x00158d0004059202_occupancy', 'on') %}
                        blue
                      {% endif %}
                    card_mod:
                      style: |
                        ha-state-icon {
                          {% if is_state(config.entity, 'on') %}
                            animation: illumination 2s infinite;
                          {% else %}
                          {% endif %}
                        }
                        @keyframes illumination {
                          0%, 100% { clip-path: inset(0 0 0 0); }
                          80% { clip-path: polygon(0% 99%, 20% 55%, 22% 37%, 39% 20%, 61% 21%, 77% 35%, 79% 57%, 99% 100%); }
                        }
                        mushroom-badge-icon {
                          {% if states('binary_sensor.0x00158d0004059202_occupancy') == 'on' %}
                            animation: blink 1.5s linear infinite;
                          }
                          @keyframes blink {
                            0% {opacity: 0;}
                          }
                          {%- else -%}
                            display: none;
                          {%- endif %}
                        }
                  - type: custom:mushroom-template-card
                    entity: light.livingroom_side
                    primary: 거실사이드
                    icon: mdi:lightbulb-on
                    layout: vertical
                    fill_container: true
                    secondary: |-
                      {{ states ('sensor.0x00158d0002e2de81_temperature') }}°C
                        /
                      {{ states ('sensor.0x00158d0002e2de81_humidity') }}%
                    icon_color: |-
                      {% if is_state(config.entity, 'on') %}
                        orange
                      {% endif %}
                    badge_icon: |-
                      mdi:motion-sensor
                    badge_color: |-
                      {% if is_state('binary_sensor.0x00158d0004059202_occupancy', 'on') %}
                        blue
                      {% endif %}
                    card_mod:
                      style: |
                        ha-state-icon {
                          {% if is_state(config.entity, 'on') %}
                            animation: illumination 2s infinite;
                          {% else %}
                          {% endif %}
                        }
                        @keyframes illumination {
                          0%, 100% { clip-path: inset(0 0 0 0); }
                          80% { clip-path: polygon(0% 99%, 20% 55%, 22% 37%, 39% 20%, 61% 21%, 77% 35%, 79% 57%, 99% 100%); }
                        }
                        mushroom-badge-icon {
                          {% if states('binary_sensor.0x00158d0004059202_occupancy') == 'on' %}
                            animation: blink 1.5s linear infinite;
                          }
                          @keyframes blink {
                            0% {opacity: 0;}
                          }
                          {%- else -%}
                            display: none;
                          {%- endif %}
                        }
                  - type: custom:mushroom-template-card
                    entity: light.livingroom_vrd
                    primary: 베란다
                    icon: mdi:lightbulb-on
                    layout: vertical
                    fill_container: true
                    secondary: |-
                      {{ states ('sensor.0x00158d0002e2de81_temperature')}}°C
                        /
                      {{ states ('sensor.0x00158d0002e2de81_humidity') }}%
                    icon_color: |-
                      {% if is_state(config.entity, 'on') %}
                        orange
                      {% endif %}
                    badge_icon: |-
                      mdi:motion-sensor
                    badge_color: |-
                      {% if is_state('binary_sensor.0x00158d0004059202_occupancy', 'on') %}
                        blue
                      {% endif %}
                    card_mod:
                      style: |
                        ha-state-icon {
                          {% if is_state(config.entity, 'on') %}
                            animation: illumination 2s infinite;
                          {% else %}
                          {% endif %}
                        }
                        @keyframes illumination {
                          0%, 100% { clip-path: inset(0 0 0 0); }
                          80% { clip-path: polygon(0% 99%, 20% 55%, 22% 37%, 39% 20%, 61% 21%, 77% 35%, 79% 57%, 99% 100%); }
                        }
                        mushroom-badge-icon {
                          {% if states('binary_sensor.0x00158d0004059202_occupancy') == 'on' %}
                            animation: blink 1.5s linear infinite;
                          }
                          @keyframes blink {
                            0% {opacity: 0;}
                          }
                          {%- else -%}
                            display: none;
                          {%- endif %}
                        }
                  - type: custom:mushroom-template-card
                    entity: light.mainroom
                    primary: 안방
                    icon: mdi:lightbulb-on
                    layout: vertical
                    fill_container: true
                    secondary: |-
                      {{ states ('sensor.0x00158d00025e9521_temperature') }}°C
                        /
                      {{ states ('sensor.0x00158d00025e9521_humidity')}}%
                    icon_color: |-
                      {% if is_state(config.entity, 'on') %}
                        orange
                      {% endif %}
                    badge_icon: |-
                      mdi:motion-sensor
                    badge_color: |-
                      {% if is_state('binary_sensor.0x00158d00041418aa_occupancy', 'on') %}
                        blue
                      {% endif %}
                    card_mod:
                      style: |
                        ha-state-icon {
                          {% if is_state(config.entity, 'on') %}
                            animation: illumination 2s infinite;
                          {% else %}
                          {% endif %}
                        }
                        @keyframes illumination {
                          0%, 100% { clip-path: inset(0 0 0 0); }
                          80% { clip-path: polygon(0% 99%, 20% 55%, 22% 37%, 39% 20%, 61% 21%, 77% 35%, 79% 57%, 99% 100%); }
                        }
                        mushroom-badge-icon {
                          {% if states('binary_sensor.0x00158d00041418aa_occupancy') == 'on' %}
                            animation: blink 1.5s linear infinite;
                          }
                          @keyframes blink {
                            0% {opacity: 0;}
                          }
                          {%- else -%}
                            display: none;
                          {%- endif %}
                        }
                  - type: custom:mushroom-template-card
                    entity: light.sonroom
                    primary: 아들방
                    icon: mdi:lightbulb-on
                    layout: vertical
                    fill_container: true
                    secondary: |-
                      {{ states ('sensor.0x00158d0002e2ea37_temperature') }}°C
                        /
                      {{ states ('sensor.0x00158d0002e2ea37_humidity') }}%
                    icon_color: |-
                      {% if is_state(config.entity, 'on') %}
                        orange
                      {% endif %}
                    badge_icon: |-
                      mdi:motion-sensor
                    badge_color: |-
                      {% if is_state('binary_sensor.0x00158d00045225c2_occupancy', 'on') %}
                        blue
                      {% endif %}
                    card_mod:
                      style: |
                        ha-state-icon {
                          {% if is_state(config.entity, 'on') %}
                            animation: illumination 2s infinite;
                          {% else %}
                          {% endif %}
                        }
                        @keyframes illumination {
                          0%, 100% { clip-path: inset(0 0 0 0); }
                          80% { clip-path: polygon(0% 99%, 20% 55%, 22% 37%, 39% 20%, 61% 21%, 77% 35%, 79% 57%, 99% 100%); }
                        }
                        mushroom-badge-icon {
                          {% if states('binary_sensor.0x00158d00045225c2_occupancy') == 'on' %}
                            animation: blink 1.5s linear infinite;
                          }
                          @keyframes blink {
                            0% {opacity: 0;}
                          }
                          {%- else -%}
                            display: none;
                          {%- endif %}
                        }
                  - type: custom:mushroom-template-card
                    entity: light.studyroom
                    primary: 공부방
                    icon: mdi:lightbulb-on
                    layout: vertical
                    fill_container: true
                    secondary: |-
                      {{ states ('sensor.0x00158d0002e221bd_temperature') }}°C
                        /
                      {{ states ('sensor.0x00158d0002e221bd_humidity') }}%
                    icon_color: |-
                      {% if is_state(config.entity, 'on') %}
                        orange
                      {% endif %}
                    badge_icon: |-
                      mdi:motion-sensor
                    badge_color: |-
                      {% if is_state('binary_sensor.0x00158d00040c3dbf_occupancy', 'on') %}
                        blue
                      {% endif %}
                    card_mod:
                      style: |
                        ha-state-icon {
                          {% if is_state(config.entity, 'on') %}
                            animation: illumination 2s infinite;
                          {% else %}
                          {% endif %}
                        }
                        @keyframes illumination {
                          0%, 100% { clip-path: inset(0 0 0 0); }
                          80% { clip-path: polygon(0% 99%, 20% 55%, 22% 37%, 39% 20%, 61% 21%, 77% 35%, 79% 57%, 99% 100%); }
                        }
                        mushroom-badge-icon {
                          {% if states('binary_sensor.0x00158d00040c3dbf_occupancy') == 'on' %}
                            animation: blink 1.5s linear infinite;
                          }
                          @keyframes blink {
                            0% {opacity: 0;}
                          }
                          {%- else -%}
                            display: none;
                          {%- endif %}
                        }
                  - type: custom:mushroom-template-card
                    entity: light.kitchen
                    primary: 주방
                    icon: mdi:auto-fix
                    layout: vertical
                    fill_container: true
                    secondary: |-
                      {{ states ('sensor.0x00158d00045cb3a9_temperature') }}°C
                        /
                      {{ states ('sensor.0x00158d00045cb3a9_humidity') }}%
                    icon_color: |-
                      {% if is_state(config.entity, 'on') %}
                        orange
                      {% endif %}
                    badge_icon: |-
                      mdi:motion-sensor
                    badge_color: |-
                      {% if is_state('binary_sensor.0x00158d0002b70b2b_occupancy', 'on') %}
                        blue
                      {% endif %}
                    card_mod:
                      style: |
                        ha-state-icon {
                          {% if is_state(config.entity, 'on')%}
                            animation: sparkle 2s linear infinite, kadabra 2s ease-in-out infinite;
                            transform-origin: 10% 90%
                          {% else %}
                          {% endif %}
                        }
                        @keyframes sparkle {
                          0%, 68%, 100% { clip-path: polygon(0% 100%, 1% 75%, 56% 22%, 80% 43%, 26% 100%); }
                          69%, 74%, 79%, 85% { clip-path: inset(0 0 0 0); }
                          70% { clip-path: polygon(0 100%, 0 76%, 75% 0, 100% 0, 100% 100%); }
                          75% { clip-path: polygon(0 100%, 0 0, 39% 0, 100% 62%, 100% 100%); }
                          80% { clip-path: polygon(0 100%, 0 0, 100% 0, 100% 26%, 25% 100%); }
                        } 
                        @keyframes kadabra {
                          0%, 65%, 100% { transform: rotate(-15deg); }
                          70% { transform: rotate(20deg); }
                          75% { transform: rotate(15deg); }
                          80% { transform: rotate(25deg); }
                        }
                        mushroom-badge-icon {
                          {% if states('binary_sensor.0x00158d0002b70b2b_occupancy') == 'on' %}
                            animation: blink 1.5s linear infinite;
                          }
                          @keyframes blink {
                            0% {opacity: 0;}
                          }
                          {%- else -%}
                            display: none;
                          {%- endif %}
                        }
                  - type: custom:mushroom-template-card
                    entity: light.kitchen_table
                    primary: 식탁
                    icon: mdi:auto-fix
                    layout: vertical
                    fill_container: true
                    secondary: |-
                      {{ states ('sensor.0x00158d00045cb3a9_temperature') }}°C
                        /
                      {{ states ('sensor.0x00158d00045cb3a9_humidity') }}%
                    icon_color: |-
                      {% if is_state(config.entity, 'on') %}
                        orange
                      {% endif %}
                    badge_icon: |-
                      mdi:motion-sensor
                    badge_color: |-
                      {% if is_state('binary_sensor.0x00158d0002b70b2b_occupancy', 'on') %}
                        blue
                      {% endif %}
                    card_mod:
                      style: |
                        ha-state-icon {
                          {% if is_state(config.entity, 'on') %}
                            animation: sparkle 2s linear infinite, kadabra 2s ease-in-out infinite;
                            transform-origin: 10% 90%
                          {% else %}
                          {% endif %}
                        }
                        @keyframes sparkle {
                          0%, 68%, 100% { clip-path: polygon(0% 100%, 1% 75%, 56% 22%, 80% 43%, 26% 100%); }
                          69%, 74%, 79%, 85% { clip-path: inset(0 0 0 0); }
                          70% { clip-path: polygon(0 100%, 0 76%, 75% 0, 100% 0, 100% 100%); }
                          75% { clip-path: polygon(0 100%, 0 0, 39% 0, 100% 62%, 100% 100%); }
                          80% { clip-path: polygon(0 100%, 0 0, 100% 0, 100% 26%, 25% 100%); }
                        } 
                        @keyframes kadabra {
                          0%, 65%, 100% { transform: rotate(-15deg); }
                          70% { transform: rotate(20deg); }
                          75% { transform: rotate(15deg); }
                          80% { transform: rotate(25deg); }
                        }
                        mushroom-badge-icon {
                          {% if states('binary_sensor.0x00158d0002b70b2b_occupancy') == 'on' %}
                            animation: blink 1.5s linear infinite;
                        }
                        @keyframes blink {
                          0% {opacity: 0;}
                        }
                        {%- else -%}
                          display: none;
                        {%- endif %}
                  - type: custom:mushroom-template-card
                    entity: light.laundryroom
                    primary: 세탁실
                    icon: mdi:lightbulb-on
                    layout: vertical
                    fill_container: true
                    secondary: |-
                      {{ states ('sensor.home_temp2') }}°C
                        /
                      {{ states ('sensor.home_humidi2') }}%
                    icon_color: |-
                      {% if is_state(config.entity, 'on')%}
                        amber
                      {% endif %}
                    card_mod:
                      style: |
                        ha-state-icon {
                          {% if is_state(config.entity, 'on') %}
                            animation: eureka 1.8s infinite;
                          {% else %}
                          {% endif %}
                        }
                        @keyframes eureka {
                          0%, 45%, 55%, 100% { transform: translateY(0) scale(1);
                          clip-path: polygon(20% 100%, 21% 38%, 36% 22%, 62% 21%, 79% 37%, 80% 100%, 53% 100%, 55% 67%, 62% 62%, 66% 55%, 67% 46%, 62% 38%, 55% 34%, 47% 34%, 39% 37%, 34% 44%, 33% 53%, 36% 60%, 41% 64%, 45% 66%, 45% 76%, 56% 76%, 54% 100%); }
                          10%, 40% { transform: translateY(-5px) scale(1.12); clip-path: inset(0 0 0 0); }
                          50% { transform: translateY(-2px) }
                        }
              attributes:
                label: LIGHT

            - card:
                square: false
                columns: 3
                type: grid
                cards:
                  - type: custom:mushroom-template-card
                    entity: light.livingroomrest
                    primary: 거실
                    icon: mdi:shower-head
                    layout: vertical
                    fill_container: true
                    double_tap_action:
                      action: call-service
                      service: switch.toggle
                      service_data:
                        entity_id: switch.livingroomrest_fan
                      haptic: medium
                    secondary: |-
                      {{ states ('sensor.0x00158d0002e2de81_temperature') }}°C
                        /
                      {{ states ('sensor.0x00158d0002e2de81_humidity') }}%
                    icon_color: |-
                      {% if is_state(config.entity, 'on') %}
                        light-blue
                      {% endif %}
                    badge_icon: |-
                      mdi:fan
                    badge_color: |-
                      {% if is_state('switch.livingroomrest_fan', 'on') %}
                        blue
                      {% endif %}
                    card_mod:
                      style: |
                        ha-state-icon {
                          {% if is_state(config.entity, 'on') %}
                            animation: clip 0.7s ease-out infinite;
                          {% else %}
                          {% endif %}
                        }
                        @keyframes clip {
                          0% {clip-path: inset(0 0 45% 0); }
                          100% { clip-path: inset(0 0 0 0); }
                        }
                        mushroom-badge-icon {
                          {% if is_state('switch.livingroomrest_fan', 'on') %}
                            animation: spin .5s linear infinite;
                          {% else %}
                            display: none;
                          {% endif %}
                        }
                  - type: custom:mushroom-template-card
                    entity: light.mainroomrest
                    primary: 안방
                    icon: mdi:shower-head
                    layout: vertical
                    fill_container: true
                    double_tap_action:
                      action: call-service
                      service: switch.toggle
                      service_data:
                        entity_id: switch.mainroomrest_fan
                      haptic: medium
                    secondary: |-
                      {{ states ('sensor.0x00158d000272cee1_temperature') }}°C
                        /
                      {{ states ('sensor.0x00158d000272cee1_humidity') }}%
                    icon_color: |-
                      {% if is_state(config.entity, 'on') %}
                        light-blue
                      {% endif %}
                    badge_icon: |-
                      mdi:fan
                    badge_color: |-
                      {% if is_state('switch.mainroomrest_fan', 'on') %}
                        blue
                      {% endif %}
                    card_mod:
                      style: |
                        ha-state-icon {
                          {% if is_state(config.entity, 'on')%}
                            animation: clip 0.7s ease-out infinite;
                          {% else %}
                          {% endif %}
                        }
                        @keyframes clip {
                          0% {clip-path: inset(0 0 45% 0); }
                          100% { clip-path: inset(0 0 0 0); }
                        }
                        mushroom-badge-icon {
                          {% if is_state('switch.mainroomrest_fan', 'on') %}
                            animation: spin .5s linear infinite;
                          {% else %}
                            display: none;
                          {% endif %}
                        }
              attributes:
                label: TOILET

            - card:
                type: vertical-stack
                cards:
                  - type: custom:mushroom-light-card
                    entity: light.bulb1
                    icon: mdi:led-strip-variant
                    show_color_temp_control: true
                    show_color_control: true
                    show_brightness_control: true
                    use_light_color: true
                    tap_action:
                      action: toggle
                    double_tap_action:
                      action: call-service
                      service: script.toggle
                      service_data:
                        entity_id: script.bulb1
                      haptic: medium
                    card_mod:
                      style:
                        mushroom-shape-icon$: |
                          .shape:active {
                            transform: scale(1.2);
                          }
                        .: |
                          mushroom-light-brightness-control, mushroom-light-color-temp-control,
                          mushroom-light-color-control {
                            position: absolute;
                            top: 0px;
                            left: 0px;
                            width: 100%;
                            opacity: 0.3;
                            --control-height: 66px;
                            --control-border-radius: var(--ha-card-border-radius, 12px);
                            --rgb-disabled: var(--rgb-card-background-color);
                          }
                          mushroom-state-item {
                            z-index: 1;
                            max-width: fit-content;
                            margin-bottom: 0px;
                            pointer-events: none;
                          }
                          mushroom-shape-icon {
                            pointer-events: auto;
                          }
                          mushroom-button {
                            position: absolute;
                            width: calc(var(--control-height) * var(--control-button-ratio)) !important;
                            height: var(--control-height) !important;
                            top: var(--spacing);
                            right: var(--spacing);
                          }
                          mushroom-button:nth-child(3) {
                            right:  calc(2 *var(--spacing) + var(--control-height) * var(--control-button-ratio));
                          }
                          .actions :not(:last-child) {
                            margin-right: 0px !important;
                          }
                  - type: custom:mushroom-light-card
                    entity: light.bulb2
                    icon: mdi:led-strip-variant
                    show_color_temp_control: true
                    show_color_control: true
                    show_brightness_control: true
                    use_light_color: true
                    tap_action:
                      action: toggle
                    double_tap_action:
                      action: call-service
                      service: script.toggle
                      service_data:
                        entity_id: script.bulb2
                      haptic: medium
                    card_mod:
                      style:
                        mushroom-shape-icon$: |
                          .shape:active {
                            transform: scale(1.2);
                          }
                        .: |
                          mushroom-light-brightness-control, mushroom-light-color-temp-control,
                          mushroom-light-color-control {
                            position: absolute;
                            top: 0px;
                            left: 0px;
                            width: 100%;
                            opacity: 0.3;
                            --control-height: 66px;
                            --control-border-radius: var(--ha-card-border-radius, 12px);
                            --rgb-disabled: var(--rgb-card-background-color);
                          }
                          mushroom-state-item {
                            z-index: 1;
                            max-width: fit-content;
                            margin-bottom: 0px;
                            pointer-events: none;
                          }
                          mushroom-shape-icon {
                            pointer-events: auto;
                          }
                          mushroom-button {
                            position: absolute;
                            width: calc(var(--control-height) * var(--control-button-ratio)) !important;
                            height: var(--control-height) !important;
                            top: var(--spacing);
                            right: var(--spacing);
                          }
                          mushroom-button:nth-child(3) {
                            right:  calc(2 *var(--spacing) + var(--control-height) * var(--control-button-ratio));
                          }
                          .actions :not(:last-child) {
                            margin-right: 0px !important;
                          }
                  - type: custom:mushroom-light-card
                    entity: light.bulb3
                    icon: mdi:led-strip-variant
                    show_color_temp_control: true
                    show_color_control: true
                    show_brightness_control: true
                    use_light_color: true
                    tap_action:
                      action: toggle
                    double_tap_action:
                      action: call-service
                      service: script.toggle
                      service_data:
                        entity_id: script.bulb3
                      haptic: medium
                    card_mod:
                      style:
                        mushroom-shape-icon$: |
                          .shape:active {
                            transform: scale(1.2);
                          }
                        .: |
                          mushroom-light-brightness-control, mushroom-light-color-temp-control,
                          mushroom-light-color-control {
                            position: absolute;
                            top: 0px;
                            left: 0px;
                            width: 100%;
                            opacity: 0.3;
                            --control-height: 66px;
                            --control-border-radius: var(--ha-card-border-radius, 12px);
                            --rgb-disabled: var(--rgb-card-background-color);
                          }
                          mushroom-state-item {
                            z-index: 1;
                            max-width: fit-content;
                            margin-bottom: 0px;
                            pointer-events: none;
                          }
                          mushroom-shape-icon {
                            pointer-events: auto;
                          }
                          mushroom-button {
                            position: absolute;
                            width: calc(var(--control-height) * var(--control-button-ratio)) !important;
                            height: var(--control-height) !important;
                            top: var(--spacing);
                            right: var(--spacing);
                          }
                          mushroom-button:nth-child(3) {
                            right:  calc(2 *var(--spacing) + var(--control-height) * var(--control-button-ratio));
                          }
                          .actions :not(:last-child) {
                            margin-right: 0px !important;
                          }
                  - type: custom:mushroom-light-card
                    entity: light.0x00124b0022676e23
                    icon: mdi:led-strip-variant
                    show_color_temp_control: true
                    show_color_control: true
                    show_brightness_control: true
                    use_light_color: true
                    tap_action:
                      action: toggle
                    card_mod:
                      style:
                        mushroom-shape-icon$: |
                          .shape:active {
                            transform: scale(1.2);
                          }
                        .: |
                          mushroom-light-brightness-control, mushroom-light-color-temp-control,
                          mushroom-light-color-control {
                            position: absolute;
                            top: 0px;
                            left: 0px;
                            width: 100%;
                            opacity: 0.3;
                            --control-height: 66px;
                            --control-border-radius: var(--ha-card-border-radius, 12px);
                            --rgb-disabled: var(--rgb-card-background-color);
                          }
                          mushroom-state-item {
                            z-index: 1;
                            max-width: fit-content;
                            margin-bottom: 0px;
                            pointer-events: none;
                          }
                          mushroom-shape-icon {
                            pointer-events: auto;
                          }
                          mushroom-button {
                            position: absolute;
                            width: calc(var(--control-height) * var(--control-button-ratio)) !important;
                            height: var(--control-height) !important;
                            top: var(--spacing);
                            right: var(--spacing);
                          }
                          mushroom-button:nth-child(3) {
                            right:  calc(2 *var(--spacing) + var(--control-height) * var(--control-button-ratio));
                          }
                          .actions :not(:last-child) {
                            margin-right: 0px !important;
                          }
                  - type: custom:mushroom-light-card
                    entity: light.curtainled_lvr
                    icon: mdi:led-strip-variant
                    show_color_temp_control: true
                    show_color_control: true
                    show_brightness_control: true
                    use_light_color: true
                    tap_action:
                      action: toggle
                    double_tap_action:
                      action: call-service
                      service: script.toggle
                      service_data:
                        entity_id: script.curtainled_lvr
                      haptic: medium
                    card_mod:
                      style:
                        mushroom-shape-icon$: |
                          .shape:active {
                            transform: scale(1.2);
                          }
                        .: |
                          mushroom-light-brightness-control, mushroom-light-color-temp-control,
                          mushroom-light-color-control {
                            position: absolute;
                            top: 0px;
                            left: 0px;
                            width: 100%;
                            opacity: 0.3;
                            --control-height: 66px;
                            --control-border-radius: var(--ha-card-border-radius, 12px);
                            --rgb-disabled: var(--rgb-card-background-color);
                          }
                          mushroom-state-item {
                            z-index: 1;
                            max-width: fit-content;
                            margin-bottom: 0px;
                            pointer-events: none;
                          }
                          mushroom-shape-icon {
                            pointer-events: auto;
                          }
                          mushroom-button {
                            position: absolute;
                            width: calc(var(--control-height) * var(--control-button-ratio)) !important;
                            height: var(--control-height) !important;
                            top: var(--spacing);
                            right: var(--spacing);
                          }
                          mushroom-button:nth-child(3) {
                            right:  calc(2 *var(--spacing) + var(--control-height) * var(--control-button-ratio));
                          }
                          .actions :not(:last-child) {
                            margin-right: 0px !important;
                          }
                  - type: custom:mushroom-light-card
                    entity: light.curtainled_stdr
                    icon: mdi:led-strip-variant
                    show_color_temp_control: true
                    show_color_control: true
                    show_brightness_control: true
                    use_light_color: true
                    tap_action:
                      action: toggle
                    card_mod:
                      style:
                        mushroom-shape-icon$: |
                          .shape:active {
                            transform: scale(1.2);
                          }
                        .: |
                          mushroom-light-brightness-control, mushroom-light-color-temp-control,
                          mushroom-light-color-control {
                            position: absolute;
                            top: 0px;
                            left: 0px;
                            width: 100%;
                            opacity: 0.3;
                            --control-height: 66px;
                            --control-border-radius: var(--ha-card-border-radius, 12px);
                            --rgb-disabled: var(--rgb-card-background-color);
                          }
                          mushroom-state-item {
                            z-index: 1;
                            max-width: fit-content;
                            margin-bottom: 0px;
                            pointer-events: none;
                          }
                          mushroom-shape-icon {
                            pointer-events: auto;
                          }
                          mushroom-button {
                            position: absolute;
                            width: calc(var(--control-height) * var(--control-button-ratio)) !important;
                            height: var(--control-height) !important;
                            top: var(--spacing);
                            right: var(--spacing);
                          }
                          mushroom-button:nth-child(3) {
                            right:  calc(2 *var(--spacing) + var(--control-height) * var(--control-button-ratio));
                          }
                          .actions :not(:last-child) {
                            margin-right: 0px !important;
                          }
              attributes:
                label: COLOR

  ####################################################################### local-conditional: tv
      - type: custom:local-conditional-card
        id: tv
        default: hide
        card:
          type: custom:tabbed-card
          tabs:
            - card:
                type: vertical-stack
                cards:
                  - square: false
                    columns: 1
                    type: grid
                    cards:
                      - type: custom:mini-media-player
                        entity: media_player.livingroom_tv
                        volume_stateless: false
                        hide:
                          power: true
                          power_state: false
                          source: false
                        hide_controls: true
                        idle_view: true
                        shortcuts:
                          columns: 3
                          buttons:
                            - data:
                                button: HOME
                                entity_id: media_player.livingroom_tv
                              id: webostv.button
                              name: MENU
                              type: service
                            - data:
                                button: HOME
                                entity_id: media_player.livingroom_tv
                              icon: mdi:home
                              id: webostv.button
                              type: service
                            - data:
                                button: BACK
                                entity_id: media_player.livingroom_tv
                              id: webostv.button
                              name: BACK
                              type: service
                            - icon: mdi:netflix
                              id: Netflix
                              #name: Netflix
                              type: source
                            - icon: mdi:plex
                              id: Plex
                              #name: Plex
                              type: source
                            - icon: mdi:youtube
                              id: YouTube
                              #name: Youtube
                              type: source
                            - icon: mdi:alpha-t-box
                              id: TVING
                              #name: Netflix
                              type: source
                            - icon: mdi:alpha-w-box
                              id: 왓챠
                              #name: Plex
                              type: source
                            - icon: mdi:alpha-c-box
                              id: Coupang Play
                              #name: Youtube
                              type: source
                            - data:
                                button: VOLUMEUP
                                entity_id: media_player.livingroom_tv
                              icon: mdi:arrow-up-drop-circle
                              id: webostv.button
                              name: VOL
                              type: service
                            - data:
                                button: UP
                                entity_id: media_player.livingroom_tv
                              icon: mdi:arrow-up-bold
                              id: webostv.button
                              type: service
                            - icon: mdi:arrow-up-drop-circle
                              id: script.lvr_tv_channel_up
                              name: CH
                              type: script
                            - data:
                                button: LEFT
                                entity_id: media_player.livingroom_tv
                              icon: mdi:arrow-left-bold
                              id: webostv.button
                              type: service
                            - data:
                                button: ENTER
                                entity_id: media_player.livingroom_tv
                              id: webostv.button
                              name: OK
                              type: service
                            - data:
                                button: RIGHT
                                entity_id: media_player.livingroom_tv
                              icon: mdi:arrow-right-bold
                              id: webostv.button
                              type: service
                            - data:
                                button: VOLUMEDOWN
                                entity_id: media_player.livingroom_tv
                              icon: mdi:arrow-down-drop-circle
                              id: webostv.button
                              name: VOL
                              type: service
                            - data:
                                button: DOWN
                                entity_id: media_player.livingroom_tv
                              icon: mdi:arrow-down-bold
                              id: webostv.button
                              type: service
                            - icon: mdi:arrow-down-drop-circle
                              id: script.lvr_tv_channel_down
                              name: CH
                              type: script
                        card_mod:
                          style: |
                            ha-card {
                              --paper-card-background-color: transparent;
                              --ha-card-background: transparent;
                              --ha-card-box-shadow: none;
                            }
                  - square: false
                    columns: 3
                    type: grid
                    cards:
                      - type: custom:button-card
                        entity: script.lvr_tv_kbs1
                        show_name: false
                        show_entity_picture: true
                        size: 90%
                        aspect_ratio: 1/0.3
                        entity_picture: http://i.imgur.com/e31o5gw.png
                        tap_action:
                          action: toggle
                          haptic: light
                      - type: custom:button-card
                        entity: script.lvr_tv_kbs2
                        show_name: false
                        show_entity_picture: true
                        size: 90%
                        aspect_ratio: 1/0.3
                        entity_picture: http://i.imgur.com/XgibZbD.png
                        tap_action:
                          action: toggle
                          haptic: light
                      - type: custom:button-card
                        entity: script.lvr_tv_mbc
                        show_name: false
                        show_entity_picture: true
                        size: 90%
                        aspect_ratio: 1/0.3
                        entity_picture: http://i.imgur.com/duig32i.png
                        tap_action:
                          action: toggle
                          haptic: light
                      - type: custom:button-card
                        entity: script.lvr_tv_jtbc
                        show_name: false
                        show_entity_picture: true
                        size: 90%
                        aspect_ratio: 1/0.3
                        entity_picture: http://i.imgur.com/XFKcvaN.png
                        tap_action:
                          action: toggle
                          haptic: light
                      - type: custom:button-card
                        entity: script.lvr_tv_jtbc
                        show_name: false
                        show_entity_picture: true
                        size: 90%
                        aspect_ratio: 1/0.3
                        entity_picture: http://i.imgur.com/YOYosLG.png
                        tap_action:
                          action: toggle
                          haptic: light
                      - type: custom:button-card
                        entity: script.lvr_tv_tvn
                        show_name: false
                        show_entity_picture: true
                        size: 90%
                        aspect_ratio: 1/0.3
                        entity_picture: http://i.imgur.com/OJ9A8fZ.png
                        tap_action:
                          action: toggle
                          haptic: light
                      - type: custom:button-card
                        entity: script.lvr_tv_ocn
                        show_name: false
                        show_entity_picture: true
                        size: 90%
                        aspect_ratio: 1/0.3
                        entity_picture: http://i.imgur.com/IXh6dwo.png
                        tap_action:
                          action: toggle
                          haptic: light
                      - type: custom:button-card
                        entity: script.lvr_tv_mnet
                        show_name: false
                        show_entity_picture: true
                        size: 90%
                        aspect_ratio: 1/0.3
                        entity_picture: http://i.imgur.com/putHm2b.png
                        tap_action:
                          action: toggle
                          haptic: light
                      - type: custom:button-card
                        entity: script.lvr_tv_ftv
                        show_name: false
                        show_entity_picture: true
                        size: 90%
                        aspect_ratio: 1/0.3
                        entity_picture: http://i.imgur.com/eI9wGgS.png
                        tap_action:
                          action: toggle
                          haptic: light
              attributes:
                label: TV
            - card:
                type: custom:upcoming-media-card
                entity: sensor.plex_recently_added
                title: "RECENTLY DOWNLOADED"
                date: mm"월"dd"일"  #ddmm
                clock: 12  #24
                max: 5
                image_style: fanart  #poster fanart
                hide_empty: false
                hide_flagged: false
                hide_unflagged: false
                flag: true
                text_shadows: true
                box_shadows: true
                all_shadows: true
                line1_text: '$release'
                line2_text: '$genres'
                line3_text: '$aired - $runtime'
                line4_text: '$episode - $number'
                line5_text: '$studio'
                title_size: small  #large medium small
                line1_size: small
                line2_size: small
                line3_size: small
                line4_size: small
                line5_size: small
                title_color: 'peru'
                #line1_color: '#fff'
                #line2_color: '#fff'
                #line3_color: '#fff'
                #line4_color: '#fff'
                #border_color: var(--primary-color)
                accent_color: '#000'  #var(primary-background-color)
                #flag_color: 'peru'
                icon: mdi:theater
                #icon_color: var(--primary-color)
                card_mod:
                  style: |
                    ha-card {
                      --ha-card-background: transparent;
                      --ha-card-box-shadow: none
                    }
                    .rece_fanart .rece_fan_fanart {
                      background-image: linear-gradient(to right, rgb(0,0,0) 46%, transparent 60%);
                    }
                    .rece_fanart {
                      border-radius: 7px;
                      box-shadow: 0px 2px 4px 0px rgba(0,0,0,0.3);
                    }
              attributes:
                label: PLEX

  ####################################################################### local-conditional: remote
      - type: custom:local-conditional-card
        id: remote
        default: hide
        card:
          type: custom:tabbed-card
          tabs:
            - card:
                square: false
                columns: 1
                type: grid
                cards:
                  - type: custom:mushroom-climate-card
                    entity: climate.eeokeon
                    hvac_modes:
                      - auto
                      - cool
                      - dry
                      - fan_only
                    show_temperature_control: true
                    collapsible_controls: true
                    name: 거실에어컨
                    card_mod:
                      style: |
                        mushroom-shape-icon {
                          {% if is_state(config.entity, 'auto') %}
                            --card-mod-icon: mdi:autorenew;
                            animation: spin 3s ease-in-out infinite alternate;
                          {% elif is_state(config.entity, 'cool') %}
                            --card-mod-icon: mdi:snowflake;
                            animation: cool 6s ease-in-out infinite;
                          {% elif is_state(config.entity, 'dry') %}
                            --card-mod-icon: mdi:water-percent;
                            animation: dry 1.5s linear infinite;
                          {% elif is_state(config.entity, 'fan_only') %}
                            --card-mod-icon: mdi:fan;
                            animation: spin 1s linear infinite;
                          {% else %}
                            --card-mod-icon: mdi:air-conditioner;
                          {% endif %}
                          display: flex;
                        }
                        @keyframes cool {
                          0%, 100% { transform: rotate(25deg); }
                          25% { transform: rotate(-25deg); }
                          50% { transform: rotate(50deg); }
                          75% { transform: rotate(-50deg); }
                        }
                        @keyframes heat {
                          0%, 100% { --icon-color: rgba(var(--rgb-red), 1); }
                          10%, 90% { --icon-color: rgba(var(--rgb-red), 0.8); }
                          20%, 80% { --icon-color: rgba(var(--rgb-red), 0.6); }
                          30%, 70% { --icon-color: rgba(var(--rgb-red), 0.4); }
                          40%, 60% { --icon-color: rgba(var(--rgb-red), 0.2); }
                          50% { --icon-color: rgba(var(--rgb-red), 0); }
                        }
                        @keyframes dry {
                          0%, 100% { --icon-symbol-size: 21px; }
                          10%, 90% { --icon-symbol-size: 22px; }
                          20%, 80% { --icon-symbol-size: 23px; }
                          30%, 70% { --icon-symbol-size: 24px; }
                          40%, 60% { --icon-symbol-size: 25px; }
                          50% { --icon-symbol-size: 26px; }
                        }
                  - type: custom:stack-in-card
                    cards:
                      - type: custom:mushroom-fan-card
                        entity: fan.fan2s
                        icon: mdi:fan
                        icon_animation: true
                        name: 샤오미선풍기
                        show_percentage_control: true
                        show_oscillate_control: true
                        collapsible_controls: false
                        secondary_info: state
                        fill_container: true
                        layout: horizontal
                        tap_action:
                          action: more-info
                        double_tap_action:
                          action: toggle
                      - type: custom:mushroom-number-card
                        entity: number.fan2s_delay_off_countdown
                        layout: horizontal
                        name: 타이머(max.8Min)
                        icon: mdi:timer-sand
                        icon_color: teal
                        fill_container: false
                        icon_type: icon
                        secondary_info: none
                        primary_info: name
                        display_mode: slider
                    card_mod:
                      style: |
                        ha-card {
                          margin-left: 0px;
                          padding: 10px;
                          transition: all 1s;
                        }
                  - type: custom:stack-in-card
                    cards:
                      - type: horizontal-stack
                        cards:
                          - type: custom:slider-button-card
                            entity: cover.0x00158d00040c7c5b
                            compact: true
                            action_button:
                              show: false
                              mode: custom
                              show_spinner: false
                            slider:
                              direction: left-right
                              background: gradient
                              use_percentage_bg_opacity: true
                              show_track: true
                              use_state_color: true
                              toggle_on_click: false
                              force_square: false
                            show_attribute: true
                      - type: horizontal-stack
                        cards:
                          - type: custom:mushroom-chips-card
                            chips:
                              - type: template
                                entity: script.curtain_open
                                content: null
                                icon: mdi:arrow-collapse-left
                                icon_color: light-blue
                                tap_action:
                                  action: toggle
                              - type: template
                                entity: script.curtain_stop
                                content: null
                                icon: mdi:stop
                                icon_color: light-blue
                                tap_action:
                                  action: toggle
                              - type: template
                                entity: script.curtain_close
                                content: null
                                icon: mdi:arrow-collapse-right
                                icon_color: light-blue
                                tap_action:
                                  action: toggle
                              - type: template
                                entity: script.curtain_position_70
                                content: 70%
                                tap_action:
                                  action: toggle
                              - type: template
                                entity: script.curtain_position_60
                                content: 60%
                                tap_action:
                                  action: toggle
                              - type: template
                                entity: script.curtain_position_40
                                content: 40%
                                tap_action:
                                  action: toggle
                              - type: template
                                entity: script.curtain_position_30
                                content: 30%
                                tap_action:
                                  action: toggle
                              - type: template
                                entity: script.curtain_position_20
                                content: 20%
                                tap_action:
                                  action: toggle
                    card_mod:
                      style: |
                        ha-card {
                          margin-left: 0px;
                          padding: 10px;
                          transition: all 1s;
                        }
  #width: fit-content;
                  - type: custom:button-card
                    template: card_cat_feeding_history
                  - square: false
                    columns: 3
                    type: grid
                    cards:
                      - type: custom:button-card
                        template: card_basic_mode
                        entity: script.sundeok_feeding_t1
                        icon: mdi:numeric-1-circle
                      - type: custom:button-card
                        template: card_basic_mode
                        entity: script.sundeok_feeding_t2
                        icon: mdi:numeric-2-circle
                      - type: custom:button-card
                        template: card_basic_mode
                        entity: script.sundeok_feeding_t3
                        icon: mdi:numeric-3-circle
                      - type: custom:button-card
                        template: card_basic_mode
                        entity: script.siwol_feeding_t1
                        icon: mdi:numeric-1-circle
                      - type: custom:button-card
                        template: card_basic_mode
                        entity: script.siwol_feeding_t2
                        icon: mdi:numeric-2-circle
                      - type: custom:button-card
                        template: card_basic_mode
                        entity: script.siwol_feeding_t3
                        icon: mdi:numeric-3-circle
              attributes:
                label: ELECTRONIC
            - card:
                square: false
                columns: 3
                type: grid
                cards:
                  - type: custom:purifier-card
                    entity: fan.xiaomi_airpurifier_1st
                  - type: custom:purifier-card
                    entity: fan.xiaomi_airpurifier_2nd
                  - type: custom:purifier-card
                    entity: fan.xiaomi_airpurifier_3rd
              attributes:
                label: AIRPURIFIRE
            - card:
                type: vertical-stack
                cards:
                  - square: false
                    columns: 2
                    type: grid
                    cards:
                      - type: custom:mushroom-template-card
                        entity: switch.0x04cd15fffea9d1eb
                        primary: 세탁기
                        icon: mdi:washing-machine
                        #layout: vertical
                        fill_container: true
                        tap_action:
                          action: none
                        double_tap_action:
                          action: toggle
                        secondary: |-
                          {{ states ('sensor.0x04cd15fffea9d1eb_power') }}W
                            /
                          {{ states ('sensor.0x04cd15fffea9d1eb_energy') }}kWh
                        icon_color: |-
                          {% if is_state(config.entity, 'on') %}
                            amber
                          {% endif %}
                        card_mod:
                          style: |
                            ha-state-icon {
                              {% if is_state(config.entity, 'on') %}
                                animation: shake 400ms ease-in-out infinite, drum 2s ease infinite;
                                transform-origin: 50% 110%;
                              {% else %}
                              {% endif %}
                            }
                            @keyframes shake {
                              0%, 100% { transform: translate(0, 0) rotate(0); }
                              20%  { transform: translate(0.4px, -0.4px) rotate(-4deg); }
                              40%  { transform: translate(-0.4px, 0.4px) rotate(4deg); }
                              60%  { transform: translate(0.4px, 0.4px) rotate(-4deg); }
                              80%  { transform: translate(-0.4px, -0.4px) rotate(4deg); }
                            }
                            @keyframes drum {
                              50%  { clip-path: polygon(0 0, 0 100%, 35% 100%, 34% 68%, 60% 41%, 71% 56%, 65% 74%, 47% 79%, 32% 69%, 35% 100%, 100% 100%, 100% 0); }
                            }
                      - type: custom:mushroom-template-card
                        entity: switch.0x04cd15fffeb016d4
                        primary: 건조기
                        icon: mdi:tumble-dryer
                        #layout: vertical
                        fill_container: true
                        tap_action:
                          action: none
                        double_tap_action:
                          action: toggle
                        secondary: |-
                          {{ states ('sensor.0x04cd15fffeb016d4_power') }}W
                            /
                          {{ states ('sensor.0x04cd15fffeb016d4_energy') }}kWh
                        icon_color: |-
                          {% if is_state(config.entity, 'on') %}
                            amber
                          {% endif %}
                        card_mod:
                          style: |
                            ha-state-icon {
                              {% if is_state(config.entity, 'on') %}
                                animation: shake 400ms ease-in-out infinite, drum 1s infinite;
                                transform-origin: 50% 65%;
                              {% else %}
                              {% endif %}
                            }
                            @keyframes shake {
                              0%, 100% { transform: rotate(4deg); }
                              50%  { transform: rotate(-4deg); }
                            }
                            @keyframes drum {
                              50%  { clip-path: polygon(0 0, 0 100%, 35% 100%, 36% 74%, 31% 43%, 61% 40%, 71% 69%, 62% 78%, 36% 73%, 35% 100%, 100% 100%, 100% 0); }
                            }
                      - type: custom:mushroom-template-card
                        entity: switch.0x04cd15fffeabc091
                        primary: 코타츠
                        icon: mdi:fireplace
                        #layout: vertical
                        fill_container: true
                        tap_action:
                          action: none
                        double_tap_action:
                          action: toggle
                        secondary: |-
                          {{ states ('sensor.0x04cd15fffeabc091_power') }}W
                            /
                          {{ states ('sensor.0x04cd15fffeabc091_energy') }}kWh
                        icon_color: |-
                          {% if is_state(config.entity, 'on') %}
                            red
                          {% endif %}
                        card_mod:
                          style: |
                            ha-state-icon {
                              {% if is_state(config.entity, 'on') %}
                                animation: fire 800ms infinite;
                                transform-origin: 50% 85%;
                              {% else %}
                              {% endif %}
                            }
                            @keyframes fire {
                              0%, 19%, 23%, 39%, 43%, 49%, 53%, 69%, 73%, 89%, 93%, 100% { clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%); }
                              20%, 40%, 50%, 70%, 90% { clip-path: polygon(0 0, 100% 0, 100% 100%, 65% 99%, 66% 49%, 52% 44%, 33% 48%, 33% 82%, 66% 82%, 69% 100%, 0 100%); }
                            }
                      - type: custom:mushroom-template-card
                        entity: switch.0x04cd15fffeabcaac
                        primary: 밥솥
                        icon: mdi:rice
                        #layout: vertical
                        fill_container: true
                        tap_action:
                          action: none
                        double_tap_action:
                          action: toggle
                        secondary: |-
                          {{ states ('sensor.0x04cd15fffeabcaac_power') }}W
                            /
                          {{ states ('sensor.0x04cd15fffeabcaac_energy') }}kWh
                        icon_color: |-
                          {% if is_state(config.entity, 'on') %}
                            green
                          {% endif %}
                        card_mod:
                          style:
                            mushroom-shape-icon$: |
                              .shape {
                                {% if is_state(config.entity, 'on') %}
                                  --shape-animation: ping 1.5s infinite, blink 1.5s ease-in-out infinite;;
                                {% else %}
                                {% endif %}
                              }
                              @keyframes ping {
                                0% { box-shadow: 0 0 0 0 rgba(var(--rgb-green), 0.7); }
                                100% { box-shadow: 0 0 5px 15px transparent; }
                              }
                              @keyframes blink {
                                100% {opacity: 0;}
                              }
                  - square: false
                    columns: 1
                    type: grid
                    cards:
                      - type: vertical-stack
                        cards:
                          - type: custom:mushroom-select-card
                            entity: input_select.multitap
                            layout: horizontal
                            secondary_info: none
                          - type: custom:state-switch
                            entity: input_select.multitap
                            default: M1
                            transition: flip-y
                            transition_time: 500
                            states:
                              M1:
                                type: vertical-stack
                                cards:
                                  - type: entities
                                    title: 멀티탭1
                                    entities:
                                      - entity: switch.0x842e14fffefce01a_l1
                                        name: 거실 게이트웨이
                                      - entity: switch.0x842e14fffefce01a_l2
                                        name: 여분
                                      - entity: switch.0x842e14fffefce01a_l3
                                        name: 커튼모터
                                      - entity: switch.0x842e14fffefce01a_l4
                                        name: 이모님
                                      - entity: switch.0x842e14fffefce01a_l5
                                        name: 거실 카메라
                              M2:
                                type: vertical-stack
                                cards:
                                  - type: entities
                                    title: 멀티탭2
                                    entities:
                                      - entity: switch.0x842e14fffefec30d_l1
                                        name: 거실 커튼조명
                                      - entity: switch.0x842e14fffefec30d_l2
                                        name: 휴벌브2
                                      - entity: switch.0x842e14fffefec30d_l3
                                        name: 여분3
                                      - entity: switch.0x842e14fffefec30d_l4
                                        name: 베란다 연장선
                                      - entity: switch.0x842e14fffefec30d_l5
                                        name: 미러볼
                              M3:
                                type: vertical-stack
                                cards:
                                  - type: entities
                                    title: 멀티탭3
                                    entities:
                                      - entity: switch.0x842e14fffefcd488_l1
                                        name: 물걸레
                                      - entity: switch.0x842e14fffefcd488_l2
                                        name: 여분2
                                      - entity: switch.0x842e14fffefcd488_l3
                                        name: 여분3
                                      - entity: switch.0x842e14fffefcd488_l4
                                        name: 여분4
                                      - entity: switch.0x842e14fffefcd488_l5
                                        name: 벌레퇴치기
                              M4:
                                type: vertical-stack
                                cards:
                                  - type: entities
                                    title: 멀티탭4
                                    entities:
                                      - entity: switch.0x842e14fffefce588_l1
                                        name: 여분1
                                      - entity: switch.0x842e14fffefce588_l2
                                        name: 여분2
                                      - entity: switch.0x842e14fffefce588_l3
                                        name: 거실 공기청정기
                                      - entity: switch.0x842e14fffefce588_l4
                                        name: 키오스크
                                      - entity: switch.0x842e14fffefce588_l5
                                        name: 급식기&캠
                              M5:
                                type: vertical-stack
                                cards:
                                  - type: entities
                                    title: 멀티탭5
                                    entities:
                                      - entity: switch.0x00124b00226769aa_l1
                                        name: 도어벨
                                      - entity: switch.0x00124b00226769aa_l2
                                        name: 여분2
                                      - entity: switch.0x00124b00226769aa_l3
                                        name: 휴벌브2
                                      - entity: switch.0x00124b00226769aa_l4
                                        name: 휴허브
              attributes:
                label: PLUG

  ####################################################################### local-conditional: noti
      - type: custom:local-conditional-card
        default: hide
        id: noti
        card:
          type: custom:tabbed-card
          tabs:
            - card:
                type: vertical-stack
                cards:
                  - type: custom:mushroom-select-card
                    entity: input_select.calendar
                    secondary_info: none
                    layout: horizontal
                    fill_container: false
                    primary_info: none
                    tap_action:
                      action: none
                    double_tap_action:
                      action: none
                    hold_action:
                      action: none
                  - type: custom:state-switch
                    entity: input_select.calendar
                    default: List
                    transition: flip-x
                    transition_time: 500
                    states:
                      List:
                        type: vertical-stack
                        cards:
                          - type: custom:atomic-calendar-revive
                            name: ''
                            entities:
                              - entity: calendar.personal
                              - entity: calendar.anniversary
                              - entity: calendar.holidays
                            refreshInterval: 60
                            enableModeChange: false
                            fullDayEventText: 'All day'
                            untilText: 'Until'
                            maxDaysToShow: 24
                            dateColor: 'blue'
                            dateSize: 90
                            timeColor: 'peru'
                            timeSize: 90
                            eventTitleColor: 'peru'
                            eventBarColor: 'lime'
                            eventTitleSize: 90
                            locationIconColor: 'rgba(230,124,115,0.8)'
                            locationLinkColor: 'silver'
                            locationTextSize: 90
                            finishedEventOpacity: 0.6
                            finishedEventFilter: 'grayscale(100%)'
                            dayWrapperLineColor: 'silver'
                            progressBarColor: 'skyblue'
                            dimFinishedEvents: true
                            showCalendarName: true
                            showColors: true
                            showLocation: true
                            showMonth: true
                            showCurrentEventLine: false
                            showWeekNumber: true
                            showProgressBar: true
                            showFullDayProgress: true
                            showEventIcon: true
                            showMultiDay: true
                            showMultiDayEventParts: true
                            hideDeclined: true
                            card_mod:
                              style: |
                                ha-card {
                                  background-color: transparent;
                                  box-shadow: none;
                                }
                      Weekly:
                        type: vertical-stack
                        cards:
                          - type: custom:mushroom-chips-card
                            alignment: justify
                            chips:
                              - type: template
                                content: 캘린더
                                icon: mdi:calendar
                                tap_action: none
                                card_mod:
                                  style: |
                                    ha-card {
                                      padding: 0px !important;
                                      border: none !important;
                                      box-shadow: none !important;
                                      font-size: 3.5rem !important;
                                      background: none !important;
                                    } 
                              - type: template
                                icon: mdi:arrow-right
                                tap_action:
                                  action: navigate
                                  navigation_path: /calendar
                          - type: custom:button-card
                            show_state: false
                            show_icon: false
                            show_name: false
                            styles:
                              card:
                                - padding: 0px
                              grid:
                                - grid-template-areas: '"map"'
                                - grid-template-columns: 100%
                                - grid-template-rows: 100%
                              custom_fields:
                                map:
                                  - filter: opacity(100%)
                                  - overflow: visible
                            custom_fields:
                              map:
                                card:
                                  type: custom:mod-card
                                  card_mod:
                                    style:
                                      tabbed-card:
                                        $:
                                          mwc-tab:
                                            $:
                                              mwc-tab-indicator $: ''
                                              .: |
                                                .mdc-tab {
                                                  min-width: 35px !important;
                                                }
                                                .material-icons {
                                                  display: contents !important;
                                                }

                                                .mdc-tab--active {
                                                  --mdc-icon-size: {{states('input_number.active_icon_size')}}px;
                                                }
                                        .: |
                                          tabbed-card {
                                            --mdc-tab-horizontal-padding: 0px;
                                          }
                                  card:
                                    type: custom:tabbed-card
                                    attributes:
                                      minWidth: true
                                    styles:
                                      '--mdc-tab-horizontal-padding': 0px !important
                                      '--mdc-theme-primary': var(--energy-solar-color)
                                    tabs:
                                      - attributes:
                                          minWidth: true
                                          stacked: false
                                          label: t
                                        card:
                                          type: custom:atomic-calendar-revive
                                          enableModeChange: true
                                          entities:
                                            - entity: calendar.holidays
                                              name: 공휴일
                                              color: purple
                                              showMultiDay: false
                                            - entity: calendar.anniversary
                                              name: 기념일
                                              color: darkblue
                                              showMultiDay: false
                                            - entity: calendar.personal
                                              name: Aiden
                                              color: skyblue
                                              showMultiDay: false
                                          cardHeight: 100%
                                          showDeclined: false
                                          showDate: true
                                          offsetHeaderDate: true
                                          showLocation: false
                                          hideFinishedEvents: true
                                          showRelativeTime: false
                                          compactMode: false
                                          untilText: bis
                                          fullDayEventText: 하루종일
                                          noEventsForNextDaysText: 예정된 약속이 없습니다
                                          noEventText: 오늘은 약속이 없습니다
                                          hiddenEventText: 약속이 숨겨져 있습니다
                                          showProgressBar: false
                                          showCurrentEventLine: false
                                          showMonth: false
                                          showWeekDay: false
                                          showDescription: false
                                          showEventIcon: true
                                          showCalendarName: true
                                          showHiddenText: false
                                          showDatePerEvent: false
                                          showEventDate: false
                                          hideDuplicates: true
                                          showMultiDayEventParts: true
                                          showMultiDay: true
                                          maxDaysToShow: 1
                                      - attributes:
                                          minWidth: true
                                          stacked: false
                                          label: |
                                            [[[
                                              var days = ['일', '월', '화', '수', '목', '금', '토'];
                                              var currentDate = new Date(states['sensor.date'].state);
                                              currentDate.setDate(currentDate.getDate() + 1);
                                              return days[currentDate.getDay()];
                                            ]]]
                                        card:
                                          type: custom:atomic-calendar-revive
                                          enableModeChange: true
                                          entities:
                                            - entity: calendar.holidays
                                              name: 공휴일
                                              color: purple
                                              showMultiDay: false
                                            - entity: calendar.anniversary
                                              name: 기념일
                                              color: darkblue
                                              showMultiDay: false
                                            - entity: calendar.personal
                                              name: Aiden
                                              color: skyblue
                                              showMultiDay: false
                                          cardHeight: 100%
                                          showDeclined: false
                                          showDate: true
                                          offsetHeaderDate: true
                                          showLocation: false
                                          hideFinishedEvents: true
                                          showRelativeTime: false
                                          compactMode: false
                                          untilText: bis
                                          fullDayEventText: 하루종일
                                          noEventsForNextDaysText: 예정된 약속이 없습니다
                                          noEventText: 오늘은 약속이 없습니다
                                          hiddenEventText: 약속이 숨겨져 있습니다
                                          showProgressBar: false
                                          showCurrentEventLine: false
                                          showMonth: false
                                          showWeekDay: false
                                          showDescription: false
                                          showEventIcon: true
                                          showCalendarName: true
                                          showHiddenText: false
                                          showDatePerEvent: false
                                          showEventDate: false
                                          hideDuplicates: true
                                          showMultiDayEventParts: true
                                          showMultiDay: true
                                          maxDaysToShow: 1
                                          startDaysAhead: 1
                                      - attributes:
                                          minWidth: true
                                          stacked: false
                                          label: |
                                            [[[
                                              var days = ['일', '월', '화', '수', '목', '금', '토'];
                                              var currentDate = new Date(states['sensor.date'].state);
                                              currentDate.setDate(currentDate.getDate() + 2);
                                              return days[currentDate.getDay()];
                                            ]]]
                                        card:
                                          type: custom:atomic-calendar-revive
                                          enableModeChange: true
                                          entities:
                                            - entity: calendar.holidays
                                              name: 공휴일
                                              color: purple
                                              showMultiDay: false
                                            - entity: calendar.anniversary
                                              name: 기념일
                                              color: darkblue
                                              showMultiDay: false
                                            - entity: calendar.personal
                                              name: Aiden
                                              color: skyblue
                                              showMultiDay: false
                                          cardHeight: 100%
                                          showDeclined: false
                                          showDate: true
                                          offsetHeaderDate: true
                                          showLocation: false
                                          hideFinishedEvents: true
                                          showRelativeTime: false
                                          compactMode: false
                                          untilText: bis
                                          fullDayEventText: 하루종일
                                          noEventsForNextDaysText: 예정된 약속이 없습니다
                                          noEventText: 오늘은 약속이 없습니다
                                          hiddenEventText: 약속이 숨겨져 있습니다
                                          showProgressBar: false
                                          showCurrentEventLine: false
                                          showMonth: false
                                          showWeekDay: false
                                          showDescription: false
                                          showEventIcon: true
                                          showCalendarName: true
                                          showHiddenText: false
                                          showDatePerEvent: false
                                          showEventDate: false
                                          hideDuplicates: true
                                          showMultiDayEventParts: true
                                          showMultiDay: true
                                          maxDaysToShow: 1
                                          startDaysAhead: 2
                                      - attributes:
                                          minWidth: true
                                          stacked: false
                                          label: |
                                            [[[
                                              var days = ['일', '월', '화', '수', '목', '금', '토'];
                                              var currentDate = new Date(states['sensor.date'].state);
                                              currentDate.setDate(currentDate.getDate() + 3);
                                              return days[currentDate.getDay()];
                                            ]]]
                                        card:
                                          type: custom:atomic-calendar-revive
                                          enableModeChange: true
                                          entities:
                                            - entity: calendar.holidays
                                              name: 공휴일
                                              color: purple
                                              showMultiDay: false
                                            - entity: calendar.anniversary
                                              name: 기념일
                                              color: darkblue
                                              showMultiDay: false
                                            - entity: calendar.personal
                                              name: Aiden
                                              color: skyblue
                                              showMultiDay: false
                                          cardHeight: 100%
                                          showDeclined: false
                                          showDate: true
                                          offsetHeaderDate: true
                                          showLocation: false
                                          hideFinishedEvents: true
                                          showRelativeTime: false
                                          compactMode: false
                                          untilText: bis
                                          fullDayEventText: 하루종일
                                          noEventsForNextDaysText: 예정된 약속이 없습니다
                                          noEventText: 오늘은 약속이 없습니다
                                          hiddenEventText: 약속이 숨겨져 있습니다
                                          showProgressBar: false
                                          showCurrentEventLine: false
                                          showMonth: false
                                          showWeekDay: false
                                          showDescription: false
                                          showEventIcon: true
                                          showCalendarName: true
                                          showHiddenText: false
                                          showDatePerEvent: false
                                          showEventDate: false
                                          hideDuplicates: true
                                          showMultiDayEventParts: true
                                          showMultiDay: true
                                          maxDaysToShow: 1
                                          startDaysAhead: 3
                                      - attributes:
                                          minWidth: true
                                          stacked: false
                                          label: |
                                            [[[
                                              var days = ['일', '월', '화', '수', '목', '금', '토'];
                                              var currentDate = new Date(states['sensor.date'].state);
                                              currentDate.setDate(currentDate.getDate() + 4);
                                              return days[currentDate.getDay()];
                                            ]]]
                                        card:
                                          type: custom:atomic-calendar-revive
                                          enableModeChange: true
                                          entities:
                                            - entity: calendar.holidays
                                              name: 공휴일
                                              color: purple
                                              showMultiDay: false
                                            - entity: calendar.anniversary
                                              name: 기념일
                                              color: darkblue
                                              showMultiDay: false
                                            - entity: calendar.personal
                                              name: Aiden
                                              color: skyblue
                                              showMultiDay: false
                                          cardHeight: 100%
                                          showDeclined: false
                                          showDate: true
                                          offsetHeaderDate: true
                                          showLocation: false
                                          hideFinishedEvents: true
                                          showRelativeTime: false
                                          compactMode: false
                                          untilText: bis
                                          fullDayEventText: 하루종일
                                          noEventsForNextDaysText: 예정된 약속이 없습니다
                                          noEventText: 오늘은 약속이 없습니다
                                          hiddenEventText: 약속이 숨겨져 있습니다
                                          showProgressBar: false
                                          showCurrentEventLine: false
                                          showMonth: false
                                          showWeekDay: false
                                          showDescription: false
                                          showEventIcon: true
                                          showCalendarName: true
                                          showHiddenText: false
                                          showDatePerEvent: false
                                          showEventDate: false
                                          hideDuplicates: true
                                          showMultiDayEventParts: true
                                          showMultiDay: true
                                          maxDaysToShow: 1
                                          startDaysAhead: 4
                                      - attributes:
                                          minWidth: true
                                          stacked: false
                                          label: |
                                            [[[
                                              var days = ['일', '월', '화', '수', '목', '금', '토'];
                                              var currentDate = new Date(states['sensor.date'].state);
                                              currentDate.setDate(currentDate.getDate() + 5);
                                              return days[currentDate.getDay()];
                                            ]]]
                                        card:
                                          type: custom:atomic-calendar-revive
                                          enableModeChange: true
                                          entities:
                                            - entity: calendar.holidays
                                              name: 공휴일
                                              color: purple
                                              showMultiDay: false
                                            - entity: calendar.anniversary
                                              name: 기념일
                                              color: darkblue
                                              showMultiDay: false
                                            - entity: calendar.personal
                                              name: Aiden
                                              color: skyblue
                                              showMultiDay: false
                                          cardHeight: 100%
                                          showDeclined: false
                                          showDate: true
                                          offsetHeaderDate: true
                                          showLocation: false
                                          hideFinishedEvents: true
                                          showRelativeTime: false
                                          compactMode: false
                                          untilText: bis
                                          fullDayEventText: 하루종일
                                          noEventsForNextDaysText: 예정된 약속이 없습니다
                                          noEventText: 오늘은 약속이 없습니다
                                          hiddenEventText: 약속이 숨겨져 있습니다
                                          showProgressBar: false
                                          showCurrentEventLine: false
                                          showMonth: false
                                          showWeekDay: false
                                          showDescription: false
                                          showEventIcon: true
                                          showCalendarName: true
                                          showHiddenText: false
                                          showDatePerEvent: false
                                          showEventDate: false
                                          hideDuplicates: true
                                          showMultiDayEventParts: true
                                          showMultiDay: true
                                          maxDaysToShow: 1
                                          startDaysAhead: 5
                                      - attributes:
                                          minWidth: true
                                          stacked: false
                                          label: |
                                            [[[
                                              var days = ['일', '월', '화', '수', '목', '금', '토'];
                                              var currentDate = new Date(states['sensor.date'].state);
                                              currentDate.setDate(currentDate.getDate() + 6);
                                              return days[currentDate.getDay()];
                                            ]]]
                                        card:
                                          type: custom:atomic-calendar-revive
                                          enableModeChange: true
                                          entities:
                                            - entity: calendar.holidays
                                              name: 공휴일
                                              color: purple
                                              showMultiDay: false
                                            - entity: calendar.anniversary
                                              name: 기념일
                                              color: darkblue
                                              showMultiDay: false
                                            - entity: calendar.personal
                                              name: Aiden
                                              color: skyblue
                                              showMultiDay: false
                                          cardHeight: 100%
                                          showDeclined: false
                                          showDate: true
                                          offsetHeaderDate: true
                                          showLocation: false
                                          hideFinishedEvents: true
                                          showRelativeTime: false
                                          compactMode: false
                                          untilText: bis
                                          fullDayEventText: 하루종일
                                          noEventsForNextDaysText: 예정된 약속이 없습니다
                                          noEventText: 오늘은 약속이 없습니다
                                          hiddenEventText: 약속이 숨겨져 있습니다
                                          showProgressBar: false
                                          showCurrentEventLine: false
                                          showMonth: false
                                          showWeekDay: false
                                          showDescription: false
                                          showEventIcon: true
                                          showCalendarName: true
                                          showHiddenText: false
                                          showDatePerEvent: false
                                          showEventDate: false
                                          hideDuplicates: true
                                          showMultiDayEventParts: true
                                          showMultiDay: true
                                          maxDaysToShow: 1
                                          startDaysAhead: 6
              attributes:
                label: CALENDAR
            - card:
                type: entities
                show_header_toggle: false
                entities:
                  - entity: input_select.trigger_aiden_alarm
                    type: custom:multiple-entity-row
                    #toggle: true
                    entities:
                      - entity: input_datetime.aiden_wakeup
                        name: false
                  - entity: input_select.trigger_son_alarm
                    type: custom:multiple-entity-row
                    entities:
                      - entity: input_datetime.son_wakeup
                        name: false
                  - entity: input_boolean.trigger_sleep_alarm
                    type: custom:multiple-entity-row
                    toggle: true
                    entities:
                      - entity: input_datetime.son_gotobed
                        name: false
                  - entity: input_boolean.dohyun_school_alarm
                    type: custom:multiple-entity-row
                    toggle: true
                    entities:
                      - entity: input_datetime.dohyun_school
                        name: false
                  - entity: input_boolean.taekang_school_alarm
                    type: custom:multiple-entity-row
                    toggle: true
                    entities:
                      - entity: input_datetime.taekang_school
                        name: false
                card_mod:
                  style: |
                    ha-card {
                      background-color: transparent;
                      box-shadow: none;
                    }
              attributes:
                label: ALARM
            - card:
                type: entities
                show_header_toggle: false
                entities:
                  - entity: input_boolean.notify_onoff
                    type: custom:multiple-entity-row
                    name: 1st
                    icon: mdi:home-automation
                    show_state: false
                    show_header_toggle: false
                    state_color: true
                    entities:
                      - entity: input_boolean.notify_onoff
                        name: 알림기능
                        toggle: true
                      - entity: input_boolean.auto_ent_longopen
                        name: 현관5분
                        toggle: true
                      - entity: input_boolean.auto_airpurifier
                        name: 공기청정
                        toggle: true
                      - entity: input_boolean.gateway_no_sound
                        name: 게잇소리
                        toggle: true
                  - entity: input_boolean.auto_light
                    type: custom:multiple-entity-row
                    name: 2nd
                    icon: mdi:home-automation
                    show_state: false
                    show_header_toggle: false
                    state_color: true
                    entities:
                      - entity: input_boolean.auto_light
                        name: 조명차단
                        toggle: true
                      - entity: input_boolean.costraintventilation
                        name: 강제환기
                        toggle: true
                      - entity: input_boolean.notify_telegram
                        name: 텔레그램
                        toggle: true
                      - entity: input_boolean.toilet_music
                        name: 욕실음악
                        toggle: true
                  - entity: input_boolean.auto_ledstrip
                    type: custom:multiple-entity-row
                    name: 3rd
                    icon: mdi:home-automation
                    show_state: false
                    show_header_toggle: false
                    state_color: true
                    entities:
                      - entity: input_boolean.auto_ledstrip
                        name: 커튼조명
                        toggle: true
                      - entity: input_boolean.gateway_pm25_mode
                        name: 먼지조명
                        toggle: true
                      - entity: input_boolean.show_calendar
                        name: 일정보기
                        toggle: true
                      - entity: input_boolean.auto_vacuum
                        name: 청소알림
                        toggle: true
                  - entity: input_boolean.show_kiosk
                    type: custom:multiple-entity-row
                    name: 4th
                    icon: mdi:home-automation
                    show_state: false
                    show_header_toggle: false
                    state_color: true
                    entities:
                      - entity: input_boolean.show_kiosk
                        name: 키오스크
                        toggle: true
                      - entity: input_boolean.auto_xiaomi_socket1_humid
                        name: 가습모드
                        toggle: true
                      - entity: input_boolean.auto_telegram
                        name: 화면알림
                        toggle: true
                      - entity: input_boolean.switching_socket
                        name: 소켓모드
                        toggle: true
                  - entity: input_boolean.visitor_whisper
                    type: custom:multiple-entity-row
                    name: 5th
                    icon: mdi:home-automation
                    show_state: false
                    show_header_toggle: false
                    state_color: true
                    entities:
                      - entity: input_boolean.visitor_whisper
                        name: 손님조용
                        toggle: true
                card_mod:
                  style: |
                    ha-card {
                      background-color: transparent;
                      box-shadow: none;
                    }
              attributes:
                label: AUTOMATION


  ####################################################################### local-conditional: youtube
      - type: custom:local-conditional-card
        default: hide
        id: youtube
        card:
          type: custom:tabbed-card
          tabs:
            - card:
                type: horizontal-stack
                cards:
                  - type: vertical-stack
                    cards:
                      - square: false
                        columns: 1
                        type: grid
                        cards:
                          - type: custom:mod-card
                            card:
                              type: custom:mushroom-title-card
                              title: 🎧YouTube Music Premium
                            card_mod:
                              style:
                                mushroom-title-card$: |
                                  * {
                                    animation: flicker 1.1s both;
                                  }
                                  @keyframes flicker {
                                    0%, 10%, 10.2%, 20%, 20.6%, 30%, 30.6%, 45%, 55.1%, 57%, 60.1%, 65%, 75.1%, 77%, 85.1%, 86% { opacity: 0; }
                                    10.1%, 20.1%, 30.1%, 30.5%, 45.1%, 50%, 55%, 57.1%, 60%, 65.1%, 75%, 77.1%, 85%, 86.1%, 100% { opacity: 1; }
                                  }
                          - type: custom:mushroom-media-player-card
                            entity: media_player.ytube_music_player
                            name: YouTube Music
                            icon: mdi:play
                            use_media_info: true
                            use_media_artwork: false
                            show_volume_level: false
                            media_controls:
                              - play_pause_stop
                              - previous
                              - next
                            volume_controls:
                              - volume_buttons
                              - volume_set
                            fill_container: false
                            double_tap_action:
                              action: call-service
                              service: input_boolean.toggle
                              service_data:
                                entity_id: input_boolean.show_volume_control
                              haptic: medium
                            tap_action:
                              action: fire-dom-event
                              browser_mod:
                                service: browser_mod.popup
                                data:
                                  title: 🎧YouTube Music Player
                                  content:
                                    type: custom:stack-in-card
                                    cards:
                                      - type: custom:decluttering-card
                                        template: media_card_speaker
                                        variables:
                                          - entity: media_player.ytube_music_player
                                  card_mod:
                                    style:
                                      ha-dialog$: |
                                        .mdc-dialog__surface {
                                          /* Apply gradient background to popup using album art colors. Set to default colors when idle */
                                          {% if is_state('media_player.ytube_music_player', ['playing', 'paused', 'idle']) %}
                                            background: linear-gradient(305deg, transparent 50%, rgba(140, 95, 245, 0.4)),
                                                        linear-gradient(55deg, transparent 50%, rgba(197, 86, 245, 0.2)),
                                                        linear-gradient(180deg, transparent 40%, rgba(234, 83, 245, 0.3));
                                          {% else %}
                                            background: linear-gradient(0deg, transparent 40%, rgba(192, 127, 190, 0.3)),
                                                        linear-gradient(240deg, transparent 40%, rgba(143, 119, 237, 0.3)),
                                                        linear-gradient(120deg, transparent 40%, rgba(122, 181, 239, 0.3));
                                          {% endif %}
                                        }
                                      ha-header-bar$: |
                                        .mdc-top-app-bar {
                                          /* Remove header background so that popup background is visible */
                                          --mdc-theme-primary: none;
                                          /* Reduced the gap between header and album art */
                                          margin-bottom: -16px;
                                        }
                                      .: |
                                        :host {
                                          /* Set width of popup */
                                          --popup-min-width: 450px;
                                        }
                            card_mod:
                              style: |
                                mushroom-shape-icon {
                                   display: flex;
                                   {% set media_type = state_attr(config.entity, 'media_content_type') %}
                                   {% if media_type == 'music' %}
                                     --card-mod-icon: mdi:music;
                                     animation: beat 1.3s ease-out infinite both;
                                   {% elif media_type == 'playlist' %}
                                     --card-mod-icon: mdi:music;
                                     animation: beat 1.3s ease-out infinite both;
                                   {% else %}
                                     --card-mod-icon: mdi:youtube;
                                   {% endif %}
                                 }
                                 @keyframes flicker {
                                   0%, 31.98%, 32.98%, 34.98%, 36.98%, 39.98%, 67.98%, 68.98%, 95.98%, 96.98%, 97.98%, 98.98%, 100% { --icon-color: rgba(var(--rgb-indigo), 1); }
                                   32%, 33%, 35%, 36%, 37%, 40%, 68%, 69%, 96%, 97%, 98%, 99% { --icon-color: rgba(var(--rgb-indigo), 0.6); }
                                 }
                                 @keyframes beat {
                                   0%, 60% { --icon-symbol-size: 21px; }
                                   5%, 17%, 57% { --icon-symbol-size: 22px; }
                                   10%, 20%, 51% { --icon-symbol-size: 23px; }
                                   25%, 45% { --icon-symbol-size: 24px; }
                                   30%, 39% { --icon-symbol-size: 25px; }
                                   33% { --icon-symbol-size: 26px; }
                                 }
                                 ha-card {
                                   {% if not is_state(config.entity, 'off') %}
                                     background: rgba(var(--rgb-card-background-color), 0.6) url( '{{ state_attr(config.entity, "entity_picture") }}' ) center no-repeat;
                                     background-size: cover;
                                     background-blend-mode: overlay;
                                   {% endif %} 
                                 }
                          - type: conditional
                            conditions:
                              - entity: media_player.ytube_music_player
                                state_not: 'off'
                            card:
                              type: custom:bar-card
                              entity: sensor.ytube_playing_rate
                              name: ""
                              height: 13px
                              width: 85%
                              color: '#1BA1E2'
                              entity_row: true
                              direction: right
                              animation:
                               state: 'on'
                               speed: '5'
                              positions:
                                icon: 'off'
                                name: 'off'
                                value: 'inside'
                                indicator: 'off'
                          - type: custom:polr-ytube-search-card
                            icon: mdi:card-search
                            entity_id: media_player.ytube_music_player
                            header: YouTube Music Search Card
                            searchTitle: Search on YouTube Music
                            speakers:
                              - media_player.livingroom
                              - media_player.studyroom

                          - type: conditional
                            conditions:
                              - entity: input_boolean.show_volume_control
                                state_not: 'on'
                            card:
                              square: false
                              columns: 2
                              type: grid
                              cards:
                                - type: custom:mushroom-select-card
                                  entity: input_select.ytube_music_player_playmode
                                  icon: none
                                  icon_type: none
                                  layout: vertical
                                  secondary_info: none
                                  primary_info: name
                                  fill_container: true
                                  hold_action:
                                    action: none
                                  double_tap_action:
                                    action: none
                                  name: Play Mode
                                - type: custom:mushroom-select-card
                                  entity: input_select.ytube_music_player_speakers
                                  icon: none
                                  icon_type: none
                                  layout: vertical
                                  secondary_info: none
                                  primary_info: name
                                  fill_container: true
                                  hold_action:
                                    action: none
                                  double_tap_action:
                                    action: none
                                  name: Play Speaker
                          - type: conditional
                            conditions:
                              - entity: input_boolean.show_volume_control
                                state_not: 'on'
                            card:
                              square: false
                              columns: 1
                              type: grid
                              cards:
                                - type: custom:stack-in-card
                                  cards:
                                    - type: custom:mushroom-number-card
                                      entity: input_number.speaker_volume_total
                                      display_mode: slider
                                      icon_type: icon
                                      secondary_info: state
                                      primary_info: name
                                      fill_container: true
                                      layout: horizontal
                                      icon: mdi:volume-high
                                      tap_action:
                                        action: none
                                - type: custom:stack-in-card
                                  cards:
                                    - type: custom:mushroom-number-card
                                      entity: input_number.speaker_volume_livingroom
                                      display_mode: slider
                                      icon_type: icon
                                      secondary_info: state
                                      primary_info: name
                                      fill_container: true
                                      layout: horizontal
                                      icon: mdi:volume-high
                                      tap_action:
                                        action: none
                                    - type: custom:mushroom-number-card
                                      entity: input_number.speaker_volume_kitchen
                                      display_mode: slider
                                      icon_type: icon
                                      secondary_info: state
                                      primary_info: name
                                      fill_container: true
                                      layout: horizontal
                                      icon: mdi:volume-high
                                      tap_action:
                                        action: none
                                    - type: custom:mushroom-number-card
                                      entity: input_number.speaker_volume_mainroom
                                      display_mode: slider
                                      icon_type: icon
                                      secondary_info: state
                                      primary_info: name
                                      fill_container: true
                                      layout: horizontal
                                      icon: mdi:volume-high
                                      tap_action:
                                        action: none
                                    - type: custom:mushroom-number-card
                                      entity: input_number.speaker_volume_sonroom
                                      display_mode: slider
                                      icon_type: icon
                                      secondary_info: state
                                      primary_info: name
                                      fill_container: true
                                      layout: horizontal
                                      icon: mdi:volume-high
                                      tap_action:
                                        action: none
                                    - type: custom:mushroom-number-card
                                      entity: input_number.speaker_volume_studyroom
                                      display_mode: slider
                                      icon_type: icon
                                      secondary_info: state
                                      primary_info: name
                                      fill_container: true
                                      layout: horizontal
                                      icon: mdi:volume-high
                                      tap_action:
                                        action: none
                                    - type: custom:mushroom-number-card
                                      entity: input_number.speaker_volume_toilet
                                      display_mode: slider
                                      icon_type: icon
                                      secondary_info: state
                                      primary_info: name
                                      fill_container: true
                                      layout: horizontal
                                      icon: mdi:volume-high
                                      tap_action:
                                        action: none
              attributes:
                label: PLAYER
            - card:
                square: false
                columns: 3
                type: grid
                cards:
                  - type: custom:button-card
                    template: card_album_choose
                    variables:
                      media_id: PLn_Pl3CGIaYGMJTra9H9p9clHJhSObMKD  #Melon top100
                    entity_picture: |
                      [[[
                        if (states['sensor.ytube_current_media_id'].state == variables.media_id)
                        return states['sensor.ytube_current_media_cover'].state;
                        return "/local/floorplan/a-1.gif";
                      ]]]
                    custom_fields:
                      card_name: Melon Top100
                  - type: custom:button-card
                    template: card_album_choose
                    variables:
                      media_id: PLJsGZ8AcXdHS3JF4UCWqOpzHGTP2DQLIL  #Ballard
                    entity_picture: |
                      [[[
                        if (states['sensor.ytube_current_media_id'].state == variables.media_id)
                        return states['sensor.ytube_current_media_cover'].state;
                        return "/local/floorplan/a-5.gif";
                      ]]]
                    custom_fields:
                      card_name: Ballard
                  - type: custom:button-card
                    template: card_album_choose
                    variables:
                      media_id: PLJsGZ8AcXdHTF2zbhESMMI07bpAXhMigX  #Dance
                    entity_picture: |
                      [[[
                        if (states['sensor.ytube_current_media_id'].state == variables.media_id)
                        return states['sensor.ytube_current_media_cover'].state;
                        return "/local/floorplan/a-3.gif";
                      ]]]
                    custom_fields:
                      card_name: Dance
                  - type: custom:button-card
                    template: card_album_choose
                    variables:
                      media_id: PLJsGZ8AcXdHSCiz_vBjob9TbO7P7dCErn  #Hiphop
                    entity_picture: |
                      [[[
                        if (states['sensor.ytube_current_media_id'].state == variables.media_id)
                        return states['sensor.ytube_current_media_cover'].state;
                        return "/local/floorplan/a-9.gif";
                      ]]]
                    custom_fields:
                      card_name: Hiphop
                  - type: custom:button-card
                    template: card_album_choose
                    variables:
                      media_id: PLJsGZ8AcXdHT-BK1CH18ayV26co6W5Jzs  #Recollection
                    entity_picture: |
                      [[[
                        if (states['sensor.ytube_current_media_id'].state == variables.media_id)
                        return states['sensor.ytube_current_media_cover'].state;
                        return "/local/floorplan/a-4.gif";
                      ]]]
                    custom_fields:
                      card_name: Recollection
                  - type: custom:button-card
                    template: card_album_choose
                    variables:
                      media_id: PLJsGZ8AcXdHRxSLnzYVhVQ5U3LE7R21-K  #Popsong
                    entity_picture: |
                      [[[
                        if (states['sensor.ytube_current_media_id'].state == variables.media_id)
                        return states['sensor.ytube_current_media_cover'].state;
                        return "/local/floorplan/a-2.gif";
                      ]]]
                    custom_fields:
                      card_name: Pops
              attributes:
                label: ALBUM
            - card:
                type: conditional
                conditions:
                  - entity: media_player.ytube_music_player
                    state: 'playing'
                card:
                  type: markdown
                  content: >-
                    {% if is_state('media_player.ytube_music_player','playing') %}{%
                    for i in range(0,state_attr("sensor.ytube_music_player_extra",
                    "total_tracks")) %}
                     {% if i == state_attr("media_player.ytube_music_player",
                    "current_track") %}**{% endif %}\[{{i+1}}] {{
                    state_attr("sensor.ytube_music_player_extra", "tracks")[i] }}{% if
                    i == state_attr("media_player.ytube_music_player",
                    "current_track") %}**{% endif %}

                    {%- endfor %}{% else %}Player off{% endif %}
              attributes:
                label: LIST
            - card:
                type: vertical-stack
                cards:
                  - type: custom:mushroom-template-card
                    entity: media_player.ytube_music_player
                    icon: mdi:record-circle
                    icon_color: cyan
                    primary: '{{ state_attr(config.entity, "media_artist") }}'
                    secondary: '{{ state_attr(config.entity, "media_title") }}'
                    card_mod:
                      style:
                        mushroom-shape-icon$: |
                          .shape {
                            {% if is_state(config.entity, 'playing') %}
                            background: linear-gradient(-45deg, rgba(var(--rgb-black), 0.4) 0%, rgba(var(--rgb-black), 0.6) 50%, rgba(var(--rgb-black), 0.4) 100%);
                            --shape-animation: spin 400ms linear infinite;
                            --shape-color: none;
                            {% else %}
                            {% endif %}
                          }
                        .: |
                          :host {
                            --input-fill-color: transparent;
                            --paper-item-icon-color: orange;
                            --paper-listbox-background-color: transparent;
                            --mdc-select-fill-color: transparent;
                          }
                          ha-card {
                            background-color: transparent;
                            box-shadow: none;
                          }
                  - type: conditional
                    conditions:
                      - entity: media_player.ytube_music_player
                        state: 'playing'
                    card:
                      type: markdown
                      content: >-
                        {% if is_state('media_player.ytube_music_player', 'playing') %}
                        {{state_attr('sensor.ytube_music_player_extra', 'lyrics') }}{% else
                        %}Player off{% endif %}
                      card_mod:
                        style: |
                          ha-card {
                            background-color: transparent;
                            box-shadow: none;
                          }
              attributes:
                label: LYRICS
            - card:
                type: vertical-stack
                cards:
                  - square: false
                    columns: 1
                    type: grid
                    cards:
                      - type: entities
                        card_mod:
                          style: |
                            ha-card {
                              background-color: transparent;
                              box-shadow: none;
                            }
                            :host {
                              --input-fill-color: transparent;
                              --paper-item-icon-color: orange;
                              --paper-listbox-background-color: transparent;
                              --mdc-select-fill-color: transparent;
                            }
                        entities:
                          - entity: input_select.speaker
                            name: 스피커 선택
                            card_mod:
                              style: |
                                ha-card {
                                  background-color: transparent;
                                  box-shadow: none;
                                }
                                :host {
                                  --input-fill-color: transparent;
                                  --paper-item-icon-color: orange;
                                  --paper-listbox-background-color: transparent;
                                  --mdc-select-fill-color: transparent;
                                }
                      - type: vertical-stack
                        cards:
                          - square: false
                            columns: 3
                            type: grid
                            cards:
                              - type: custom:button-card
                                show_name: false
                                show_entity_picture: true
                                size: 100%
                                entity_picture: /local/floorplan/radio_sbs_power.png
                                styles:
                                  card:
                                    - background: transparent
                                    - box-shadow: none
                                tap_action:
                                  action: call-service
                                  service: script.radio_sbs_powerfm_motion
                                double_tap_action:
                                  action: call-service
                                  service: script.radio_sbs_powerfm_select
                              - type: custom:button-card
                                show_name: false
                                show_entity_picture: true
                                size: 100%
                                entity_picture: /local/floorplan/radio_sbs_love.png
                                styles:
                                  card:
                                    - background: transparent
                                    - box-shadow: none
                                tap_action:
                                  action: call-service
                                  service: script.radio_sbs_lovefm_motion
                                double_tap_action:
                                  action: call-service
                                  service: script.radio_sbs_lovefm_select
                              - type: custom:button-card
                                show_name: false
                                show_entity_picture: true
                                size: 100%
                                entity_picture: /local/floorplan/radio_mbc_fm4u.png
                                styles:
                                  card:
                                    - background: transparent
                                    - box-shadow: none
                                tap_action:
                                  action: call-service
                                  service: script.radio_mbc_fm4u_motion
                                double_tap_action:
                                  action: call-service
                                  service: script.radio_mbc_fm4u_select
                              - type: custom:button-card
                                show_name: false
                                show_entity_picture: true
                                size: 100%
                                entity_picture: /local/floorplan/radio_mbc_fm.png
                                styles:
                                  card:
                                    - background: transparent
                                    - box-shadow: none
                                tap_action:
                                  action: call-service
                                  service: script.radio_mbc_fm_motion
                                double_tap_action:
                                  action: call-service
                                  service: script.radio_mbc_fm_select
                              - type: custom:button-card
                                show_name: false
                                show_entity_picture: true
                                size: 100%
                                entity_picture: /local/floorplan/radio_ebs_fm.png
                                styles:
                                  card:
                                    - background: transparent
                                    - box-shadow: none
                                tap_action:
                                  action: call-service
                                  service: script.radio_ebs_motion
                                double_tap_action:
                                  action: call-service
                                  service: script.radio_ebs_select
                              - type: custom:button-card
                                show_name: false
                                show_entity_picture: true
                                size: 100%
                                entity_picture: /local/floorplan/radio_mbc_allthat.png
                                styles:
                                  card:
                                    - background: transparent
                                    - box-shadow: none
                                tap_action:
                                  action: call-service
                                  service: script.radio_mbc_allthat_motion
                                double_tap_action:
                                  action: call-service
                                  service: script.radio_mbc_allthat_select
                  - square: false
                    columns: 1
                    type: grid
                    cards:
                      - type: custom:bubble-card
                        card_type: separator
                        name: <marquee> 스피커 선택 재생시 더블클릭 하세요! </marquee>
                        icon: mdi:gesture-two-double-tap
                        card_mod:
                          style: |
                            ha-card: {
                              animation: marquee 20s linear infinite;
                              overflow: visible !important;
                            } 
                            @keyframes marquee {
                              from {
                                transform: translateX(100%);
                              }
                              to {
                                transform: translateX(-100%);
                              }
                            }
              attributes:
                label: RADIO


  ####################################################################### local-conditional: speaker
      - type: custom:local-conditional-card
        default: hide
        id: speaker
        card:
          type: custom:tabbed-card
          tabs:
            - card:
                square: false
                columns: 2
                type: grid
                cards:
                  - type: custom:mushroom-media-player-card
                    entity: media_player.livingroom
                    name: 거실
                    icon: mdi:play
                    use_media_info: true
                    use_media_artwork: false
                    show_volume_level: false
                    media_controls:
                      - play_pause_stop
                      - previous
                      - next
                    volume_controls:
                      - volume_buttons
                      - volume_set
                    fill_container: false
                    tap_action:
                      action: fire-dom-event
                      browser_mod:
                        service: browser_mod.popup
                        data:
                          title: 거실
                          content:
                            type: custom:stack-in-card
                            cards:
                              - type: custom:mushroom-media-player-card
                                entity: media_player.livingroom
                                name: 거실
                                icon_type: none
                                layout: vertical
                                media_controls:
                                  - previous
                                  - play_pause_stop
                                  - next
                                volume_controls:
                                  - volume_set
                                  - volume_buttons
                                show_volume_level: false
                                use_media_info: true
                                collapsible_controls: false
                                card_mod:
                                  style:
                                    mushroom-state-info$: |
                                      /* CSS for Mushroom Popup Media Player */
                                      .secondary:before {
                                        /* Add album name between song title and artist name */
                                        {% if state_attr(config.entity, 'media_album_name') != none %}
                                          content: "{{ state_attr(config.entity, 'media_album_name')}}\A";
                                        {% endif %}
                                        /* Format title to fit on seperate line */
                                        white-space: pre;
                                        text-overflow: ellipsis;
                                      }
                                    .: |
                                      ha-card {
                                        /* Remove border from media player */
                                        --ha-card-border-width: 0;
                                        /* Apply album art color to media player icon & volume bar */
                                        --rgb-state-media-player: var(--album-art-color);
                                        /* Disable transitions */
                                        transition: all 0.5s;
                                      }
                                      .actions {
                                        /* Apply album art color to media player controls */
                                        --rgb-primary-text-color: var(--album-art-color);
                                        --primary-text-color: rgb(var(--album-art-color));
                                        /* Move volume button to seperate row */
                                        display: block !important;
                                      }
                                      ha-card:before {
                                        content: "";
                                        /* Show album art above media player when active and default image when idle */
                                        {% if is_state(config.entity, ['playing', 'paused', 'idle']) %}
                                          background: url( '{{ state_attr(config.entity, "entity_picture") }}') center no-repeat;
                                        {% else %}
                                          background: url('/local/floorplan/bgm_youtubrmusic_banner.png') center no-repeat;
                                        {% endif %}
                                        /* Add padding around album art */
                                        margin: 0px 4px 16px;
                                        /* Add drop shadow to album art */
                                        filter: drop-shadow(4px 4px 6px rgba(var(--album-art-color), 0.3));
                                        /* Round borders of album art */
                                        border-radius: var(--control-border-radius);
                                        /* Adjust the album art aspect ratio based on media type */
                                        {% set media_type = state_attr(config.entity, 'media_content_type') %}
                                        {% if media_type == 'tvshow' %}
                                          aspect-ratio: 16 / 9;
                                        {% elif media_type == 'movie' %}
                                          aspect-ratio: 2 / 3;
                                        {% else %}
                                          aspect-ratio: 1 / 1;
                                        {% endif %}
                                        /* Stretch album art to fit box. Fix for if album art is not sized correctly */
                                        background-size: 100% 100%;
                                      }
                                      mushroom-button {
                                        /* Size volume button to match other controls and center */
                                        display: flex;
                                        width: calc((100% / 3) - (var(--spacing) / 3) * 2);
                                        margin: auto;
                                      }
                                      mushroom-media-player-media-control,
                                      mushroom-media-player-volume-control {
                                        /* Correct margins for volume button on second row */
                                        display: flex;
                                        margin-right: 0px !important;
                                        /* Check if PLAY|STOP are supported and adjust margin accordingly */
                                        {% if state_attr(config.entity, 'supported_features') | int | bitwise_and(20480) > 0 %}
                                          margin-bottom: var(--spacing) !important;
                                        {% endif %}
                                      }
                              - entity: media_player.livingroom
                                hide:
                                  icon: true
                                  name: true
                                  runtime: true
                                  source: true
                                  power: true
                                  state_label: true
                                  volume: true
                                  info: true
                                  progress: false
                                  controls: true
                                more_info: false
                                type: custom:mini-media-player
                                toggle_power: false
                                group: true
                                card_mod:
                                  style:
                                    mmp-progress$: |
                                      paper-progress {
                                        /* Apply album art color to progress bar when paused */
                                        --paper-progress-container-color: rgba(var(--album-art-color), 0.2) !important;
                                        /* Apply album art color to progress bar when playing */
                                        --paper-progress-active-color: rgb(var(--album-art-color)) !important;
                                      }
                                    .: |
                                      ha-card {
                                        /* Move progress bar up into gap. Check if PLAY|STOP are supported */
                                        --base-offset: calc(4 * var(--mush-spacing, 12px)
                                                            + 1.33 * var(--mush-spacing, 12px)
                                                            + var(--mush-card-primary-line-height, 1.5) * var(--mush-card-primary-font-size, 14px)
                                                            + var(--mush-card-secondary-line-height, 1.5) * var(--mush-card-secondary-font-size, 12px)
                                                            + var(--mush-control-height, 42px));
                                        /* Check if Play (16385) or Stop (4096) are supported and add control button height if they are */
                                        {% if state_attr(config.entity, 'supported_features') | int | bitwise_and(20480) > 0 %}
                                          --control-offset: calc(var(--mush-spacing, 12px) + var(--mush-control-height, 42px));
                                        {% else %}
                                          --control-offset: 0px;
                                        {% endif %}
                                        /* Check if album name is present and add to height if it is */
                                        {% set album_name = state_attr(config.entity, 'media_album_name') %}
                                        {% if album_name == None or album_name == "" %}
                                          --album-offset: 0px;
                                        {% else %}
                                          --album-offset: calc(var(--mush-card-secondary-line-height, 1.5) * var(--mush-card-secondary-font-size, 12px));
                                        {% endif %}
                                        bottom: calc(var(--base-offset) + var(--control-offset) + var(--album-offset));
                                        /* Correct margins for progress bar */
                                        margin: 0px 28px -12px;
                                        /* Set height of card to match pregress bar height */
                                        height: var(--mmp-progress-height);
                                        /* Remove border outline */
                                        --ha-card-border-width: 0;
                                        /* Round corners of progress bar */
                                        --mmp-border-radius: var(--control-border-radius, 12px) !important;
                                        /* Set height of progress bar */
                                        --mmp-progress-height: 12px !important;
                                        /* Remove transitions to prevent progress bar floating in */
                                        transition: all 0.5s;
                                      }
                            card_mod:
                              style: |
                                :host {
                                  /* Assign album art color to variable used in popup */
                                  --album-art-color:
                                  {% if is_state('media_player.toilet', ['playing', 'paused', 'idle']) %}
                                    121, 224, 242
                                  {% else %}
                                    141, 117, 238
                                  {% endif %}
                                  /* Remove background because it is applied to popup */
                                  --ha-card-background: none;
                                }
                          card_mod:
                            style:
                              ha-dialog$: |
                                .mdc-dialog__surface {
                                  /* Apply gradient background to popup using album art colors. Set to default colors when idle */
                                  {% if is_state('media_player.livingroom', ['playing', 'paused', 'idle']) %}
                                    background: linear-gradient(305deg, transparent 50%, rgba(140, 95, 245, 0.4)),
                                                linear-gradient(55deg, transparent 50%, rgba(197, 86, 245, 0.2)),
                                                linear-gradient(180deg, transparent 40%, rgba(234, 83, 245, 0.3));
                                  {% else %}
                                    background: linear-gradient(0deg, transparent 40%, rgba(192, 127, 190, 0.3)),
                                                linear-gradient(240deg, transparent 40%, rgba(143, 119, 237, 0.3)),
                                                linear-gradient(120deg, transparent 40%, rgba(122, 181, 239, 0.3));
                                  {% endif %}
                                }
                              ha-header-bar$: |
                                .mdc-top-app-bar {
                                  /* Remove header background so that popup background is visible */
                                  --mdc-theme-primary: none;
                                  /* Reduced the gap between header and album art */
                                  margin-bottom: -16px;
                                }
                              .: |
                                :host {
                                  /* Set width of popup */
                                  --popup-min-width: 450px;
                                }
                    card_mod:
                      style: |
                        mushroom-shape-icon {
                           display: flex;
                           {% set media_type = state_attr(config.entity, 'media_content_type') %}
                           {% if media_type == 'music' %}
                             --card-mod-icon: mdi:music;
                             animation: beat 1.3s ease-out infinite both;
                           {% elif media_type == 'playlist' %}
                             --card-mod-icon: mdi:music;
                             animation: beat 1.3s ease-out infinite both;
                           {% else %}
                             --card-mod-icon: mdi:play;
                           {% endif %}
                         }
                         @keyframes flicker {
                           0%, 31.98%, 32.98%, 34.98%, 36.98%, 39.98%, 67.98%, 68.98%, 95.98%, 96.98%, 97.98%, 98.98%, 100% { --icon-color: rgba(var(--rgb-indigo), 1); }
                           32%, 33%, 35%, 36%, 37%, 40%, 68%, 69%, 96%, 97%, 98%, 99% { --icon-color: rgba(var(--rgb-indigo), 0.6); }
                         }
                         @keyframes beat {
                           0%, 60% { --icon-symbol-size: 21px; }
                           5%, 17%, 57% { --icon-symbol-size: 22px; }
                           10%, 20%, 51% { --icon-symbol-size: 23px; }
                           25%, 45% { --icon-symbol-size: 24px; }
                           30%, 39% { --icon-symbol-size: 25px; }
                           33% { --icon-symbol-size: 26px; }
                         }
                         ha-card {
                           {% if not is_state(config.entity, 'off') %}
                             background: rgba(var(--rgb-card-background-color), 0.6) url( '{{ state_attr(config.entity, "entity_picture") }}' ) center no-repeat;
                             background-size: cover;
                             background-blend-mode: overlay;
                           {% endif %} 
                         }
                  - type: custom:mushroom-media-player-card
                    entity: media_player.kitchen
                    name: 주방
                    icon: mdi:play
                    use_media_info: true
                    use_media_artwork: false
                    show_volume_level: false
                    media_controls:
                      - play_pause_stop
                      - previous
                      - next
                    volume_controls:
                      - volume_buttons
                      - volume_set
                    fill_container: false
                    tap_action:
                      action: fire-dom-event
                      browser_mod:
                        service: browser_mod.popup
                        data:
                          title: 주방
                          content:
                            type: custom:stack-in-card
                            cards:
                              - type: custom:mushroom-media-player-card
                                entity: media_player.kitchen
                                name: 주방
                                icon_type: none
                                layout: vertical
                                media_controls:
                                  - previous
                                  - play_pause_stop
                                  - next
                                volume_controls:
                                  - volume_set
                                  - volume_buttons
                                show_volume_level: false
                                use_media_info: true
                                collapsible_controls: false
                                card_mod:
                                  style:
                                    mushroom-state-info$: |
                                      /* CSS for Mushroom Popup Media Player */
                                      .secondary:before {
                                        /* Add album name between song title and artist name */
                                        {% if state_attr(config.entity, 'media_album_name') != none %}
                                          content: "{{ state_attr(config.entity, 'media_album_name')}}\A";
                                        {% endif %}
                                        /* Format title to fit on seperate line */
                                        white-space: pre;
                                        text-overflow: ellipsis;
                                      }
                                    .: |
                                      ha-card {
                                        /* Remove border from media player */
                                        --ha-card-border-width: 0;
                                        /* Apply album art color to media player icon & volume bar */
                                        --rgb-state-media-player: var(--album-art-color);
                                        /* Disable transitions */
                                        transition: all 0.5s;
                                      }
                                      .actions {
                                        /* Apply album art color to media player controls */
                                        --rgb-primary-text-color: var(--album-art-color);
                                        --primary-text-color: rgb(var(--album-art-color));
                                        /* Move volume button to seperate row */
                                        display: block !important;
                                      }
                                      ha-card:before {
                                        content: "";
                                        /* Show album art above media player when active and default image when idle */
                                        {% if is_state(config.entity, ['playing', 'paused', 'idle']) %}
                                          background: url( '{{ state_attr(config.entity, "entity_picture") }}') center no-repeat;
                                        {% else %}
                                          background: url('/local/floorplan/bgm_youtubrmusic_banner.png') center no-repeat;
                                        {% endif %}
                                        /* Add padding around album art */
                                        margin: 0px 4px 16px;
                                        /* Add drop shadow to album art */
                                        filter: drop-shadow(4px 4px 6px rgba(var(--album-art-color), 0.3));
                                        /* Round borders of album art */
                                        border-radius: var(--control-border-radius);
                                        /* Adjust the album art aspect ratio based on media type */
                                        {% set media_type = state_attr(config.entity, 'media_content_type') %}
                                        {% if media_type == 'tvshow' %}
                                          aspect-ratio: 16 / 9;
                                        {% elif media_type == 'movie' %}
                                          aspect-ratio: 2 / 3;
                                        {% else %}
                                          aspect-ratio: 1 / 1;
                                        {% endif %}
                                        /* Stretch album art to fit box. Fix for if album art is not sized correctly */
                                        background-size: 100% 100%;
                                      }
                                      mushroom-button {
                                        /* Size volume button to match other controls and center */
                                        display: flex;
                                        width: calc((100% / 3) - (var(--spacing) / 3) * 2);
                                        margin: auto;
                                      }
                                      mushroom-media-player-media-control,
                                      mushroom-media-player-volume-control {
                                        /* Correct margins for volume button on second row */
                                        display: flex;
                                        margin-right: 0px !important;
                                        /* Check if PLAY|STOP are supported and adjust margin accordingly */
                                        {% if state_attr(config.entity, 'supported_features') | int | bitwise_and(20480) > 0 %}
                                          margin-bottom: var(--spacing) !important;
                                        {% endif %}
                                      }
                              - entity: media_player.kitchen
                                hide:
                                  icon: true
                                  name: true
                                  runtime: true
                                  source: true
                                  power: true
                                  state_label: true
                                  volume: true
                                  info: true
                                  progress: false
                                  controls: true
                                more_info: false
                                type: custom:mini-media-player
                                toggle_power: false
                                group: true
                                card_mod:
                                  style:
                                    mmp-progress$: |
                                      paper-progress {
                                        /* Apply album art color to progress bar when paused */
                                        --paper-progress-container-color: rgba(var(--album-art-color), 0.2) !important;
                                        /* Apply album art color to progress bar when playing */
                                        --paper-progress-active-color: rgb(var(--album-art-color)) !important;
                                      }
                                    .: |
                                      ha-card {
                                        /* Move progress bar up into gap. Check if PLAY|STOP are supported */
                                        --base-offset: calc(4 * var(--mush-spacing, 12px)
                                                            + 1.33 * var(--mush-spacing, 12px)
                                                            + var(--mush-card-primary-line-height, 1.5) * var(--mush-card-primary-font-size, 14px)
                                                            + var(--mush-card-secondary-line-height, 1.5) * var(--mush-card-secondary-font-size, 12px)
                                                            + var(--mush-control-height, 42px));
                                        /* Check if Play (16385) or Stop (4096) are supported and add control button height if they are */
                                        {% if state_attr(config.entity, 'supported_features') | int | bitwise_and(20480) > 0 %}
                                          --control-offset: calc(var(--mush-spacing, 12px) + var(--mush-control-height, 42px));
                                        {% else %}
                                          --control-offset: 0px;
                                        {% endif %}
                                        /* Check if album name is present and add to height if it is */
                                        {% set album_name = state_attr(config.entity, 'media_album_name') %}
                                        {% if album_name == None or album_name == "" %}
                                          --album-offset: 0px;
                                        {% else %}
                                          --album-offset: calc(var(--mush-card-secondary-line-height, 1.5) * var(--mush-card-secondary-font-size, 12px));
                                        {% endif %}
                                        bottom: calc(var(--base-offset) + var(--control-offset) + var(--album-offset));
                                        /* Correct margins for progress bar */
                                        margin: 0px 28px -12px;
                                        /* Set height of card to match pregress bar height */
                                        height: var(--mmp-progress-height);
                                        /* Remove border outline */
                                        --ha-card-border-width: 0;
                                        /* Round corners of progress bar */
                                        --mmp-border-radius: var(--control-border-radius, 12px) !important;
                                        /* Set height of progress bar */
                                        --mmp-progress-height: 12px !important;
                                        /* Remove transitions to prevent progress bar floating in */
                                        transition: all 0.5s;
                                      }
                            card_mod:
                              style: |
                                :host {
                                  /* Assign album art color to variable used in popup */
                                  --album-art-color:
                                  {% if is_state('media_player.toilet', ['playing', 'paused', 'idle']) %}
                                    121, 224, 242
                                  {% else %}
                                    141, 117, 238
                                  {% endif %}
                                  /* Remove background because it is applied to popup */
                                  --ha-card-background: none;
                                }
                          card_mod:
                            style:
                              ha-dialog$: |
                                .mdc-dialog__surface {
                                  /* Apply gradient background to popup using album art colors. Set to default colors when idle */
                                  {% if is_state('media_player.kitchen', ['playing', 'paused', 'idle']) %}
                                    background: linear-gradient(305deg, transparent 50%, rgba(140, 95, 245, 0.4)),
                                                linear-gradient(55deg, transparent 50%, rgba(197, 86, 245, 0.2)),
                                                linear-gradient(180deg, transparent 40%, rgba(234, 83, 245, 0.3));
                                  {% else %}
                                    background: linear-gradient(0deg, transparent 40%, rgba(192, 127, 190, 0.3)),
                                                linear-gradient(240deg, transparent 40%, rgba(143, 119, 237, 0.3)),
                                                linear-gradient(120deg, transparent 40%, rgba(122, 181, 239, 0.3));
                                  {% endif %}
                                }
                              ha-header-bar$: |
                                .mdc-top-app-bar {
                                  /* Remove header background so that popup background is visible */
                                  --mdc-theme-primary: none;
                                  /* Reduced the gap between header and album art */
                                  margin-bottom: -16px;
                                }
                              .: |
                                :host {
                                  /* Set width of popup */
                                  --popup-min-width: 450px;
                                }
                    card_mod:
                      style: |
                        mushroom-shape-icon {
                           display: flex;
                           {% set media_type = state_attr(config.entity, 'media_content_type') %}
                           {% if media_type == 'music' %}
                             --card-mod-icon: mdi:music;
                             animation: beat 1.3s ease-out infinite both;
                           {% elif media_type == 'playlist' %}
                             --card-mod-icon: mdi:music;
                             animation: beat 1.3s ease-out infinite both;
                           {% else %}
                             --card-mod-icon: mdi:play;
                           {% endif %}
                         }
                         @keyframes flicker {
                           0%, 31.98%, 32.98%, 34.98%, 36.98%, 39.98%, 67.98%, 68.98%, 95.98%, 96.98%, 97.98%, 98.98%, 100% { --icon-color: rgba(var(--rgb-indigo), 1); }
                           32%, 33%, 35%, 36%, 37%, 40%, 68%, 69%, 96%, 97%, 98%, 99% { --icon-color: rgba(var(--rgb-indigo), 0.6); }
                         }
                         @keyframes beat {
                           0%, 60% { --icon-symbol-size: 21px; }
                           5%, 17%, 57% { --icon-symbol-size: 22px; }
                           10%, 20%, 51% { --icon-symbol-size: 23px; }
                           25%, 45% { --icon-symbol-size: 24px; }
                           30%, 39% { --icon-symbol-size: 25px; }
                           33% { --icon-symbol-size: 26px; }
                         }
                         ha-card {
                           {% if not is_state(config.entity, 'off') %}
                             background: rgba(var(--rgb-card-background-color), 0.6) url( '{{ state_attr(config.entity, "entity_picture") }}' ) center no-repeat;
                             background-size: cover;
                             background-blend-mode: overlay;
                           {% endif %} 
                         }
                  - type: custom:mushroom-media-player-card
                    entity: media_player.mainroom
                    name: 안방
                    icon: mdi:play
                    use_media_info: true
                    use_media_artwork: false
                    show_volume_level: false
                    media_controls:
                      - play_pause_stop
                      - previous
                      - next
                    volume_controls:
                      - volume_buttons
                      - volume_set
                    fill_container: false
                    tap_action:
                      action: fire-dom-event
                      browser_mod:
                        service: browser_mod.popup
                        data:
                          title: 안방
                          content:
                            type: custom:stack-in-card
                            cards:
                              - type: custom:mushroom-media-player-card
                                entity: media_player.mainroom
                                name: 안방
                                icon_type: none
                                layout: vertical
                                media_controls:
                                  - previous
                                  - play_pause_stop
                                  - next
                                volume_controls:
                                  - volume_set
                                  - volume_buttons
                                show_volume_level: false
                                use_media_info: true
                                collapsible_controls: false
                                card_mod:
                                  style:
                                    mushroom-state-info$: |
                                      /* CSS for Mushroom Popup Media Player */
                                      .secondary:before {
                                        /* Add album name between song title and artist name */
                                        {% if state_attr(config.entity, 'media_album_name') != none %}
                                          content: "{{ state_attr(config.entity, 'media_album_name')}}\A";
                                        {% endif %}
                                        /* Format title to fit on seperate line */
                                        white-space: pre;
                                        text-overflow: ellipsis;
                                      }
                                    .: |
                                      ha-card {
                                        /* Remove border from media player */
                                        --ha-card-border-width: 0;
                                        /* Apply album art color to media player icon & volume bar */
                                        --rgb-state-media-player: var(--album-art-color);
                                        /* Disable transitions */
                                        transition: all 0.5s;
                                      }
                                      .actions {
                                        /* Apply album art color to media player controls */
                                        --rgb-primary-text-color: var(--album-art-color);
                                        --primary-text-color: rgb(var(--album-art-color));
                                        /* Move volume button to seperate row */
                                        display: block !important;
                                      }
                                      ha-card:before {
                                        content: "";
                                        /* Show album art above media player when active and default image when idle */
                                        {% if is_state(config.entity, ['playing', 'paused', 'idle']) %}
                                          background: url( '{{ state_attr(config.entity, "entity_picture") }}') center no-repeat;
                                        {% else %}
                                          background: url('/local/floorplan/bgm_youtubrmusic_banner.png') center no-repeat;
                                        {% endif %}
                                        /* Add padding around album art */
                                        margin: 0px 4px 16px;
                                        /* Add drop shadow to album art */
                                        filter: drop-shadow(4px 4px 6px rgba(var(--album-art-color), 0.3));
                                        /* Round borders of album art */
                                        border-radius: var(--control-border-radius);
                                        /* Adjust the album art aspect ratio based on media type */
                                        {% set media_type = state_attr(config.entity, 'media_content_type') %}
                                        {% if media_type == 'tvshow' %}
                                          aspect-ratio: 16 / 9;
                                        {% elif media_type == 'movie' %}
                                          aspect-ratio: 2 / 3;
                                        {% else %}
                                          aspect-ratio: 1 / 1;
                                        {% endif %}
                                        /* Stretch album art to fit box. Fix for if album art is not sized correctly */
                                        background-size: 100% 100%;
                                      }
                                      mushroom-button {
                                        /* Size volume button to match other controls and center */
                                        display: flex;
                                        width: calc((100% / 3) - (var(--spacing) / 3) * 2);
                                        margin: auto;
                                      }
                                      mushroom-media-player-media-control,
                                      mushroom-media-player-volume-control {
                                        /* Correct margins for volume button on second row */
                                        display: flex;
                                        margin-right: 0px !important;
                                        /* Check if PLAY|STOP are supported and adjust margin accordingly */
                                        {% if state_attr(config.entity, 'supported_features') | int | bitwise_and(20480) > 0 %}
                                          margin-bottom: var(--spacing) !important;
                                        {% endif %}
                                      }
                              - entity: media_player.mainroom
                                hide:
                                  icon: true
                                  name: true
                                  runtime: true
                                  source: true
                                  power: true
                                  state_label: true
                                  volume: true
                                  info: true
                                  progress: false
                                  controls: true
                                more_info: false
                                type: custom:mini-media-player
                                toggle_power: false
                                group: true
                                card_mod:
                                  style:
                                    mmp-progress$: |
                                      paper-progress {
                                        /* Apply album art color to progress bar when paused */
                                        --paper-progress-container-color: rgba(var(--album-art-color), 0.2) !important;
                                        /* Apply album art color to progress bar when playing */
                                        --paper-progress-active-color: rgb(var(--album-art-color)) !important;
                                      }
                                    .: |
                                      ha-card {
                                        /* Move progress bar up into gap. Check if PLAY|STOP are supported */
                                        --base-offset: calc(4 * var(--mush-spacing, 12px)
                                                            + 1.33 * var(--mush-spacing, 12px)
                                                            + var(--mush-card-primary-line-height, 1.5) * var(--mush-card-primary-font-size, 14px)
                                                            + var(--mush-card-secondary-line-height, 1.5) * var(--mush-card-secondary-font-size, 12px)
                                                            + var(--mush-control-height, 42px));
                                        /* Check if Play (16385) or Stop (4096) are supported and add control button height if they are */
                                        {% if state_attr(config.entity, 'supported_features') | int | bitwise_and(20480) > 0 %}
                                          --control-offset: calc(var(--mush-spacing, 12px) + var(--mush-control-height, 42px));
                                        {% else %}
                                          --control-offset: 0px;
                                        {% endif %}
                                        /* Check if album name is present and add to height if it is */
                                        {% set album_name = state_attr(config.entity, 'media_album_name') %}
                                        {% if album_name == None or album_name == "" %}
                                          --album-offset: 0px;
                                        {% else %}
                                          --album-offset: calc(var(--mush-card-secondary-line-height, 1.5) * var(--mush-card-secondary-font-size, 12px));
                                        {% endif %}
                                        bottom: calc(var(--base-offset) + var(--control-offset) + var(--album-offset));
                                        /* Correct margins for progress bar */
                                        margin: 0px 28px -12px;
                                        /* Set height of card to match pregress bar height */
                                        height: var(--mmp-progress-height);
                                        /* Remove border outline */
                                        --ha-card-border-width: 0;
                                        /* Round corners of progress bar */
                                        --mmp-border-radius: var(--control-border-radius, 12px) !important;
                                        /* Set height of progress bar */
                                        --mmp-progress-height: 12px !important;
                                        /* Remove transitions to prevent progress bar floating in */
                                        transition: all 0.5s;
                                      }
                            card_mod:
                              style: |
                                :host {
                                  /* Assign album art color to variable used in popup */
                                  --album-art-color:
                                  {% if is_state('media_player.toilet', ['playing', 'paused', 'idle']) %}
                                    121, 224, 242
                                  {% else %}
                                    141, 117, 238
                                  {% endif %}
                                  /* Remove background because it is applied to popup */
                                  --ha-card-background: none;
                                }
                          card_mod:
                            style:
                              ha-dialog$: |
                                .mdc-dialog__surface {
                                  /* Apply gradient background to popup using album art colors. Set to default colors when idle */
                                  {% if is_state('media_player.mainroom', ['playing', 'paused', 'idle']) %}
                                    background: linear-gradient(305deg, transparent 50%, rgba(140, 95, 245, 0.4)),
                                                linear-gradient(55deg, transparent 50%, rgba(197, 86, 245, 0.2)),
                                                linear-gradient(180deg, transparent 40%, rgba(234, 83, 245, 0.3));
                                  {% else %}
                                    background: linear-gradient(0deg, transparent 40%, rgba(192, 127, 190, 0.3)),
                                                linear-gradient(240deg, transparent 40%, rgba(143, 119, 237, 0.3)),
                                                linear-gradient(120deg, transparent 40%, rgba(122, 181, 239, 0.3));
                                  {% endif %}
                                }
                              ha-header-bar$: |
                                .mdc-top-app-bar {
                                  /* Remove header background so that popup background is visible */
                                  --mdc-theme-primary: none;
                                  /* Reduced the gap between header and album art */
                                  margin-bottom: -16px;
                                }
                              .: |
                                :host {
                                  /* Set width of popup */
                                  --popup-min-width: 450px;
                                }
                    card_mod:
                      style: |
                        mushroom-shape-icon {
                           display: flex;
                           {% set media_type = state_attr(config.entity, 'media_content_type') %}
                           {% if media_type == 'music' %}
                             --card-mod-icon: mdi:music;
                             animation: beat 1.3s ease-out infinite both;
                           {% elif media_type == 'playlist' %}
                             --card-mod-icon: mdi:music;
                             animation: beat 1.3s ease-out infinite both;
                           {% else %}
                             --card-mod-icon: mdi:play;
                           {% endif %}
                         }
                         @keyframes flicker {
                           0%, 31.98%, 32.98%, 34.98%, 36.98%, 39.98%, 67.98%, 68.98%, 95.98%, 96.98%, 97.98%, 98.98%, 100% { --icon-color: rgba(var(--rgb-indigo), 1); }
                           32%, 33%, 35%, 36%, 37%, 40%, 68%, 69%, 96%, 97%, 98%, 99% { --icon-color: rgba(var(--rgb-indigo), 0.6); }
                         }
                         @keyframes beat {
                           0%, 60% { --icon-symbol-size: 21px; }
                           5%, 17%, 57% { --icon-symbol-size: 22px; }
                           10%, 20%, 51% { --icon-symbol-size: 23px; }
                           25%, 45% { --icon-symbol-size: 24px; }
                           30%, 39% { --icon-symbol-size: 25px; }
                           33% { --icon-symbol-size: 26px; }
                         }
                         ha-card {
                           {% if not is_state(config.entity, 'off') %}
                             background: rgba(var(--rgb-card-background-color), 0.6) url( '{{ state_attr(config.entity, "entity_picture") }}' ) center no-repeat;
                             background-size: cover;
                             background-blend-mode: overlay;
                           {% endif %} 
                         }
                  - type: custom:mushroom-media-player-card
                    entity: media_player.sonroom
                    name: 아들방
                    icon: mdi:play
                    use_media_info: true
                    use_media_artwork: false
                    show_volume_level: false
                    media_controls:
                      - play_pause_stop
                      - previous
                      - next
                    volume_controls:
                      - volume_buttons
                      - volume_set
                    fill_container: false
                    tap_action:
                      action: fire-dom-event
                      browser_mod:
                        service: browser_mod.popup
                        data:
                          title: 아들방
                          content:
                            type: custom:stack-in-card
                            cards:
                              - type: custom:mushroom-media-player-card
                                entity: media_player.sonroom
                                name: 아들방
                                icon_type: none
                                layout: vertical
                                media_controls:
                                  - previous
                                  - play_pause_stop
                                  - next
                                volume_controls:
                                  - volume_set
                                  - volume_buttons
                                show_volume_level: false
                                use_media_info: true
                                collapsible_controls: false
                                card_mod:
                                  style:
                                    mushroom-state-info$: |
                                      /* CSS for Mushroom Popup Media Player */
                                      .secondary:before {
                                        /* Add album name between song title and artist name */
                                        {% if state_attr(config.entity, 'media_album_name') != none %}
                                          content: "{{ state_attr(config.entity, 'media_album_name')}}\A";
                                        {% endif %}
                                        /* Format title to fit on seperate line */
                                        white-space: pre;
                                        text-overflow: ellipsis;
                                      }
                                    .: |
                                      ha-card {
                                        /* Remove border from media player */
                                        --ha-card-border-width: 0;
                                        /* Apply album art color to media player icon & volume bar */
                                        --rgb-state-media-player: var(--album-art-color);
                                        /* Disable transitions */
                                        transition: all 0.5s;
                                      }
                                      .actions {
                                        /* Apply album art color to media player controls */
                                        --rgb-primary-text-color: var(--album-art-color);
                                        --primary-text-color: rgb(var(--album-art-color));
                                        /* Move volume button to seperate row */
                                        display: block !important;
                                      }
                                      ha-card:before {
                                        content: "";
                                        /* Show album art above media player when active and default image when idle */
                                        {% if is_state(config.entity, ['playing', 'paused', 'idle']) %}
                                          background: url( '{{ state_attr(config.entity, "entity_picture") }}') center no-repeat;
                                        {% else %}
                                          background: url('/local/floorplan/bgm_youtubrmusic_banner.png') center no-repeat;
                                        {% endif %}
                                        /* Add padding around album art */
                                        margin: 0px 4px 16px;
                                        /* Add drop shadow to album art */
                                        filter: drop-shadow(4px 4px 6px rgba(var(--album-art-color), 0.3));
                                        /* Round borders of album art */
                                        border-radius: var(--control-border-radius);
                                        /* Adjust the album art aspect ratio based on media type */
                                        {% set media_type = state_attr(config.entity, 'media_content_type') %}
                                        {% if media_type == 'tvshow' %}
                                          aspect-ratio: 16 / 9;
                                        {% elif media_type == 'movie' %}
                                          aspect-ratio: 2 / 3;
                                        {% else %}
                                          aspect-ratio: 1 / 1;
                                        {% endif %}
                                        /* Stretch album art to fit box. Fix for if album art is not sized correctly */
                                        background-size: 100% 100%;
                                      }
                                      mushroom-button {
                                        /* Size volume button to match other controls and center */
                                        display: flex;
                                        width: calc((100% / 3) - (var(--spacing) / 3) * 2);
                                        margin: auto;
                                      }
                                      mushroom-media-player-media-control,
                                      mushroom-media-player-volume-control {
                                        /* Correct margins for volume button on second row */
                                        display: flex;
                                        margin-right: 0px !important;
                                        /* Check if PLAY|STOP are supported and adjust margin accordingly */
                                        {% if state_attr(config.entity, 'supported_features') | int | bitwise_and(20480) > 0 %}
                                          margin-bottom: var(--spacing) !important;
                                        {% endif %}
                                      }
                              - entity: media_player.sonroom
                                hide:
                                  icon: true
                                  name: true
                                  runtime: true
                                  source: true
                                  power: true
                                  state_label: true
                                  volume: true
                                  info: true
                                  progress: false
                                  controls: true
                                more_info: false
                                type: custom:mini-media-player
                                toggle_power: false
                                group: true
                                card_mod:
                                  style:
                                    mmp-progress$: |
                                      paper-progress {
                                        /* Apply album art color to progress bar when paused */
                                        --paper-progress-container-color: rgba(var(--album-art-color), 0.2) !important;
                                        /* Apply album art color to progress bar when playing */
                                        --paper-progress-active-color: rgb(var(--album-art-color)) !important;
                                      }
                                    .: |
                                      ha-card {
                                        /* Move progress bar up into gap. Check if PLAY|STOP are supported */
                                        --base-offset: calc(4 * var(--mush-spacing, 12px)
                                                            + 1.33 * var(--mush-spacing, 12px)
                                                            + var(--mush-card-primary-line-height, 1.5) * var(--mush-card-primary-font-size, 14px)
                                                            + var(--mush-card-secondary-line-height, 1.5) * var(--mush-card-secondary-font-size, 12px)
                                                            + var(--mush-control-height, 42px));
                                        /* Check if Play (16385) or Stop (4096) are supported and add control button height if they are */
                                        {% if state_attr(config.entity, 'supported_features') | int | bitwise_and(20480) > 0 %}
                                          --control-offset: calc(var(--mush-spacing, 12px) + var(--mush-control-height, 42px));
                                        {% else %}
                                          --control-offset: 0px;
                                        {% endif %}
                                        /* Check if album name is present and add to height if it is */
                                        {% set album_name = state_attr(config.entity, 'media_album_name') %}
                                        {% if album_name == None or album_name == "" %}
                                          --album-offset: 0px;
                                        {% else %}
                                          --album-offset: calc(var(--mush-card-secondary-line-height, 1.5) * var(--mush-card-secondary-font-size, 12px));
                                        {% endif %}
                                        bottom: calc(var(--base-offset) + var(--control-offset) + var(--album-offset));
                                        /* Correct margins for progress bar */
                                        margin: 0px 28px -12px;
                                        /* Set height of card to match pregress bar height */
                                        height: var(--mmp-progress-height);
                                        /* Remove border outline */
                                        --ha-card-border-width: 0;
                                        /* Round corners of progress bar */
                                        --mmp-border-radius: var(--control-border-radius, 12px) !important;
                                        /* Set height of progress bar */
                                        --mmp-progress-height: 12px !important;
                                        /* Remove transitions to prevent progress bar floating in */
                                        transition: all 0.5s;
                                      }
                            card_mod:
                              style: |
                                :host {
                                  /* Assign album art color to variable used in popup */
                                  --album-art-color:
                                  {% if is_state('media_player.toilet', ['playing', 'paused', 'idle']) %}
                                    121, 224, 242
                                  {% else %}
                                    141, 117, 238
                                  {% endif %}
                                  /* Remove background because it is applied to popup */
                                  --ha-card-background: none;
                                }
                          card_mod:
                            style:
                              ha-dialog$: |
                                .mdc-dialog__surface {
                                  /* Apply gradient background to popup using album art colors. Set to default colors when idle */
                                  {% if is_state('media_player.sonroom', ['playing', 'paused', 'idle']) %}
                                    background: linear-gradient(305deg, transparent 50%, rgba(140, 95, 245, 0.4)),
                                                linear-gradient(55deg, transparent 50%, rgba(197, 86, 245, 0.2)),
                                                linear-gradient(180deg, transparent 40%, rgba(234, 83, 245, 0.3));
                                  {% else %}
                                    background: linear-gradient(0deg, transparent 40%, rgba(192, 127, 190, 0.3)),
                                                linear-gradient(240deg, transparent 40%, rgba(143, 119, 237, 0.3)),
                                                linear-gradient(120deg, transparent 40%, rgba(122, 181, 239, 0.3));
                                  {% endif %}
                                }
                              ha-header-bar$: |
                                .mdc-top-app-bar {
                                  /* Remove header background so that popup background is visible */
                                  --mdc-theme-primary: none;
                                  /* Reduced the gap between header and album art */
                                  margin-bottom: -16px;
                                }
                              .: |
                                :host {
                                  /* Set width of popup */
                                  --popup-min-width: 450px;
                                }
                    card_mod:
                      style: |
                        mushroom-shape-icon {
                           display: flex;
                           {% set media_type = state_attr(config.entity, 'media_content_type') %}
                           {% if media_type == 'music' %}
                             --card-mod-icon: mdi:music;
                             animation: beat 1.3s ease-out infinite both;
                           {% elif media_type == 'playlist' %}
                             --card-mod-icon: mdi:music;
                             animation: beat 1.3s ease-out infinite both;
                           {% else %}
                             --card-mod-icon: mdi:play;
                           {% endif %}
                         }
                         @keyframes flicker {
                           0%, 31.98%, 32.98%, 34.98%, 36.98%, 39.98%, 67.98%, 68.98%, 95.98%, 96.98%, 97.98%, 98.98%, 100% { --icon-color: rgba(var(--rgb-indigo), 1); }
                           32%, 33%, 35%, 36%, 37%, 40%, 68%, 69%, 96%, 97%, 98%, 99% { --icon-color: rgba(var(--rgb-indigo), 0.6); }
                         }
                         @keyframes beat {
                           0%, 60% { --icon-symbol-size: 21px; }
                           5%, 17%, 57% { --icon-symbol-size: 22px; }
                           10%, 20%, 51% { --icon-symbol-size: 23px; }
                           25%, 45% { --icon-symbol-size: 24px; }
                           30%, 39% { --icon-symbol-size: 25px; }
                           33% { --icon-symbol-size: 26px; }
                         }
                         ha-card {
                           {% if not is_state(config.entity, 'off') %}
                             background: rgba(var(--rgb-card-background-color), 0.6) url( '{{ state_attr(config.entity, "entity_picture") }}' ) center no-repeat;
                             background-size: cover;
                             background-blend-mode: overlay;
                           {% endif %} 
                         }
                  - type: custom:mushroom-media-player-card
                    entity: media_player.studyroom
                    name: 공부방
                    icon: mdi:play
                    use_media_info: true
                    use_media_artwork: false
                    show_volume_level: false
                    media_controls:
                      - play_pause_stop
                      - previous
                      - next
                    volume_controls:
                      - volume_buttons
                      - volume_set
                    fill_container: false
                    tap_action:
                      action: fire-dom-event
                      browser_mod:
                        service: browser_mod.popup
                        data:
                          title: 공부방
                          content:
                            type: custom:stack-in-card
                            cards:
                              - type: custom:mushroom-media-player-card
                                entity: media_player.studyroom
                                name: 공부방
                                icon_type: none
                                layout: vertical
                                media_controls:
                                  - previous
                                  - play_pause_stop
                                  - next
                                volume_controls:
                                  - volume_set
                                  - volume_buttons
                                show_volume_level: false
                                use_media_info: true
                                collapsible_controls: false
                                card_mod:
                                  style:
                                    mushroom-state-info$: |
                                      /* CSS for Mushroom Popup Media Player */
                                      .secondary:before {
                                        /* Add album name between song title and artist name */
                                        {% if state_attr(config.entity, 'media_album_name') != none %}
                                          content: "{{ state_attr(config.entity, 'media_album_name')}}\A";
                                        {% endif %}
                                        /* Format title to fit on seperate line */
                                        white-space: pre;
                                        text-overflow: ellipsis;
                                      }
                                    .: |
                                      ha-card {
                                        /* Remove border from media player */
                                        --ha-card-border-width: 0;
                                        /* Apply album art color to media player icon & volume bar */
                                        --rgb-state-media-player: var(--album-art-color);
                                        /* Disable transitions */
                                        transition: all 0.5s;
                                      }
                                      .actions {
                                        /* Apply album art color to media player controls */
                                        --rgb-primary-text-color: var(--album-art-color);
                                        --primary-text-color: rgb(var(--album-art-color));
                                        /* Move volume button to seperate row */
                                        display: block !important;
                                      }
                                      ha-card:before {
                                        content: "";
                                        /* Show album art above media player when active and default image when idle */
                                        {% if is_state(config.entity, ['playing', 'paused', 'idle']) %}
                                          background: url( '{{ state_attr(config.entity, "entity_picture") }}') center no-repeat;
                                        {% else %}
                                          background: url('/local/floorplan/bgm_youtubrmusic_banner.png') center no-repeat;
                                        {% endif %}
                                        /* Add padding around album art */
                                        margin: 0px 4px 16px;
                                        /* Add drop shadow to album art */
                                        filter: drop-shadow(4px 4px 6px rgba(var(--album-art-color), 0.3));
                                        /* Round borders of album art */
                                        border-radius: var(--control-border-radius);
                                        /* Adjust the album art aspect ratio based on media type */
                                        {% set media_type = state_attr(config.entity, 'media_content_type') %}
                                        {% if media_type == 'tvshow' %}
                                          aspect-ratio: 16 / 9;
                                        {% elif media_type == 'movie' %}
                                          aspect-ratio: 2 / 3;
                                        {% else %}
                                          aspect-ratio: 1 / 1;
                                        {% endif %}
                                        /* Stretch album art to fit box. Fix for if album art is not sized correctly */
                                        background-size: 100% 100%;
                                      }
                                      mushroom-button {
                                        /* Size volume button to match other controls and center */
                                        display: flex;
                                        width: calc((100% / 3) - (var(--spacing) / 3) * 2);
                                        margin: auto;
                                      }
                                      mushroom-media-player-media-control,
                                      mushroom-media-player-volume-control {
                                        /* Correct margins for volume button on second row */
                                        display: flex;
                                        margin-right: 0px !important;
                                        /* Check if PLAY|STOP are supported and adjust margin accordingly */
                                        {% if state_attr(config.entity, 'supported_features') | int | bitwise_and(20480) > 0 %}
                                          margin-bottom: var(--spacing) !important;
                                        {% endif %}
                                      }
                              - entity: media_player.studyroom
                                hide:
                                  icon: true
                                  name: true
                                  runtime: true
                                  source: true
                                  power: true
                                  state_label: true
                                  volume: true
                                  info: true
                                  progress: false
                                  controls: true
                                more_info: false
                                type: custom:mini-media-player
                                toggle_power: false
                                group: true
                                card_mod:
                                  style:
                                    mmp-progress$: |
                                      paper-progress {
                                        /* Apply album art color to progress bar when paused */
                                        --paper-progress-container-color: rgba(var(--album-art-color), 0.2) !important;
                                        /* Apply album art color to progress bar when playing */
                                        --paper-progress-active-color: rgb(var(--album-art-color)) !important;
                                      }
                                    .: |
                                      ha-card {
                                        /* Move progress bar up into gap. Check if PLAY|STOP are supported */
                                        --base-offset: calc(4 * var(--mush-spacing, 12px)
                                                            + 1.33 * var(--mush-spacing, 12px)
                                                            + var(--mush-card-primary-line-height, 1.5) * var(--mush-card-primary-font-size, 14px)
                                                            + var(--mush-card-secondary-line-height, 1.5) * var(--mush-card-secondary-font-size, 12px)
                                                            + var(--mush-control-height, 42px));
                                        /* Check if Play (16385) or Stop (4096) are supported and add control button height if they are */
                                        {% if state_attr(config.entity, 'supported_features') | int | bitwise_and(20480) > 0 %}
                                          --control-offset: calc(var(--mush-spacing, 12px) + var(--mush-control-height, 42px));
                                        {% else %}
                                          --control-offset: 0px;
                                        {% endif %}
                                        /* Check if album name is present and add to height if it is */
                                        {% set album_name = state_attr(config.entity, 'media_album_name') %}
                                        {% if album_name == None or album_name == "" %}
                                          --album-offset: 0px;
                                        {% else %}
                                          --album-offset: calc(var(--mush-card-secondary-line-height, 1.5) * var(--mush-card-secondary-font-size, 12px));
                                        {% endif %}
                                        bottom: calc(var(--base-offset) + var(--control-offset) + var(--album-offset));
                                        /* Correct margins for progress bar */
                                        margin: 0px 28px -12px;
                                        /* Set height of card to match pregress bar height */
                                        height: var(--mmp-progress-height);
                                        /* Remove border outline */
                                        --ha-card-border-width: 0;
                                        /* Round corners of progress bar */
                                        --mmp-border-radius: var(--control-border-radius, 12px) !important;
                                        /* Set height of progress bar */
                                        --mmp-progress-height: 12px !important;
                                        /* Remove transitions to prevent progress bar floating in */
                                        transition: all 0.5s;
                                      }
                            card_mod:
                              style: |
                                :host {
                                  /* Assign album art color to variable used in popup */
                                  --album-art-color:
                                  {% if is_state('media_player.toilet', ['playing', 'paused', 'idle']) %}
                                    121, 224, 242
                                  {% else %}
                                    141, 117, 238
                                  {% endif %}
                                  /* Remove background because it is applied to popup */
                                  --ha-card-background: none;
                                }
                          card_mod:
                            style:
                              ha-dialog$: |
                                .mdc-dialog__surface {
                                  /* Apply gradient background to popup using album art colors. Set to default colors when idle */
                                  {% if is_state('media_player.studyroom', ['playing', 'paused', 'idle']) %}
                                    background: linear-gradient(305deg, transparent 50%, rgba(140, 95, 245, 0.4)),
                                                linear-gradient(55deg, transparent 50%, rgba(197, 86, 245, 0.2)),
                                                linear-gradient(180deg, transparent 40%, rgba(234, 83, 245, 0.3));
                                  {% else %}
                                    background: linear-gradient(0deg, transparent 40%, rgba(192, 127, 190, 0.3)),
                                                linear-gradient(240deg, transparent 40%, rgba(143, 119, 237, 0.3)),
                                                linear-gradient(120deg, transparent 40%, rgba(122, 181, 239, 0.3));
                                  {% endif %}
                                }
                              ha-header-bar$: |
                                .mdc-top-app-bar {
                                  /* Remove header background so that popup background is visible */
                                  --mdc-theme-primary: none;
                                  /* Reduced the gap between header and album art */
                                  margin-bottom: -16px;
                                }
                              .: |
                                :host {
                                  /* Set width of popup */
                                  --popup-min-width: 450px;
                                }
                    card_mod:
                      style: |
                        mushroom-shape-icon {
                           display: flex;
                           {% set media_type = state_attr(config.entity, 'media_content_type') %}
                           {% if media_type == 'music' %}
                             --card-mod-icon: mdi:music;
                             animation: beat 1.3s ease-out infinite both;
                           {% elif media_type == 'playlist' %}
                             --card-mod-icon: mdi:music;
                             animation: beat 1.3s ease-out infinite both;
                           {% else %}
                             --card-mod-icon: mdi:play;
                           {% endif %}
                         }
                         @keyframes flicker {
                           0%, 31.98%, 32.98%, 34.98%, 36.98%, 39.98%, 67.98%, 68.98%, 95.98%, 96.98%, 97.98%, 98.98%, 100% { --icon-color: rgba(var(--rgb-indigo), 1); }
                           32%, 33%, 35%, 36%, 37%, 40%, 68%, 69%, 96%, 97%, 98%, 99% { --icon-color: rgba(var(--rgb-indigo), 0.6); }
                         }
                         @keyframes beat {
                           0%, 60% { --icon-symbol-size: 21px; }
                           5%, 17%, 57% { --icon-symbol-size: 22px; }
                           10%, 20%, 51% { --icon-symbol-size: 23px; }
                           25%, 45% { --icon-symbol-size: 24px; }
                           30%, 39% { --icon-symbol-size: 25px; }
                           33% { --icon-symbol-size: 26px; }
                         }
                         ha-card {
                           {% if not is_state(config.entity, 'off') %}
                             background: rgba(var(--rgb-card-background-color), 0.6) url( '{{ state_attr(config.entity, "entity_picture") }}' ) center no-repeat;
                             background-size: cover;
                             background-blend-mode: overlay;
                           {% endif %} 
                         }
                  - type: custom:mushroom-media-player-card
                    entity: media_player.toilet
                    name: 화장실
                    icon: mdi:play
                    use_media_info: true
                    use_media_artwork: false
                    show_volume_level: false
                    media_controls:
                      - play_pause_stop
                      - previous
                      - next
                    volume_controls:
                      - volume_buttons
                      - volume_set
                    fill_container: false
                    tap_action:
                      action: fire-dom-event
                      browser_mod:
                        service: browser_mod.popup
                        data:
                          title: 화장실
                          content:
                            type: custom:stack-in-card
                            cards:
                              - type: custom:mushroom-media-player-card
                                entity: media_player.toilet
                                name: 화장실
                                icon_type: none
                                layout: vertical
                                media_controls:
                                  - previous
                                  - play_pause_stop
                                  - next
                                volume_controls:
                                  - volume_set
                                  - volume_buttons
                                show_volume_level: false
                                use_media_info: true
                                collapsible_controls: false
                                card_mod:
                                  style:
                                    mushroom-state-info$: |
                                      /* CSS for Mushroom Popup Media Player */
                                      .secondary:before {
                                        /* Add album name between song title and artist name */
                                        {% if state_attr(config.entity, 'media_album_name') != none %}
                                          content: "{{ state_attr(config.entity, 'media_album_name')}}\A";
                                        {% endif %}
                                        /* Format title to fit on seperate line */
                                        white-space: pre;
                                        text-overflow: ellipsis;
                                      }
                                    .: |
                                      ha-card {
                                        /* Remove border from media player */
                                        --ha-card-border-width: 0;
                                        /* Apply album art color to media player icon & volume bar */
                                        --rgb-state-media-player: var(--album-art-color);
                                        /* Disable transitions */
                                        transition: all 0.5s;
                                      }
                                      .actions {
                                        /* Apply album art color to media player controls */
                                        --rgb-primary-text-color: var(--album-art-color);
                                        --primary-text-color: rgb(var(--album-art-color));
                                        /* Move volume button to seperate row */
                                        display: block !important;
                                      }
                                      ha-card:before {
                                        content: "";
                                        /* Show album art above media player when active and default image when idle */
                                        {% if is_state(config.entity, ['playing', 'paused', 'idle']) %}
                                          background: url( '{{ state_attr(config.entity, "entity_picture") }}') center no-repeat;
                                        {% else %}
                                          background: url('/local/floorplan/bgm_youtubrmusic_banner.png') center no-repeat;
                                        {% endif %}
                                        /* Add padding around album art */
                                        margin: 0px 4px 16px;
                                        /* Add drop shadow to album art */
                                        filter: drop-shadow(4px 4px 6px rgba(var(--album-art-color), 0.3));
                                        /* Round borders of album art */
                                        border-radius: var(--control-border-radius);
                                        /* Adjust the album art aspect ratio based on media type */
                                        {% set media_type = state_attr(config.entity, 'media_content_type') %}
                                        {% if media_type == 'tvshow' %}
                                          aspect-ratio: 16 / 9;
                                        {% elif media_type == 'movie' %}
                                          aspect-ratio: 2 / 3;
                                        {% else %}
                                          aspect-ratio: 1 / 1;
                                        {% endif %}
                                        /* Stretch album art to fit box. Fix for if album art is not sized correctly */
                                        background-size: 100% 100%;
                                      }
                                      mushroom-button {
                                        /* Size volume button to match other controls and center */
                                        display: flex;
                                        width: calc((100% / 3) - (var(--spacing) / 3) * 2);
                                        margin: auto;
                                      }
                                      mushroom-media-player-media-control,
                                      mushroom-media-player-volume-control {
                                        /* Correct margins for volume button on second row */
                                        display: flex;
                                        margin-right: 0px !important;
                                        /* Check if PLAY|STOP are supported and adjust margin accordingly */
                                        {% if state_attr(config.entity, 'supported_features') | int | bitwise_and(20480) > 0 %}
                                          margin-bottom: var(--spacing) !important;
                                        {% endif %}
                                      }
                              - entity: media_player.toilet
                                hide:
                                  icon: true
                                  name: true
                                  runtime: true
                                  source: true
                                  power: true
                                  state_label: true
                                  volume: true
                                  info: true
                                  progress: false
                                  controls: true
                                more_info: false
                                type: custom:mini-media-player
                                toggle_power: false
                                group: true
                                card_mod:
                                  style:
                                    mmp-progress$: |
                                      paper-progress {
                                        /* Apply album art color to progress bar when paused */
                                        --paper-progress-container-color: rgba(var(--album-art-color), 0.2) !important;
                                        /* Apply album art color to progress bar when playing */
                                        --paper-progress-active-color: rgb(var(--album-art-color)) !important;
                                      }
                                    .: |
                                      ha-card {
                                        /* Move progress bar up into gap. Check if PLAY|STOP are supported */
                                        --base-offset: calc(4 * var(--mush-spacing, 12px)
                                                            + 1.33 * var(--mush-spacing, 12px)
                                                            + var(--mush-card-primary-line-height, 1.5) * var(--mush-card-primary-font-size, 14px)
                                                            + var(--mush-card-secondary-line-height, 1.5) * var(--mush-card-secondary-font-size, 12px)
                                                            + var(--mush-control-height, 42px));
                                        /* Check if Play (16385) or Stop (4096) are supported and add control button height if they are */
                                        {% if state_attr(config.entity, 'supported_features') | int | bitwise_and(20480) > 0 %}
                                          --control-offset: calc(var(--mush-spacing, 12px) + var(--mush-control-height, 42px));
                                        {% else %}
                                          --control-offset: 0px;
                                        {% endif %}
                                        /* Check if album name is present and add to height if it is */
                                        {% set album_name = state_attr(config.entity, 'media_album_name') %}
                                        {% if album_name == None or album_name == "" %}
                                          --album-offset: 0px;
                                        {% else %}
                                          --album-offset: calc(var(--mush-card-secondary-line-height, 1.5) * var(--mush-card-secondary-font-size, 12px));
                                        {% endif %}
                                        bottom: calc(var(--base-offset) + var(--control-offset) + var(--album-offset));
                                        /* Correct margins for progress bar */
                                        margin: 0px 28px -12px;
                                        /* Set height of card to match pregress bar height */
                                        height: var(--mmp-progress-height);
                                        /* Remove border outline */
                                        --ha-card-border-width: 0;
                                        /* Round corners of progress bar */
                                        --mmp-border-radius: var(--control-border-radius, 12px) !important;
                                        /* Set height of progress bar */
                                        --mmp-progress-height: 12px !important;
                                        /* Remove transitions to prevent progress bar floating in */
                                        transition: all 0.5s;
                                      }
                            card_mod:
                              style: |
                                :host {
                                  /* Assign album art color to variable used in popup */
                                  --album-art-color:
                                  {% if is_state('media_player.toilet', ['playing', 'paused', 'idle']) %}
                                    121, 224, 242
                                  {% else %}
                                    141, 117, 238
                                  {% endif %}
                                  /* Remove background because it is applied to popup */
                                  --ha-card-background: none;
                                }
                          card_mod:
                            style:
                              ha-dialog$: |
                                .mdc-dialog__surface {
                                  /* Apply gradient background to popup using album art colors. Set to default colors when idle */
                                  {% if is_state('media_player.toilet', ['playing', 'paused', 'idle']) %}
                                    background: linear-gradient(305deg, transparent 50%, rgba(140, 95, 245, 0.4)),
                                                linear-gradient(55deg, transparent 50%, rgba(197, 86, 245, 0.2)),
                                                linear-gradient(180deg, transparent 40%, rgba(234, 83, 245, 0.3));
                                  {% else %}
                                    background: linear-gradient(0deg, transparent 40%, rgba(192, 127, 190, 0.3)),
                                                linear-gradient(240deg, transparent 40%, rgba(143, 119, 237, 0.3)),
                                                linear-gradient(120deg, transparent 40%, rgba(122, 181, 239, 0.3));
                                  {% endif %}
                                }
                              ha-header-bar$: |
                                .mdc-top-app-bar {
                                  /* Remove header background so that popup background is visible */
                                  --mdc-theme-primary: none;
                                  /* Reduced the gap between header and album art */
                                  margin-bottom: -16px;
                                }
                              .: |
                                :host {
                                  /* Set width of popup */
                                  --popup-min-width: 450px;
                                }
                    card_mod:
                      style: |
                        mushroom-shape-icon {
                           display: flex;
                           {% set media_type = state_attr(config.entity, 'media_content_type') %}
                           {% if media_type == 'music' %}
                             --card-mod-icon: mdi:music;
                             animation: beat 1.3s ease-out infinite both;
                           {% elif media_type == 'playlist' %}
                             --card-mod-icon: mdi:music;
                             animation: beat 1.3s ease-out infinite both;
                           {% else %}
                             --card-mod-icon: mdi:play;
                           {% endif %}
                         }
                         @keyframes flicker {
                           0%, 31.98%, 32.98%, 34.98%, 36.98%, 39.98%, 67.98%, 68.98%, 95.98%, 96.98%, 97.98%, 98.98%, 100% { --icon-color: rgba(var(--rgb-indigo), 1); }
                           32%, 33%, 35%, 36%, 37%, 40%, 68%, 69%, 96%, 97%, 98%, 99% { --icon-color: rgba(var(--rgb-indigo), 0.6); }
                         }
                         @keyframes beat {
                           0%, 60% { --icon-symbol-size: 21px; }
                           5%, 17%, 57% { --icon-symbol-size: 22px; }
                           10%, 20%, 51% { --icon-symbol-size: 23px; }
                           25%, 45% { --icon-symbol-size: 24px; }
                           30%, 39% { --icon-symbol-size: 25px; }
                           33% { --icon-symbol-size: 26px; }
                         }
                         ha-card {
                           {% if not is_state(config.entity, 'off') %}
                             background: rgba(var(--rgb-card-background-color), 0.6) url( '{{ state_attr(config.entity, "entity_picture") }}' ) center no-repeat;
                             background-size: cover;
                             background-blend-mode: overlay;
                           {% endif %} 
                         }
              attributes:
                label: SPEAKER
                isFadingIndicator: true
                icon: mdi:speaker
                stacked: false
            - card:
                square: false
                columns: 1
                type: grid
                cards:
                  - type: custom:stack-in-card
                    cards:
                      - type: custom:mushroom-number-card
                        entity: input_number.speaker_volume_total
                        display_mode: slider
                        icon_type: icon
                        secondary_info: state
                        primary_info: name
                        fill_container: true
                        layout: horizontal
                        icon: mdi:volume-high
                        tap_action:
                          action: none
                  - type: custom:stack-in-card
                    cards:
                      - type: custom:mushroom-number-card
                        entity: input_number.speaker_volume_livingroom
                        display_mode: slider
                        icon_type: icon
                        secondary_info: state
                        primary_info: name
                        fill_container: true
                        layout: horizontal
                        icon: mdi:volume-high
                        tap_action:
                          action: none
                      - type: custom:mushroom-number-card
                        entity: input_number.speaker_volume_kitchen
                        display_mode: slider
                        icon_type: icon
                        secondary_info: state
                        primary_info: name
                        fill_container: true
                        layout: horizontal
                        icon: mdi:volume-high
                        tap_action:
                          action: none
                      - type: custom:mushroom-number-card
                        entity: input_number.speaker_volume_mainroom
                        display_mode: slider
                        icon_type: icon
                        secondary_info: state
                        primary_info: name
                        fill_container: true
                        layout: horizontal
                        icon: mdi:volume-high
                        tap_action:
                          action: none
                      - type: custom:mushroom-number-card
                        entity: input_number.speaker_volume_sonroom
                        display_mode: slider
                        icon_type: icon
                        secondary_info: state
                        primary_info: name
                        fill_container: true
                        layout: horizontal
                        icon: mdi:volume-high
                        tap_action:
                          action: none
                      - type: custom:mushroom-number-card
                        entity: input_number.speaker_volume_studyroom
                        display_mode: slider
                        icon_type: icon
                        secondary_info: state
                        primary_info: name
                        fill_container: true
                        layout: horizontal
                        icon: mdi:volume-high
                        tap_action:
                          action: none
                      - type: custom:mushroom-number-card
                        entity: input_number.speaker_volume_toilet
                        display_mode: slider
                        icon_type: icon
                        secondary_info: state
                        primary_info: name
                        fill_container: true
                        layout: horizontal
                        icon: mdi:volume-high
                        tap_action:
                          action: none
                    card_mod:
                      style: |
                        ha-card {
                          box-shadow: none;
                          background: rgba(var(--rgb-primary-text-color), 0.00);
                        }
              attributes:
                label: VOLUME
                isFadingIndicator: true
                icon: mdi:volume-high
                stacked: false





  ####################################################################### local-conditional: water
      - type: custom:local-conditional-card
        id: water
        default: hide
        card:
          type: custom:tabbed-card
          tabs:
            - card:
                type: iframe
                url: /local/aqua.mp4
              attributes:
                label: AQUA
            - card:
                type: vertical-stack
                cards:
                  - type: custom:bubble-card
                    card_type: separator
                    name: 우리지역 수질상태
                    icon: mdi:cup-water
                  - square: false
                    columns: 3
                    type: grid
                    cards:
                      - type: custom:mushroom-template-card
                        entity: sensor.jeonju_water_ntu_level  #탁도
                        primary: 탁도
                        layout: vertical
                        secondary: '{{ states(config.entity)}}'
                        icon: |-
                          {% if is_state(config.entity, '좋음') %}
                            mdi:emoticon-excited
                          {% elif is_state(config.entity, '보통') %}
                            mdi:emoticon
                          {% elif is_state(config.entity, '나쁨') %}
                            mdi:emoticon-dead
                          {% elif is_state(config.entity, '치명') %}
                            mdi:emoticon-devil
                          {% else %}
                            mdi:emoticon-poop
                          {% endif %}
                        icon_color: |-
                          {% if is_state(config.entity, '좋음') %}
                            green
                          {% elif is_state(config.entity, '보통') %}
                            yellow
                          {% elif is_state(config.entity, '나쁨') %}
                            red
                          {% elif is_state(config.entity, '치명') %}
                            purple
                          {% else %}
                            grey
                          {% endif %}
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              size: normal
                              style: |-
                                --popup-header-background-color: black;
                                --popup-background-color: transparent;
                                --popup-border-radius: 15px;
                                --popup-border-color: transparent;
                              content:
                                type: custom:mini-graph-card
                                card_mod:
                                  style: |
                                    .graph .graph__container .graph__container__svg svg g mask .line {
                                      animation-duration: 5s !important;
                                      animation-delay: 0s !important;
                                      animation-timing-function: linear !important;
                                      animation-iteration-count: infinite !important;
                                    }
                                name: 탁도
                                hours_to_show: 48
                                points_per_hour: 2
                                height: 150
                                line_width: 3
                                align_icon: left
                                align_header: left
                                font_size_header: 12
                                font_size: 40
                                animate: true
                                smoothing: true
                                show:
                                  name: true
                                  labels: false
                                  icon: true
                                  legend: true
                                  extrema: false
                                  average: false
                                  fill: true
                                entities:
                                  - entity: sensor.jeonju_water_ntu
                                    show_state: true
                                color_thresholds:
                                  - value: 30
                                    color: '#BBDEFB'
                                  - value: 40
                                    color: '#64B5F6'
                                  - value: 50
                                    color: '#2196F3'
                                  - value: 60
                                    color: '#2196F3'
                                  - value: 70
                                    color: '#0D47A1'
                      - type: custom:mushroom-template-card
                        entity: sensor.jeonju_water_tu_level
                        primary: 잔류염소
                        layout: vertical
                        secondary: '{{ states(config.entity)}}'
                        icon: |-
                          {% if is_state(config.entity, '좋음') %}
                            mdi:emoticon-excited
                          {% elif is_state(config.entity, '보통') %}
                            mdi:emoticon
                          {% elif is_state(config.entity, '나쁨') %}
                            mdi:emoticon-dead
                          {% elif is_state(config.entity, '치명') %}
                            mdi:emoticon-devil
                          {% else %}
                            mdi:emoticon-poop
                          {% endif %}
                        icon_color: |-
                          {% if is_state(config.entity, '좋음') %}
                            green
                          {% elif is_state(config.entity, '보통') %}
                            yellow
                          {% elif is_state(config.entity, '나쁨') %}
                            red
                          {% elif is_state(config.entity, '치명') %}
                            purple
                          {% else %}
                            grey
                          {% endif %}
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              size: normal
                              style: |-
                                --popup-header-background-color: black;
                                --popup-background-color: transparent;
                                --popup-border-radius: 15px;
                                --popup-border-color: transparent;
                              content:
                                type: custom:mini-graph-card
                                card_mod:
                                  style: |
                                    .graph .graph__container .graph__container__svg svg g mask .line {
                                      animation-duration: 5s !important;
                                      animation-delay: 0s !important;
                                      animation-timing-function: linear !important;
                                      animation-iteration-count: infinite !important;
                                    }
                                name: 잔류염소
                                hours_to_show: 48
                                points_per_hour: 2
                                height: 150
                                line_width: 3
                                align_icon: left
                                align_header: left
                                font_size_header: 12
                                font_size: 40
                                animate: true
                                smoothing: true
                                show:
                                  name: true
                                  labels: false
                                  icon: true
                                  legend: true
                                  extrema: false
                                  average: false
                                  fill: true
                                entities:
                                  - entity: sensor.jeonju_water_tu
                                    show_state: true
                                color_thresholds:
                                  - value: 30
                                    color: '#BBDEFB'
                                  - value: 40
                                    color: '#64B5F6'
                                  - value: 50
                                    color: '#2196F3'
                                  - value: 60
                                    color: '#2196F3'
                                  - value: 70
                                    color: '#0D47A1'
                      - type: custom:mushroom-template-card
                        entity: sensor.jeonju_water_ph_level
                        primary: 수소이온농도
                        layout: vertical
                        secondary: '{{ states(config.entity)}}'
                        icon: |-
                          {% if is_state(config.entity, '좋음') %}
                            mdi:emoticon-excited
                          {% elif is_state(config.entity, '보통') %}
                            mdi:emoticon
                          {% elif is_state(config.entity, '나쁨') %}
                            mdi:emoticon-dead
                          {% elif is_state(config.entity, '치명') %}
                            mdi:emoticon-devil
                          {% else %}
                            mdi:emoticon-poop
                          {% endif %}
                        icon_color: |-
                          {% if is_state(config.entity, '좋음') %}
                            green
                          {% elif is_state(config.entity, '보통') %}
                            yellow
                          {% elif is_state(config.entity, '나쁨') %}
                            red
                          {% elif is_state(config.entity, '치명') %}
                            purple
                          {% else %}
                            grey
                          {% endif %}
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            service: browser_mod.popup
                            data:
                              size: normal
                              style: |-
                                --popup-header-background-color: black;
                                --popup-background-color: transparent;
                                --popup-border-radius: 15px;
                                --popup-border-color: transparent;
                              content:
                                type: custom:mini-graph-card
                                card_mod:
                                  style: |
                                    .graph .graph__container .graph__container__svg svg g mask .line {
                                      animation-duration: 5s !important;
                                      animation-delay: 0s !important;
                                      animation-timing-function: linear !important;
                                      animation-iteration-count: infinite !important;
                                    }
                                name: 수소이온농도
                                hours_to_show: 48
                                points_per_hour: 2
                                height: 150
                                line_width: 3
                                align_icon: left
                                align_header: left
                                font_size_header: 12
                                font_size: 40
                                animate: true
                                smoothing: true
                                show:
                                  name: true
                                  labels: false
                                  icon: true
                                  legend: true
                                  extrema: false
                                  average: false
                                  fill: true
                                entities:
                                  - entity: sensor.jeonju_water_ph
                                    show_state: true
                                color_thresholds:
                                  - value: 30
                                    color: '#BBDEFB'
                                  - value: 40
                                    color: '#64B5F6'
                                  - value: 50
                                    color: '#2196F3'
                                  - value: 60
                                    color: '#2196F3'
                                  - value: 70
                                    color: '#0D47A1'
                      - type: custom:mini-graph-card
                        entities:
                          - entity: sensor.jeonju_water_ntu
                            name: 탁도
                            color: Blue
                        hours_to_show: 48
                        line_width: 2
                        animate: true
                        show:
                          name: false
                          icon: false
                          state: false
                          legend: false
                          fill: fade
                        card_mod:
                          style: |
                            ha-card {
                              background: none;
                              box-shadow: none;
                              --ha-card-border-width: 0;
                            }
                      - type: custom:mini-graph-card
                        entities:
                          - entity: sensor.jeonju_water_tu
                            name: 잔류염소
                            color: Blue
                        hours_to_show: 48
                        line_width: 2
                        animate: true
                        show:
                          name: false
                          icon: false
                          state: false
                          legend: false
                          fill: fade
                        card_mod:
                          style: |
                            ha-card {
                              background: none;
                              box-shadow: none;
                              --ha-card-border-width: 0;
                            }
                      - type: custom:mini-graph-card
                        entities:
                          - entity: sensor.jeonju_water_ph
                            name: 수소이온농도
                            color: Blue
                        hours_to_show: 48
                        line_width: 2
                        animate: true
                        show:
                          name: false
                          icon: false
                          state: false
                          legend: false
                          fill: fade
                        card_mod:
                          style: |
                            ha-card {
                              background: none;
                              box-shadow: none;
                              --ha-card-border-width: 0;
                            }
              attributes:
                label: WATER LEVEL


  ####################################################################### local-conditional: vacuum
      - type: custom:local-conditional-card
        id: vacuum
        default: hide
        card:
          type: custom:tabbed-card
          tabs:
            - card:
                 type: entities
                 entities:
                   - entity: sensor.cleaner1s_last_clean_end
                     name: 청소기 최근 작동일
                     icon: mdi:calendar-month
                   - type: custom:hui-element
                     card_type: vertical-stack
                     cards:
                      - type: custom:xiaomi-vacuum-card
                        entity: vacuum.cleaner1s
                        image: /local/floorplan/vacuum.png
                        name: " "
                        state:
                          status:
                            key: state
                          mode:
                            icon: mdi:robot-vacuum
                            unit: 'percent'
                        attributes:
                          main_brush:
                            label: '메인솔: '
                            unit: ' Hr'
                          side_brush:
                            label: '사이드솔: '
                            unit: ' Hr'
                          filter:
                            label: '필터: '
                            unit: ' Hr'
                          sensor:
                            label: '센서: '
                            unit: ' Hr'
                        buttons:
                          start:
                            label: 청소시작!
                          pause:
                            label: 일시정지!
                          stop:
                            label: 청소끝!
                          sensor:
                            icon: mdi:barcode
                            label: 센서초기화
                            service: script.toggle
                            service_data:
                              entity_id: script.vacuum_sensor_dirty_reset
                          filter:
                            icon: mdi:air-filter
                            label: 필터초기화
                            service: script.toggle
                            service_data:
                              entity_id: light.vacuum_filter_reset
                          main:
                            icon: mdi:broom
                            label: 메인브러쉬초기화
                            service: script.toggle
                            service_data:
                              entity_id: light.vacuum_main_brush_reset
                          side:
                            icon: mdi:brush
                            label: 측면브러쉬초기화
                            service: script.toggle
                            service_data:
                              entity_id: light.vacuum_side_brush_reset
                 card_mod:
                   style: |
                     ha-card {
                       --ha-card-background: rgba(var(--rgb-primary-text-color), 0.1);
                     }
              attributes:
                label: CONTROL

            - card:
                type: picture-entity
                card_mod:
                  style: |
                    ha-card {
                      --ha-card-background: transparent;
                      --ha-card-box-shadow: none;
                    }
                entity: camera.xiaomi_cloud_map_extractor
                camera_image: camera.xiaomi_cloud_map_extractor
                show_name: false
                show_state: false
                aspect_ratio: 16x9
              attributes:
                label: MAP
            - card:
                type: vertical-stack
                cards:
                  - type: custom:bar-card
                    style: |
                      ha-card {
                        border-radius: 12px;
                        box-shadow: none;
                        background-image: none;
                        background-color: transparent;
                        color: var(--primary-color)
                      }
                      bar-card-indicator	{
                        margin-right: auto;
                        margin-left: auto;
                        margin-bottom: auto;
                        margin-top: -6.5px;
                      }
                    width: 35%
                    height: 1.5em
                    decimal: 0
                    unit_of_measurement: '%'
                    indicator_style:
                      border-radius: 10px
                    positions:
                      icon: outside
                      indicator: 'off'
                      name: inside
                    severity:
                      - color: '#ff0000'
                        from: 0
                        to: 20
                      - color: '#ffff00'
                        from: 21
                        to: 40
                      - color: '#00ff00'
                        from: 41
                        to: 60
                      - color: '#00bfff'
                        from: 61
                        to: 80
                      - color: '#0000ff'
                        from: 81
                        to: 100
                    entity_row: true
                    entities:
                      - entity: sensor.vacuum_sensor
                        name: 센서
                        icon: mdi:leak
                  - type: custom:bar-card
                    width: 35%
                    height: 1.5em
                    decimal: 0
                    unit_of_measurement: '%'
                    positions:
                      icon: outside
                      indicator: 'off'
                      name: inside
                    severity:
                      - color: '#ff0000'
                        from: 0
                        to: 20
                      - color: '#ffff00'
                        from: 21
                        to: 40
                      - color: '#00ff00'
                        from: 41
                        to: 60
                      - color: '#00bfff'
                        from: 61
                        to: 80
                      - color: '#0000ff'
                        from: 81
                        to: 100
                    entity_row: true
                    entities:
                      - entity: sensor.vacuum_filter
                        name: 필터
                        icon: mdi:air-filter
                  - type: custom:bar-card
                    width: 35%
                    height: 1.5em
                    decimal: 0
                    unit_of_measurement: '%'
                    positions:
                      icon: outside
                      indicator: 'off'
                      name: inside
                    severity:
                      - color: '#ff0000'
                        from: 0
                        to: 20
                      - color: '#ffff00'
                        from: 21
                        to: 40
                      - color: '#00ff00'
                        from: 41
                        to: 60
                      - color: '#00bfff'
                        from: 61
                        to: 80
                      - color: '#0000ff'
                        from: 81
                        to: 100
                    entity_row: true
                    entities:
                      - entity: sensor.vacuum_main_brush
                        name: 메인솔
                        icon: mdi:brush-variant
                  - type: custom:bar-card
                    width: 35%
                    height: 1.5em
                    decimal: 0
                    unit_of_measurement: '%'
                    positions:
                      icon: outside
                      indicator: 'off'
                      name: inside
                    severity:
                      - color: '#ff0000'
                        from: 0
                        to: 20
                      - color: '#ffff00'
                        from: 21
                        to: 40
                      - color: '#00ff00'
                        from: 41
                        to: 60
                      - color: '#00bfff'
                        from: 61
                        to: 80
                      - color: '#0000ff'
                        from: 81
                        to: 100
                    entity_row: true
                    entities:
                      - entity: sensor.vacuum_side_brush
                        name: 사이드솔
                        icon: mdi:broom
              attributes:
                label: SENSOR



  ####################################################################### bubble_card_popups
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            hash: '#alert'
            name: Home Alert
            icon: mdi:home-alert
            is_sidebar_hidden: true
            width_desktop: 30%
            margin_top_desktop: 400px
            margin_top_mobile: 400px
            bg_opacity: 10
            bg_blur: 10
            back_open: true
          - type: vertical-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:button-card
                    entity: input_boolean.alert_door
                    color_type: icon
                    show_label: true
                    aspect_ratio: 1/0.5
                    styles:
                      card:
                        - font-size: 14px
                      label:
                        - font-family: Single Day
                        - font-size: 12px
                        - padding: 0px 8px
                        - justify-self: start
                        - padding-left: 15px
                    state:
                      - value: 'on'
                        name: |
                          [[[
                            return states['input_text.alert_door'].state
                          ]]]
                        label: |
                          [[[
                            return states['input_datetime.alert_door'].state
                          ]]]
                    custom_fields:
                      wave: |
                        [[[
                          if (entity.state == 'on')
                            return `<link rel="stylesheet" href="/local/floorplan/wave.css"><div class='wave -one'></div><div class='wave -two'></div><div class='wave -three'></div></div>`
                        ]]]
                  - type: custom:button-card
                    entity: input_boolean.alert_switch
                    color_type: icon
                    show_label: true
                    aspect_ratio: 1/0.5
                    styles:
                      card:
                        - font-size: 14px
                      label:
                        - font-family: Single Day
                        - font-size: 12px
                        - padding: 0px 8px
                        - justify-self: start
                        - padding-left: 15px
                    state:
                      - value: 'on'
                        name: |
                          [[[
                            return states['input_text.alert_switch'].state
                          ]]]
                        label: |
                          [[[
                            return states['input_datetime.alert_switch'].state
                          ]]]
                    custom_fields:
                      wave: |
                        [[[
                          if (entity.state == 'on')
                            return `<link rel="stylesheet" href="/local/floorplan/wave.css"><div class='wave -one'></div><div class='wave -two'></div><div class='wave -three'></div></div>`
                        ]]]
              - type: horizontal-stack
                cards:
                  - type: custom:button-card
                    entity: input_boolean.alert_motion
                    color_type: icon
                    show_label: true
                    aspect_ratio: 1/0.5
                    styles:
                      card:
                        - font-size: 14px
                      label:
                        - font-family: Single Day
                        - font-size: 12px
                        - padding: 0px 8px
                        - justify-self: start
                        - padding-left: 15px
                    state:
                      - value: 'on'
                        name: |
                          [[[
                            return states['input_text.alert_motion'].state
                          ]]]
                        label: |
                          [[[
                            return states['input_datetime.alert_motion'].state
                          ]]]
                    custom_fields:
                      wave: |
                        [[[
                          if (entity.state == 'on')
                            return `<link rel="stylesheet" href="/local/floorplan/wave.css"><div class='wave -one'></div><div class='wave -two'></div><div class='wave -three'></div></div>`
                        ]]]
                  - type: custom:button-card
                    entity: input_boolean.alert_veranda
                    color_type: icon
                    show_label: true
                    aspect_ratio: 1/0.5
                    styles:
                      card:
                        - font-size: 14px
                      label:
                        - font-family: Single Day
                        - font-size: 12px
                        - padding: 0px 8px
                        - justify-self: start
                        - padding-left: 15px
                    state:
                      - value: 'on'
                        name: |
                          [[[
                            return states['input_text.alert_veranda'].state
                          ]]]
                        label: |
                          [[[
                            return states['input_datetime.alert_veranda'].state
                          ]]]
                    custom_fields:
                      wave: |
                        [[[
                          if (entity.state == 'on')
                            return `<link rel="stylesheet" href="/local/floorplan/wave.css"><div class='wave -one'></div><div class='wave -two'></div><div class='wave -three'></div></div>`
                        ]]]

      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            hash: '#usage'
            name: Usage
            icon: mdi:chart-bell-curve-cumulative
            is_sidebar_hidden: true
            width_desktop: 30%
            margin_top_desktop: 350px
            margin_top_mobile: 400px
            bg_opacity: 10
            bg_blur: 10
            back_open: true
          - type: vertical-stack
            cards:
             - square: false
               columns: 1
               type: grid
               cards:
                 - type: custom:bar-card
                   entity: sensor.pmm_a8_2b_d6_01_2f_16_power
                   name: 실시간 전력
                   min: 150
                   max: 5000
                   width: 100%
                   height: 25px
                   entity_row: true
                   positions:
                     icon: 'off'
                     indicator: 'off'
                     title: inside
                     value: inside
                   value_style:
                     color: '#ffffff'
                     font-size: 24px
                   severity:
                     - color: '#0763f7'
                       from: 0
                       to: 300
                     - color: '#069c18'
                       from: 301
                       to: 800
                     - color: '#a8ad02'
                       from: 801
                       to: 1200
                     - color: '#b07c02'
                       from: 1201
                       to: 3000
                     - color: '#ad0900'
                       from: 3001
                       to: 5000

                 - type: custom:mini-graph-card
                   entities:
                     - entity: sensor.pmm_a8_2b_d6_01_2f_16_power
                       name: 실시간 전력
                       color: Green
                   hours_to_show: 24
                   line_width: 3
                   animate: true
                   show:
                     name: false
                     icon: false
                     state: false
                     legend: false
                     fill: fade
                   card_mod:
                     style: |
                       ha-card {
                         background: none;
                         box-shadow: none;
                         --ha-card-border-width: 0;
                       }

             - square: false
               columns: 4
               type: grid
               cards:
                 - type: custom:button-card
                   template: card_energy
                   entity: sensor.pmm_a8_2b_d6_01_2f_16_two_months_ago_energy
                   name: 두달전
                   label: >
                     [[[ return `${(Math.round(states['sensor.krw_kwhto_won_prev2'].state)).toLocaleString('en')}원` ]]]
                 - type: custom:button-card
                   template: card_energy
                   entity: sensor.pmm_a8_2b_d6_01_2f_16_last_month_energy
                   name: 한달전
                   label: >
                     [[[ return `${(Math.round(states['sensor.krw_kwhto_won_prev'].state)).toLocaleString('en')}원` ]]]
                 - type: custom:button-card
                   template: card_energy
                   entity: sensor.pmm_a8_2b_d6_01_2f_16_this_month_energy
                   name: 이번달
                   label: >
                     [[[ return `${(Math.round(states['sensor.krw_kwhto_won'].state)).toLocaleString('en')}원` ]]]
                 - type: custom:button-card
                   template: card_energy
                   entity: sensor.pmm_a8_2b_d6_01_2f_16_this_month_forecast_energy
                   name: 이번달 예상
                   label: >
                     [[[ return `${(Math.round(states['sensor.krw_kwhto_forecast_won'].state)).toLocaleString('en')}원` ]]]
             - square: false
               columns: 4
               type: grid
               cards:
                 - type: custom:button-card
                   template: card_desktop
                   entity: media_player.livingroom_tv
                   label: |
                     [[[
                       var hour = states['sensor.tv_used_record'].state.split(".", 1)
                       var s_min = states['sensor.tv_used_record'].state.substring(2)
                       var r_min = s_min / 100
                       var min = Math.round(r_min * 60)
                       var p_hour = hour * 1 + 1
                       if (s_min < 61)
                         if (hour >= 1 )
                           return `${hour}시간 ${min}분`
                       if (s_min >= 60)
                         if (hour >= 1 )
                           return `${p_hour}시간 ${min}분`
                       return `${min}분`
                     ]]]
                 - type: custom:button-card
                   template: card_desktop
                   entity: switch.desktop_aiden
                   label: |
                     [[[
                       var hour = states['sensor.desktop_aiden_used_record'].state.split(".", 1)
                       var s_min = states['sensor.desktop_aiden_used_record'].state.substring(2)
                       var r_min = s_min / 100
                       var min = Math.round(r_min * 60)
                       var p_hour = hour * 1 + 1
                       if (s_min < 61)
                         if (hour >= 1 )
                           return `${hour}시간 ${min}분`
                       if (s_min >= 60)
                         if (hour >= 1 )
                           return `${p_hour}시간 ${min}분`
                       return `${min}분`
                     ]]]
                 - type: custom:button-card
                   template: card_desktop
                   entity: switch.desktop_dohyun
                   label: |
                     [[[
                       var hour = states['sensor.desktop_dohyun_used_record'].state.split(".", 1)
                       var s_min = states['sensor.desktop_dohyun_used_record'].state.substring(2)
                       var r_min = s_min / 100
                       var min = Math.round(r_min * 60)
                       var p_hour = hour * 1 + 1
                       if (s_min < 61)
                         if (hour >= 1 )
                           return `${hour}시간 ${min}분`
                       if (s_min >= 60)
                         if (hour >= 1 )
                           return `${p_hour}시간 ${min}분`
                       return `${min}분`
                     ]]]
                 - type: custom:button-card
                   template: card_desktop
                   entity: switch.desktop_taekang
                   label: |
                     [[[
                       var hour = states['sensor.desktop_taekang_used_record'].state.split(".", 1)
                       var s_min = states['sensor.desktop_taekang_used_record'].state.substring(2)
                       var r_min = s_min / 100
                       var min = Math.round(r_min * 60)
                       var p_hour = hour * 1 + 1
                       if (s_min < 61)
                         if (hour >= 1 )
                           return `${hour}시간 ${min}분`
                       if (s_min >= 60)
                         if (hour >= 1 )
                           return `${p_hour}시간 ${min}분`
                       return `${min}분`
                     ]]]

      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            hash: '#weather'
            name: Weather Station
            icon: mdi:theme-light-dark
            state: sensor.pyeongwhadong_weather
            is_sidebar_hidden: true
            width_desktop: 45%
            margin_top_desktop: 0px
            margin_top_mobile: 0px
            bg_opacity: 10
            bg_blur: 10
            back_open: true
          - type: vertical-stack
            cards:
              - type: custom:button-card
                template: popup_weather_forecast
                entity: weather.wansangu_pyeonghwa2dong

      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            hash: '#sun'
            name: Sun & Moon
            icon: mdi:theme-light-dark
            state: sun.sun
            is_sidebar_hidden: true
            width_desktop: 35%
            margin_top_desktop: 280px
            margin_top_mobile: 280px
            bg_opacity: 10
            bg_blur: 10
            back_open: true
          - type: vertical-stack
            cards:
              - type: custom:horizon-card
                title: ' '
                moon: true
                refresh_period: 60
                fields:
                  sunrise: true
                  sunset: true
                  dawn: true
                  noon: true
                  dusk: true
                  azimuth: true
                  sun_azimuth: true
                  moon_azimuth: true
                  elevation: true
                  sun_elevation: true
                  moon_elevation: true
                  moonrise: true
                  moonset: true
                  moon_phase: true
                southern_flip: false
                moon_phase_rotation: 10
                language: ko
                time_format: 12
                number_format: comma_decimal
                latitude: 35078
                longitude: 127.12
                elevation: 101
                time_zone: Asia/Seoul
                debug_level: 0
                card_mod:
                  style: |
                    ha-card {
                      --ha-card-background: transparent;
                      --ha-card-box-shadow: none;
                    }

      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            hash: '#aiden'
            name: Personal Card
            icon: mdi:account-circle
            state: sensor.gone_aiden_time
            is_sidebar_hidden: true
            width_desktop: 35%
            margin_top_desktop: 0px
            margin_top_mobile: 70px
            bg_opacity: 10
            bg_blur: 10
            back_open: true
          - type: vertical-stack
            cards:
              - type: custom:stack-in-card
                cards:
                  - type: custom:mushroom-person-card
                    entity: person.aiden
                    icon_type: entity-picture
                    fill_container: true
                    card_mod:
                      style:
                        mushroom-shape-avatar$: |
                          .picture {
                            display: flex;
                            border-radius: 50%;
                            {% if states(config.entity) == 'home' %}
                              animation: pinggreen 3s infinite;
                            {% else %}
                              animation: pingred 2s infinite;
                            {% endif %}
                          }
                          @keyframes pinggreen {
                            0% {box-shadow: 0 0 5px 3px rgba(var(--rgb-green), 0.9);}
                            100% {box-shadow: 0 0 5px 5px transparent;}
                          }
                          @keyframes pingred {
                            0% {box-shadow: 0 0 5px 3px rgba(var(--rgb-red), 0.9);}
                            100% {box-shadow: 0 0 5px 5px transparent;}
                          }
                          .container {
                            --icon-size: 80px !important;
                          }
                        mushroom-state-info$: |
                          .container {
                            --card-primary-font-size: 18px;
                            --card-secondary-font-size: 14px;
                          }
                        .: |
                          ha-card {
                            background: none !important;
                            font-variant: small-caps;
                          }
                          mushroom-badge-icon {
                            --badge-size: 26px;
                          }
                    tap_action:
                      action: none
                  - type: custom:mushroom-chips-card
                    chips:
                      - type: template
                        entity: binary_sensor.gone_aiden
                        icon: |
                          {% if is_state(config.entity, 'on')%}
                            mdi:timer-play
                          {% else %}
                            mdi:timer-stop-outline
                          {% endif %}
                        icon_color: |
                          {% if is_state(config.entity, 'on')%}
                            orange
                          {% else %}
                            grey
                          {% endif %}
                        content_info: none
                        tap_action:
                          action: more-info
                        card_mod:
                          style: |
                            ha-card {
                              --chip-border-width: 0;
                            }
                      - type: template
                        entity: binary_sensor.aiden_phone_interactive
                        icon: '{{ state_attr(config.entity, "icon") }}'
                        icon_color: |
                          {% if is_state(config.entity, 'on')%}
                            green
                          {% else %}
                            grey
                          {% endif %}
                        content_info: none
                        tap_action:
                          action: more-info
                        card_mod:
                          style: |
                            ha-card {
                              --chip-border-width: 0;
                            }
                      - type: template
                        entity: sensor.aiden_phone_ringer_mode
                        icon: '{{ state_attr(config.entity, "icon") }}'
                        icon_color: |
                          {% if is_state(config.entity, 'vibrate') %}
                            orange
                          {% elif is_state(config.entity, 'silent') %}
                            grey
                          {% else %}
                            green
                          {% endif %}
                        content_info: none
                        tap_action:
                          action: more-info
                        card_mod:
                          style: |
                            ha-card {
                              --chip-border-width: 0;
                            }
                      - type: template
                        entity: sensor.aiden_phone_network_type
                        icon: '{{ state_attr(config.entity, "icon") }}'
                        icon_color: |
                          {% if is_state(config.entity, 'cellular') %}
                            green
                          {% elif is_state(config.entity, 'wifi') %}
                            cyan
                          {% else %}
                            grey
                          {% endif %}
                        content_info: none
                        tap_action:
                          action: more-info
                        card_mod:
                          style: |
                            ha-card {
                              --chip-border-width: 0;
                            }
                      - type: template
                        entity: sensor.aiden_phone_battery_level
                        content: '{{ states(entity) }}%'
                        icon: '{{ state_attr(config.entity, "icon") }}'
                        icon_color: |
                            {% set bl = states(config.entity) | int %}
                            {% if bl < 10 %} red
                            {% elif bl < 20 %} deep-orange
                            {% elif bl < 30 %} orange
                            {% elif bl < 40 %} amber
                            {% elif bl < 50 %} yellow
                            {% elif bl < 60 %} cyan
                            {% elif bl < 70 %} blue
                            {% elif bl < 80 %} lime
                            {% elif bl < 90 %} light-green
                            {% elif bl < 100 %} teal
                            {% elif bl == 100 %} green
                            {% else %}
                              grey
                            {% endif %}
                        tap_action:
                          action: more-info
                        card_mod:
                          style: |
                            ha-card {
                              --chip-border-width: 0;
                            }
                      - type: template
                        entity: sensor.aiden_phone_geocoded_location
                        icon_color: pink
                        icon: mdi:target
                        content: 찾기
                        tap_action:
                          action: none
                        hold_action:
                          action: call-service
                          service: notify.mobile_app_aiden_phone
                          data:
                            message: 전화기 찾는 중..
                            title: Search Phone
                            data:
                              ttl: 0
                              importance: high
                              priority: high
                              tag: Search
                              channel: alarm_stream
                    alignment: start
                    card_mod:
                      style:
                        style: |
                          ha-card {
                            margin: -2px 0px 12px;
                            --chip-background: rgba(var(--rgb-disabled), 0.15);
                            --ha-card-box-shadow: none;
                            --chip-border-radius: 12px;
                            --chip-height: 40px;
                            --chip-padding: 10px;
                            --chip-spacing: 6px;
                            left: 3px;
                            top: 80px;
                          }
                  - type: custom:mushroom-template-card
                    entity: sensor.aiden_phone_geocoded_location
                    layout: horizontal
                    multiline_secondary: false
                    primary: '{{ states(entity) }}'
                    secondary: '{{ states(''sensor.place_aiden'') }}'
                    icon: >-
                      {% if (state_attr('sensor.places_aiden','direction_of_travel') ==
                      'stationary') and (states('person.aiden') == 'home') %}
                        mdi:home
                      {% elif (state_attr('sensor.places_aiden','direction_of_travel') ==
                      'away_from_home') and (states('person.aiden') == 'not_home') %}
                        mdi:home-minus
                      {% else %}
                        mdi:map-marker-radius
                      {% endif %}
                    icon_color: >-
                      {% if (state_attr('sensor.places_aiden','direction_of_travel') ==
                      'stationary') and (states('person.aiden') == 'home') %}
                        green
                      {% elif (state_attr('sensor.places_aiden','direction_of_travel') ==
                      'away_from_home') and (states('person.aiden') == 'not_home') %}
                        orange
                      {% else %}
                        grey
                      {% endif %}
                    tap_action:
                      action: none
                    alignment: start
                    card_mod:
                      style: |
                        ha-card {
                          margin: -2px 0px 12px;
                          --chip-background: rgba(var(--rgb-disabled), 0.15);
                          --ha-card-box-shadow: none;
                          --chip-border-radius: 12px;
                          --chip-height: 40px;
                          --chip-padding: 10px;
                          --chip-spacing: 6px;
                          left: -10px;
                          top: -40px;
                        }
                  - type: history-graph
                    entities:
                      - entity: person.aiden
                        name: ' '
                    hours_to_show: 24
                    title: Timeline
                    card_mod:
                      style:
                        $: |
                          .card-header {
                            /* Style timeline title */
                            padding: 0px 24px !important;
                            font-size: var(--mush-card-primary-font-size, 14px) !important;
                            font-weight: var(--mush-card-primary-font-weight, bold) !important;
                            line-height: var(--mush-card-primary-line-height, 1.5) !important;
                            color: var(--primary-text-color) !important;
                          }
                        .: |
                          ha-card {
                            /* Remove default card styling */
                            --ha-card-box-shadow: none;
                            --ha-card-background: none;
                            --ha-card-border-width: 0;
                            user-select: none;
                          }
                          .content {
                            /* Add padding on right */
                            padding: 0px 24px !important;
                          }
                    tap_action:
                      action: none
                  - type: map
                    entities:
                      - entity: person.aiden
                    dark_mode: false
                    hours_to_show: 24
                    aspect_ratio: '4:3'
                    card_mod:
                      style:
                        ha-map $ ha-entity-marker $: |
                          .marker {
                            /* Style person marker & adjust position to avoid blocking waypoints */
                            border: 3px solid var(--state-person) !important;
                            border-radius: 50% 50% 50% 0px !important;
                            transform: rotate(-45deg) translate(50%, -50%);
                            overflow: visible !important;
                            background: var(--state-person) !important;
                          }
                          .entity-picture {
                            /* Correct orientation of person avatar */
                            transform: rotate(45deg);
                            border-radius: 50%;
                          }
                        ha-map $: |
                          path:first-child { 
                            /* Style accuracy radius */
                            stroke: var(--state-person);
                            fill: color-mix(in srgb, var(--state-person) 50%, transparent);
                            stroke-width: 0px;
                          }
                          path:nth-child(even) {
                            /* Styling for waypoints */
                            stroke: var(--purple-color);
                            stroke-width: 4px;
                          }
                          path:nth-child(odd):not(:first-child) { 
                            /* Styling for lines */
                            stroke: var(--purple-color);
                            stroke-width: 4px;
                          }
                          .leaflet-control-attribution {
                            /* Style attribution text */
                            background: rgba(var(--rgb-card-background-color), 0.4) !important;
                            font-size: 10px;
                          }
                          .leaflet-container a {
                            /* Set color of zoom icons & attribution text */
                            color: var(--secondary-text-color);
                          }
                          .leaflet-control-zoom-in,
                          .leaflet-control-zoom-out {
                            /* Style zoom buttons like Chips */
                            border-radius: var(--mush-chip-border-radius, 19px) !important;
                            padding: 3px;
                            background: rgb(var(--rgb-secondary-text-color), 0.2) !important;
                            margin: 8px 12px 0px;
                            border: var(--ha-card-border-width, 1px) solid var(--ha-card-border-color, var(--divider-color, #e0e0e0)) !important;
                          } 
                          .leaflet-top {
                            /* Move zoom buttons to bottom of map */
                            bottom: 0px !important;
                          }
                          .leaflet-control-zoom {
                            /* Allow buttons to be moved */
                            position: absolute !important;
                            /* Adjust spacing for border */
                            bottom: calc(2 * var(--ha-card-border-width, 1px) + 56px);
                            /* Remove extra margin */
                            margin: 0px !important;
                            /* Remove zoom control border */
                            border: none !important;
                          }
                          .leaflet-container:after {
                            /* Fade out map at top */
                            content: "";
                            position: absolute;
                            height: 100%;
                            width: 100%;
                            background: linear-gradient(to top, transparent 65%, var(--card-background-color));
                          }
                        ha-icon-button $ mwc-icon-button $: |
                          button {
                            /* Size center button to match Chip */
                            height: var(--mush-chip-height, 36px) !important;
                            width: var(--mush-chip-height, 36px) !important;
                            --mdc-icon-size: 22px;
                          }
                        .: |
                          ha-card {
                            /* Remove default card styling without affecting child elements */
                            box-shadow: none;
                            border-width: 0;
                            border-radius: 0px 0px var(--ha-card-border-radius, 12px) var(--ha-card-border-radius, 12px);
                            transition: all 0s;
                          }
                          :host {
                            /* Define Person State colors. Can be added to theme */
                            --state-person-home: var(--green-color);
                            --state-person-not-home: var(--red-color);
                            --state-person-zone: var(--blue-color);
                            --state-person-unknown: var(--grey-color);
                            /* Set person state color */
                            --state-person:
                            {% if is_state(config.entities[0].entity, ['home', 'not_home', 'unknown']) %}
                              var(--state-person-{{ states(config.entities[0].entity) | replace('_', '-') }})
                            {% else %}
                              var(--state-person-zone)
                            {% endif %};
                          }
                          ha-icon-button {
                            /* Position center button */
                            bottom: 12px;
                            left: 12px !important;
                            top: auto !important;
                            /* Style center button to match Chip */
                            color: var(--deep-orange-color) !important;
                            background: color-mix(in srgb, var(--deep-orange-color) 20%, transparent);
                            border-radius: var(--mush-chip-border-radius, 19px);
                            border: var(--ha-card-border-width, 1px) solid var(--ha-card-border-color, var(--divider-color, #e0e0e0)) !important;
                          }
                card_mod:
                  style: |
                    :host {
                      /* Remove border from poup */
                      --popup-padding-x: 0px;
                      --popup-padding-y: 0px;
                      --popup-min-width: 0px;
                    }
                    .content {
                      /* Remove extra bottom border */
                      margin: -18px -24px -24px !important;
                    }
                    ha-card {
                      box-shadow: none;
                      padding: 2px;
                      background: rgba(var(--rgb-primary-text-color), 0.00);
                    }

      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            hash: '#eunkyung'
            name: Personal Card
            icon: mdi:account-circle
            state: sensor.gone_eunkyung_time
            is_sidebar_hidden: true
            width_desktop: 35%
            margin_top_desktop: 0px
            margin_top_mobile: 70px
            bg_opacity: 10
            bg_blur: 10
            back_open: true
          - type: vertical-stack
            cards:
              - type: custom:stack-in-card
                cards:
                  - type: custom:mushroom-person-card
                    entity: person.eunkyung
                    icon_type: entity-picture
                    fill_container: true
                    card_mod:
                      style:
                        mushroom-shape-avatar$: |
                          .picture {
                            display: flex;
                            border-radius: 50%;
                            {% if states(config.entity) == 'home' %}
                              animation: pinggreen 3s infinite;
                            {% else %}
                              animation: pingred 2s infinite;
                            {% endif %}
                          }
                          @keyframes pinggreen {
                            0% {box-shadow: 0 0 5px 3px rgba(var(--rgb-green), 0.9);}
                            100% {box-shadow: 0 0 5px 5px transparent;}
                          }
                          @keyframes pingred {
                            0% {box-shadow: 0 0 5px 3px rgba(var(--rgb-red), 0.9);}
                            100% {box-shadow: 0 0 5px 5px transparent;}
                          }
                          .container {
                            --icon-size: 80px !important;
                          }
                        mushroom-state-info$: |
                          .container {
                            --card-primary-font-size: 18px;
                            --card-secondary-font-size: 14px;
                          }
                        .: |
                          ha-card {
                            background: none !important;
                            font-variant: small-caps;
                          }
                          mushroom-badge-icon {
                            --badge-size: 26px;
                          }
                    tap_action:
                      action: none
                  - type: custom:mushroom-chips-card
                    chips:
                      - type: template
                        entity: binary_sensor.gone_eunkyung
                        icon: |
                          {% if is_state(config.entity, 'on')%}
                            mdi:timer-play
                          {% else %}
                            mdi:timer-stop-outline
                          {% endif %}
                        icon_color: |
                          {% if is_state(config.entity, 'on')%}
                            orange
                          {% else %}
                            grey
                          {% endif %}
                        content_info: none
                        tap_action:
                          action: more-info
                        card_mod:
                          style: |
                            ha-card {
                              --chip-border-width: 0;
                            }
                      - type: template
                        entity: binary_sensor.eunkyung_phone_interactive
                        icon: '{{ state_attr(config.entity, "icon") }}'
                        icon_color: |
                          {% if is_state(config.entity, 'on')%}
                            green
                          {% else %}
                            grey
                          {% endif %}
                        content_info: none
                        tap_action:
                          action: more-info
                        card_mod:
                          style: |
                            ha-card {
                              --chip-border-width: 0;
                            }
                      - type: template
                        entity: sensor.eunkyung_phone_ringer_mode
                        icon: '{{ state_attr(config.entity, "icon") }}'
                        icon_color: |
                          {% if is_state(config.entity, 'vibrate') %}
                            orange
                          {% elif is_state(config.entity, 'silent') %}
                            grey
                          {% else %}
                            green
                          {% endif %}
                        content_info: none
                        tap_action:
                          action: more-info
                        card_mod:
                          style: |
                            ha-card {
                              --chip-border-width: 0;
                            }
                      - type: template
                        entity: sensor.eunkyung_phone_network_type
                        icon: '{{ state_attr(config.entity, "icon") }}'
                        icon_color: |
                          {% if is_state(config.entity, 'cellular') %}
                            green
                          {% elif is_state(config.entity, 'wifi') %}
                            cyan
                          {% else %}
                            grey
                          {% endif %}
                        content_info: none
                        tap_action:
                          action: more-info
                        card_mod:
                          style: |
                            ha-card {
                              --chip-border-width: 0;
                            }
                      - type: template
                        entity: sensor.eunkyung_phone_battery_level
                        content: '{{ states(entity) }}%'
                        icon: '{{ state_attr(config.entity, "icon") }}'
                        icon_color: |
                            {% set bl = states(config.entity) | int %}
                            {% if bl < 10 %} red
                            {% elif bl < 20 %} deep-orange
                            {% elif bl < 30 %} orange
                            {% elif bl < 40 %} amber
                            {% elif bl < 50 %} yellow
                            {% elif bl < 60 %} cyan
                            {% elif bl < 70 %} blue
                            {% elif bl < 80 %} lime
                            {% elif bl < 90 %} light-green
                            {% elif bl < 100 %} teal
                            {% elif bl == 100 %} green
                            {% else %}
                              grey
                            {% endif %}
                        tap_action:
                          action: more-info
                        card_mod:
                          style: |
                            ha-card {
                              --chip-border-width: 0;
                            }
                      - type: template
                        entity: sensor.eunkyung_phone_geocoded_location
                        icon_color: pink
                        icon: mdi:target
                        content: 찾기
                        tap_action:
                          action: none
                        hold_action:
                          action: call-service
                          service: notify.mobile_app_eunkyung_phone
                          data:
                            message: 전화기 찾는 중..
                            title: Search Phone
                            data:
                              ttl: 0
                              importance: high
                              priority: high
                              tag: Search
                              channel: alarm_stream
                    alignment: start
                    card_mod:
                      style:
                        style: |
                          ha-card {
                            margin: -2px 0px 12px;
                            --chip-background: rgba(var(--rgb-disabled), 0.15);
                            --ha-card-box-shadow: none;
                            --chip-border-radius: 12px;
                            --chip-height: 40px;
                            --chip-padding: 10px;
                            --chip-spacing: 6px;
                            left: 3px;
                            top: 80px;
                          }
                  - type: custom:mushroom-template-card
                    entity: sensor.eunkyung_phone_geocoded_location
                    layout: horizontal
                    multiline_secondary: false
                    primary: '{{ states(entity) }}'
                    secondary: '{{ states(''sensor.place_eunkyung'') }}'
                    icon: >-
                      {% if (state_attr('sensor.places_eunkyung','direction_of_travel') ==
                      'stationary') and (states('person.eunkyung') == 'home') %}
                        mdi:home
                      {% elif (state_attr('sensor.places_eunkyung','direction_of_travel') ==
                      'away_from_home') and (states('person.eunkyung') == 'not_home') %}
                        mdi:home-minus
                      {% else %}
                        mdi:map-marker-radius
                      {% endif %}
                    icon_color: >-
                      {% if (state_attr('sensor.places_eunkyung','direction_of_travel') ==
                      'stationary') and (states('person.eunkyung') == 'home') %}
                        green
                      {% elif (state_attr('sensor.places_eunkyung','direction_of_travel') ==
                      'away_from_home') and (states('person.eunkyung') == 'not_home') %}
                        orange
                      {% else %}
                        grey
                      {% endif %}
                    tap_action:
                      action: none
                    alignment: start
                    card_mod:
                      style: |
                        ha-card {
                          margin: -2px 0px 12px;
                          --chip-background: rgba(var(--rgb-disabled), 0.15);
                          --ha-card-box-shadow: none;
                          --chip-border-radius: 12px;
                          --chip-height: 40px;
                          --chip-padding: 10px;
                          --chip-spacing: 6px;
                          left: -10px;
                          top: -40px;
                        }
                  - type: history-graph
                    entities:
                      - entity: person.eunkyung
                        name: ' '
                    hours_to_show: 24
                    title: Timeline
                    card_mod:
                      style:
                        $: |
                          .card-header {
                            /* Style timeline title */
                            padding: 0px 24px !important;
                            font-size: var(--mush-card-primary-font-size, 14px) !important;
                            font-weight: var(--mush-card-primary-font-weight, bold) !important;
                            line-height: var(--mush-card-primary-line-height, 1.5) !important;
                            color: var(--primary-text-color) !important;
                          }
                        .: |
                          ha-card {
                            /* Remove default card styling */
                            --ha-card-box-shadow: none;
                            --ha-card-background: none;
                            --ha-card-border-width: 0;
                            user-select: none;
                          }
                          .content {
                            /* Add padding on right */
                            padding: 0px 24px !important;
                          }
                    tap_action:
                      action: none
                  - type: map
                    entities:
                      - entity: person.eunkyung
                    dark_mode: false
                    hours_to_show: 24
                    aspect_ratio: '4:3'
                    card_mod:
                      style:
                        ha-map $ ha-entity-marker $: |
                          .marker {
                            /* Style person marker & adjust position to avoid blocking waypoints */
                            border: 3px solid var(--state-person) !important;
                            border-radius: 50% 50% 50% 0px !important;
                            transform: rotate(-45deg) translate(50%, -50%);
                            overflow: visible !important;
                            background: var(--state-person) !important;
                          }
                          .entity-picture {
                            /* Correct orientation of person avatar */
                            transform: rotate(45deg);
                            border-radius: 50%;
                          }
                        ha-map $: |
                          path:first-child { 
                            /* Style accuracy radius */
                            stroke: var(--state-person);
                            fill: color-mix(in srgb, var(--state-person) 50%, transparent);
                            stroke-width: 0px;
                          }
                          path:nth-child(even) {
                            /* Styling for waypoints */
                            stroke: var(--purple-color);
                            stroke-width: 4px;
                          }
                          path:nth-child(odd):not(:first-child) { 
                            /* Styling for lines */
                            stroke: var(--purple-color);
                            stroke-width: 4px;
                          }
                          .leaflet-control-attribution {
                            /* Style attribution text */
                            background: rgba(var(--rgb-card-background-color), 0.4) !important;
                            font-size: 10px;
                          }
                          .leaflet-container a {
                            /* Set color of zoom icons & attribution text */
                            color: var(--secondary-text-color);
                          }
                          .leaflet-control-zoom-in,
                          .leaflet-control-zoom-out {
                            /* Style zoom buttons like Chips */
                            border-radius: var(--mush-chip-border-radius, 19px) !important;
                            padding: 3px;
                            background: rgb(var(--rgb-secondary-text-color), 0.2) !important;
                            margin: 8px 12px 0px;
                            border: var(--ha-card-border-width, 1px) solid var(--ha-card-border-color, var(--divider-color, #e0e0e0)) !important;
                          } 
                          .leaflet-top {
                            /* Move zoom buttons to bottom of map */
                            bottom: 0px !important;
                          }
                          .leaflet-control-zoom {
                            /* Allow buttons to be moved */
                            position: absolute !important;
                            /* Adjust spacing for border */
                            bottom: calc(2 * var(--ha-card-border-width, 1px) + 56px);
                            /* Remove extra margin */
                            margin: 0px !important;
                            /* Remove zoom control border */
                            border: none !important;
                          }
                          .leaflet-container:after {
                            /* Fade out map at top */
                            content: "";
                            position: absolute;
                            height: 100%;
                            width: 100%;
                            background: linear-gradient(to top, transparent 65%, var(--card-background-color));
                          }
                        ha-icon-button $ mwc-icon-button $: |
                          button {
                            /* Size center button to match Chip */
                            height: var(--mush-chip-height, 36px) !important;
                            width: var(--mush-chip-height, 36px) !important;
                            --mdc-icon-size: 22px;
                          }
                        .: |
                          ha-card {
                            /* Remove default card styling without affecting child elements */
                            box-shadow: none;
                            border-width: 0;
                            border-radius: 0px 0px var(--ha-card-border-radius, 12px) var(--ha-card-border-radius, 12px);
                            transition: all 0s;
                          }
                          :host {
                            /* Define Person State colors. Can be added to theme */
                            --state-person-home: var(--green-color);
                            --state-person-not-home: var(--red-color);
                            --state-person-zone: var(--blue-color);
                            --state-person-unknown: var(--grey-color);
                            /* Set person state color */
                            --state-person:
                            {% if is_state(config.entities[0].entity, ['home', 'not_home', 'unknown']) %}
                              var(--state-person-{{ states(config.entities[0].entity) | replace('_', '-') }})
                            {% else %}
                              var(--state-person-zone)
                            {% endif %};
                          }
                          ha-icon-button {
                            /* Position center button */
                            bottom: 12px;
                            left: 12px !important;
                            top: auto !important;
                            /* Style center button to match Chip */
                            color: var(--deep-orange-color) !important;
                            background: color-mix(in srgb, var(--deep-orange-color) 20%, transparent);
                            border-radius: var(--mush-chip-border-radius, 19px);
                            border: var(--ha-card-border-width, 1px) solid var(--ha-card-border-color, var(--divider-color, #e0e0e0)) !important;
                          }
                card_mod:
                  style: |
                    :host {
                      /* Remove border from poup */
                      --popup-padding-x: 0px;
                      --popup-padding-y: 0px;
                      --popup-min-width: 0px;
                    }
                    .content {
                      /* Remove extra bottom border */
                      margin: -18px -24px -24px !important;
                    }
                    ha-card {
                      box-shadow: none;
                      padding: 2px;
                      background: rgba(var(--rgb-primary-text-color), 0.00);
                    }

      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            hash: '#dohyun'
            name: Personal Card
            icon: mdi:account-circle
            state: sensor.gone_dohyun_time
            is_sidebar_hidden: true
            width_desktop: 35%
            margin_top_desktop: 0px
            margin_top_mobile: 70px
            bg_opacity: 10
            bg_blur: 10
            back_open: true
          - type: vertical-stack
            cards:
              - type: custom:stack-in-card
                cards:
                  - type: custom:mushroom-person-card
                    entity: person.dohyun
                    icon_type: entity-picture
                    fill_container: true
                    card_mod:
                      style:
                        mushroom-shape-avatar$: |
                          .picture {
                            display: flex;
                            border-radius: 50%;
                            {% if states(config.entity) == 'home' %}
                              animation: pinggreen 3s infinite;
                            {% else %}
                              animation: pingred 2s infinite;
                            {% endif %}
                          }
                          @keyframes pinggreen {
                            0% {box-shadow: 0 0 5px 3px rgba(var(--rgb-green), 0.9);}
                            100% {box-shadow: 0 0 5px 5px transparent;}
                          }
                          @keyframes pingred {
                            0% {box-shadow: 0 0 5px 3px rgba(var(--rgb-red), 0.9);}
                            100% {box-shadow: 0 0 5px 5px transparent;}
                          }
                          .container {
                            --icon-size: 80px !important;
                          }
                        mushroom-state-info$: |
                          .container {
                            --card-primary-font-size: 18px;
                            --card-secondary-font-size: 14px;
                          }
                        .: |
                          ha-card {
                            background: none !important;
                            font-variant: small-caps;
                          }
                          mushroom-badge-icon {
                            --badge-size: 26px;
                          }
                    tap_action:
                      action: none
                  - type: custom:mushroom-chips-card
                    chips:
                      - type: template
                        entity: binary_sensor.gone_dohyun
                        icon: |
                          {% if is_state(config.entity, 'on')%}
                            mdi:timer-play
                          {% else %}
                            mdi:timer-stop-outline
                          {% endif %}
                        icon_color: |
                          {% if is_state(config.entity, 'on')%}
                            orange
                          {% else %}
                            grey
                          {% endif %}
                        content_info: none
                        tap_action:
                          action: more-info
                        card_mod:
                          style: |
                            ha-card {
                              --chip-border-width: 0;
                            }
                      - type: template
                        entity: binary_sensor.dohyun_phone_interactive
                        icon: '{{ state_attr(config.entity, "icon") }}'
                        icon_color: |
                          {% if is_state(config.entity, 'on')%}
                            green
                          {% else %}
                            grey
                          {% endif %}
                        content_info: none
                        tap_action:
                          action: more-info
                        card_mod:
                          style: |
                            ha-card {
                              --chip-border-width: 0;
                            }
                      - type: template
                        entity: sensor.dohyun_phone_ringer_mode
                        icon: '{{ state_attr(config.entity, "icon") }}'
                        icon_color: |
                          {% if is_state(config.entity, 'vibrate') %}
                            orange
                          {% elif is_state(config.entity, 'silent') %}
                            grey
                          {% else %}
                            green
                          {% endif %}
                        content_info: none
                        tap_action:
                          action: more-info
                        card_mod:
                          style: |
                            ha-card {
                              --chip-border-width: 0;
                            }
                      - type: template
                        entity: sensor.dohyun_phone_network_type
                        icon: '{{ state_attr(config.entity, "icon") }}'
                        icon_color: |
                          {% if is_state(config.entity, 'cellular') %}
                            green
                          {% elif is_state(config.entity, 'wifi') %}
                            cyan
                          {% else %}
                            grey
                          {% endif %}
                        content_info: none
                        tap_action:
                          action: more-info
                        card_mod:
                          style: |
                            ha-card {
                              --chip-border-width: 0;
                            }
                      - type: template
                        entity: sensor.dohyun_phone_battery_level
                        content: '{{ states(entity) }}%'
                        icon: '{{ state_attr(config.entity, "icon") }}'
                        icon_color: |
                            {% set bl = states(config.entity) | int %}
                            {% if bl < 10 %} red
                            {% elif bl < 20 %} deep-orange
                            {% elif bl < 30 %} orange
                            {% elif bl < 40 %} amber
                            {% elif bl < 50 %} yellow
                            {% elif bl < 60 %} cyan
                            {% elif bl < 70 %} blue
                            {% elif bl < 80 %} lime
                            {% elif bl < 90 %} light-green
                            {% elif bl < 100 %} teal
                            {% elif bl == 100 %} green
                            {% else %}
                              grey
                            {% endif %}
                        tap_action:
                          action: more-info
                        card_mod:
                          style: |
                            ha-card {
                              --chip-border-width: 0;
                            }
                      - type: template
                        entity: sensor.dohyun_phone_geocoded_location
                        icon_color: pink
                        icon: mdi:target
                        content: 찾기
                        tap_action:
                          action: none
                        hold_action:
                          action: call-service
                          service: notify.mobile_app_dohyun_phone
                          data:
                            message: 전화기 찾는 중..
                            title: Search Phone
                            data:
                              ttl: 0
                              importance: high
                              priority: high
                              tag: Search
                              channel: alarm_stream
                    alignment: start
                    card_mod:
                      style:
                        style: |
                          ha-card {
                            margin: -2px 0px 12px;
                            --chip-background: rgba(var(--rgb-disabled), 0.15);
                            --ha-card-box-shadow: none;
                            --chip-border-radius: 12px;
                            --chip-height: 40px;
                            --chip-padding: 10px;
                            --chip-spacing: 6px;
                            left: 3px;
                            top: 80px;
                          }
                  - type: custom:mushroom-template-card
                    entity: sensor.dohyun_phone_geocoded_location
                    layout: horizontal
                    multiline_secondary: false
                    primary: '{{ states(entity) }}'
                    secondary: '{{ states(''sensor.place_dohyun'') }}'
                    icon: >-
                      {% if (state_attr('sensor.places_dohyun','direction_of_travel') ==
                      'stationary') and (states('person.dohyun') == 'home') %}
                        mdi:home
                      {% elif (state_attr('sensor.places_dohyun','direction_of_travel') ==
                      'away_from_home') and (states('person.dohyun') == 'not_home') %}
                        mdi:home-minus
                      {% else %}
                        mdi:map-marker-radius
                      {% endif %}
                    icon_color: >-
                      {% if (state_attr('sensor.places_dohyun','direction_of_travel') ==
                      'stationary') and (states('person.dohyun') == 'home') %}
                        green
                      {% elif (state_attr('sensor.places_dohyun','direction_of_travel') ==
                      'away_from_home') and (states('person.dohyun') == 'not_home') %}
                        orange
                      {% else %}
                        grey
                      {% endif %}
                    tap_action:
                      action: none
                    alignment: start
                    card_mod:
                      style: |
                        ha-card {
                          margin: -2px 0px 12px;
                          --chip-background: rgba(var(--rgb-disabled), 0.15);
                          --ha-card-box-shadow: none;
                          --chip-border-radius: 12px;
                          --chip-height: 40px;
                          --chip-padding: 10px;
                          --chip-spacing: 6px;
                          left: -10px;
                          top: -40px;
                        }
                  - type: history-graph
                    entities:
                      - entity: person.dohyun
                        name: ' '
                    hours_to_show: 24
                    title: Timeline
                    card_mod:
                      style:
                        $: |
                          .card-header {
                            /* Style timeline title */
                            padding: 0px 24px !important;
                            font-size: var(--mush-card-primary-font-size, 14px) !important;
                            font-weight: var(--mush-card-primary-font-weight, bold) !important;
                            line-height: var(--mush-card-primary-line-height, 1.5) !important;
                            color: var(--primary-text-color) !important;
                          }
                        .: |
                          ha-card {
                            /* Remove default card styling */
                            --ha-card-box-shadow: none;
                            --ha-card-background: none;
                            --ha-card-border-width: 0;
                            user-select: none;
                          }
                          .content {
                            /* Add padding on right */
                            padding: 0px 24px !important;
                          }
                    tap_action:
                      action: none
                  - type: map
                    entities:
                      - entity: person.dohyun
                    dark_mode: false
                    hours_to_show: 24
                    aspect_ratio: '4:3'
                    card_mod:
                      style:
                        ha-map $ ha-entity-marker $: |
                          .marker {
                            /* Style person marker & adjust position to avoid blocking waypoints */
                            border: 3px solid var(--state-person) !important;
                            border-radius: 50% 50% 50% 0px !important;
                            transform: rotate(-45deg) translate(50%, -50%);
                            overflow: visible !important;
                            background: var(--state-person) !important;
                          }
                          .entity-picture {
                            /* Correct orientation of person avatar */
                            transform: rotate(45deg);
                            border-radius: 50%;
                          }
                        ha-map $: |
                          path:first-child { 
                            /* Style accuracy radius */
                            stroke: var(--state-person);
                            fill: color-mix(in srgb, var(--state-person) 50%, transparent);
                            stroke-width: 0px;
                          }
                          path:nth-child(even) {
                            /* Styling for waypoints */
                            stroke: var(--purple-color);
                            stroke-width: 4px;
                          }
                          path:nth-child(odd):not(:first-child) { 
                            /* Styling for lines */
                            stroke: var(--purple-color);
                            stroke-width: 4px;
                          }
                          .leaflet-control-attribution {
                            /* Style attribution text */
                            background: rgba(var(--rgb-card-background-color), 0.4) !important;
                            font-size: 10px;
                          }
                          .leaflet-container a {
                            /* Set color of zoom icons & attribution text */
                            color: var(--secondary-text-color);
                          }
                          .leaflet-control-zoom-in,
                          .leaflet-control-zoom-out {
                            /* Style zoom buttons like Chips */
                            border-radius: var(--mush-chip-border-radius, 19px) !important;
                            padding: 3px;
                            background: rgb(var(--rgb-secondary-text-color), 0.2) !important;
                            margin: 8px 12px 0px;
                            border: var(--ha-card-border-width, 1px) solid var(--ha-card-border-color, var(--divider-color, #e0e0e0)) !important;
                          } 
                          .leaflet-top {
                            /* Move zoom buttons to bottom of map */
                            bottom: 0px !important;
                          }
                          .leaflet-control-zoom {
                            /* Allow buttons to be moved */
                            position: absolute !important;
                            /* Adjust spacing for border */
                            bottom: calc(2 * var(--ha-card-border-width, 1px) + 56px);
                            /* Remove extra margin */
                            margin: 0px !important;
                            /* Remove zoom control border */
                            border: none !important;
                          }
                          .leaflet-container:after {
                            /* Fade out map at top */
                            content: "";
                            position: absolute;
                            height: 100%;
                            width: 100%;
                            background: linear-gradient(to top, transparent 65%, var(--card-background-color));
                          }
                        ha-icon-button $ mwc-icon-button $: |
                          button {
                            /* Size center button to match Chip */
                            height: var(--mush-chip-height, 36px) !important;
                            width: var(--mush-chip-height, 36px) !important;
                            --mdc-icon-size: 22px;
                          }
                        .: |
                          ha-card {
                            /* Remove default card styling without affecting child elements */
                            box-shadow: none;
                            border-width: 0;
                            border-radius: 0px 0px var(--ha-card-border-radius, 12px) var(--ha-card-border-radius, 12px);
                            transition: all 0s;
                          }
                          :host {
                            /* Define Person State colors. Can be added to theme */
                            --state-person-home: var(--green-color);
                            --state-person-not-home: var(--red-color);
                            --state-person-zone: var(--blue-color);
                            --state-person-unknown: var(--grey-color);
                            /* Set person state color */
                            --state-person:
                            {% if is_state(config.entities[0].entity, ['home', 'not_home', 'unknown']) %}
                              var(--state-person-{{ states(config.entities[0].entity) | replace('_', '-') }})
                            {% else %}
                              var(--state-person-zone)
                            {% endif %};
                          }
                          ha-icon-button {
                            /* Position center button */
                            bottom: 12px;
                            left: 12px !important;
                            top: auto !important;
                            /* Style center button to match Chip */
                            color: var(--deep-orange-color) !important;
                            background: color-mix(in srgb, var(--deep-orange-color) 20%, transparent);
                            border-radius: var(--mush-chip-border-radius, 19px);
                            border: var(--ha-card-border-width, 1px) solid var(--ha-card-border-color, var(--divider-color, #e0e0e0)) !important;
                          }
                card_mod:
                  style: |
                    :host {
                      /* Remove border from poup */
                      --popup-padding-x: 0px;
                      --popup-padding-y: 0px;
                      --popup-min-width: 0px;
                    }
                    .content {
                      /* Remove extra bottom border */
                      margin: -18px -24px -24px !important;
                    }
                    ha-card {
                      box-shadow: none;
                      padding: 2px;
                      background: rgba(var(--rgb-primary-text-color), 0.00);
                    }

      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            hash: '#taekang'
            name: Personal Card
            icon: mdi:account-circle
            state: sensor.gone_taekang_time
            is_sidebar_hidden: true
            width_desktop: 35%
            margin_top_desktop: 0px
            margin_top_mobile: 70px
            bg_opacity: 10
            bg_blur: 10
            back_open: true
          - type: vertical-stack
            cards:
              - type: custom:stack-in-card
                cards:
                  - type: custom:mushroom-person-card
                    entity: person.taekang
                    icon_type: entity-picture
                    fill_container: true
                    card_mod:
                      style:
                        mushroom-shape-avatar$: |
                          .picture {
                            display: flex;
                            border-radius: 50%;
                            {% if states(config.entity) == 'home' %}
                              animation: pinggreen 3s infinite;
                            {% else %}
                              animation: pingred 2s infinite;
                            {% endif %}
                          }
                          @keyframes pinggreen {
                            0% {box-shadow: 0 0 5px 3px rgba(var(--rgb-green), 0.9);}
                            100% {box-shadow: 0 0 5px 5px transparent;}
                          }
                          @keyframes pingred {
                            0% {box-shadow: 0 0 5px 3px rgba(var(--rgb-red), 0.9);}
                            100% {box-shadow: 0 0 5px 5px transparent;}
                          }
                          .container {
                            --icon-size: 80px !important;
                          }
                        mushroom-state-info$: |
                          .container {
                            --card-primary-font-size: 18px;
                            --card-secondary-font-size: 14px;
                          }
                        .: |
                          ha-card {
                            background: none !important;
                            font-variant: small-caps;
                          }
                          mushroom-badge-icon {
                            --badge-size: 26px;
                          }
                    tap_action:
                      action: none
                  - type: custom:mushroom-chips-card
                    chips:
                      - type: template
                        entity: binary_sensor.gone_taekang
                        icon: |
                          {% if is_state(config.entity, 'on')%}
                            mdi:timer-play
                          {% else %}
                            mdi:timer-stop-outline
                          {% endif %}
                        icon_color: |
                          {% if is_state(config.entity, 'on')%}
                            orange
                          {% else %}
                            grey
                          {% endif %}
                        content_info: none
                        tap_action:
                          action: more-info
                        card_mod:
                          style: |
                            ha-card {
                              --chip-border-width: 0;
                            }
                      - type: template
                        entity: binary_sensor.taekang_phone_interactive
                        icon: '{{ state_attr(config.entity, "icon") }}'
                        icon_color: |
                          {% if is_state(config.entity, 'on')%}
                            green
                          {% else %}
                            grey
                          {% endif %}
                        content_info: none
                        tap_action:
                          action: more-info
                        card_mod:
                          style: |
                            ha-card {
                              --chip-border-width: 0;
                            }
                      - type: template
                        entity: sensor.taekang_phone_ringer_mode
                        icon: '{{ state_attr(config.entity, "icon") }}'
                        icon_color: |
                          {% if is_state(config.entity, 'vibrate') %}
                            orange
                          {% elif is_state(config.entity, 'silent') %}
                            grey
                          {% else %}
                            green
                          {% endif %}
                        content_info: none
                        tap_action:
                          action: more-info
                        card_mod:
                          style: |
                            ha-card {
                              --chip-border-width: 0;
                            }
                      - type: template
                        entity: sensor.taekang_phone_network_type
                        icon: '{{ state_attr(config.entity, "icon") }}'
                        icon_color: |
                          {% if is_state(config.entity, 'cellular') %}
                            green
                          {% elif is_state(config.entity, 'wifi') %}
                            cyan
                          {% else %}
                            grey
                          {% endif %}
                        content_info: none
                        tap_action:
                          action: more-info
                        card_mod:
                          style: |
                            ha-card {
                              --chip-border-width: 0;
                            }
                      - type: template
                        entity: sensor.taekang_phone_battery_level
                        content: '{{ states(entity) }}%'
                        icon: '{{ state_attr(config.entity, "icon") }}'
                        icon_color: |
                            {% set bl = states(config.entity) | int %}
                            {% if bl < 10 %} red
                            {% elif bl < 20 %} deep-orange
                            {% elif bl < 30 %} orange
                            {% elif bl < 40 %} amber
                            {% elif bl < 50 %} yellow
                            {% elif bl < 60 %} cyan
                            {% elif bl < 70 %} blue
                            {% elif bl < 80 %} lime
                            {% elif bl < 90 %} light-green
                            {% elif bl < 100 %} teal
                            {% elif bl == 100 %} green
                            {% else %}
                              grey
                            {% endif %}
                        tap_action:
                          action: more-info
                        card_mod:
                          style: |
                            ha-card {
                              --chip-border-width: 0;
                            }
                      - type: template
                        entity: sensor.taekang_phone_geocoded_location
                        icon_color: pink
                        icon: mdi:target
                        content: 찾기
                        tap_action:
                          action: none
                        hold_action:
                          action: call-service
                          service: notify.mobile_app_taekang_phone
                          data:
                            message: 전화기 찾는 중..
                            title: Search Phone
                            data:
                              ttl: 0
                              importance: high
                              priority: high
                              tag: Search
                              channel: alarm_stream
                    alignment: start
                    card_mod:
                      style:
                        style: |
                          ha-card {
                            margin: -2px 0px 12px;
                            --chip-background: rgba(var(--rgb-disabled), 0.15);
                            --ha-card-box-shadow: none;
                            --chip-border-radius: 12px;
                            --chip-height: 40px;
                            --chip-padding: 10px;
                            --chip-spacing: 6px;
                            left: 3px;
                            top: 80px;
                          }
                  - type: custom:mushroom-template-card
                    entity: sensor.taekang_phone_geocoded_location
                    layout: horizontal
                    multiline_secondary: false
                    primary: '{{ states(entity) }}'
                    secondary: '{{ states(''sensor.place_taekang'') }}'
                    icon: >-
                      {% if (state_attr('sensor.places_taekang','direction_of_travel') ==
                      'stationary') and (states('person.taekang') == 'home') %}
                        mdi:home
                      {% elif (state_attr('sensor.places_taekang','direction_of_travel') ==
                      'away_from_home') and (states('person.taekang') == 'not_home') %}
                        mdi:home-minus
                      {% else %}
                        mdi:map-marker-radius
                      {% endif %}
                    icon_color: >-
                      {% if (state_attr('sensor.places_taekang','direction_of_travel') ==
                      'stationary') and (states('person.taekang') == 'home') %}
                        green
                      {% elif (state_attr('sensor.places_taekang','direction_of_travel') ==
                      'away_from_home') and (states('person.taekang') == 'not_home') %}
                        orange
                      {% else %}
                        grey
                      {% endif %}
                    tap_action:
                      action: none
                    alignment: start
                    card_mod:
                      style: |
                        ha-card {
                          margin: -2px 0px 12px;
                          --chip-background: rgba(var(--rgb-disabled), 0.15);
                          --ha-card-box-shadow: none;
                          --chip-border-radius: 12px;
                          --chip-height: 40px;
                          --chip-padding: 10px;
                          --chip-spacing: 6px;
                          left: -10px;
                          top: -40px;
                        }
                  - type: history-graph
                    entities:
                      - entity: person.taekang
                        name: ' '
                    hours_to_show: 24
                    title: Timeline
                    card_mod:
                      style:
                        $: |
                          .card-header {
                            /* Style timeline title */
                            padding: 0px 24px !important;
                            font-size: var(--mush-card-primary-font-size, 14px) !important;
                            font-weight: var(--mush-card-primary-font-weight, bold) !important;
                            line-height: var(--mush-card-primary-line-height, 1.5) !important;
                            color: var(--primary-text-color) !important;
                          }
                        .: |
                          ha-card {
                            /* Remove default card styling */
                            --ha-card-box-shadow: none;
                            --ha-card-background: none;
                            --ha-card-border-width: 0;
                            user-select: none;
                          }
                          .content {
                            /* Add padding on right */
                            padding: 0px 24px !important;
                          }
                    tap_action:
                      action: none
                  - type: map
                    entities:
                      - entity: person.taekang
                    dark_mode: false
                    hours_to_show: 24
                    aspect_ratio: '4:3'
                    card_mod:
                      style:
                        ha-map $ ha-entity-marker $: |
                          .marker {
                            /* Style person marker & adjust position to avoid blocking waypoints */
                            border: 3px solid var(--state-person) !important;
                            border-radius: 50% 50% 50% 0px !important;
                            transform: rotate(-45deg) translate(50%, -50%);
                            overflow: visible !important;
                            background: var(--state-person) !important;
                          }
                          .entity-picture {
                            /* Correct orientation of person avatar */
                            transform: rotate(45deg);
                            border-radius: 50%;
                          }
                        ha-map $: |
                          path:first-child { 
                            /* Style accuracy radius */
                            stroke: var(--state-person);
                            fill: color-mix(in srgb, var(--state-person) 50%, transparent);
                            stroke-width: 0px;
                          }
                          path:nth-child(even) {
                            /* Styling for waypoints */
                            stroke: var(--purple-color);
                            stroke-width: 4px;
                          }
                          path:nth-child(odd):not(:first-child) { 
                            /* Styling for lines */
                            stroke: var(--purple-color);
                            stroke-width: 4px;
                          }
                          .leaflet-control-attribution {
                            /* Style attribution text */
                            background: rgba(var(--rgb-card-background-color), 0.4) !important;
                            font-size: 10px;
                          }
                          .leaflet-container a {
                            /* Set color of zoom icons & attribution text */
                            color: var(--secondary-text-color);
                          }
                          .leaflet-control-zoom-in,
                          .leaflet-control-zoom-out {
                            /* Style zoom buttons like Chips */
                            border-radius: var(--mush-chip-border-radius, 19px) !important;
                            padding: 3px;
                            background: rgb(var(--rgb-secondary-text-color), 0.2) !important;
                            margin: 8px 12px 0px;
                            border: var(--ha-card-border-width, 1px) solid var(--ha-card-border-color, var(--divider-color, #e0e0e0)) !important;
                          } 
                          .leaflet-top {
                            /* Move zoom buttons to bottom of map */
                            bottom: 0px !important;
                          }
                          .leaflet-control-zoom {
                            /* Allow buttons to be moved */
                            position: absolute !important;
                            /* Adjust spacing for border */
                            bottom: calc(2 * var(--ha-card-border-width, 1px) + 56px);
                            /* Remove extra margin */
                            margin: 0px !important;
                            /* Remove zoom control border */
                            border: none !important;
                          }
                          .leaflet-container:after {
                            /* Fade out map at top */
                            content: "";
                            position: absolute;
                            height: 100%;
                            width: 100%;
                            background: linear-gradient(to top, transparent 65%, var(--card-background-color));
                          }
                        ha-icon-button $ mwc-icon-button $: |
                          button {
                            /* Size center button to match Chip */
                            height: var(--mush-chip-height, 36px) !important;
                            width: var(--mush-chip-height, 36px) !important;
                            --mdc-icon-size: 22px;
                          }
                        .: |
                          ha-card {
                            /* Remove default card styling without affecting child elements */
                            box-shadow: none;
                            border-width: 0;
                            border-radius: 0px 0px var(--ha-card-border-radius, 12px) var(--ha-card-border-radius, 12px);
                            transition: all 0s;
                          }
                          :host {
                            /* Define Person State colors. Can be added to theme */
                            --state-person-home: var(--green-color);
                            --state-person-not-home: var(--red-color);
                            --state-person-zone: var(--blue-color);
                            --state-person-unknown: var(--grey-color);
                            /* Set person state color */
                            --state-person:
                            {% if is_state(config.entities[0].entity, ['home', 'not_home', 'unknown']) %}
                              var(--state-person-{{ states(config.entities[0].entity) | replace('_', '-') }})
                            {% else %}
                              var(--state-person-zone)
                            {% endif %};
                          }
                          ha-icon-button {
                            /* Position center button */
                            bottom: 12px;
                            left: 12px !important;
                            top: auto !important;
                            /* Style center button to match Chip */
                            color: var(--deep-orange-color) !important;
                            background: color-mix(in srgb, var(--deep-orange-color) 20%, transparent);
                            border-radius: var(--mush-chip-border-radius, 19px);
                            border: var(--ha-card-border-width, 1px) solid var(--ha-card-border-color, var(--divider-color, #e0e0e0)) !important;
                          }
                card_mod:
                  style: |
                    :host {
                      /* Remove border from poup */
                      --popup-padding-x: 0px;
                      --popup-padding-y: 0px;
                      --popup-min-width: 0px;
                    }
                    .content {
                      /* Remove extra bottom border */
                      margin: -18px -24px -24px !important;
                    }
                    ha-card {
                      box-shadow: none;
                      padding: 2px;
                      background: rgba(var(--rgb-primary-text-color), 0.00);
                    }

      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            hash: '#aiden_fortune'
            name: Aiden Fortune Card
            icon: mdi:calendar-star
            state: sensor.fortune_monkey
            is_sidebar_hidden: true
            width_desktop: 35%
            margin_top_desktop: 300px
            margin_top_mobile: 200px
            bg_opacity: 10
            bg_blur: 10
            back_open: true
          - type: vertical-stack
            cards:
              - type: custom:stack-in-card
                cards:
                  - type: markdown
                    content: >-
                      **{{ states.sensor.fortune_monkey.state }}** ***원숭이띠 운세***


                      {{state_attr('sensor.fortune_monkey', "오늘") }}
                       
                      [바로가기](https://search.naver.com/search.naver?where=nexearch&sm=top_hty&fbm=0&ie=utf8&query=%EC%9B%90%EC%88%AD%EC%9D%B4%EB%9D%A0+%EC%9A%B4%EC%84%B8)

                  - type: markdown
                    content: >-
                      **{{ states.sensor.fortune_capricorn.state }}** ***염소자리 운세***


                      {{state_attr('sensor.fortune_capricorn', "오늘") }}
                       
                      [바로가기](https://search.naver.com/search.naver?where=nexearch&sm=tab_etc&qvt=0&query=%EC%97%BC%EC%86%8C%EC%9E%90%EB%A6%AC%20%EC%9A%B4%EC%84%B8)

      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            hash: '#installed'
            name: Program
            icon: mdi:chip
            is_sidebar_hidden: true
            width_desktop: 30%
            margin_top_desktop: 0px
            margin_top_mobile: 0px
            bg_opacity: 10
            bg_blur: 10
            back_open: true
          - type: vertical-stack
            cards:
             - square: false
               columns: 1
               type: grid
               cards:
                 - type: custom:button-card
                   template: card_update
                   entity: update.home_assistant_core_update
                   variables:
                     ulm_card_update_enable_controls: true
                     ulm_card_update_collapsible: true
                     ulm_card_update_horizontal: true
                     ulm_card_update_narrow_buttons: true
                 - type: custom:button-card
                   template: card_update
                   entity: update.home_assistant_supervisor_update
                   variables:
                     ulm_card_update_enable_controls: true
                     ulm_card_update_collapsible: true
                     ulm_card_update_horizontal: true
                     ulm_card_update_narrow_buttons: true
                 - type: custom:button-card
                   template: card_update
                   entity: update.home_assistant_operating_system_update
                   variables:
                     ulm_card_update_enable_controls: true
                     ulm_card_update_collapsible: true
                     ulm_card_update_horizontal: true
                     ulm_card_update_narrow_buttons: true
                 - type: custom:auto-entities
                   filter:
                     exclude:
                       - entity_id: update.home_assistant_core_update
                       - entity_id: update.home_assistant_operating_system_update
                       - entity_id: update.home_assistant_supervisor_update
                     include:
                       - domain: update
                         state: 'on'
                         options:
                           type: custom:mushroom-update-card
                           show_buttons_control: true
                           layout: horizontal
                           card_mod:
                             style:
                               mushroom-state-info$: |
                                 .secondary {
                                   visibility: hidden;
                                 }
                                 .secondary:before {
                                   visibility: visible;
                                   content: "{{ state_attr(config.entity, 'installed_version')}} → {{ state_attr(config.entity, 'latest_version')}}";
                                 }
                               .: |
                                 ha-card {
                                   --secondary-text-color: rgba(var(--rgb-primary-text-color), 0.5);
                                 }
                   sort:
                     method: friendly_name
                   card_param: cards
                   card:
                     type: vertical-stack
             - square: false
               columns: 1
               type: grid
               cards:
                 - type: custom:apexcharts-card
                   chart_type: donut  #donut, radialBar
                   apex_config:
                     fill:
                       type: gradient
                       gradient:
                         shade: dark
                         shadeIntensity: 0.1
                         opacityFrom: 0.9
                         opacityTo: 0.85
                         stops:
                           - 0
                           - 90
                           - 100
                     chart:
                       fontFamily: SF Text
                     legend:
                       position: bottom
                       fontSize: 13px
                       fontWeight: 300
                       markers:
                         width: 16
                         height: 20
                         customHTML:
                           - |-
                             EVAL:() => {
                               return `<ha-icon icon="hass:robot" style="--mdc-icon-size: 14px;"></ha-icon>`
                             }
                           - |-
                             EVAL:() => {
                               return `<ha-icon icon="hass:radiobox-blank" style="--mdc-icon-size: 14px;"></ha-icon>`
                             }
                           - |-
                             EVAL:() => {
                               return `<ha-icon icon="hass:account" style="--mdc-icon-size: 14px;"></ha-icon>`
                             }
                           - |-
                             EVAL:() => {
                               return `<ha-icon icon="hass:lightbulb" style="--mdc-icon-size: 14px;"></ha-icon>`
                             }
                           - |-
                             EVAL:() => {
                               return `<ha-icon icon="hass:cast" style="--mdc-icon-size: 14px;"></ha-icon>`
                             }
                           - |-
                             EVAL:() => {
                               return `<ha-icon icon="hass:eye" style="--mdc-icon-size: 14px;"></ha-icon>`
                             }
                           - |-
                             EVAL:() => {
                               return `<ha-icon icon="hass:flash" style="--mdc-icon-size: 14px;"></ha-icon>`
                             }
                           - |-
                             EVAL:() => {
                               return `<ha-icon icon="hass:home-assistant" style="--mdc-icon-size: 14px;"></ha-icon>`
                             }
                         fillColors:
                           - none
                           - none
                           - none
                           - none
                           - none
                           - none
                           - none
                           - none
                     stroke:
                       show: true
                       width: 0.4
                     dataLabels:
                       enabled: false
                       style:
                         fontSize: 14px
                         fontWeight: 700
                       dropShadow:
                         enabled: true
                         top: 0
                         left: 0
                         blur: 3
                         color: black
                         opacity: 0.1
                     plotOptions:
                       pie:
                         startAngle: 0
                         endAngle: 360
                         expandOnClick: true
                         offsetX: 0
                         offsetY: 0
                         customScale: 1
                         dataLabels:
                           offset: 0
                           minAngleToShowLabel: 10
                         donut:
                           size: 65%
                           background: transparent
                           labels:
                             show: true
                             value:
                               fontSize: 42px
                               fontWeight: 700
                               offsetY: 16
                             total:
                               show: true
                               label: Entities
                               fontSize: 15px
                               fontWeight: 800
                               color: '#ffffff50'
                   series:
                     - entity: sensor.template_domain_counter
                       attribute: automation
                       name: Automations
                     - entity: sensor.template_domain_counter
                       attribute: binary_sensor
                       name: Binary sensors
                     - entity: sensor.template_domain_counter
                       attribute: device_tracker
                       name: Device trackers
                     - entity: sensor.template_domain_counter
                       attribute: light
                       name: Lights
                     - entity: sensor.template_domain_counter
                       attribute: media_player
                       name: Media players
                     - entity: sensor.template_domain_counter
                       attribute: sensor
                       name: Sensors
                     - entity: sensor.template_domain_counter
                       attribute: switch
                       name: Switches
                     - entity: sensor.template_domain_counter
                       attribute: other
                       name: Other


#################################################### floorplan
  - title: FLOORPLAN
    icon: mdi:floor-plan
    path: floorplan
    cards:
      - type: vertical-stack
        cards:
          - type: picture-elements
            image: /local/floorplan/light_all_off.png
            elements:
              #부재모드테두리
              - type: image
                entity: input_boolean.trigger_home_absence
                image: /local/floorplan/home_lock.png
                state_filter:
                  'on': opacity(100%)
                  'off': opacity(0%)
                style:
                  top: 50%
                  left: 50%
                  width: 100%
                tap_action:
                  action: none
                double_tap_action:
                  action: none
                hold_action:
                  action: none
              #안방 조명
              - type: image
                entity:  light.mainroom
                image: /local/floorplan/light_mr_on.png
                state_filter:
                  'on': opacity(100%)
                  'off': opacity(0%)
                style:
                  top: 50%
                  left: 50%
                  width: 100%
                  mix-blend-mode: lighten
                tap_action:
                  action: none
                double_tap_action:
                  action: none
                hold_action:
                  action: none
              #아들방 조명
              - type: image
                entity: light.sonroom
                image: /local/floorplan/light_sr_on.png
                state_filter:
                  'on': opacity(100%)
                  'off': opacity(0%)
                style:
                  top: 50%
                  left: 50%
                  width: 100%
                  mix-blend-mode: lighten
                tap_action:
                  action: none
                double_tap_action:
                  action: none
                hold_action:
                  action: none
              #공부방 조명
              - type: image
                entity: light.studyroom
                image: /local/floorplan/light_stdr_on.png
                state_filter:
                  'on': opacity(100%)
                  'off': opacity(0%)
                style:
                  top: 50%
                  left: 50%
                  width: 100%
                  mix-blend-mode: lighten
                tap_action:
                  action: none
                double_tap_action:
                  action: none
                hold_action:
                  action: none
              #독서실 조명
              - type: image
                entity: light.studyroom  #공부방 조명 연동
                image: /local/floorplan/light_rdr_on.png
                state_filter:
                  'on': opacity(100%)
                  'off': opacity(0%)
                style:
                  top: 50%
                  left: 50%
                  width: 100%
                  mix-blend-mode: lighten
                tap_action:
                  action: none
                double_tap_action:
                  action: none
                hold_action:
                  action: none
              #거실일괄 조명
              - type: conditional
                conditions:
                  - entity: light.livingroom_ctr
                    state: 'on'
                  - entity: light.livingroom_side
                    state: 'on'
                elements:
                  - type: image
                    image: /local/floorplan/light_lvr3_on.png
                    state_filter:
                      'on': opacity(100%)
                      'off': opacity(0%)
                    style:
                      top: 50%
                      left: 50%
                      width: 100%
                      mix-blend-mode: lighten
                tap_action:
                  action: none
                double_tap_action:
                  action: none
                hold_action:
                  action: none
              #거실센터 조명
              - type: image
                entity: light.livingroom_ctr
                image: /local/floorplan/light_lvr1_on.png
                state_filter:
                  'on': opacity(80%)
                  'off': opacity(0%)
                style:
                  top: 50%
                  left: 50%
                  width: 100%
                  mix-blend-mode: lighten
                tap_action:
                  action: none
                double_tap_action:
                  action: none
                hold_action:
                  action: none
              #거실사이드 조명
              - type: image
                entity: light.livingroom_side
                image: /local/floorplan/light_lvr2_on.png
                state_filter:
                  'on': opacity(100%)
                  'off': opacity(0%)
                style:
                  top: 50%
                  left: 50%
                  width: 100%
                  mix-blend-mode: lighten
                tap_action:
                  action: none
                double_tap_action:
                  action: none
                hold_action:
                  action: none
              #베란다 조명
              - type: image
                entity: light.livingroom_vrd
                image: /local/floorplan/light_vrd_on.png
                state_filter:
                  'on': opacity(100%)
                  'off': opacity(0%)
                style:
                  top: 50%
                  left: 50%
                  width: 100%
                tap_action:
                  action: none
                double_tap_action:
                  action: none
                hold_action:
                  action: none
              #주방 조명
              - type: image
                entity: light.kitchen
                image: /local/floorplan/light_kc_on.png
                state_filter:
                  'on': opacity(100%)
                  'off': opacity(0%)
                style:
                  top: 50%
                  left: 50%
                  width: 100%
                  mix-blend-mode: lighten
                tap_action:
                  action: none
                double_tap_action:
                  action: none
                hold_action:
                  action: none
              #식탁 조명
              - type: image
                entity: light.kitchen_table
                image: /local/floorplan/light_tb_on.png
                state_filter:
                  'on': opacity(100%)
                  'off': opacity(0%)
                style:
                  top: 50%
                  left: 50%
                  width: 100%
                  mix-blend-mode: lighten
                tap_action:
                  action: none
                double_tap_action:
                  action: none
                hold_action:
                  action: none
              #세탁실 조명
              - type: image
                entity: light.laundryroom
                image: /local/floorplan/light_ldr_on.png
                state_filter:
                  'on': opacity(100%)
                  'off': opacity(0%)
                style:
                  top: 50%
                  left: 50%
                  width: 100%
                  mix-blend-mode: lighten
                tap_action:
                  action: none
                double_tap_action:
                  action: none
                hold_action:
                  action: none
              #거실화장실 조명
              - type: image
                entity: light.livingroomrest
                image: /local/floorplan/light_lvrt_on.png
                state_filter:
                  'on': opacity(100%)
                  'off': opacity(0%)
                style:
                  top: 50%
                  left: 50%
                  width: 100%
                  mix-blend-mode: lighten
                tap_action:
                  action: none
                double_tap_action:
                  action: none
                hold_action:
                  action: none
              #안방화장실 조명
              - type: image
                entity: light.mainroomrest
                image: /local/floorplan/light_mrt_on.png
                state_filter:
                  'on': opacity(100%)
                  'off': opacity(0%)
                style:
                  top: 50%
                  left: 50%
                  width: 100%
                  mix-blend-mode: lighten
                tap_action:
                  action: none
                double_tap_action:
                  action: none
                hold_action:
                  action: none
              #거실화장실 환풍기
              - type: custom:button-card
                entity: switch.livingroomrest_fan
                template:
                  - floorplan
                  - floorplan_fan
                style:
                  top: 33.3%
                  left: 14.3%
                  transform: 'scale(0.8, 0.8)'
              #안방화장실 환풍기
              - type: custom:button-card
                entity: switch.mainroomrest_fan
                template:
                  - floorplan
                  - floorplan_fan
                style:
                  top: 39%
                  left: 1%
                  transform: 'scale(0.8, 0.8)'
              #거실커튼 조명
              - type: custom:button-card
                entity: light.curtainled_lvr
                template:
                  - floorplan
                  - floorplan_color_sync
                style:
                  top: 81.8%
                  left: 55%
                  transform: 'scale(8.0, 0.2)'
              #공부방커튼 조명
              - type: custom:button-card
                entity: light.curtainled_stdr
                template:
                  - floorplan
                  - floorplan_color_sync
                style:
                  top: 7.7%
                  left: 12%
                  transform: 'scale(6.0, 0.2)'
              #싱크대 조명
              - type: custom:button-card
                entity: light.0x00124b0022676e23
                template:
                  - floorplan
                  - floorplan_color_sync
                style:
                  top: 4.0%
                  left: 38.8%
                  transform: 'scale(4.3, 0.2)'
              #휴벌브1
              - type: image
                entity: light.bulb1
                image: /local/floorplan/light_h1_on.png
                state_filter:
                  'on': opacity(100%)
                  'off': opacity(0%)
                style:
                  top: 50%
                  left: 50%
                  width: 100%
                  mix-blend-mode: lighten
                tap_action:
                  action: none
                double_tap_action:
                  action: none
                hold_action:
                  action: none
              #휴벌브1 색상
              - type: custom:button-card
                icon: mdi:checkbox-blank-circle
                entity: light.bulb1
                template:
                  - floorplan
                  - floorplan_color_sync
                style:
                  top: 73%
                  left: 38.8%
                  transform: 'scale(0.4, 0.4)'
              #휴벌브2
              - type: image
                entity: light.bulb2
                image: /local/floorplan/light_h2_on.png
                state_filter:
                  'on': opacity(100%)
                  'off': opacity(0%)
                style:
                  top: 50%
                  left: 50%
                  width: 100%
                  mix-blend-mode: lighten
                tap_action:
                  action: none
                double_tap_action:
                  action: none
                hold_action:
                  action: none
              #휴벌브2 색상
              - type: custom:button-card
                icon: mdi:checkbox-blank-circle
                entity: light.bulb2
                template:
                  - floorplan
                  - floorplan_color_sync
                style:
                  top: 54.5%
                  left: 38.8%
                  transform: 'scale(0.4, 0.4)'
              #휴벌브3
              - type: image
                entity: light.bulb3
                image: /local/floorplan/light_h3_on.png
                state_filter:
                  'on': opacity(100%)
                  'off': opacity(0%)
                style:
                  top: 50%
                  left: 50%
                  width: 100%
                  mix-blend-mode: lighten
                tap_action:
                  action: none
                double_tap_action:
                  action: none
                hold_action:
                  action: none
              #휴벌브3 색상
              - type: custom:button-card
                icon: mdi:checkbox-blank-circle
                entity: light.bulb3
                template:
                  - floorplan
                  - floorplan_color_sync
                style:
                  top: 55%
                  left: 70%
                  transform: 'scale(0.4, 0.4)'
              #게이트웨이1st 거실
              - type: custom:button-card
                entity: light.gateway_light_7811dcfaec7e
                icon: mdi:alpha-g-circle
                template:
                  - floorplan
                  - floorplan_color_sync
                style:
                  top: 62%
                  left: 72%
                  transform: 'scale(0.8, 0.8)'
              #게이트웨이2nd 공부방
              - type: custom:button-card
                entity: light.gateway_light_50ec50c52be0
                icon: mdi:alpha-g-circle
                template:
                  - floorplan
                  - floorplan_color_sync
                style:
                  top: 4.5%
                  left: 1%
                  transform: 'scale(0.8, 0.8)'
              #안방L베란다
              - type: image
                entity: binary_sensor.0x00158d0002a15d94_contact
                image: /local/floorplan/door-mainroom-left-veranda.png
                state_filter:
                  'on': opacity(0.2)
                  'off': opacity(0)
                style:
                  top: 94.5%
                  left: 36%
                  width: 8.3%
                tap_action:
                  action: none
                double_tap_action:
                  action: none
                hold_action:
                  action: none
              #안방R베란다
              - type: image
                entity: binary_sensor.0x00158d0002911efc_contact
                image: /local/floorplan/door-mainroom-right-veranda.png
                state_filter:
                  'on': opacity(0.2)
                  'off': opacity(0)
                style:
                  top: 94.5%
                  left: 12%
                  width: 12%
                tap_action:
                  action: none
                double_tap_action:
                  action: none
                hold_action:
                  action: none
              #공부방 베란다
              - type: image
                entity: binary_sensor.0x00158d00029b66cc_contact
                image: /local/floorplan/door-studyroom-veranda.png
                state_filter:
                  'on': opacity(0.4)
                  'off': opacity(0)
                style:
                  top: 4%
                  left: 24.6%
                  width: 6.7%
                tap_action:
                  action: none
                double_tap_action:
                  action: none
                hold_action:
                  action: none
              #거실R베란다
              - type: image
                entity: binary_sensor.0x00158d0002d6e61d_contact
                image: /local/floorplan/door-livingroom-veranda.png
                state_filter:
                  'on': opacity(0.2)
                  'off': opacity(0)
                style:
                  top: 94.5%
                  left: 44.3%
                  width: 7.5%
                tap_action:
                  action: none
                double_tap_action:
                  action: none
                hold_action:
                  action: none
              #거실화장실문
              - type: image
                entity:  binary_sensor.0x00158d0002a15f03_contact
                image: /local/floorplan/door-livingroom-toilet.png
                state_filter:
                  'on': opacity(0.2)
                  'off': opacity(0)
                style:
                  top: 49%
                  left: 32%
                  width: 4.2%
                tap_action:
                  action: none
                double_tap_action:
                  action: none
                hold_action:
                  action: none
              #현관문
              - type: image
                entity: sensor.0x00158d00031e9334_door_state
                image: /local/floorplan/light_opdr_on.png
                state_filter:
                  'open': opacity(100%)
                  'closed': opacity(0%)
                style:
                  top: 50%
                  left: 50%
                  width: 100%
                  mix-blend-mode: lighten
                tap_action:
                  action: none
                double_tap_action:
                  action: none
                hold_action:
                  action: none
              #안방 모션
              - type: custom:button-card
                entity: binary_sensor.0x00158d00041418aa_occupancy
                template:
                  - floorplan
                  - floorplan_motion
                style:
                  top: 65%
                  left: 18%
                  transform: 'scale(0.8, 0.8)'
              #아들방 모션
              - type: custom:button-card
                entity: binary_sensor.0x00158d00045225c2_occupancy
                template:
                  - floorplan
                  - floorplan_motion
                style:
                  top: 31%
                  left: 61%
                  transform: 'scale(0.8, 0.8)'
              #공부방 모션
              - type: custom:button-card
                entity: binary_sensor.0x00158d00040c3dbf_occupancy
                template:
                  - floorplan
                  - floorplan_motion
                style:
                  top: 20%
                  left: 18%
                  transform: 'scale(0.8, 0.8)'
              #거실 모션
              - type: custom:button-card
                entity: binary_sensor.0x00158d0004059202_occupancy
                template:
                  - floorplan
                  - floorplan_motion
                style:
                  top: 62%
                  left: 54%
                  transform: 'scale(0.8, 0.8)'
              #주방 모션
              - type: custom:button-card
                entity: binary_sensor.0x00158d0002b70b2b_occupancy
                template:
                  - floorplan
                  - floorplan_motion
                style:
                  top: 25%
                  left: 40%
                  transform: 'scale(0.8, 0.8)'
              #도어벨 모션
              - type: custom:button-card
                entity: binary_sensor.0x00158d00028a994a_occupancy
                template:
                  - floorplan
                  - floorplan_motion
                style:
                  top: 48%
                  left: 83%
                  transform: 'scale(0.8, 0.8)'
              #구글홈거실
              - type: custom:button-card
                entity: media_player.livingroom
                icon: mdi:speaker
                template: floorplan
                card_mod:
                  style: |
                    ha-state-icon {
                      animation: beat 1.3s ease-out infinite both;
                      transform-origin: 50% 60%;
                    }
                    @keyframes beat {
                      0% { transform: scale(1); }
                      10% { transform: scale(1.1); }
                      17% { transform: scale(1.05); }
                      33% { transform: scale(1.25); }
                      60% { transform: scale(1); }
                    }
                style:
                  top: 77%
                  left: 72.5%
                  transform: 'scale(0.6, 0.6)'
              #구글홈안방
              - type: custom:button-card
                entity: media_player.mainroom
                icon: mdi:speaker
                template: floorplan
                card_mod:
                  style: |
                    ha-state-icon {
                      animation: beat 1.3s ease-out infinite both;
                      transform-origin: 50% 60%;
                    }
                    @keyframes beat {
                      0% { transform: scale(1); }
                      10% { transform: scale(1.1); }
                      17% { transform: scale(1.05); }
                      33% { transform: scale(1.25); }
                      60% { transform: scale(1); }
                    }
                style:
                  top: 76%
                  left: 27%
                  transform: 'scale(0.6, 0.6)'
              #구글홈주방
              - type: custom:button-card
                entity: media_player.kitchen
                icon: mdi:speaker
                template: floorplan
                card_mod:
                  style: |
                    ha-state-icon {
                      animation: beat 1.3s ease-out infinite both;
                      transform-origin: 50% 60%;
                    }
                    @keyframes beat {
                      0% { transform: scale(1); }
                      10% { transform: scale(1.1); }
                      17% { transform: scale(1.05); }
                      33% { transform: scale(1.25); }
                      60% { transform: scale(1); }
                    }
                style:
                  top: 1%
                  left: 48%
                  transform: 'scale(0.6, 0.6)'
              #구글홈아들방
              - type: custom:button-card
                entity: media_player.sonroom
                icon: mdi:speaker
                template: floorplan
                card_mod:
                  style: |
                    ha-state-icon {
                      animation: beat 1.3s ease-out infinite both;
                      transform-origin: 50% 60%;
                    }
                    @keyframes beat {
                      0% { transform: scale(1); }
                      10% { transform: scale(1.1); }
                      17% { transform: scale(1.05); }
                      33% { transform: scale(1.25); }
                      60% { transform: scale(1); }
                    }
                style:
                  top: 39%
                  left: 59%
                  transform: 'scale(0.6, 0.6)'
              #구글홈공부방
              - type: custom:button-card
                entity: media_player.studyroom
                icon: mdi:speaker
                template: floorplan
                card_mod:
                  style: |
                    ha-state-icon {
                      animation: beat 1.3s ease-out infinite both;
                      transform-origin: 50% 60%;
                    }
                    @keyframes beat {
                      0% { transform: scale(1); }
                      10% { transform: scale(1.1); }
                      17% { transform: scale(1.05); }
                      33% { transform: scale(1.25); }
                      60% { transform: scale(1); }
                    }
                style:
                  top: 14%
                  left: 0.2%
                  transform: 'scale(0.6, 0.6)'
              #구글홈화장실
              - type: custom:button-card
                entity: media_player.toilet
                icon: mdi:speaker
                template: floorplan
                card_mod:
                  style: |
                    ha-state-icon {
                      animation: beat 1.3s ease-out infinite both;
                      transform-origin: 50% 60%;
                    }
                    @keyframes beat {
                      0% { transform: scale(1); }
                      10% { transform: scale(1.1); }
                      17% { transform: scale(1.05); }
                      33% { transform: scale(1.25); }
                      60% { transform: scale(1); }
                    }
                style:
                  top: 47%
                  left: 13.5%
                  transform: 'scale(0.6, 0.6)'
              #거실커튼
              - type: custom:bar-card
                entity: sensor.current_position_lvr_cover
                height: 3px
                width: 100%
                color: skyblue
                entity_row: true
                direction: right
                animation:
                 state: 'on'
                 speed: '2'
                positions:
                  icon: 'off'
                  name: 'off'
                  value: 'off'
                  indicator: 'off'
                style:
                  top: 85.3%
                  left: 39.5%
                  width: 37.5%
                  transform: scaleX(-1)
              #거실에어컨
              - type: custom:button-card
                entity: climate.eeokeon
                icon: mdi:air-conditioner
                template:
                  - floorplan
                  - floorplan_state
                style:
                  top: 77%
                  left: 40%
                  transform: 'scale(0.6, 0.6)'
              #거실TV
              - type: custom:button-card
                entity: switch.lvr_tv_power
                icon: mdi:checkbox-blank
                template:
                  - floorplan
                  - floorplan_tv
                style:
                  top: 63%
                  left: 35.4%
                  width: 11%
                  transform: 'scale(0.4, 2.9)'
              #거실TV 시청화면
              - type: custom:button-card
                entity: media_player.livingroom_tv
                template:
                  - floorplan
                  - floorplan_state
                show_entity_picture: true
                entity_picture: |
                  [[[
                    if (states['media_player.livingroom_tv'].state == 'on')
                      return states['media_player.livingroom_tv'].attributes.entity_picture
                  ]]]
                style:
                  top: 62%
                  left: 42.5%
                  filter: opacity(30%)
                  transform: 'scale(1.0, 1.0)'
              #세탁기
              - type: custom:button-card
                entity: switch.0x04cd15fffea9d1eb
                icon: mdi:washing-machine
                template: floorplan
                style:
                  top: 9%
                  left: 72%
                  transform: 'scale(1.0, 1.0)'
              #건조기
              - type: custom:button-card
                entity: switch.0x04cd15fffeb016d4
                icon: mdi:tumble-dryer
                template: floorplan
                style:
                  top: 52%
                  left: 17%
                  transform: 'scale(0.8, 0.8)'
             #코타츠
              - type: conditional
                conditions:
                  - entity: input_boolean.switching_socket
                    state: 'off'
                elements:
                  - type: custom:button-card
                    entity: switch.0x04cd15fffeabc091
                    icon: mdi:fireplace
                    template: floorplan
                    card_mod:
                      style: |
                        ha-state-icon {
                          animation: fire 800ms infinite;
                          transform-origin: 50% 85%;
                        }
                        @keyframes fire {
                          0%, 19%, 23%, 39%, 43%, 49%, 53%, 69%, 73%, 89%, 93%, 100% { clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%); }
                          20%, 40%, 50%, 70%, 90% { clip-path: polygon(0 0, 100% 0, 100% 100%, 65% 99%, 66% 49%, 52% 44%, 33% 48%, 33% 82%, 66% 82%, 69% 100%, 0 100%); }
                        }
                    style:
                      top: 68%
                      left: 65%
                      transform: 'scale(0.8, 0.8)'
              #밥솥
              - type: custom:button-card
                entity: switch.0x04cd15fffeabcaac
                icon: mdi:rice
                template: floorplan
                style:
                  top: 12%
                  left: 31.5%
                  transform: 'scale(0.6, 0.6)'
              #가스락 (SG-V100-ZB)
              - type: custom:button-card
                entity: switch.0x84fd27fffe44ddd7
                icon: mdi:fire
                template: floorplan
                style:
                  top: 7.4%
                  left: 47%
                  transform: 'scale(0.7, 0.7)'
              #후드
              - type: custom:button-card
                entity: binary_sensor.0x00158d0002b7f2c4_contact
                template:
                  - floorplan
                  - floorplan_fan
                style:
                  top: 4%
                  left: 48%
                  transform: 'scale(0.5, 0.5)'
              #강제환기
              - type: custom:button-card
                entity: binary_sensor.costraint_ventilation_on
                template:
                  - floorplan
                  - floorplan_ventilation
                style:
                  top: 94%
                  left: 0.5%
                  transform: 'scale(0.7, 0.7)'
              #안방공기청정기
              - type: custom:button-card
                entity: fan.xiaomi_airpurifier_1st
                icon: mdi:air-purifier
                template: floorplan
                card_mod:
                  style: |
                    ha-state-icon {
                      animation: air 1s infinite;
                    }
                    @keyframes air {
                      0%, 100% { clip-path: inset(0 0 0 0); }
                      25% { clip-path: polygon(100% 100%, 0 100%, 0 0, 100% 0, 98% 32%, 63% 42%, 65% 58%, 100% 43%); }
                      75% { clip-path: polygon(100% 100%, 0 100%, 0 0, 100% 0, 100% 44%, 64% 61%, 64% 73%, 100% 72%); }
                      50% { clip-path: polygon(100% 100%, 0 100%, 0 0, 100% 0, 78% 38%, 64% 43%, 64% 72%, 100% 73%); }
                    }
                style:
                  top: 52%
                  left: 25%
                  transform: 'scale(0.8, 0.8)'
              #거실공기청정기
              - type: custom:button-card
                entity: fan.xiaomi_airpurifier_2nd
                icon: mdi:air-purifier
                template: floorplan
                card_mod:
                  style: |
                    ha-state-icon {
                      animation: air 1s infinite;
                    }
                    @keyframes air {
                      0%, 100% { clip-path: inset(0 0 0 0); }
                      25% { clip-path: polygon(100% 100%, 0 100%, 0 0, 100% 0, 98% 32%, 63% 42%, 65% 58%, 100% 43%); }
                      75% { clip-path: polygon(100% 100%, 0 100%, 0 0, 100% 0, 100% 44%, 64% 61%, 64% 73%, 100% 72%); }
                      50% { clip-path: polygon(100% 100%, 0 100%, 0 0, 100% 0, 78% 38%, 64% 43%, 64% 72%, 100% 73%); }
                    }
                style:
                  top: 57.5%
                  left: 41%
                  transform: 'scale(0.8, 0.8)'
              #공부방공기청정기
              - type: custom:button-card
                entity: fan.xiaomi_airpurifier_3rd
                icon: mdi:air-purifier
                template: floorplan
                card_mod:
                  style: |
                    ha-state-icon {
                      animation: air 1s infinite;
                    }
                    @keyframes air {
                      0%, 100% { clip-path: inset(0 0 0 0); }
                      25% { clip-path: polygon(100% 100%, 0 100%, 0 0, 100% 0, 98% 32%, 63% 42%, 65% 58%, 100% 43%); }
                      75% { clip-path: polygon(100% 100%, 0 100%, 0 0, 100% 0, 100% 44%, 64% 61%, 64% 73%, 100% 72%); }
                      50% { clip-path: polygon(100% 100%, 0 100%, 0 0, 100% 0, 78% 38%, 64% 43%, 64% 72%, 100% 73%); }
                    }
                style:
                  top: 22%
                  left: 23%
                  transform: 'scale(0.8, 0.8)'
              #안방선풍기
              - type: custom:button-card
                entity: fan.fan2s
                template:
                  - floorplan
                  - floorplan_pinwheel
                style:
                  top: 52%
                  left: 20%
                  transform: 'scale(0.6, 0.6)'
              #거실선풍기
           #   - type: custom:button-card
           #     entity: switch.sonoff01_relay
           #     template:
           #       - floorplan
           #       - floorplan_pinwheel
           #     style:
           #       top: 56%
           #       left: 61%
           #       transform: 'scale(0.6, 0.6)'
              #공부방선풍기
              - type: custom:button-card
                entity: switch.0x00124b001b6269ad
                template:
                  - floorplan
                  - floorplan_pinwheel
                style:
                  top: 56%
                  left: 61%
                  transform: 'scale(0.6, 0.6)'
              #공부방선풍기
          #    - type: custom:button-card
          #      entity: switch.0x00124b001b6269ad
          #      template:
          #        - floorplan
          #        - floorplan_pinwheel
          #      style:
          #        top: 15%
          #        left: 7%
          #        transform: 'scale(0.6, 0.6)'  #'skew(20deg, -45deg) scale(0.8, 0.8)'
              #컴퓨터 아빠
              - type: custom:button-card
                entity: switch.desktop_aiden
                icon: mdi:monitor
                template: floorplan
                style:
                  top: 15%
                  left: 5%
                  transform: 'scale(0.6, 0.6)'
              #컴퓨터 도현
              - type: custom:button-card
                entity: switch.desktop_dohyun
                icon: mdi:monitor
                template: floorplan
                style:
                  top: 18%
                  left: 5%
                  transform: 'scale(0.6, 0.6)'
              #컴퓨터 태강
              - type: custom:button-card
                entity: switch.desktop_taekang
                icon: mdi:monitor
                template: floorplan
                style:
                  top: 21%
                  left: 5%
                  transform: 'scale(0.6, 0.6)'
              #샤오미 청소기
              - type: custom:button-card
                entity: vacuum.cleaner1s
                template:
                  - floorplan
                  - floorplan_state
                style:
                  top: 66%
                  left: 41%
                  transform: 'scale(0.6, 0.6)'
              #전자레인지
              - type: custom:button-card
                entity: sensor.jeonjareinji_oven_job_state
                icon: mdi:microwave
                template:
                  - floorplan
                  - floorplan_state
                style:
                  top: 17%
                  left: 47%
                  transform: 'scale(0.6, 0.6)'
              #미러볼
              - type: custom:button-card
                entity: switch.0x842e14fffefec30d_l5
                icon: mdi:crystal-ball
                template: floorplan
                style:
                  top: 79.8%
                  left: 38.3%
                  transform: 'scale(0.8, 0.8)'
              #거실카메라
              - type: custom:button-card
                entity: camera.livingroom
                template:
                  - floorplan
                  - floorplan_state
                style:
                  top: 80.5%
                  left: 72.5%
                  filter: opacity(30%)
                  transform: 'rotate(270deg) scale(0.7, 0.7)'
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      content:
                        type: picture-entity
                        entity: camera.livingroom
                hold_action:
                  action: call-service
                  service: input_boolean.toggle
                  service_data:
                    entity_id: input_boolean.auto_camera_livingroom_cpt
              #거실카메라 스냅샷
              - type: conditional
                conditions:
                  - entity: input_boolean.auto_camera_livingroom_cpt
                    state: 'on'
                elements:
                  - type: custom:button-card
                    entity: camera.livingroom_photo
                    template: floorplan
                    show_entity_picture: true
                    entity_picture: |
                      [[[ return states['camera.livingroom_photo'].attributes.entity_picture ]]]
                    size: 100%
                    style:
                      top: 74%
                      left: 53%
                      width: 11%
                    tap_action:
                      action: fire-dom-event
                      browser_mod:
                        service: browser_mod.popup
                        data:
                          style: |
                            --mdc-theme-surface: transparent;
                            --popup-background-color: transparent;
                            --popup-border-color: transparent;
                            --dialog-backdrop-filter: transparent;
                          title: "[[[ return entity.attributes.friendly_name ]]]"
                          hide_header: false
                          content:
                            type: picture-entity
                            card_mod:
                              style: |
                                ha-card {
                                  background-color: transparent;
                                  box-shadow: none;
                                }
                            entity: camera.livingroom_photo  #camera.livingroom
                            show_state: false
                            #camera_view: live  #라이브는 위 엔티티도 카메라로 할 것
                          timeout: 10000  #8초후 닫힘
                          size: normal
                          right_button: 텔레그램 보내기
                          left_button: 닫기
                          right_button_action:
                            service: script.toggle
                            data:
                              entity_id: script.snapshot_livingroom_telegram
                          left_button_action:
                            service: input_boolean.turn_on
                            data:
                              entity_id: input_boolean.auto_camera_livingroom_cpt
                    hold_action:
                      action: call-service
                      service: input_boolean.toggle
                      service_data:
                        entity_id: input_boolean.auto_camera_livingroom_cpt
              #주방카메라
              - type: custom:button-card
                entity: camera.kitchen
                template:
                  - floorplan
                  - floorplan_state
                style:
                  top: 16.5%
                  left: 28%
                  filter: opacity(30%)
                  transform: 'rotate(90deg) scale(0.7, 0.7)'
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      content:
                        type: picture-entity
                        entity: camera.kitchen
                hold_action:
                  action: call-service
                  service: input_boolean.toggle
                  service_data:
                    entity_id: input_boolean.auto_camera_kitchen_cpt
              #주방카메라 스냅샷
              - type: conditional
                conditions:
                  - entity: input_boolean.auto_camera_kitchen_cpt
                    state: 'on'
                elements:
                  - type: custom:button-card
                    entity: camera.kitchen_photo
                    template: floorplan
                    show_entity_picture: true
                    entity_picture: |
                      [[[ return states['camera.kitchen_photo'].attributes.entity_picture ]]]
                    size: 100%
                    style:
                      top: 18%
                      left: 44%
                      width: 11%
                    tap_action:
                      action: fire-dom-event
                      browser_mod:
                        service: browser_mod.popup
                        data:
                          style: |
                            --mdc-theme-surface: transparent;
                            --popup-background-color: transparent;
                            --popup-border-color: transparent;
                            --dialog-backdrop-filter: transparent;
                          title: "[[[ return entity.attributes.friendly_name ]]]"
                          hide_header: false
                          content:
                            type: picture-entity
                            card_mod:
                              style: |
                                ha-card {
                                  background-color: transparent;
                                  box-shadow: none;
                                }
                            entity: camera.kitchen_photo  #camera.kitchen
                            show_state: false
                            #camera_view: live  #라이브는 위 엔티티도 카메라로 할 것
                          timeout: 10000  #8초후 닫힘
                          size: normal
                          right_button: 텔레그램 보내기
                          left_button: 닫기
                          right_button_action:
                            service: script.toggle
                            data:
                              entity_id: script.snapshot_kitchen_telegram
                          left_button_action:
                            service: input_boolean.turn_on
                            data:
                              entity_id: input_boolean.auto_camera_kitchen_cpt
                    hold_action:
                      action: call-service
                      service: input_boolean.toggle
                      service_data:
                        entity_id: input_boolean.auto_camera_kitchen_cpt
              #공부방카메라
              - type: custom:button-card
                entity: camera.studyroom
                template:
                  - floorplan
                  - floorplan_state
                style:
                  top: 9.5%
                  left: 0.2%
                  filter: opacity(30%)
                  transform: 'rotate(0deg) scale(0.7, 0.7)'
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      content:
                        type: picture-entity
                        entity: camera.studyroom
                hold_action:
                  action: call-service
                  service: input_boolean.toggle
                  service_data:
                    entity_id: input_boolean.auto_camera_studyroom_cpt
              #공부방카메라 스냅샷
              - type: conditional
                conditions:
                  - entity: input_boolean.auto_camera_studyroom_cpt
                    state: 'on'
                elements:
                  - type: custom:button-card
                    entity: camera.studyroom_photo
                    template: floorplan
                    show_entity_picture: true
                    entity_picture: |
                      [[[ return states['camera.studyroom_photo'].attributes.entity_picture ]]]
                    size: 100%
                    style:
                      top: 29%
                      left: 18%
                      width: 11%
                    tap_action:
                      action: fire-dom-event
                      browser_mod:
                        service: browser_mod.popup
                        data:
                          style: |
                            --mdc-theme-surface: transparent;
                            --popup-background-color: transparent;
                            --popup-border-color: transparent;
                            --dialog-backdrop-filter: transparent;
                          title: "[[[ return entity.attributes.friendly_name ]]]"
                          hide_header: false
                          content:
                            type: picture-entity
                            card_mod:
                              style: |
                                ha-card {
                                  background-color: transparent;
                                  box-shadow: none;
                                }
                            entity: camera.studyroom_photo  #camera.studyroom
                            show_state: false
                            #camera_view: live  #라이브는 위 엔티티도 카메라로 할 것
                          timeout: 10000  #8초후 닫힘
                          size: normal
                          right_button: 텔레그램 보내기
                          left_button: 닫기
                          right_button_action:
                            service: script.toggle
                            data:
                              entity_id: script.snapshot_studyroom_telegram
                          left_button_action:
                            service: input_boolean.turn_on
                            data:
                              entity_id: input_boolean.auto_camera_studyroom_cpt
                    hold_action:
                      action: call-service
                      service: input_boolean.toggle
                      service_data:
                        entity_id: input_boolean.auto_camera_studyroom_cpt
              #현관카메라
              - type: custom:button-card
                entity: camera.entrance
                template:
                  - floorplan
                  - floorplan_state
                style:
                  top: 48%
                  left: 64%
                  filter: opacity(30%)
                  transform: 'rotate(0deg) scale(0.7, 0.7)'
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      content:
                        type: picture-entity
                        entity: camera.entrance
                hold_action:
                  action: call-service
                  service: input_boolean.toggle
                  service_data:
                    entity_id: input_boolean.auto_camera_entrance_cpt
              #현관카메라 스냅샷
              - type: conditional
                conditions:
                  - entity: input_boolean.auto_camera_entrance_cpt
                    state: 'on'
                elements:
                  - type: custom:button-card
                    entity: camera.entrance_photo
                    template:
                      - floorplan
                      - floorplan_slideshow_entrance
                    triggers_update: all
                    show_entity_picture: true
                    entity_picture: |
                      [[[ return states['camera.entrance_photo'].attributes.entity_picture ]]]
                    size: 100%
                    style:
                      top: 65%
                      left: 88%
                      width: 17%
                    tap_action:
                      action: fire-dom-event
                      browser_mod:
                        service: browser_mod.popup
                        data:
                          style: |
                            --mdc-theme-surface: transparent;
                            --popup-background-color: transparent;
                            --popup-border-color: transparent;
                            --dialog-backdrop-filter: blur(1.2px) brightness(1.0);
                          title: "[[[ return entity.attributes.friendly_name ]]]"
                          hide_header: false
                          content:
                            type: picture-entity
                            card_mod:
                              style: |
                                ha-card {
                                  background-color: transparent;
                                  box-shadow: none;
                                }
                            entity: camera.entrance_photo  #camera.entrance
                            show_state: false
                            #camera_view: live  #라이브는 위 엔티티도 카메라로 할 것
                          timeout: 10000  #8초후 닫힘
                          size: normal
                          right_button: 텔레그램 보내기
                          left_button: 닫기
                          right_button_action:
                            service: script.toggle
                            data:
                              entity_id: script.snapshot_entrance_telegram
                          left_button_action:
                            service: input_boolean.turn_on
                            data:
                              entity_id: input_boolean.auto_camera_entrance_cpt
                    hold_action:
                      action: call-service
                      service: input_boolean.toggle
                      service_data:
                        entity_id: input_boolean.auto_camera_entrance_cpt
              #도어벨카메라
              - type: custom:button-card
                entity: camera.doorbell
                icon: mdi:doorbell-video
                template:
                  - floorplan
                  - floorplan_state
                style:
                  top: 55%
                  left: 75.5%
                  filter: opacity(30%)
                  transform: 'rotate(0deg) scale(0.6, 0.6)'
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      content:
                        type: picture-entity
                        entity: camera.doorbell
                hold_action:
                  action: call-service
                  service: input_boolean.toggle
                  service_data:
                    entity_id: input_boolean.auto_camera_doorbell_cpt
              #도어벨카메라 스냅샷
              - type: conditional
                conditions:
                  - entity: input_boolean.auto_camera_doorbell_cpt
                    state: 'on'
                elements:
                  - type: custom:button-card
                    entity: camera.doorbell_photo
                    template: 
                      - floorplan
                      - floorplan_slideshow_doorbell
                    triggers_update: all
                    show_entity_picture: true
                    entity_picture: |
                      [[[ return states['camera.doorbell_photo'].attributes.entity_picture ]]]
                    size: 100%
                    style:
                      top: 77%
                      left: 88%
                      width: 17%
                    tap_action:
                      action: fire-dom-event
                      browser_mod:
                        service: browser_mod.popup
                        data:
                          style: |
                            --mdc-theme-surface: transparent;
                            --popup-background-color: transparent;
                            --popup-border-color: transparent;
                            --dialog-backdrop-filter: transparent;
                          title: "[[[ return entity.attributes.friendly_name ]]]"
                          hide_header: false
                          content:
                            type: picture-entity
                            card_mod:
                              style: |
                                ha-card {
                                  background-color: transparent;
                                  box-shadow: none;
                                }
                            entity: camera.doorbell_photo  #camera.doorbell
                            show_state: false
                            #camera_view: live  #라이브는 위 엔티티도 카메라로 할 것
                          timeout: 10000  #8초후 닫힘
                          size: normal
                          right_button: 텔레그램 보내기
                          left_button: 닫기
                          right_button_action:
                            service: script.toggle
                            data:
                              entity_id: script.snapshot_doorbell_telegram
                          left_button_action:
                            service: input_boolean.turn_on
                            data:
                              entity_id: input_boolean.auto_camera_doorbell_cpt
                    hold_action:
                      action: call-service
                      service: input_boolean.toggle
                      service_data:
                        entity_id: input_boolean.auto_camera_doorbell_cpt
              #택배카메라
              - type: custom:button-card
                entity: camera.parcel
                template:
                  - floorplan
                  - floorplan_state
                style:
                  top: 50%
                  left: 75.5%
                  filter: opacity(30%)
                  transform: 'rotate(90deg) scale(0.6, 0.6)'
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      content:
                        type: picture-entity
                        entity: camera.parcel
                hold_action:
                  action: call-service
                  service: input_boolean.toggle
                  service_data:
                    entity_id: input_boolean.auto_camera_parcel_cpt
              #택배카메라 스냅샷
              - type: conditional
                conditions:
                  - entity: input_boolean.auto_camera_parcel_cpt
                    state: 'on'
                elements:
                  - type: custom:button-card
                    entity: camera.parcel_photo
                    template: 
                      - floorplan
                      - floorplan_slideshow_parcel
                    triggers_update: all
                    show_entity_picture: true
                    entity_picture: |
                      [[[ return states['camera.parcel_photo'].attributes.entity_picture ]]]
                    size: 100%
                    style:
                      top: 89%
                      left: 88%
                      width: 17%
                    tap_action:
                      action: fire-dom-event
                      browser_mod:
                        service: browser_mod.popup
                        data:
                          style: |
                            --mdc-theme-surface: transparent;
                            --popup-background-color: transparent;
                            --popup-border-color: transparent;
                            --dialog-backdrop-filter: 1;
                          title: "[[[ return entity.attributes.friendly_name ]]]"
                          hide_header: false
                          content:
                            type: picture-entity
                            card_mod:
                              style: |
                                ha-card {
                                  background-color: transparent;
                                  box-shadow: none;
                                }
                            entity: camera.parcel_photo  #camera.parcel
                            show_state: false
                            #camera_view: live  #라이브는 위 엔티티도 카메라로 할 것
                          timeout: 10000  #8초후 닫힘
                          size: normal
                          right_button: 텔레그램 보내기
                          left_button: 닫기
                          right_button_action:
                            service: script.toggle
                            data:
                              entity_id: script.snapshot_parcel_telegram
                          left_button_action:
                            service: input_boolean.turn_on
                            data:
                              entity_id: input_boolean.auto_camera_parcel_cpt
                    hold_action:
                      action: call-service
                      service: input_boolean.toggle
                      service_data:
                        entity_id: input_boolean.auto_camera_parcel_cpt
              #베란다카메라
              - type: custom:button-card
                entity: camera.sonroom
                template:
                  - floorplan
                  - floorplan_state
                style:
                  top: 94%
                  left: 73%
                  filter: opacity(30%)
                  transform: 'rotate(90deg) scale(0.7, 0.7)'
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      content:
                        type: picture-entity
                        entity: camera.veranda
                hold_action:
                  action: call-service
                  service: input_boolean.toggle
                  service_data:
                    entity_id: input_boolean.auto_camera_veranda_cpt
              #베란다카메라 스냅샷
              - type: conditional
                conditions:
                  - entity: input_boolean.auto_camera_veranda_cpt
                    state: 'on'
                elements:
                  - type: custom:button-card
                    entity: camera.veranda_photo
                    template: 
                      - floorplan
                      - floorplan_slideshow_veranda
                    show_entity_picture: true
                    entity_picture: |
                      [[[ return states['camera.veranda_photo'].attributes.entity_picture ]]]
                    size: 100%
                    style:
                      top: 94.5%
                      left: 57%
                      width: 11%
                    tap_action:
                      action: fire-dom-event
                      browser_mod:
                        service: browser_mod.popup
                        data:
                          style: |
                            --mdc-theme-surface: transparent;
                            --popup-background-color: transparent;
                            --popup-border-color: transparent;
                            --dialog-backdrop-filter: transparent;
                          title: "[[[ return entity.attributes.friendly_name ]]]"
                          hide_header: false
                          content:
                            type: picture-entity
                            card_mod:
                              style: |
                                ha-card {
                                  background-color: transparent;
                                  box-shadow: none;
                                }
                            entity: camera.veranda_photo  #camera.veranda
                            show_state: false
                            #camera_view: live  #라이브는 위 엔티티도 카메라로 할 것
                          timeout: 10000  #8초후 닫힘
                          size: normal
                          right_button: 텔레그램 보내기
                          left_button: 닫기
                          right_button_action:
                            service: script.toggle
                            data:
                              entity_id: script.snapshot_veranda_telegram
                          left_button_action:
                            service: input_boolean.turn_on
                            data:
                              entity_id: input_boolean.auto_camera_veranda_cpt
                    hold_action:
                      action: call-service
                      service: input_boolean.toggle
                      service_data:
                        entity_id: input_boolean.auto_camera_veranda_cpt
              #실외카메라
              - type: custom:button-card
                entity: camera.outside
                template:
                  - floorplan
                  - floorplan_state
                style:
                  top: 0.1%
                  left: 94%
                  filter: opacity(30%)
                  transform: 'rotate(180deg) scale(0.7, 0.7)'
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      content:
                        type: picture-entity
                        entity: camera.outside
                hold_action:
                  action: call-service
                  service: input_boolean.toggle
                  service_data:
                    entity_id: input_boolean.auto_camera_outside_cpt
              #실외카메라 스냅샷
              - type: conditional
                conditions:
                  - entity: input_boolean.auto_camera_outside_cpt
                    state: 'on'
                elements:
                  - type: custom:button-card
                    entity: camera.outside_photo
                    template: 
                      - floorplan
                      - floorplan_slideshow_outside
                    show_entity_picture: true
                    entity_picture: |
                      [[[ return states['camera.outside_photo'].attributes.entity_picture ]]]
                    size: 100%
                    style:
                      top: 11%
                      left: 62%
                      width: 14%
                    tap_action:
                      action: fire-dom-event
                      browser_mod:
                        service: browser_mod.popup
                        data:
                          style: |
                            --mdc-theme-surface: transparent;
                            --popup-background-color: transparent;
                            --popup-border-color: transparent;
                            --dialog-backdrop-filter: transparent;
                          title: "[[[ return entity.attributes.friendly_name ]]]"
                          hide_header: false
                          content:
                            type: picture-entity
                            card_mod:
                              style: |
                                ha-card {
                                  background-color: transparent;
                                  box-shadow: none;
                                }
                            entity: camera.outside_photo  #camera.outside
                            show_state: false
                            #camera_view: live  #라이브는 위 엔티티도 카메라로 할 것
                          timeout: 10000  #8초후 닫힘
                          size: normal
                          right_button: 텔레그램 보내기
                          left_button: 닫기
                          right_button_action:
                            service: script.toggle
                            data:
                              entity_id: script.snapshot_outside_telegram
                          left_button_action:
                            service: input_boolean.turn_on
                            data:
                              entity_id: input_boolean.auto_camera_outside_cpt
                    hold_action:
                      action: call-service
                      service: input_boolean.toggle
                      service_data:
                        entity_id: input_boolean.auto_camera_outside_cpt
              #부재재실 아이콘
              - type: custom:button-card
                entity: input_boolean.trigger_home_absence
                template: floorplan_time
                state:
                  - value: 'on'
                    icon: mdi:home-lock
                    color: red
                  - value: 'off'
                    icon: mdi:home-lock-open
                    color: lime
                style:
                  top: 17%
                  left: 78%
                  transform: 'scale(0.8, 0.8)'
              #최근 현관문 아이콘
              - type: custom:button-card
                entity: sensor.0x00158d00031e9334_door_state
                template: floorplan
                state:
                  - value: 'open'
                    icon: mdi:door-open
                    color: gold
                  - value: 'closed'
                    icon: mdi:door-closed
                    color: white
                style:
                  top: 22%
                  left: 78%
                  transform: 'scale(0.8, 0.8)'
              #모션 감지 아이콘
              - type: custom:button-card
                entity: group.motion
                template: floorplan_time
                state:
                  - value: 'on'
                    icon: mdi:motion-sensor
                    color: gold
                  - value: 'off'
                    icon: mdi:human-handsdown
                    color: white
                style:
                  top: 27%
                  left: 78%
                  size: 80%
                  transform: 'scale(0.8, 0.8)'
              #구글홈 재생모드 아이콘
              - type: custom:button-card
                entity: binary_sensor.mute
                template: floorplan_time
                icon: |
                  [[[
                    if (states['input_number.speaker_volume_total'].state < 0.1) return 'mdi:volume-low'
                    if (states['input_number.speaker_volume_total'].state < 0.3) return 'mdi:volume-medium'
                    if (states['input_number.speaker_volume_total'].state < 1.0) return 'mdi:volume-high'
                    else return 'mdi:volume-vibrate'
                  ]]]
                state:
                  - value: 'on'
                    icon: mdi:volume-off
                    color: red
                  - value: 'off'
                    color: white
                style:
                  top: 32%
                  left: 78%
                  transform: 'scale(0.8, 0.8)'
                double_tap_action:
                  action: more-info
                  entity: input_number.speaker_volume_total
              #화장실음악 아이콘
              - type: custom:button-card
                entity: input_boolean.toilet_music
                template: floorplan
                icon: mdi:music
                card_mod:
                  style: |
                    ha-state-icon {
                      animation: beat 1.3s ease-out infinite both;
                      transform-origin: 50% 80%;
                    }
                    @keyframes beat {
                      0% { transform: scale(1); }
                      10% { transform: scale(1.1); }
                      17% { transform: scale(1.05); }
                      33% { transform: scale(1.25); }
                      60% { transform: scale(1); }
                    }
                state:
                  - value: 'on'
                    color: gold
                  - value: 'off'
                    color: transparent
                style:
                  top: 47%
                  left: 24%
                  filter: opacity(60%)
                  transform: 'rotate(0deg) scale(0.5, 0.5)'
              #대시보드센서값시작
              - type: conditional
                conditions:
                  - entity: input_boolean.show_value
                    state: 'on'
                elements:
                  #거실온도
                  - type: custom:button-card
                    entity: sensor.0x00158d0002e2de81_temperature
                    template: floorplan_value
                    style:
                      top: 52.5%
                      left: 48%
                  #거실습도
                  - type: custom:button-card
                    entity: sensor.0x00158d0002e2de81_humidity
                    template: floorplan_value
                    style:
                      top: 54.5%
                      left: 48%
                  #거실조도_게이트웨이
                  - type: custom:button-card
                    entity: sensor.illumination_7811dcfaec7e
                    template: floorplan_value
                    style:
                      top: 56.5%
                      left: 49%
                  #주방온도
                  - type: custom:button-card
                    entity: sensor.0x00158d00045cb3a9_temperature
                    template: floorplan_value
                    style:
                      top: 26%
                      left: 35%
                  #주방습도
                  - type: custom:button-card
                    entity: sensor.0x00158d00045cb3a9_humidity
                    template: floorplan_value
                    style:
                      top: 28%
                      left: 35%
                  #주방조도
                  - type: custom:button-card
                    entity: sensor.0x00158d0002b70b2b_illuminance_lux
                    template: floorplan_value
                    style:
                      top: 30%
                      left: 35%
                  #거실화장실온도
                  - type: custom:button-card
                    entity: sensor.geosilhwajangsilth_temperature
                    template: floorplan_value
                    style:
                      top: 36%
                      left: 25%
                  #거실화장실습도
                  - type: custom:button-card
                    entity: sensor.geosilhwajangsilth_humidity
                    template: floorplan_value
                    style:
                      top: 38%
                      left: 25%
                  #안방온도
                  - type: custom:button-card
                    entity: sensor.0x00158d00025e9521_temperature
                    template: floorplan_value
                    style:
                      top: 55%
                      left: 6%
                  #안방습도
                  - type: custom:button-card
                    entity: sensor.0x00158d00025e9521_humidity
                    template: floorplan_value
                    style:
                      top: 57%
                      left: 6%
                  #안방조도
                  - type: custom:button-card
                    entity: sensor.0x00158d00041418aa_illuminance_lux
                    template: floorplan_value
                    style:
                      top: 59%
                      left: 6%
                  #안방화장실온도
                  - type: custom:button-card
                    entity: sensor.0x00158d000272cee1_temperature
                    template: floorplan_value
                    style:
                      top: 48%
                      left: 6%
                  #안방화장실습도
                  - type: custom:button-card
                    entity: sensor.0x00158d000272cee1_humidity
                    template: floorplan_value
                    style:
                      top: 50%
                      left: 6%
                  #아들방온도
                  - type: custom:button-card
                    entity: sensor.0x00158d0002e2ea37_temperature
                    template: floorplan_value
                    style:
                      top: 37%
                      left: 72%
                  #아들방습도
                  - type: custom:button-card
                    entity: sensor.0x00158d0002e2ea37_humidity
                    template: floorplan_value
                    style:
                      top: 39%
                      left: 72%
                  #아들방조도
                  - type: custom:button-card
                    entity: sensor.0x00158d00045225c2_illuminance_lux
                    template: floorplan_value
                    style:
                      top: 41%
                      left: 72%
                  #공부방온도
                  - type: custom:button-card
                    entity: sensor.0x00158d0002e221bd_temperature
                    template: floorplan_value
                    style:
                      top: 27%
                      left: 7%
                  #공부방습도
                  - type: custom:button-card
                    entity: sensor.0x00158d0002e221bd_humidity
                    template: floorplan_value
                    style:
                      top: 29%
                      left: 7%
                  #공부방조도
                  - type: custom:button-card
                    entity: sensor.0x00158d00040c3dbf_illuminance_lux
                    template: floorplan_value
                    style:
                      top: 31%
                      left: 7%
                  #독서실조도
                  - type: custom:button-card
                    entity: sensor.illumination_50ec50c52be0
                    template: floorplan_value
                    style:
                      top: 8%
                      left: 11%
                  #세탁기
                  - type: conditional
                    conditions:
                      - entity: switch.0x04cd15fffea9d1eb
                        state: 'on'
                    elements:
                      - type: state-label
                        entity: sensor.0x04cd15fffea9d1eb_power
                        style:
                          top: 10%
                          left: 83%
                          color: silver
                          font-size: 60%
                          text-shadow: -1px 0 black, 0 -1px black, 1px 0 black, 0 1px black
                  #건조기
                  - type: conditional
                    conditions:
                      - entity: switch.0x04cd15fffeb016d4
                        state: 'on'
                    elements:
                     - type: state-label
                       entity: sensor.0x04cd15fffeb016d4_power
                       style:
                         top: 59%
                         left: 19%
                         color: silver
                         font-size: 60%
                         text-shadow: -1px 0 black, 0 -1px black, 1px 0 black, 0 1px black
                  #코타츠
                  - type: conditional
                    conditions:
                      - entity: input_boolean.switching_socket
                        state: 'off'
                      - entity: switch.0x04cd15fffeabc091
                        state: 'on'
                    elements:
                      - type: state-label
                        entity: sensor.0x04cd15fffeabc091_power
                        style:
                          top: 75%
                          left: 67%
                          color: silver
                          font-size: 60%
                          text-shadow: -1px 0 black, 0 -1px black, 1px 0 black, 0 1px black
                  #청소기
                  - type: custom:button-card
                    entity: vacuum.cleaner1s
                    template: floorplan_value
                    style:
                      top: 72%
                      left: 45.5%
                  #도어락 배터리
                  - type: custom:button-card
                    entity: sensor.0x00158d00031e9334_battery
                    template: floorplan_value
                    style:
                      top: 54%
                      left: 73%
                  #커튼 상태
                  - type: state-label
                    entity: cover.0x00158d00040c7c5b
                    attribute: current_position
                    prefix: 커튼
                    suffix: '% 열림'
                    style:
                      top: 88%
                      left: 68%
                      color: silver
                      font-size: 50%
                      text-shadow: -1px 0 black, 0 -1px black, 1px 0 black, 0 1px black
                  #부재재실 변경시간
                  - type: state-label
                    entity: input_datetime.alert_lockunlock
                    style:
                      top: 20%
                      left: 91%
                      font-size: 90%
                      color: white
                      text-shadow: -2px 0 black, 0 -1px black, 2px 0 black, 0 1px black
                  #최근 현관문 시간
                  - type: state-label
                    entity: input_datetime.last_enterance
                    style:
                      top: 25%
                      left: 91%
                      font-size: 90%
                      color: white
                      text-shadow: -2px 0 black, 0 -1px black, 2px 0 black, 0 1px black
                  #마지막 현관문열린후 경과시간
                  - type: state-label
                    entity: sensor.tracker_last_front_door_open_time
                    style:
                      top: 58%
                      left: 86.5%
                      font-size: 70%
                      color: gray
                      #transform: skew(70deg, -70deg)
                      text-shadow: -2px 0 black, 0 -1px black, 2px 0 black, 0 1px black
                  #최근 모션감지 시간
                  - type: state-label
                    entity: input_datetime.last_motion
                    style:
                      top: 30%
                      left: 91% 
                      font-size: 90%
                      color: white
                      text-shadow: -2px 0 black, 0 -1px black, 2px 0 black, 0 1px black
                  #구글홈 재생위치
                  - type: state-label
                    entity: input_text.motion_1st
                    style:
                      top: 35%
                      left: 87%
                      font-size: 80%
                      color: gold
                      text-shadow: -2px 0 black, 0 -1px black, 2px 0 black, 0 1px black
                  #구글홈 재생볼륨
                  - type: state-label
                    entity: input_number.speaker_volume_total
                    style:
                      top: 35%
                      left: 94%
                      font-size: 90%
                      color: white
                      text-shadow: -2px 0 black, 0 -1px black, 2px 0 black, 0 1px black
                  #HA텔레그램 표시
                  - type: conditional
                    conditions:
                      - entity: input_boolean.auto_telegram
                        state: 'on'
                    elements:
                      - type: custom:button-card
                        entity: input_text.alert_telegram
                        template: floorplan_value
                        style:
                          top: 96%
                          left: 50%
                          font-size: 62%
                          color: gold
                          background-color: rgba(0,0,0,0.3)
                          text-shadow: -2px 0 black, 0 -1px black, 2px 5 black, 5 1px black
                        tap_action:
                          action: none

      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: 텔레그램 보기
            icon: mdi:mushroom
            icon_color: red
            secondary: View telegram msg.
            tap_action:
              action: call-service
              service: input_boolean.toggle
              service_data:
                entity_id: input_boolean.auto_telegram
            hold_action:
              action: none
            card_mod:
              style: |
                :host {
                  perspective: 900px;
                }
                ha-card:active {
                  transform: rotateX(25deg);
                  transform-origin: center bottom;
                  transition: 0s;
                }
                ha-card:active mushroom-shape-icon {
                  display: flex;
                  #--icon-animation: spin 3s;
                  transform: rotate(360deg);
                  transition: 500ms;
                }
          - type: custom:mushroom-template-card
            primary: 센서값 보기
            icon: mdi:mushroom
            icon_color: red
            secondary: View sensor value
            tap_action:
              action: call-service
              service: input_boolean.toggle
              service_data:
                entity_id: input_boolean.show_value
            hold_action:
              action: none
            card_mod:
              style: |
                :host {
                  perspective: 900px;
                }
                ha-card:active {
                  transform: rotateY(20deg);
                  transition: 0s;
                }
                ha-card:active mushroom-shape-icon {
                  display: flex;
                  #--icon-animation: spin 3s;
                  transform: rotate(360deg);
                  transition: 500ms;
                }


#################################################### system
  - title: SYSTEM
    icon: mdi:nas
    path: system
    cards:
      - type: vertical-stack
        cards:
          - type: entities
            title: " "
            show_header_toggle: false
            entities:
              - entity: update.home_assistant_core_update
                attribute: installed_version
                name: HA Core Ver.
              - entity: sensor.hauptime
                name: Recently Reboots
                icon: mdi:timer-sync
              - type: custom:config-template-card
                variables:
                  - states['sensor.ha_version_current'].state
                  - states['sensor.disk_use_percent'].state
                  - states['sensor.memory_use_percent'].state
                entities:
                  - sensor.ha_version_current
                  - sensor.disk_use_percent
                  - sensor.memory_use_percent
                card:
                  type: custom:hui-entities-card
                  show_header_toggle: off
                  card_mod:
                    style: |
                      ha-card {
                        background-color: transparent;
                        box-shadow: none;
                      }
                  entities:
                    - type: section
                      label: "${ 'HA Core Ver. ' + vars[0] }"
                    - type: custom:hui-vertical-stack-card
                      cards:
                        - type: horizontal-stack
                          cards:
                            - type: picture
                              card_mod:
                                style: |
                                  ha-card {
                                    background-color: transparent;
                                    box-shadow: none;
                                  }
                              image: /local/floorplan/odroid_n2.png
                            - type: custom:stack-in-card
                              cards:
                                - type: custom:button-card
                                  entity: update.home_assistant_supervisor_update
                                  show_state: true
                                  show_icon: true
                                  show_entity_picture: true
                                  name: HA Supervisor
                                  icon: "[[[ return entity.attributes.entity_picture ]]]"
                                  layout: icon_name_state2nd
                                  styles:
                                    grid:
                                      - grid-template-columns: 30px
                                    name:
                                      - padding: 0px 5px
                                      - justify-self: start
                                      - font-family: Roboto, sans-serif
                                      - color: var(--secondary-text-color)
                                      - font-size: 13px
                                    state:
                                      - padding: 0px 5px
                                      - justify-self: start
                                      - color: var(--secondary-text-color)
                                      - font-family: Roboto, sans-serif
                                      - font-size: 13px
                                    icon:
                                      - height: 20px
                                      - width: 20px
                                      - color: skyblue
                                - type: custom:button-card
                                  entity: update.esphome_update
                                  show_state: true
                                  show_icon: true
                                  show_entity_picture: true
                                  name: ESP Home
                                  icon: "[[[ return entity.attributes.entity_picture ]]]"
                                  layout: icon_name_state2nd
                                  styles:
                                    grid:
                                      - grid-template-columns: 30px
                                    name:
                                      - padding: 0px 5px
                                      - justify-self: start
                                      - font-family: Roboto, sans-serif
                                      - color: var(--secondary-text-color)
                                      - font-size: 13px
                                    state:
                                      - padding: 0px 5px
                                      - justify-self: start
                                      - color: var(--secondary-text-color)
                                      - font-family: Roboto, sans-serif
                                      - font-size: 13px
                                    icon:
                                      - height: 20px
                                      - width: 20px
                                      - color: skyblue
                              card_mod:
                                style: |
                                  ha-card {
                                    padding: 10px;
                                    margin-left: 5px;
                                    box-shadow: none;
                                    background: rgba(var(--rgb-primary-text-color), 0.00);
                                  }
                        - type: horizontal-stack
                          cards:
                            - type: custom:button-card
                              entity: hassio.host_reboot
                              name: Restart
                              icon: mdi:restart
                              show_icon: true
                              layout: icon_name
                              styles:
                                name:
                                  - padding: 0px 5px
                                  - justify-self: start
                                  - font-family: Roboto, sans-serif
                                  - color: var(--secondary-text-color)
                                  - font-size: 13px
                                icon:
                                  - height: 20px
                                  - width: 20px
                                  - color: var(--secondary-text-color)
                              tap_action:
                                action: call-service
                                confirmation:
                                  text: 🔄Homeassistant Restart?
                                service: homeassistant.restart
                            - type: custom:button-card
                              entity: hassio.host_reboot
                              name: Reboot
                              icon: mdi:restart
                              show_icon: true
                              layout: icon_name
                              styles:
                                name:
                                  - padding: 0px 5px
                                  - justify-self: start
                                  - font-family: Roboto, sans-serif
                                  - color: var(--secondary-text-color)
                                  - font-size: 13px
                                icon:
                                  - height: 20px
                                  - width: 20px
                                  - color: var(--secondary-text-color)
                              tap_action:
                                action: call-service
                                confirmation:
                                  text: 🔄Homeassistant Host Reboot?
                                service: hassio.host_reboot
                        - type: horizontal-stack
                          cards:
                            - type: custom:bar-card
                              show_icon: true
                              icon: mdi:database
                              animation:
                                state: on
                                speed: 5
                              align: split
                              positions:
                                name: off
                                icon: outside
                                indicator: inside
                                value: inside
                                minmax: off
                              columns: 1
                              max: 32
                              decimal: 1
                              unit_of_measurement: 'GB'
                              severity:
                                - color: '#e45e65'
                                  from: 0
                                  to: 10
                                - color: '#f39c12'
                                  from: 10.1
                                  to: 20
                                - color: '#3498db'
                                  from: 20.1
                                  to: 32
                              entity: sensor.home_assistant_host_disk_free
                              title: "Storage"
                              card_mod:
                                style: |
                                  ha-card {
                                    background-color: none;
                                    box-shadow: none;
                                    margin-right: auto;
                                  }
                            - type: custom:bar-card
                              show_icon: true
                              animation:
                                state: on
                                speed: 5
                              align: split
                              positions:
                                name: off
                                icon: outside
                                indicator: inside
                                value: inside
                                minmax: off
                              columns: 1
                              max: 100
                              decimal: 1
                              unit_of_measurement: '%'
                              severity:
                                - color: '#3498db'
                                  from: 0
                                  to: 30
                                - color: '#f39c12'
                                  from: 30.1
                                  to: 60
                                - color: '#e45e65'
                                  from: 60.1
                                  to: 90
                              entity: sensor.disk_use_percent
                              title: "DISK"
                              card_mod:
                                style: |
                                  ha-card {
                                    background-color: none;
                                    box-shadow: none;
                                    margin-right: auto;
                                  }
                        - type: horizontal-stack
                          cards:
                            - type: custom:bar-card
                              show_icon: true
                              animation:
                                state: on
                                speed: 5
                              align: split
                              positions:
                                name: off
                                icon: outside
                                indicator: inside 
                                value: inside
                                minmax: off
                              columns: 1
                              max: 100
                              decimal: 1
                              unit_of_measurement: '%'
                              severity:
                                - color: '#3498db'
                                  from: 0
                                  to: 20
                                - color: '#c6f312'
                                  from: 20.1
                                  to: 50
                                - color: '#f39c12'
                                  from: 50.1
                                  to: 70
                                - color: '#e45e65'
                                  from: 70.1
                                  to: 90
                              entity: sensor.memory_use_percent
                              title: RAM
                              card_mod:
                                style: |
                                  ha-card {
                                    background-color: none;
                                    box-shadow: none;
                                    margin-right: auto;
                                  }
                            - type: custom:bar-card
                              show_icon: true
                              animation:
                                state: on
                                speed: 5
                              align: split
                              positions:
                                name: off
                                icon: outside
                                indicator: inside 
                                value: inside
                                minmax: off
                              columns: 1
                              max: 100
                              decimal: 1
                              unit_of_measurement: '%'
                              severity:
                                - color: '#3498db'
                                  from: 0
                                  to: 20
                                - color: '#c6f312'
                                  from: 20.1
                                  to: 50
                                - color: '#f39c12'
                                  from: 50.1
                                  to: 70
                                - color: '#e45e65'
                                  from: 70.1
                                  to: 90
                              entity: sensor.processor_use
                              title: CPU
                              card_mod:
                                style: |
                                  ha-card {
                                    background-color: none;
                                    box-shadow: none;
                                    margin-right: auto;
                                  }
                        - type: custom:mini-graph-card
                          entities:
                            - entity: sensor.processor_temperature
                              name: 프로세서 온도
                              show_points: false
                          show:
                            extrema: false
                            fill: true
                          points_per_hour: 1
                          line_width: 2
                          line_color: skyblue
                          hours_to_show: 72
                          font_size_header: 14
                          font_size: 50
                          height: 30
                          color_thresholds:
                            - value: 40
                              color: '#3498db'
                            - value: 45
                              color: '#f39c12'
                            - value: 50
                              color: '#E45E65'
                            - value: 55
                              color: '#fc000d'
                          animate: true
                          card_mod:
                            style: |
                              .graph .graph__container .graph__container__svg svg g mask .line {
                                animation-duration: 5s !important;
                                animation-delay: 0s !important;
                                animation-timing-function: linear !important;
                                animation-iteration-count: infinite !important;
                              }
                              ha-card {
                                background-color: rgba(0,0,0,0.05);
                              }
      - type: horizontal-stack
        cards:
          - type: vertical-stack
            cards:
              - type: entities
                title: " "
                show_header_toggle: false
                entities:
                  - entity: update.aidenyun_dsm_update
                    name: DSM OS Ver.
                  - entity: sensor.aidenyun_last_boot
                    name: Recently Reboots
                    icon: mdi:timer-sync
                  - type: custom:config-template-card
                    variables:
                      - states['update.aidenyun_dsm_update'].attributes.latest_version
                      - states['sensor.aidenyun_volume_1_volume_used'].state
                      - states['sensor.aidenyun_volume_2_volume_used'].state
                      - states['sensor.aidenyun_memory_usage_real'].state
                    entities:
                      - update.aidenyun_dsm_update
                      - sensor.aidenyun_volume_1_volume_used
                      - sensor.aidenyun_volume_2_volume_used
                      - sensor.aidenyun_memory_usage_real
                    card:
                      type: custom:hui-entities-card
                      show_header_toggle: off
                      card_mod:
                        style: |
                          ha-card {
                            background-color: transparent;
                            box-shadow: none;
                          }
                      entities:
                        - type: section
                          label: "${ 'DS218+ DSM ver. ' + vars[0] }"
                        - type: custom:hui-vertical-stack-card
                          cards:
                            - type: horizontal-stack
                              cards:
                                - type: picture
                                  card_mod:
                                    style: |
                                      ha-card {
                                        background-color: transparent;
                                        box-shadow: none;
                                      }
                                  image: /local/floorplan/ds218plus.png
                                - type: custom:stack-in-card
                                  cards:
                                    - type: custom:button-card
                                      entity: binary_sensor.aidenyun_security_status
                                      show_state: true
                                      show_icon: true
                                      show_entity_picture: true
                                      name: Security
                                      icon: mdi:security
                                      layout: icon_name_state2nd
                                      styles:
                                        grid:
                                          - grid-template-columns: 30px
                                        name:
                                          - padding: 0px 5px
                                          - justify-self: start
                                          - font-family: Roboto, sans-serif
                                          - color: var(--secondary-text-color)
                                          - font-size: 13px
                                        state:
                                          - padding: 0px 5px
                                          - justify-self: start
                                          - color: var(--secondary-text-color)
                                          - font-family: Roboto, sans-serif
                                          - font-size: 13px
                                        icon:
                                          - height: 20px
                                          - width: 20px
                                          - color: blue
                                    - type: custom:button-card
                                      entity: switch.aidenyun_surveillance_station_home_mode
                                      show_state: true
                                      show_icon: true
                                      show_entity_picture: true
                                      name: Surveillance
                                      icon: "[[[ return entity.attributes.entity_picture ]]]"
                                      layout: icon_name_state2nd
                                      styles:
                                        grid:
                                          - grid-template-columns: 30px
                                        name:
                                          - padding: 0px 5px
                                          - justify-self: start
                                          - font-family: Roboto, sans-serif
                                          - color: var(--secondary-text-color)
                                          - font-size: 13px
                                        state:
                                          - padding: 0px 5px
                                          - justify-self: start
                                          - color: var(--secondary-text-color)
                                          - font-family: Roboto, sans-serif
                                          - font-size: 13px
                                        icon:
                                          - height: 20px
                                          - width: 20px
                                          - color: skyblue
                                      tap_action:
                                        action: more-info
                                  card_mod:
                                    style: |
                                      ha-card {
                                        padding: 10px;
                                        margin-left: 5px;
                                        box-shadow: none;
                                        background: rgba(var(--rgb-primary-text-color), 0.00);
                                      }
                            - type: horizontal-stack
                              cards:
                                - type: custom:button-card
                                  entity: button.aidenyun_reboot
                                  name: Shutdown
                                  icon: mdi:restart
                                  show_icon: true
                                  layout: icon_name
                                  styles:
                                    name:
                                      - padding: 0px 5px
                                      - justify-self: start
                                      - font-family: Roboto, sans-serif
                                      - color: var(--secondary-text-color)
                                      - font-size: 13px
                                    icon:
                                      - height: 20px
                                      - width: 20px
                                      - color: var(--secondary-text-color)
                                  tap_action:
                                    action: call-service
                                    confirmation:
                                      text: 🔄Synology Nas Shutdown?
                                    service: synology_dsm.shutdown
                                - type: custom:button-card
                                  entity: button.aidenyun_reboot
                                  name: Reboot
                                  icon: mdi:restart
                                  show_icon: true
                                  layout: icon_name
                                  styles:
                                    name:
                                      - padding: 0px 5px
                                      - justify-self: start
                                      - font-family: Roboto, sans-serif
                                      - color: var(--secondary-text-color)
                                      - font-size: 13px
                                    icon:
                                      - height: 20px
                                      - width: 20px
                                      - color: var(--secondary-text-color)
                                  tap_action:
                                    action: call-service
                                    confirmation:
                                      text: 🔄Synology Nas Reboot?
                                    service: synology_dsm.reboot
                            - type: horizontal-stack
                              cards:
                                - type: custom:bar-card
                                  show_icon: true
                                  animation:
                                    state: on
                                    speed: 5
                                  align: split
                                  positions:
                                    name: off
                                    icon: outside
                                    indicator: inside
                                    value: inside
                                    minmax: off
                                  columns: 1
                                  max: 100
                                  decimal: 1
                                  unit_of_measurement: '%'
                                  severity:
                                    - color: '#3498db'
                                      from: 0
                                      to: 30
                                    - color: '#f39c12'
                                      from: 30.1
                                      to: 60
                                    - color: '#e45e65'
                                      from: 60.1
                                      to: 90
                                  entity: sensor.aidenyun_volume_1_volume_used
                                  title: "DISK 1"
                                  card_mod:
                                    style: |
                                      ha-card {
                                        background-color: none;
                                        box-shadow: none;
                                        margin-right: auto;
                                      }
                                - type: custom:bar-card
                                  show_icon: true
                                  animation:
                                    state: on
                                    speed: 5
                                  align: split
                                  positions:
                                    name: off
                                    icon: outside
                                    indicator: inside
                                    value: inside
                                    minmax: off
                                  columns: 1
                                  max: 100
                                  decimal: 1
                                  unit_of_measurement: '%'
                                  severity:
                                    - color: '#3498db'
                                      from: 0
                                      to: 30
                                    - color: '#f39c12'
                                      from: 30.1
                                      to: 60
                                    - color: '#e45e65'
                                      from: 60.1
                                      to: 90
                                  entity: sensor.aidenyun_volume_2_volume_used
                                  title: "DISK 2"
                                  card_mod:
                                    style: |
                                      ha-card {
                                        background-color: none;
                                        box-shadow: none;
                                        margin-right: auto;
                                      }
                            - type: horizontal-stack
                              cards:
                                - type: custom:bar-card
                                  show_icon: true
                                  animation:
                                    state: on
                                    speed: 5
                                  align: split
                                  positions:
                                    name: off
                                    icon: outside
                                    indicator: inside 
                                    value: inside
                                    minmax: off
                                  columns: 1
                                  max: 100
                                  decimal: 1
                                  unit_of_measurement: '%'
                                  severity:
                                    - color: '#3498db'
                                      from: 0
                                      to: 20
                                    - color: '#c6f312'
                                      from: 20.1
                                      to: 50
                                    - color: '#f39c12'
                                      from: 50.1
                                      to: 70
                                    - color: '#e45e65'
                                      from: 70.1
                                      to: 90
                                  entity: sensor.aidenyun_memory_usage_real
                                  title: RAM
                                  card_mod:
                                    style: |
                                      ha-card {
                                        background-color: none;
                                        box-shadow: none;
                                        margin-right: auto;
                                      }
                                - type: custom:bar-card
                                  show_icon: true
                                  animation:
                                    state: on
                                    speed: 5
                                  align: split
                                  positions:
                                    name: off
                                    icon: outside
                                    indicator: inside 
                                    value: inside
                                    minmax: off
                                  columns: 1
                                  max: 100
                                  decimal: 1
                                  unit_of_measurement: '%'
                                  severity:
                                    - color: '#3498db'
                                      from: 0
                                      to: 20
                                    - color: '#c6f312'
                                      from: 20.1
                                      to: 50
                                    - color: '#f39c12'
                                      from: 50.1
                                      to: 70
                                    - color: '#e45e65'
                                      from: 70.1
                                      to: 90
                                  entity: sensor.aidenyun_cpu_utilization_total
                                  title: CPU
                                  card_mod:
                                    style: |
                                      ha-card {
                                        background-color: none;
                                        box-shadow: none;
                                        margin-right: auto;
                                      }
                            - type: custom:mini-graph-card
                              entities:
                                - entity: sensor.aidenyun_temperature
                                  name: 시스템 온도
                                  show_points: false
                              show:
                                extrema: false
                                fill: true
                              points_per_hour: 1
                              line_width: 2
                              line_color: skyblue
                              hours_to_show: 72
                              font_size_header: 14
                              font_size: 50
                              height: 30
                              color_thresholds:
                                - value: 40
                                  color: '#3498db'
                                - value: 45
                                  color: '#f39c12'
                                - value: 50
                                  color: '#E45E65'
                                - value: 55
                                  color: '#fc000d'
                              animate: true
                              card_mod:
                                style: |
                                  .graph .graph__container .graph__container__svg svg g mask .line {
                                    animation-duration: 5s !important;
                                    animation-delay: 0s !important;
                                    animation-timing-function: linear !important;
                                    animation-iteration-count: infinite !important;
                                  }
                                  ha-card {
                                    background-color: rgba(0,0,0,0.05);
                                  }


#################################################### cctv
  - title: CCTV
    icon: mdi:cctv
    path: cctv
    cards:
      - type: picture-entity
        entity: camera.livingroom
        name: 거실
        camera_image: camera.livingroom
        show_name: true
        show_state: false
        aspect_ratio: 1.5/1
      - type: picture-entity
        entity: camera.kitchen
        name: 주방
        camera_image: camera.kitchen
        show_name: true
        show_state: false
        aspect_ratio: 1.5/1
      - type: picture-entity
        entity: camera.sonroom
        name: 아들방
        camera_image: camera.sonroom
        show_name: true
        show_state: false
        aspect_ratio: 1.5/1
      - type: picture-entity
        entity: camera.studyroom
        name: 공부방
        camera_image: camera.studyroom
        show_name: true
        show_state: false
        aspect_ratio: 1.5/1
      - type: picture-entity
        entity: camera.entrance
        name: 현관
        camera_image: camera.entrance
        show_name: true
        show_state: false
        aspect_ratio: 1.5/1
      - type: picture-entity
        entity: camera.doorbell
        name: 도어벨
        camera_image: camera.doorbell
        show_name: true
        show_state: false
        aspect_ratio: 1.5/1
      - type: picture-entity
        entity: camera.parcel
        name: 택배
        camera_image: camera.parcel
        show_name: true
        show_state: false
        aspect_ratio: 1.5/1
      - type: picture-entity
        entity: camera.veranda
        name: 베란다
        camera_image: camera.veranda
        show_name: true
        show_state: false
        aspect_ratio: 1.5/1
      - type: picture-entity
        entity: camera.outside
        name: 실외
        camera_image: camera.outside
        show_name: true
        show_state: false
        aspect_ratio: 1.5/1


#################################################### house
  - title: HOUSE
    icon: mdi:island-variant
    path: house
    cards:
      - type: vertical-stack
        cards:
          - type: horizontal-stack
            cards:
              - type: custom:button-card
                template: card_home
                entity: input_boolean.trigger_home_absence
              - type: custom:button-card
                template: card_lights
                entity: sensor.light_on_count
          - type: horizontal-stack
            cards:
              - type: custom:button-card
                template:
                  - card_persons
                  - card_person_tab_aiden
                triggers_update: all
                entity: person.aiden
                entity_picture: /local/floorplan/p_aiden_t.gif
                custom_fields:
                  topleft:
                    card:
                      entity: sensor.place_aiden
                  topright:
                    card:
                      entity: sensor.aiden_phone_battery_level
                  topright1:
                    card:
                      entity: sensor.aiden_phone_ringer_mode
                  topright2:
                    card:
                      entity: binary_sensor.aiden_phone_interactive
                  topright3:
                    card:
                      entity: sensor.smartphone_aiden_used_record
                      label: |
                        [[[
                          var hour = states['sensor.smartphone_aiden_used_record'].state.split(".", 1)
                          var s_min = states['sensor.smartphone_aiden_used_record'].state.substring(2)
                          var r_min = s_min / 100
                          var min = Math.round(r_min * 60)
                          var p_hour = hour * 1 + 1
                          if (s_min < 61)
                            if (hour >= 1 )
                              return `${hour}hr ${min}m`
                          if (s_min >= 60)
                            if (hour >= 1 )
                              return `${p_hour}hr ${min}m`
                          return `${min}m`
                        ]]]
                  graph:
                    card:
                      entities:
                        - entity: sensor.aiden_phone_battery_temperature
                hold_action:
                  action: call-service
                  service: script.toggle
                  service_data:
                    entity_id: script.where_is_aiden
                  haptic: medium
              - type: custom:button-card
                template:
                  - card_persons
                  - card_person_tab_eunkyung
                triggers_update: all
                entity: person.eunkyung
                entity_picture: /local/floorplan/p_eunkyung_t.gif
                custom_fields:
                  topleft:
                    card:
                      entity: sensor.place_eunkyung
                  topright:
                    card:
                      entity: sensor.eunkyung_phone_battery_level
                  topright1:
                    card:
                      entity: sensor.eunkyung_phone_ringer_mode
                  topright2:
                    card:
                      entity: binary_sensor.eunkyung_phone_interactive
                  topright3:
                    card:
                      entity: sensor.smartphone_eunkyung_used_record
                      label: |
                        [[[
                          var hour = states['sensor.smartphone_eunkyung_used_record'].state.split(".", 1)
                          var s_min = states['sensor.smartphone_eunkyung_used_record'].state.substring(2)
                          var r_min = s_min / 100
                          var min = Math.round(r_min * 60)
                          var p_hour = hour * 1 + 1
                          if (s_min < 61)
                            if (hour >= 1 )
                              return `${hour}hr ${min}m`
                          if (s_min >= 60)
                            if (hour >= 1 )
                              return `${p_hour}hr ${min}m`
                          return `${min}m`
                        ]]]
                  graph:
                    card:
                      entities:
                        - entity: sensor.eunkyung_phone_battery_temperature
                hold_action:
                  action: call-service
                  service: script.toggle
                  service_data:
                    entity_id: script.where_is_eunkyung
                  haptic: medium
          - type: horizontal-stack
            cards:
              - type: custom:button-card
                template:
                  - card_persons
                  - card_person_tab_dohyun
                triggers_update: all
                entity: person.dohyun
                entity_picture: /local/floorplan/p_dohyun_t.gif
                custom_fields:
                  topleft:
                    card:
                      entity: sensor.place_dohyun
                  topright:
                    card:
                      entity: sensor.dohyun_phone_battery_level
                  topright1:
                    card:
                      entity: sensor.dohyun_phone_ringer_mode
                  topright2:
                    card:
                      entity: binary_sensor.dohyun_phone_interactive
                  topright3:
                    card:
                      entity: sensor.smartphone_dohyun_used_record
                      label: |
                        [[[
                          var hour = states['sensor.smartphone_dohyun_used_record'].state.split(".", 1)
                          var s_min = states['sensor.smartphone_dohyun_used_record'].state.substring(2)
                          var r_min = s_min / 100
                          var min = Math.round(r_min * 60)
                          var p_hour = hour * 1 + 1
                          if (s_min < 61)
                            if (hour >= 1 )
                              return `${hour}hr ${min}m`
                          if (s_min >= 60)
                            if (hour >= 1 )
                              return `${p_hour}hr ${min}m`
                          return `${min}m`
                        ]]]
                  graph:
                    card:
                      entities:
                        - entity: sensor.dohyun_phone_battery_temperature
                hold_action:
                  action: call-service
                  service: script.toggle
                  service_data:
                    entity_id: script.where_is_dohyun
                  haptic: medium
              - type: custom:button-card
                template:
                  - card_persons
                  - card_person_tab_taekang
                triggers_update: all
                entity: person.taekang
                entity_picture: /local/floorplan/p_taekang_t.gif
                custom_fields:
                  topleft:
                    card:
                      entity: sensor.place_taekang
                  topright:
                    card:
                      entity: sensor.taekang_phone_battery_level
                  topright1:
                    card:
                      entity: sensor.taekang_phone_ringer_mode
                  topright2:
                    card:
                      entity: binary_sensor.taekang_phone_interactive
                  topright3:
                    card:
                      entity: sensor.smartphone_taekang_used_record
                      label: |
                        [[[
                          var hour = states['sensor.smartphone_taekang_used_record'].state.split(".", 1)
                          var s_min = states['sensor.smartphone_taekang_used_record'].state.substring(2)
                          var r_min = s_min / 100
                          var min = Math.round(r_min * 60)
                          var p_hour = hour * 1 + 1
                          if (s_min < 61)
                            if (hour >= 1 )
                              return `${hour}hr ${min}m`
                          if (s_min >= 60)
                            if (hour >= 1 )
                              return `${p_hour}hr ${min}m`
                          return `${min}m`
                        ]]]
                  graph:
                    card:
                      entities:
                        - entity: sensor.taekang_phone_battery_temperature
                hold_action:
                  action: call-service
                  service: script.toggle
                  service_data:
                    entity_id: script.where_is_taekang
                  haptic: medium

