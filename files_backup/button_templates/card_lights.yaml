card_lights: #조명
  name: 조명
  show_state: true
  show_icon: true
  show_entity_picture: true
  entity_picture: /local/floorplan/main-light.png
  triggers_update: "all"
  styles:
    card:
      - height: 200px
      - animation: pulse 2s infinite
      - '--mdc-ripple-color': yellow
    grid:
      - grid-template-areas: '"i" "n" "s"'
      - grid-template-columns: 1fr
      - grid-template-rows: 1fr min-content min-content
    img_cell:
      - padding-top: 20px
    icon:
      - width: 70px
    name:
      - font-size: 13px
      - color: var(--text-primary-color)
    state:
      - padding-bottom: 50px
      - font-size: 13px
      - color: >
          [[[
            if (entity.state == '0 개')
            return 'var(--text-primary-color)';
            if (entity.state >= '1 개')
            return 'gold';
          ]]]
    custom_fields:
      topleft:
        - top: 10px
        - left: 15px
        - justify-self: start
        - position: absolute
        - font-size: 10px
        - color: var(--text-primary-color)
      topright:
        - top: 10px
        - right: 15px
        - justify-self: end
        - position: absolute
      graph:
        - left: 0px
        - bottom: 0px
        - position: absolute
  custom_fields:
    graph:
      card:
        type: custom:mini-graph-card
        card_mod:
          style: |
            .graph .graph__container .graph__container__svg svg g mask .line {
              animation-duration: 5s !important;
              animation-delay: 0s !important;
              animation-timing-function: linear !important;
              animation-iteration-count: infinite !important;
            }
            ha-card {
              background-color: transparent;
              box-shadow: none;
            }
        entities:
          - entity: sensor.illumination_7811dcfaec7e
        show:
          icon: false
          name: false
          points: false
        font_size: 40
        color_thresholds:
          - value: 50
            color: '#9f882b'
          - value: 500
            color: '#f6d44c'
          - value: 1300
            color: '#ffcc00'
        animate: true
  tap_action:
    action: fire-dom-event
    browser_mod:
      service: browser_mod.popup
      data:
        style: '--mdc-theme-surface: transparent'
        title: ' '
        hide_header: true
        content:
          type: custom:button-card
          name: '색상조명'
          tap_action:
            action: navigate
            navigation_path: '#empty'
          show_state: true
          extra_styles: >
            @-webkit-keyframes
            fade-in{0%{opacity:0}100%{opacity:0.1}}@keyframes
            fade-in{0%{opacity:0}100%{opacity:0.8}}
          styles:
            card:
              - background-color: rgba(var(--card-background-color),.9)
              - backdrop-filter: blur(1.5em) brightness(1.2)
              - height: 500px
            name:
              - z-index: 2
              - top: 5px
              - left: 25px
              - position: absolute
              - justify-self: start
              - font-size: 20px
              - font-weight: bold
              - color: peru
            custom_fields:
              blur:
                - z-index: 1
                - top: 0%
                - left: 0%
                - width: 100%
                - height: 100%
                - position: absolute
                - background-color: transparent
                - backdrop-filter: blur(40px)
                - '-webkit-backdrop-filter': blur(40px)
              close:
                - z-index: 2
                - position: absolute
                - right: 20px
                - top: 20px
              light1_1:
                - z-index: 2
                - position: absolute
                - left: 3%
                - top: 90px
              light1_2:
                - z-index: 2
                - position: absolute
                - left: 37%
                - top: 90px
              light1_3:
                - z-index: 2
                - position: absolute
                - left: 70%
                - top: 90px
              light2_1:
                - z-index: 2
                - position: absolute
                - left: 3%
                - top: 210px
              light2_2:
                - z-index: 2
                - position: absolute
                - left: 37%
                - top: 210px
              light2_3:
                - z-index: 2
                - position: absolute
                - left: 70%
                - top: 210px
              light3_1:
                - z-index: 2
                - position: absolute
                - left: 3%
                - top: 330px
              light3_2:
                - z-index: 2
                - position: absolute
                - left: 37%
                - top: 330px
              light3_3:
                - z-index: 2
                - position: absolute
                - left: 70%
                - top: 330px
          custom_fields:
            blur: |
              <div></div>
            close: >
              <ha-icon icon="ios:xmark" style="width: 25px; color:
              rgb(255, 255, 255, 0.5);"></ha-icon>
            light1_1:
              card:
                type: custom:config-template-card
                entities:
                  - light.curtainled_lvr
                card:
                  type: custom:button-card
                  template:
                    - button_styles
                    - extra_styles_on
                  name: 거실커튼
                  entity: light.curtainled_lvr
                  show_entity_picture: true
                  entity_picture: /local/floorplan/lightbulb.png
                  state:
                    - value: 'on'
                      entity_picture: /local/floorplan/lightbulbred.png
                      styles:
                        icon:
                          - animation: on 0.8s
                          - filter: >-
                              ${ "hue-rotate(" +
                              (states['light.curtainled_lvr'].attributes.hs_color
                              ?
                              states['light.curtainled_lvr'].attributes.hs_color[0]:0)
                              + 'deg'}
            light1_2:
              card:
                type: custom:config-template-card
                entities:
                  - light.curtainled_stdr
                card:
                  type: custom:button-card
                  template:
                    - button_styles
                    - extra_styles_on
                  name: 공부방커튼
                  entity: light.curtainled_stdr
                  show_entity_picture: true
                  entity_picture: /local/floorplan/lightbulb.png
                  state:
                    - value: 'on'
                      entity_picture: /local/floorplan/lightbulbred.png
                      styles:
                        icon:
                          - animation: on 0.8s
                          - filter: >-
                              ${ "hue-rotate(" +
                              (states['light.curtainled_stdr'].attributes.hs_color
                              ?
                              states['light.curtainled_stdr'].attributes.hs_color[0]:0)
                              + 'deg'}
            light1_3:
              card:
                type: custom:config-template-card
                entities:
                  - light.0x00124b0022676e23
                card:
                  type: custom:button-card
                  template:
                    - button_styles
                    - extra_styles_on
                  name: 싱크대
                  entity: light.0x00124b0022676e23
                  show_entity_picture: true
                  entity_picture: /local/floorplan/lightbulb.png
                  state:
                    - value: 'on'
                      entity_picture: /local/floorplan/lightbulbred.png
                      styles:
                        icon:
                          - animation: on 0.8s
                          - filter: >-
                              ${ "hue-rotate(" +
                              (states['light.0x00124b0022676e23'].attributes.hs_color
                              ?
                              states['light.0x00124b0022676e23'].attributes.hs_color[0]:0)
                              + 'deg'}
            light2_1:
              card:
                type: custom:config-template-card
                entities:
                  - light.bulb1
                card:
                  type: custom:button-card
                  template:
                    - button_styles
                    - extra_styles_on
                  name: 휴벌브1
                  entity: light.bulb1
                  show_entity_picture: true
                  entity_picture: /local/floorplan/lightbulb.png
                  state:
                    - value: 'on'
                      entity_picture: /local/floorplan/lightbulbred.png
                      styles:
                        icon:
                          - animation: on 0.8s
                          - filter: >-
                              ${ "hue-rotate(" +
                              (states['light.bulb1'].attributes.hs_color
                              ?
                              states['light.bulb1'].attributes.hs_color[0]:0)
                              + 'deg'}
            light2_2:
              card:
                type: custom:config-template-card
                entities:
                  - light.bulb2
                card:
                  type: custom:button-card
                  template:
                    - button_styles
                    - extra_styles_on
                  name: 휴벌브2
                  entity: light.bulb2
                  show_entity_picture: true
                  entity_picture: /local/floorplan/lightbulb.png
                  state:
                    - value: 'on'
                      entity_picture: /local/floorplan/lightbulbred.png
                      styles:
                        icon:
                          - animation: on 0.8s
                          - filter: >-
                              ${ "hue-rotate(" +
                              (states['light.bulb2'].attributes.hs_color
                              ?
                              states['light.bulb2'].attributes.hs_color[0]:0)
                              + 'deg'}
            light2_3:
              card:
                type: custom:config-template-card
                entities:
                  - light.bulb3
                card:
                  type: custom:button-card
                  template:
                    - button_styles
                    - extra_styles_on
                  name: 휴벌브3
                  entity: light.bulb3
                  show_entity_picture: true
                  entity_picture: /local/floorplan/lightbulb.png
                  state:
                    - value: 'on'
                      entity_picture: /local/floorplan/lightbulbred.png
                      styles:
                        icon:
                          - animation: on 0.8s
                          - filter: >-
                              ${ "hue-rotate(" +
                              (states['light.bulb3'].attributes.hs_color
                              ?
                              states['light.bulb3'].attributes.hs_color[0]:0)
                              + 'deg'}
            light3_1:
              card:
                type: custom:config-template-card
                entities:
                  - light.gateway_light_7811dcfaec7e
                card:
                  type: custom:button-card
                  template:
                    - button_styles
                    - extra_styles_on
                  name: 게이트1st
                  entity: light.gateway_light_7811dcfaec7e
                  show_entity_picture: true
                  entity_picture: /local/floorplan/lightbulb.png
                  state:
                    - value: 'on'
                      entity_picture: /local/floorplan/lightbulbred.png
                      styles:
                        icon:
                          - animation: on 0.8s
                          - filter: >-
                              ${ "hue-rotate(" +
                              (states['light.gateway_light_7811dcfaec7e'].attributes.hs_color
                              ?
                              states['light.gateway_light_7811dcfaec7e'].attributes.hs_color[0]:0)
                              + 'deg'}
            light3_2:
              card:
                type: custom:config-template-card
                entities:
                  - light.gateway_light_50ec50c52be0
                card:
                  type: custom:button-card
                  template:
                    - button_styles
                    - extra_styles_on
                  name: 게이트2nd
                  entity: light.gateway_light_50ec50c52be0
                  show_entity_picture: true
                  entity_picture: /local/floorplan/lightbulb.png
                  state:
                    - value: 'on'
                      entity_picture: /local/floorplan/lightbulbred.png
                      styles:
                        icon:
                          - animation: on 0.8s
                          - filter: >-
                              ${ "hue-rotate(" +
                              (states['light.gateway_light_50ec50c52be0'].attributes.hs_color
                              ?
                              states['light.gateway_light_50ec50c52be0'].attributes.hs_color[0]:0)
                              + 'deg'}

  double_tap_action:
    action: none

  hold_action:
    action: fire-dom-event
    browser_mod:
      service: browser_mod.popup
      data:
        style: '--mdc-theme-surface: transparent'
        title: ' '
        hide_header: true
        content:
          type: entities
          card_mod:
            style: |
              ha-card {
                background-color: transparent;
                box-shadow: none;
                text-align: left;
              }
          show_header_toggle: false
          entities:
            - type: custom:multiple-entity-row
              entity: group.light
              name: 거실
              icon: mdi:sofa
              show_state: false
              show_header_toggle: true
              state_color: true
              entities:
                - entity: light.livingroom_ctr
                  name: 거실센터
                  toggle: true
                - entity: light.livingroom_side
                  name: 거실사이드
                  toggle: true
            - entity: group.light
              type: custom:multiple-entity-row
              name: 주방
              icon: mdi:countertop
              show_state: false
              show_header_toggle: false
              state_color: true
              entities:
                - entity: light.kitchen
                  name: 주방
                  toggle: true
                - entity: light.kitchen_table
                  name: 식탁
                  toggle: true
                - entity: light.0x00124b0022676e23
                  name: 씽크대
                  toggle: true
            - entity: group.light
              type: custom:multiple-entity-row
              name: 방
              icon: mdi:bed
              show_state: false
              show_header_toggle: false
              state_color: true
              entities:
                - entity: light.mainroom
                  name: 안방
                  toggle: true
                - entity: light.sonroom
                  name: 아들방
                  toggle: true
                - entity: light.studyroom
                  name: 공부방
                  toggle: true
            - entity: group.light
              type: custom:multiple-entity-row
              name: 화장실
              icon: mdi:paper-roll
              show_state: false
              show_header_toggle: false
              state_color: true
              entities:
                - entity: light.livingroomrest
                  name: 거실화장실
                  toggle: true
                - entity: switch.livingroomrest_fan
                  name: 거실환풍기
                  toggle: true
                - entity: light.mainroomrest
                  name: 안방화장실
                  toggle: true
                - entity: switch.mainroomrest_fan
                  name: 안방환풍기
                  toggle: true
            - entity: group.light
              type: custom:multiple-entity-row
              name: 기타공간
              icon: mdi:checkbox-multiple-blank
              show_state: false
              show_header_toggle: false
              state_color: true
              entities:
                - entity: light.livingroom_vrd
                  name: 베란다
                  toggle: true
                - entity: light.laundryroom
                  name: 세탁실
                  toggle: true
                - entity: light.gateway1st_light
                  name: 게잇1st
                  toggle: true
                - entity: light.gateway2nd_light
                  name: 게잇2nd
                  toggle: true
            - entity: group.light
              type: custom:multiple-entity-row
              name: 휴벌브
              icon: mdi:dome-light
              show_state: false
              show_header_toggle: false
              state_color: true
              entities:
                - entity: light.bulb1
                  name: 휴벌브1
                  toggle: true
                - entity: light.bulb2
                  name: 휴벌브2
                  toggle: true
                - entity: light.bulb3
                  name: 휴벌브3
                  toggle: true
            - entity: group.light
              type: custom:multiple-entity-row
              name: 기타조명
              icon: mdi:lightbulb
              show_state: false
              show_header_toggle: false
              state_color: true
              entities:
                - entity: light.curtainled_lvr
                  name: 거실커튼
                  toggle: true
                - entity: light.curtainled_stdr
                  name: 공부방커튼
                  toggle: true
    style:
      top: 25px
      left: 5%
      width: 90%
      transform: translate(0px, 0px)


button_styles:
  styles:
    card:
      - background: transparent
      - box-shadow: none
      - width: 100px
      - height: 100px
      - '--mdc-ripple-press-opacity': 0
    name:
      - font-size: 14px
      - color: 'var(----googl-blue)'
    icon:
      - width: 90%
      - filter: grayscale(100%)
