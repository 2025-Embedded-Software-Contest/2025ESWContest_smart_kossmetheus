---
card_weathers_3d_icon:
  template: extra_styles_shifting
  entity: weather.wansangu_pyeonghwa2dong
  show_label: false
  show_name: false
  show_icon: false
  show_state: false
  show_entity_picture: true
  size: 100%
  styles:
    card:
      - background-color: transparent
      - box-shadow: none
      #- height: 100%
      - '--mdc-ripple-press-opacity': 0
      - animation: shifting 2s linear infinite alternate
    img_cell:
      - width: 45%
    icon:
      - height: 100%
      - width: 100%
  state:
    - value: 'sunny'
      entity_picture: /local/weather/sunny.png
    - value: 'snowy'
      entity_picture: /local/weather/snowy.png
    - value: 'windy'
      entity_picture: /local/weather/windy.png
    - value: 'lightning'
      entity_picture: /local/weather/lightning.png
    - value: 'clear-night'
      entity_picture: |
        [[[
          if (states['sun.sun'].state == 'below_horizon')
            return '/local/weather/sunny.png';
          else if (states['sun.sun'].state == 'above_horizon')
            return '/local/weather/clear-night.png';
        ]]]
    - value: 'rainy'
      entity_picture: |
        [[[
          if (states['sun.sun'].state == 'below_horizon')
            return '/local/weather/rainy-night.png';
          else if (states['sun.sun'].state == 'above_horizon')
            return '/local/weather/rainy.png';
        ]]]
    - value: 'cloudy'
      entity_picture: |
        [[[
          if (states['sun.sun'].state == 'below_horizon')
            return '/local/weather/cloudy-night.png';
          else if (states['sun.sun'].state == 'above_horizon')
            return '/local/weather/cloudy.png';
        ]]]
    - value: 'partlycloudy'
      entity_picture: |
        [[[
          if (states['sun.sun'].state == 'below_horizon')
            return '/local/weather/cloudy.png';
          else if (states['sun.sun'].state == 'above_horizon')
            return '/local/weather/partlycloudy.png';
        ]]]

  tap_action:
    action: fire-dom-event
    browser_mod:
      service: browser_mod.popup
      data:
        style: '--mdc-theme-surface: transparent'
        title: ' '
        hide_header: true
        content:
          type: custom:button-card
          entity: weather.wansangu_pyeonghwa2dong
          name: '전주시 평화2가'
          show_entity_picture: true
          styles:
            card:
              - background-color: rgba(var(--card-background-color),.9)
              - backdrop-filter: blur(1.5em) brightness(1.2)
              - height: 500px
            img_cell:
              - z-index: 2
            icon:
              - width: 50%
              - top: 120px
            name:
              - z-index: 2
              - top: 5px
              - left: 25px
              - position: absolute
              - justify-self: start
              - font-size: 20px
              - font-weight: bold
              - color: peru
            custom_fields:
              templates:
                - z-index: 2
                - top: 50px
                - left: 10px
                - width: 100%
                - position: absolute
              forecast_weather:
                - z-index: 2
                - bottom: 0%
                - left: 3%
                - width: 100%
                - position: absolute
              forecast_dust:
                - z-index: 2
                - bottom: 0%
                - right: 3%
                - width: -100%
                - position: absolute
          state:
            - value: 'sunny'
              entity_picture: /local/weather/sunny.png
            - value: 'snowy'
              entity_picture: /local/weather/snowy.png
            - value: 'windy'
              entity_picture: /local/weather/windy.png
            - value: 'lightning'
              entity_picture: /local/weather/lightning.png
            - value: 'clear-night'
              entity_picture: |
                [[[
                  if (states['sun.sun'].state == 'below_horizon')
                    return '/local/weather/sunny.png';
                  else if (states['sun.sun'].state == 'above_horizon')
                    return '/local/weather/clear-night.png';
                ]]]
            - value: 'rainy'
              entity_picture: |
                [[[
                  if (states['sun.sun'].state == 'below_horizon')
                    return '/local/weather/rainy-night.png';
                  else if (states['sun.sun'].state == 'above_horizon')
                    return '/local/weather/rainy.png';
                ]]]
            - value: 'cloudy'
              entity_picture: |
                [[[
                  if (states['sun.sun'].state == 'below_horizon')
                    return '/local/weather/cloudy-night.png';
                  else if (states['sun.sun'].state == 'above_horizon')
                    return '/local/weather/cloudy.png';
                ]]]
            - value: 'partlycloudy'
              entity_picture: |
                [[[
                  if (states['sun.sun'].state == 'below_horizon')
                    return '/local/weather/cloudy.png';
                  else if (states['sun.sun'].state == 'above_horizon')
                    return '/local/weather/partlycloudy.png';
                ]]]
          custom_fields:
            templates:
              card:
                type: markdown
                card_mod:
                  style: |
                    ha-card {
                      --ha-card-background: transparent;
                      --ha-card-box-shadow: none;
                      --ha-card-border-style: none;
                      text-align: left;
                    }
                content: >
                  <font size='2px'> 
                  {% if states('weather.wansangu_pyeonghwa2dong') == 'partlycloudy' %} 부분적으로 흐린 날이에요.
                  {% elif states('weather.wansangu_pyeonghwa2dong') == 'cloudy' %} 구름이 많은 날이에요.
                  {% elif states('weather.wansangu_pyeonghwa2dong') == 'sunny' %} 화창한 날이에요.
                  {% elif states('weather.wansangu_pyeonghwa2dong') == 'clear-night' %} 청초한 밤이에요.
                  {% elif states('weather.wansangu_pyeonghwa2dong') == 'rainy' %} 우산을 챙기세요. 비가 옵니다.
                  {% elif states('weather.wansangu_pyeonghwa2dong') == 'pouring' %} 우산과 비옷을 잊지 마세요.
                  {% elif states('weather.wansangu_pyeonghwa2dong') == 'snowy' %} 눈이 내립니다.
                  {% elif states('weather.wansangu_pyeonghwa2dong') == 'snowy-rainy' %} 눈과 비가 함께 내려요.
                  {% elif states('weather.wansangu_pyeonghwa2dong') == 'hail' %} 우박 조심하세요.
                  {% elif states('weather.wansangu_pyeonghwa2dong') == 'windy' %} 바람이 많이 불 것으로 보입니다.
                  {% elif states('weather.wansangu_pyeonghwa2dong') == 'lightning' %} 번개와 천둥이 칠 것 같아요.
                  {% elif states('weather.wansangu_pyeonghwa2dong') == 'lightning-rainy' %} 천둥과 비가 내려요.
                  {% elif states('weather.wansangu_pyeonghwa2dong') == 'windy-variant' %} 바람이 많이 불 것으로 보입니다.
                  {% elif states('weather.wansangu_pyeonghwa2dong') == 'fog' %} 안개가 자욱하니 운전조심하세요.
                  {% endif %}
                  </br>
                  온도 {{ states.weather.wansangu_pyeonghwa2dong.attributes.temperature }}℃,
                  습도 {{ states.weather.wansangu_pyeonghwa2dong.attributes.humidity }}%,
                  풍속 {{ states.weather.wansangu_pyeonghwa2dong.attributes.wind_speed }}km/h
            forecast_weather:
              card:
                type: markdown
                card_mod:
                  style: |
                    ha-card {
                      --ha-card-background: transparent;
                      --ha-card-box-shadow: none;
                      --ha-card-border-style: none;
                      text-align: left;
                    }
                content: >
                  <font size='2px'>
                  <b>[내일예보]</b>
                  <br>
                  최고 {{states.weather.wansangu_pyeonghwa2dong.attributes.forecast[1]['temperature']}} ℃ /
                  최저 {{states.weather.wansangu_pyeonghwa2dong.attributes.forecast[1]['templow']}} ℃
                  <br>
                  <예상날씨: {{states.weather.wansangu_pyeonghwa2dong.attributes.forecast[1]['condition']}}>
                  <br>
                  <b>[모레예보]</b>
                  <br>
                  최고 {{states.weather.wansangu_pyeonghwa2dong.attributes.forecast[2]['temperature']}} ℃ /
                  최저 {{states.weather.wansangu_pyeonghwa2dong.attributes.forecast[2]['templow']}} ℃
                  <br>
                  <예상날씨: {{states.weather.wansangu_pyeonghwa2dong.attributes.forecast[2]['condition']}}>
            forecast_dust:
              card:
                type: markdown
                card_mod:
                  style: |
                    ha-card {
                      --ha-card-background: transparent;
                      --ha-card-box-shadow: none;
                      --ha-card-border-style: none;
                      text-align: left;
                    }
                content: >
                  <font size="2px">
                  <b>[미세먼지]</b>
                  <br>
                  등급: {{states.sensor.misemeonjideunggeub.state}} /
                  수치: {{states.sensor.misemeonji.state}} µg/m³
                  <br>
                  <b>[초미세먼지]</b>
                  <br>
                  등급: {{states.sensor.comisemeonjideunggeub.state}} /
                  수치: {{states.sensor.comisemeonji.state}} µg/m³
                  <br>
                  <b>[오존정보]</b>
                  <br>
                  등급: {{states.sensor.ojondeunggeub.state}} /
                  수치: {{states.sensor.ojon.state}} ppm
  double_tap_action:
    action: fire-dom-event
    browser_mod:
      service: browser_mod.popup
      data:
        style: '--mdc-theme-surface: transparent'
        title: ' '
        hide_header: true
        content:
          type: custom:button-card
          name: '주간예보'
          styles:
            card:
              - background-color: rgba(var(--card-background-color),.9)
              - backdrop-filter: blur(1.5em) brightness(1.2)
              - height: 270px
            name:
              - z-index: 2
              - top: 5px
              - left: 25px
              - position: absolute
              - justify-self: start
              - font-size: 20px
              - font-weight: bold
              - color: peru
            custom_fields:
              slide:
                - z-index: 2
                - top: 30px
                - left: 10px
                - width: 100%
                - position: absolute
              weather:
                - z-index: 2
                - top: 60px
                - width: 100%
                - position: absolute
          custom_fields:
            slide:
              card:
                type: custom:button-card
                show_name: true
                styles:
                  card:
                    - background: transparent
                    - height: 5px
                    - width: auto
                name: |
                  [[[return `<div style='display: flex;display: -webkit-flex;'>
                   <div>&nbsp;</div>
                   <marquee>
                   <font size=3>
                   ${(states['sensor.wici'].state)}의 날씨는
                   <span style='color: pink;'>
                   ${(states['sensor.hyeonjaenalssi'].state)}이며,
                   </span>
                   현재 온습도는
                   <span style='color: pink;'>
                   ${Math.floor(states['sensor.hyeonjaeondo'].state)}°C,
                   </span>
                   <span style='color: deepskyblue;'> 
                   ${Math.floor(states['sensor.hyeonjaeseubdo'].state)}%
                   </span>
                   입니다.
                   </font>
                   </marquee>`]]]
                tap_action:
                  action: none
                double_tap_action:
                  action: none
                hold_action:
                  action: none
                card_mod:
                  style: |
                    ha-card {
                      background-color: transparent;
                      box-shadow: none;
                    }
            weather:
              card:
                type: custom:weather-card
                entity: weather.wansangu_pyeonghwa2dong
                name: 일기예보
                current: false
                details: false
                forecast: true
                hourly_forecast: false
                number_of_forecasts: 5
                card_mod:
                  style: |
                    ha-card {
                      background-color: transparent;
                      box-shadow: none;
                    }
  haptic: heavy
  hold_action:
    action: fire-dom-event
    browser_mod:
      service: browser_mod.popup
      data:
        style: '--mdc-theme-surface: transparent'
        title: ' '
        hide_header: true
        content:
          type: custom:button-card
          name: 'K-Weather 생활지수'
          styles:
            card:
              - background-color: rgba(var(--card-background-color),.9)
              - backdrop-filter: blur(1.5em) brightness(1.2)
              - height: 450px
            name:
              - z-index: 2
              - top: 5px
              - left: 25px
              - position: absolute
              - justify-self: start
              - font-size: 20px
              - font-weight: bold
              - color: peru
            custom_fields:
              item1:
                - z-index: 2
                - top: 30px
                - left: 0px
                - width: 100%
                - position: absolute
          custom_fields:
            item1:
              card:
                type: entities
                title: ' '
                show_header_toggle: false
                entities:
                  - type: custom:hui-element
                    card_type: horizontal-stack
                    cards:
                      - type: custom:button-card
                        template: card_kweather
                        entity: sensor.kweather_influ
                      - type: custom:button-card
                        template: card_kweather
                        entity: sensor.kweather_pollution
                      - type: custom:button-card
                        template: card_kweather
                        entity: sensor.kweather_picnic
                  - type: custom:hui-element
                    card_type: horizontal-stack
                    cards:
                      - type: custom:button-card
                        template: card_kweather
                        entity: sensor.kweather_heat
                      - type: custom:button-card
                        template: card_kweather
                        entity: sensor.kweather_cold
                      - type: custom:button-card
                        template: card_kweather
                        entity: sensor.kweather_spoilage
                  - type: custom:hui-element
                    card_type: horizontal-stack
                    cards:
                      - type: custom:button-card
                        template: card_kweather
                        entity: sensor.kweather_fire
                      - type: custom:button-card
                        template: card_kweather
                        entity: sensor.kweather_discomfort
                      - type: custom:button-card
                        template: card_kweather
                        entity: sensor.kweather_lundary
                  - type: custom:hui-element
                    card_type: horizontal-stack
                    cards:
                      - type: custom:button-card
                        template: card_kweather
                        entity: sensor.kweather_carwash
                      - type: custom:button-card
                        template: card_kweather
                        entity: sensor.kweather_fitness
                      - type: custom:button-card
                        template: card_kweather
                        entity: sensor.kweather_uv
                card_mod:
                  style: |
                    ha-card {
                      background-color: transparent;
                      box-shadow: none;
                    }

